var hne=Object.getPrototypeOf;var pne=Reflect.get;var JE=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var se=(e,t,r)=>(JE(e,t,"read from private field"),r?r.call(e):t.get(e)),vt=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},st=(e,t,r,i)=>(JE(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);var Hl=(e,t,r)=>(JE(e,t,"access private method"),r),F5=(e,t,r)=>pne(hne(e),r,t);function fne(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in e)){const s=Object.getOwnPropertyDescriptor(i,n);s&&Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function mne(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vU={exports:{}},n$={},wU={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1=Symbol.for("react.element"),yne=Symbol.for("react.portal"),gne=Symbol.for("react.fragment"),vne=Symbol.for("react.strict_mode"),wne=Symbol.for("react.profiler"),bne=Symbol.for("react.provider"),_ne=Symbol.for("react.context"),xne=Symbol.for("react.forward_ref"),Sne=Symbol.for("react.suspense"),$ne=Symbol.for("react.memo"),Ene=Symbol.for("react.lazy"),j5=Symbol.iterator;function Tne(e){return e===null||typeof e!="object"?null:(e=j5&&e[j5]||e["@@iterator"],typeof e=="function"?e:null)}var bU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_U=Object.assign,xU={};function My(e,t,r){this.props=e,this.context=t,this.refs=xU,this.updater=r||bU}My.prototype.isReactComponent={};My.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};My.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function SU(){}SU.prototype=My.prototype;function _R(e,t,r){this.props=e,this.context=t,this.refs=xU,this.updater=r||bU}var xR=_R.prototype=new SU;xR.constructor=_R;_U(xR,My.prototype);xR.isPureReactComponent=!0;var V5=Array.isArray,$U=Object.prototype.hasOwnProperty,SR={current:null},EU={key:!0,ref:!0,__self:!0,__source:!0};function TU(e,t,r){var i,n={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)$U.call(t,i)&&!EU.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:Y1,type:e,key:s,ref:o,props:n,_owner:SR.current}}function Mne(e,t){return{$$typeof:Y1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $R(e){return typeof e=="object"&&e!==null&&e.$$typeof===Y1}function Ine(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var z5=/\/+/g;function YE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ine(""+e.key):t.toString(36)}function g_(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Y1:case yne:o=!0}}if(o)return o=e,n=n(o),e=i===""?"."+YE(o,0):i,V5(n)?(r="",e!=null&&(r=e.replace(z5,"$&/")+"/"),g_(n,t,r,"",function(c){return c})):n!=null&&($R(n)&&(n=Mne(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(z5,"$&/")+"/")+e)),t.push(n)),1;if(o=0,i=i===""?".":i+":",V5(e))for(var a=0;a<e.length;a++){s=e[a];var l=i+YE(s,a);o+=g_(s,t,r,l,n)}else if(l=Tne(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=i+YE(s,a++),o+=g_(s,t,r,l,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Zw(e,t,r){if(e==null)return e;var i=[],n=0;return g_(e,i,"","",function(s){return t.call(r,s,n++)}),i}function Cne(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ki={current:null},v_={transition:null},Lne={ReactCurrentDispatcher:Ki,ReactCurrentBatchConfig:v_,ReactCurrentOwner:SR};function MU(){throw Error("act(...) is not supported in production builds of React.")}We.Children={map:Zw,forEach:function(e,t,r){Zw(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Zw(e,function(){t++}),t},toArray:function(e){return Zw(e,function(t){return t})||[]},only:function(e){if(!$R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};We.Component=My;We.Fragment=gne;We.Profiler=wne;We.PureComponent=_R;We.StrictMode=vne;We.Suspense=Sne;We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lne;We.act=MU;We.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=_U({},e.props),n=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=SR.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)$U.call(t,l)&&!EU.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Y1,type:e.type,key:n,ref:s,props:i,_owner:o}};We.createContext=function(e){return e={$$typeof:_ne,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bne,_context:e},e.Consumer=e};We.createElement=TU;We.createFactory=function(e){var t=TU.bind(null,e);return t.type=e,t};We.createRef=function(){return{current:null}};We.forwardRef=function(e){return{$$typeof:xne,render:e}};We.isValidElement=$R;We.lazy=function(e){return{$$typeof:Ene,_payload:{_status:-1,_result:e},_init:Cne}};We.memo=function(e,t){return{$$typeof:$ne,type:e,compare:t===void 0?null:t}};We.startTransition=function(e){var t=v_.transition;v_.transition={};try{e()}finally{v_.transition=t}};We.unstable_act=MU;We.useCallback=function(e,t){return Ki.current.useCallback(e,t)};We.useContext=function(e){return Ki.current.useContext(e)};We.useDebugValue=function(){};We.useDeferredValue=function(e){return Ki.current.useDeferredValue(e)};We.useEffect=function(e,t){return Ki.current.useEffect(e,t)};We.useId=function(){return Ki.current.useId()};We.useImperativeHandle=function(e,t,r){return Ki.current.useImperativeHandle(e,t,r)};We.useInsertionEffect=function(e,t){return Ki.current.useInsertionEffect(e,t)};We.useLayoutEffect=function(e,t){return Ki.current.useLayoutEffect(e,t)};We.useMemo=function(e,t){return Ki.current.useMemo(e,t)};We.useReducer=function(e,t,r){return Ki.current.useReducer(e,t,r)};We.useRef=function(e){return Ki.current.useRef(e)};We.useState=function(e){return Ki.current.useState(e)};We.useSyncExternalStore=function(e,t,r){return Ki.current.useSyncExternalStore(e,t,r)};We.useTransition=function(){return Ki.current.useTransition()};We.version="18.3.1";wU.exports=We;var H=wU.exports;const Ane=mne(H),kne=fne({__proto__:null,default:Ane},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rne=H,One=Symbol.for("react.element"),Nne=Symbol.for("react.fragment"),Pne=Object.prototype.hasOwnProperty,Dne=Rne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fne={key:!0,ref:!0,__self:!0,__source:!0};function IU(e,t,r){var i,n={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)Pne.call(t,i)&&!Fne.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:One,type:e,key:s,ref:o,props:n,_owner:Dne.current}}n$.Fragment=Nne;n$.jsx=IU;n$.jsxs=IU;vU.exports=n$;var w=vU.exports,CU={exports:{}},ts={},LU={exports:{}},AU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Z,j){var de=Z.length;Z.push(j);e:for(;0<de;){var Ne=de-1>>>1,fe=Z[Ne];if(0<n(fe,j))Z[Ne]=j,Z[de]=fe,de=Ne;else break e}}function r(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var j=Z[0],de=Z.pop();if(de!==j){Z[0]=de;e:for(var Ne=0,fe=Z.length,nt=fe>>>1;Ne<nt;){var ge=2*(Ne+1)-1,Qe=Z[ge],De=ge+1,Je=Z[De];if(0>n(Qe,de))De<fe&&0>n(Je,Qe)?(Z[Ne]=Je,Z[De]=de,Ne=De):(Z[Ne]=Qe,Z[ge]=de,Ne=ge);else if(De<fe&&0>n(Je,de))Z[Ne]=Je,Z[De]=de,Ne=De;else break e}}return j}function n(Z,j){var de=Z.sortIndex-j.sortIndex;return de!==0?de:Z.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,m=3,y=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Z){for(var j=r(c);j!==null;){if(j.callback===null)i(c);else if(j.startTime<=Z)i(c),j.sortIndex=j.expirationTime,t(l,j);else break;j=r(c)}}function $(Z){if(v=!1,S(Z),!g)if(r(l)!==null)g=!0,dt(M);else{var j=r(c);j!==null&&Ve($,j.startTime-Z)}}function M(Z,j){g=!1,v&&(v=!1,b(L),L=-1),y=!0;var de=m;try{for(S(j),f=r(l);f!==null&&(!(f.expirationTime>j)||Z&&!z());){var Ne=f.callback;if(typeof Ne=="function"){f.callback=null,m=f.priorityLevel;var fe=Ne(f.expirationTime<=j);j=e.unstable_now(),typeof fe=="function"?f.callback=fe:f===r(l)&&i(l),S(j)}else i(l);f=r(l)}if(f!==null)var nt=!0;else{var ge=r(c);ge!==null&&Ve($,ge.startTime-j),nt=!1}return nt}finally{f=null,m=de,y=!1}}var I=!1,C=null,L=-1,V=5,P=-1;function z(){return!(e.unstable_now()-P<V)}function Y(){if(C!==null){var Z=e.unstable_now();P=Z;var j=!0;try{j=C(!0,Z)}finally{j?oe():(I=!1,C=null)}}else I=!1}var oe;if(typeof _=="function")oe=function(){_(Y)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Ge=ae.port2;ae.port1.onmessage=Y,oe=function(){Ge.postMessage(null)}}else oe=function(){x(Y,0)};function dt(Z){C=Z,I||(I=!0,oe())}function Ve(Z,j){L=x(function(){Z(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,dt(M))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(Z){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var de=m;m=j;try{return Z()}finally{m=de}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,j){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=m;m=Z;try{return j()}finally{m=de}},e.unstable_scheduleCallback=function(Z,j,de){var Ne=e.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ne+de:Ne):de=Ne,Z){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=de+fe,Z={id:h++,callback:j,priorityLevel:Z,startTime:de,expirationTime:fe,sortIndex:-1},de>Ne?(Z.sortIndex=de,t(c,Z),r(l)===null&&Z===r(c)&&(v?(b(L),L=-1):v=!0,Ve($,de-Ne))):(Z.sortIndex=fe,t(l,Z),g||y||(g=!0,dt(M))),Z},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(Z){var j=m;return function(){var de=m;m=j;try{return Z.apply(this,arguments)}finally{m=de}}}})(AU);LU.exports=AU;var jne=LU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vne=H,Kn=jne;function re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kU=new Set,zv={};function up(e,t){Zm(e,t),Zm(e+"Capture",t)}function Zm(e,t){for(zv[e]=t,e=0;e<t.length;e++)kU.add(t[e])}var kl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_I=Object.prototype.hasOwnProperty,zne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U5={},B5={};function Une(e){return _I.call(B5,e)?!0:_I.call(U5,e)?!1:zne.test(e)?B5[e]=!0:(U5[e]=!0,!1)}function Bne(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gne(e,t,r,i){if(t===null||typeof t>"u"||Bne(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xi(e,t,r,i,n,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ui[e]=new Xi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ui[t]=new Xi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ui[e]=new Xi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ui[e]=new Xi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ui[e]=new Xi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ui[e]=new Xi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ui[e]=new Xi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ui[e]=new Xi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ui[e]=new Xi(e,5,!1,e.toLowerCase(),null,!1,!1)});var ER=/[\-:]([a-z])/g;function TR(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ER,TR);ui[t]=new Xi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ER,TR);ui[t]=new Xi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ER,TR);ui[t]=new Xi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ui[e]=new Xi(e,1,!1,e.toLowerCase(),null,!1,!1)});ui.xlinkHref=new Xi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ui[e]=new Xi(e,1,!1,e.toLowerCase(),null,!0,!0)});function MR(e,t,r,i){var n=ui.hasOwnProperty(t)?ui[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gne(t,r,n,i)&&(r=null),i||n===null?Une(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var jl=Vne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jw=Symbol.for("react.element"),Uf=Symbol.for("react.portal"),Bf=Symbol.for("react.fragment"),IR=Symbol.for("react.strict_mode"),xI=Symbol.for("react.profiler"),RU=Symbol.for("react.provider"),OU=Symbol.for("react.context"),CR=Symbol.for("react.forward_ref"),SI=Symbol.for("react.suspense"),$I=Symbol.for("react.suspense_list"),LR=Symbol.for("react.memo"),Ou=Symbol.for("react.lazy"),NU=Symbol.for("react.offscreen"),G5=Symbol.iterator;function eg(e){return e===null||typeof e!="object"?null:(e=G5&&e[G5]||e["@@iterator"],typeof e=="function"?e:null)}var Kt=Object.assign,QE;function Dg(e){if(QE===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);QE=t&&t[1]||""}return`
`+QE+e}var KE=!1;function XE(e,t){if(!e||KE)return"";KE=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),s=i.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{KE=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Dg(e):""}function qne(e){switch(e.tag){case 5:return Dg(e.type);case 16:return Dg("Lazy");case 13:return Dg("Suspense");case 19:return Dg("SuspenseList");case 0:case 2:case 15:return e=XE(e.type,!1),e;case 11:return e=XE(e.type.render,!1),e;case 1:return e=XE(e.type,!0),e;default:return""}}function EI(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bf:return"Fragment";case Uf:return"Portal";case xI:return"Profiler";case IR:return"StrictMode";case SI:return"Suspense";case $I:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case OU:return(e.displayName||"Context")+".Consumer";case RU:return(e._context.displayName||"Context")+".Provider";case CR:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case LR:return t=e.displayName||null,t!==null?t:EI(e.type)||"Memo";case Ou:t=e._payload,e=e._init;try{return EI(e(t))}catch{}}return null}function Hne(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return EI(t);case 8:return t===IR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Sc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function PU(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wne(e){var t=PU(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yw(e){e._valueTracker||(e._valueTracker=Wne(e))}function DU(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=PU(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function rx(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function TI(e,t){var r=t.checked;return Kt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function q5(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Sc(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function FU(e,t){t=t.checked,t!=null&&MR(e,"checked",t,!1)}function MI(e,t){FU(e,t);var r=Sc(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?II(e,t.type,r):t.hasOwnProperty("defaultValue")&&II(e,t.type,Sc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function H5(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function II(e,t,r){(t!=="number"||rx(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fg=Array.isArray;function fm(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Sc(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function CI(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(re(91));return Kt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function W5(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(re(92));if(Fg(r)){if(1<r.length)throw Error(re(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Sc(r)}}function jU(e,t){var r=Sc(t.value),i=Sc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function Z5(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function VU(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function LI(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?VU(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qw,zU=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qw=Qw||document.createElement("div"),Qw.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qw.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Uv(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ev={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zne=["Webkit","ms","Moz","O"];Object.keys(ev).forEach(function(e){Zne.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ev[t]=ev[e]})});function UU(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ev.hasOwnProperty(e)&&ev[e]?(""+t).trim():t+"px"}function BU(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=UU(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var Jne=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function AI(e,t){if(t){if(Jne[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(re(62))}}function kI(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RI=null;function AR(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var OI=null,mm=null,ym=null;function J5(e){if(e=X1(e)){if(typeof OI!="function")throw Error(re(280));var t=e.stateNode;t&&(t=u$(t),OI(e.stateNode,e.type,t))}}function GU(e){mm?ym?ym.push(e):ym=[e]:mm=e}function qU(){if(mm){var e=mm,t=ym;if(ym=mm=null,J5(e),t)for(e=0;e<t.length;e++)J5(t[e])}}function HU(e,t){return e(t)}function WU(){}var eT=!1;function ZU(e,t,r){if(eT)return e(t,r);eT=!0;try{return HU(e,t,r)}finally{eT=!1,(mm!==null||ym!==null)&&(WU(),qU())}}function Bv(e,t){var r=e.stateNode;if(r===null)return null;var i=u$(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(re(231,t,typeof r));return r}var NI=!1;if(kl)try{var tg={};Object.defineProperty(tg,"passive",{get:function(){NI=!0}}),window.addEventListener("test",tg,tg),window.removeEventListener("test",tg,tg)}catch{NI=!1}function Yne(e,t,r,i,n,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var tv=!1,ix=null,nx=!1,PI=null,Qne={onError:function(e){tv=!0,ix=e}};function Kne(e,t,r,i,n,s,o,a,l){tv=!1,ix=null,Yne.apply(Qne,arguments)}function Xne(e,t,r,i,n,s,o,a,l){if(Kne.apply(this,arguments),tv){if(tv){var c=ix;tv=!1,ix=null}else throw Error(re(198));nx||(nx=!0,PI=c)}}function cp(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function JU(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Y5(e){if(cp(e)!==e)throw Error(re(188))}function ese(e){var t=e.alternate;if(!t){if(t=cp(e),t===null)throw Error(re(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return Y5(n),e;if(s===i)return Y5(n),t;s=s.sibling}throw Error(re(188))}if(r.return!==i.return)r=n,i=s;else{for(var o=!1,a=n.child;a;){if(a===r){o=!0,r=n,i=s;break}if(a===i){o=!0,i=n,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,i=n;break}if(a===i){o=!0,i=s,r=n;break}a=a.sibling}if(!o)throw Error(re(189))}}if(r.alternate!==i)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?e:t}function YU(e){return e=ese(e),e!==null?QU(e):null}function QU(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=QU(e);if(t!==null)return t;e=e.sibling}return null}var KU=Kn.unstable_scheduleCallback,Q5=Kn.unstable_cancelCallback,tse=Kn.unstable_shouldYield,rse=Kn.unstable_requestPaint,fr=Kn.unstable_now,ise=Kn.unstable_getCurrentPriorityLevel,kR=Kn.unstable_ImmediatePriority,XU=Kn.unstable_UserBlockingPriority,sx=Kn.unstable_NormalPriority,nse=Kn.unstable_LowPriority,e7=Kn.unstable_IdlePriority,s$=null,fa=null;function sse(e){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(s$,e,void 0,(e.current.flags&128)===128)}catch{}}var Mo=Math.clz32?Math.clz32:lse,ose=Math.log,ase=Math.LN2;function lse(e){return e>>>=0,e===0?32:31-(ose(e)/ase|0)|0}var Kw=64,Xw=4194304;function jg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ox(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~n;a!==0?i=jg(a):(s&=o,s!==0&&(i=jg(s)))}else o=r&~n,o!==0?i=jg(o):s!==0&&(i=jg(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Mo(t),n=1<<r,i|=e[r],t&=~n;return i}function use(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cse(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Mo(s),a=1<<o,l=n[o];l===-1?(!(a&r)||a&i)&&(n[o]=use(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function DI(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function t7(){var e=Kw;return Kw<<=1,!(Kw&4194240)&&(Kw=64),e}function tT(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Q1(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mo(t),e[t]=r}function dse(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Mo(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function RR(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Mo(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var wt=0;function r7(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var i7,OR,n7,s7,o7,FI=!1,eb=[],lc=null,uc=null,cc=null,Gv=new Map,qv=new Map,Gu=[],hse="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K5(e,t){switch(e){case"focusin":case"focusout":lc=null;break;case"dragenter":case"dragleave":uc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":Gv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qv.delete(t.pointerId)}}function rg(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=X1(t),t!==null&&OR(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function pse(e,t,r,i,n){switch(t){case"focusin":return lc=rg(lc,e,t,r,i,n),!0;case"dragenter":return uc=rg(uc,e,t,r,i,n),!0;case"mouseover":return cc=rg(cc,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return Gv.set(s,rg(Gv.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,qv.set(s,rg(qv.get(s)||null,e,t,r,i,n)),!0}return!1}function a7(e){var t=wh(e.target);if(t!==null){var r=cp(t);if(r!==null){if(t=r.tag,t===13){if(t=JU(r),t!==null){e.blockedOn=t,o7(e.priority,function(){n7(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function w_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=jI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);RI=i,r.target.dispatchEvent(i),RI=null}else return t=X1(r),t!==null&&OR(t),e.blockedOn=r,!1;t.shift()}return!0}function X5(e,t,r){w_(e)&&r.delete(t)}function fse(){FI=!1,lc!==null&&w_(lc)&&(lc=null),uc!==null&&w_(uc)&&(uc=null),cc!==null&&w_(cc)&&(cc=null),Gv.forEach(X5),qv.forEach(X5)}function ig(e,t){e.blockedOn===t&&(e.blockedOn=null,FI||(FI=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,fse)))}function Hv(e){function t(n){return ig(n,e)}if(0<eb.length){ig(eb[0],e);for(var r=1;r<eb.length;r++){var i=eb[r];i.blockedOn===e&&(i.blockedOn=null)}}for(lc!==null&&ig(lc,e),uc!==null&&ig(uc,e),cc!==null&&ig(cc,e),Gv.forEach(t),qv.forEach(t),r=0;r<Gu.length;r++)i=Gu[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Gu.length&&(r=Gu[0],r.blockedOn===null);)a7(r),r.blockedOn===null&&Gu.shift()}var gm=jl.ReactCurrentBatchConfig,ax=!0;function mse(e,t,r,i){var n=wt,s=gm.transition;gm.transition=null;try{wt=1,NR(e,t,r,i)}finally{wt=n,gm.transition=s}}function yse(e,t,r,i){var n=wt,s=gm.transition;gm.transition=null;try{wt=4,NR(e,t,r,i)}finally{wt=n,gm.transition=s}}function NR(e,t,r,i){if(ax){var n=jI(e,t,r,i);if(n===null)dT(e,t,i,lx,r),K5(e,i);else if(pse(n,e,t,r,i))i.stopPropagation();else if(K5(e,i),t&4&&-1<hse.indexOf(e)){for(;n!==null;){var s=X1(n);if(s!==null&&i7(s),s=jI(e,t,r,i),s===null&&dT(e,t,i,lx,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else dT(e,t,i,null,r)}}var lx=null;function jI(e,t,r,i){if(lx=null,e=AR(i),e=wh(e),e!==null)if(t=cp(e),t===null)e=null;else if(r=t.tag,r===13){if(e=JU(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return lx=e,null}function l7(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ise()){case kR:return 1;case XU:return 4;case sx:case nse:return 16;case e7:return 536870912;default:return 16}default:return 16}}var Ju=null,PR=null,b_=null;function u7(){if(b_)return b_;var e,t=PR,r=t.length,i,n="value"in Ju?Ju.value:Ju.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var o=r-e;for(i=1;i<=o&&t[r-i]===n[s-i];i++);return b_=n.slice(e,1<i?1-i:void 0)}function __(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tb(){return!0}function e4(){return!1}function rs(e){function t(r,i,n,s,o){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tb:e4,this.isPropagationStopped=e4,this}return Kt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tb)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tb)},persist:function(){},isPersistent:tb}),t}var Iy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},DR=rs(Iy),K1=Kt({},Iy,{view:0,detail:0}),gse=rs(K1),rT,iT,ng,o$=Kt({},K1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FR,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ng&&(ng&&e.type==="mousemove"?(rT=e.screenX-ng.screenX,iT=e.screenY-ng.screenY):iT=rT=0,ng=e),rT)},movementY:function(e){return"movementY"in e?e.movementY:iT}}),t4=rs(o$),vse=Kt({},o$,{dataTransfer:0}),wse=rs(vse),bse=Kt({},K1,{relatedTarget:0}),nT=rs(bse),_se=Kt({},Iy,{animationName:0,elapsedTime:0,pseudoElement:0}),xse=rs(_se),Sse=Kt({},Iy,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$se=rs(Sse),Ese=Kt({},Iy,{data:0}),r4=rs(Ese),Tse={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mse={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ise={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cse(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ise[e])?!!t[e]:!1}function FR(){return Cse}var Lse=Kt({},K1,{key:function(e){if(e.key){var t=Tse[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=__(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mse[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FR,charCode:function(e){return e.type==="keypress"?__(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?__(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ase=rs(Lse),kse=Kt({},o$,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i4=rs(kse),Rse=Kt({},K1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FR}),Ose=rs(Rse),Nse=Kt({},Iy,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pse=rs(Nse),Dse=Kt({},o$,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fse=rs(Dse),jse=[9,13,27,32],jR=kl&&"CompositionEvent"in window,rv=null;kl&&"documentMode"in document&&(rv=document.documentMode);var Vse=kl&&"TextEvent"in window&&!rv,c7=kl&&(!jR||rv&&8<rv&&11>=rv),n4=String.fromCharCode(32),s4=!1;function d7(e,t){switch(e){case"keyup":return jse.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h7(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gf=!1;function zse(e,t){switch(e){case"compositionend":return h7(t);case"keypress":return t.which!==32?null:(s4=!0,n4);case"textInput":return e=t.data,e===n4&&s4?null:e;default:return null}}function Use(e,t){if(Gf)return e==="compositionend"||!jR&&d7(e,t)?(e=u7(),b_=PR=Ju=null,Gf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return c7&&t.locale!=="ko"?null:t.data;default:return null}}var Bse={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bse[e.type]:t==="textarea"}function p7(e,t,r,i){GU(i),t=ux(t,"onChange"),0<t.length&&(r=new DR("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var iv=null,Wv=null;function Gse(e){$7(e,0)}function a$(e){var t=Wf(e);if(DU(t))return e}function qse(e,t){if(e==="change")return t}var f7=!1;if(kl){var sT;if(kl){var oT="oninput"in document;if(!oT){var a4=document.createElement("div");a4.setAttribute("oninput","return;"),oT=typeof a4.oninput=="function"}sT=oT}else sT=!1;f7=sT&&(!document.documentMode||9<document.documentMode)}function l4(){iv&&(iv.detachEvent("onpropertychange",m7),Wv=iv=null)}function m7(e){if(e.propertyName==="value"&&a$(Wv)){var t=[];p7(t,Wv,e,AR(e)),ZU(Gse,t)}}function Hse(e,t,r){e==="focusin"?(l4(),iv=t,Wv=r,iv.attachEvent("onpropertychange",m7)):e==="focusout"&&l4()}function Wse(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return a$(Wv)}function Zse(e,t){if(e==="click")return a$(t)}function Jse(e,t){if(e==="input"||e==="change")return a$(t)}function Yse(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ro=typeof Object.is=="function"?Object.is:Yse;function Zv(e,t){if(Ro(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!_I.call(t,n)||!Ro(e[n],t[n]))return!1}return!0}function u4(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function c4(e,t){var r=u4(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=u4(r)}}function y7(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?y7(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function g7(){for(var e=window,t=rx();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=rx(e.document)}return t}function VR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Qse(e){var t=g7(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&y7(r.ownerDocument.documentElement,r)){if(i!==null&&VR(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=c4(r,s);var o=c4(r,i);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kse=kl&&"documentMode"in document&&11>=document.documentMode,qf=null,VI=null,nv=null,zI=!1;function d4(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;zI||qf==null||qf!==rx(i)||(i=qf,"selectionStart"in i&&VR(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nv&&Zv(nv,i)||(nv=i,i=ux(VI,"onSelect"),0<i.length&&(t=new DR("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=qf)))}function rb(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Hf={animationend:rb("Animation","AnimationEnd"),animationiteration:rb("Animation","AnimationIteration"),animationstart:rb("Animation","AnimationStart"),transitionend:rb("Transition","TransitionEnd")},aT={},v7={};kl&&(v7=document.createElement("div").style,"AnimationEvent"in window||(delete Hf.animationend.animation,delete Hf.animationiteration.animation,delete Hf.animationstart.animation),"TransitionEvent"in window||delete Hf.transitionend.transition);function l$(e){if(aT[e])return aT[e];if(!Hf[e])return e;var t=Hf[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in v7)return aT[e]=t[r];return e}var w7=l$("animationend"),b7=l$("animationiteration"),_7=l$("animationstart"),x7=l$("transitionend"),S7=new Map,h4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fc(e,t){S7.set(e,t),up(t,[e])}for(var lT=0;lT<h4.length;lT++){var uT=h4[lT],Xse=uT.toLowerCase(),eoe=uT[0].toUpperCase()+uT.slice(1);Fc(Xse,"on"+eoe)}Fc(w7,"onAnimationEnd");Fc(b7,"onAnimationIteration");Fc(_7,"onAnimationStart");Fc("dblclick","onDoubleClick");Fc("focusin","onFocus");Fc("focusout","onBlur");Fc(x7,"onTransitionEnd");Zm("onMouseEnter",["mouseout","mouseover"]);Zm("onMouseLeave",["mouseout","mouseover"]);Zm("onPointerEnter",["pointerout","pointerover"]);Zm("onPointerLeave",["pointerout","pointerover"]);up("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));up("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));up("onBeforeInput",["compositionend","keypress","textInput","paste"]);up("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));up("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));up("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),toe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vg));function p4(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,Xne(i,t,void 0,e),e.currentTarget=null}function $7(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;p4(n,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;p4(n,a,c),s=l}}}if(nx)throw e=PI,nx=!1,PI=null,e}function At(e,t){var r=t[HI];r===void 0&&(r=t[HI]=new Set);var i=e+"__bubble";r.has(i)||(E7(t,e,2,!1),r.add(i))}function cT(e,t,r){var i=0;t&&(i|=4),E7(r,e,i,t)}var ib="_reactListening"+Math.random().toString(36).slice(2);function Jv(e){if(!e[ib]){e[ib]=!0,kU.forEach(function(r){r!=="selectionchange"&&(toe.has(r)||cT(r,!1,e),cT(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ib]||(t[ib]=!0,cT("selectionchange",!1,t))}}function E7(e,t,r,i){switch(l7(t)){case 1:var n=mse;break;case 4:n=yse;break;default:n=NR}r=n.bind(null,t,r,e),n=void 0,!NI||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function dT(e,t,r,i,n){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=wh(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}ZU(function(){var c=s,h=AR(r),f=[];e:{var m=S7.get(e);if(m!==void 0){var y=DR,g=e;switch(e){case"keypress":if(__(r)===0)break e;case"keydown":case"keyup":y=Ase;break;case"focusin":g="focus",y=nT;break;case"focusout":g="blur",y=nT;break;case"beforeblur":case"afterblur":y=nT;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=t4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=wse;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Ose;break;case w7:case b7:case _7:y=xse;break;case x7:y=Pse;break;case"scroll":y=gse;break;case"wheel":y=Fse;break;case"copy":case"cut":case"paste":y=$se;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=i4}var v=(t&4)!==0,x=!v&&e==="scroll",b=v?m!==null?m+"Capture":null:m;v=[];for(var _=c,S;_!==null;){S=_;var $=S.stateNode;if(S.tag===5&&$!==null&&(S=$,b!==null&&($=Bv(_,b),$!=null&&v.push(Yv(_,$,S)))),x)break;_=_.return}0<v.length&&(m=new y(m,g,null,r,h),f.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==RI&&(g=r.relatedTarget||r.fromElement)&&(wh(g)||g[Rl]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=r.relatedTarget||r.toElement,y=c,g=g?wh(g):null,g!==null&&(x=cp(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=c),y!==g)){if(v=t4,$="onMouseLeave",b="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(v=i4,$="onPointerLeave",b="onPointerEnter",_="pointer"),x=y==null?m:Wf(y),S=g==null?m:Wf(g),m=new v($,_+"leave",y,r,h),m.target=x,m.relatedTarget=S,$=null,wh(h)===c&&(v=new v(b,_+"enter",g,r,h),v.target=S,v.relatedTarget=x,$=v),x=$,y&&g)t:{for(v=y,b=g,_=0,S=v;S;S=Tp(S))_++;for(S=0,$=b;$;$=Tp($))S++;for(;0<_-S;)v=Tp(v),_--;for(;0<S-_;)b=Tp(b),S--;for(;_--;){if(v===b||b!==null&&v===b.alternate)break t;v=Tp(v),b=Tp(b)}v=null}else v=null;y!==null&&f4(f,m,y,v,!1),g!==null&&x!==null&&f4(f,x,g,v,!0)}}e:{if(m=c?Wf(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var M=qse;else if(o4(m))if(f7)M=Jse;else{M=Wse;var I=Hse}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=Zse);if(M&&(M=M(e,c))){p7(f,M,r,h);break e}I&&I(e,m,c),e==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&II(m,"number",m.value)}switch(I=c?Wf(c):window,e){case"focusin":(o4(I)||I.contentEditable==="true")&&(qf=I,VI=c,nv=null);break;case"focusout":nv=VI=qf=null;break;case"mousedown":zI=!0;break;case"contextmenu":case"mouseup":case"dragend":zI=!1,d4(f,r,h);break;case"selectionchange":if(Kse)break;case"keydown":case"keyup":d4(f,r,h)}var C;if(jR)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Gf?d7(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(c7&&r.locale!=="ko"&&(Gf||L!=="onCompositionStart"?L==="onCompositionEnd"&&Gf&&(C=u7()):(Ju=h,PR="value"in Ju?Ju.value:Ju.textContent,Gf=!0)),I=ux(c,L),0<I.length&&(L=new r4(L,e,null,r,h),f.push({event:L,listeners:I}),C?L.data=C:(C=h7(r),C!==null&&(L.data=C)))),(C=Vse?zse(e,r):Use(e,r))&&(c=ux(c,"onBeforeInput"),0<c.length&&(h=new r4("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=C))}$7(f,t)})}function Yv(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ux(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Bv(e,r),s!=null&&i.unshift(Yv(e,s,n)),s=Bv(e,t),s!=null&&i.push(Yv(e,s,n))),e=e.return}return i}function Tp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function f4(e,t,r,i,n){for(var s=t._reactName,o=[];r!==null&&r!==i;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,n?(l=Bv(r,s),l!=null&&o.unshift(Yv(r,l,a))):n||(l=Bv(r,s),l!=null&&o.push(Yv(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var roe=/\r\n?/g,ioe=/\u0000|\uFFFD/g;function m4(e){return(typeof e=="string"?e:""+e).replace(roe,`
`).replace(ioe,"")}function nb(e,t,r){if(t=m4(t),m4(e)!==t&&r)throw Error(re(425))}function cx(){}var UI=null,BI=null;function GI(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qI=typeof setTimeout=="function"?setTimeout:void 0,noe=typeof clearTimeout=="function"?clearTimeout:void 0,y4=typeof Promise=="function"?Promise:void 0,soe=typeof queueMicrotask=="function"?queueMicrotask:typeof y4<"u"?function(e){return y4.resolve(null).then(e).catch(ooe)}:qI;function ooe(e){setTimeout(function(){throw e})}function hT(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),Hv(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);Hv(t)}function dc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function g4(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Cy=Math.random().toString(36).slice(2),ha="__reactFiber$"+Cy,Qv="__reactProps$"+Cy,Rl="__reactContainer$"+Cy,HI="__reactEvents$"+Cy,aoe="__reactListeners$"+Cy,loe="__reactHandles$"+Cy;function wh(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Rl]||r[ha]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=g4(e);e!==null;){if(r=e[ha])return r;e=g4(e)}return t}e=r,r=e.parentNode}return null}function X1(e){return e=e[ha]||e[Rl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(re(33))}function u$(e){return e[Qv]||null}var WI=[],Zf=-1;function jc(e){return{current:e}}function Dt(e){0>Zf||(e.current=WI[Zf],WI[Zf]=null,Zf--)}function Ct(e,t){Zf++,WI[Zf]=e.current,e.current=t}var $c={},Li=jc($c),_n=jc(!1),Gh=$c;function Jm(e,t){var r=e.type.contextTypes;if(!r)return $c;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function xn(e){return e=e.childContextTypes,e!=null}function dx(){Dt(_n),Dt(Li)}function v4(e,t,r){if(Li.current!==$c)throw Error(re(168));Ct(Li,t),Ct(_n,r)}function T7(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(re(108,Hne(e)||"Unknown",n));return Kt({},r,i)}function hx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$c,Gh=Li.current,Ct(Li,e),Ct(_n,_n.current),!0}function w4(e,t,r){var i=e.stateNode;if(!i)throw Error(re(169));r?(e=T7(e,t,Gh),i.__reactInternalMemoizedMergedChildContext=e,Dt(_n),Dt(Li),Ct(Li,e)):Dt(_n),Ct(_n,r)}var pl=null,c$=!1,pT=!1;function M7(e){pl===null?pl=[e]:pl.push(e)}function uoe(e){c$=!0,M7(e)}function Vc(){if(!pT&&pl!==null){pT=!0;var e=0,t=wt;try{var r=pl;for(wt=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}pl=null,c$=!1}catch(n){throw pl!==null&&(pl=pl.slice(e+1)),KU(kR,Vc),n}finally{wt=t,pT=!1}}return null}var Jf=[],Yf=0,px=null,fx=0,xs=[],Ss=0,qh=null,xl=1,Sl="";function hd(e,t){Jf[Yf++]=fx,Jf[Yf++]=px,px=e,fx=t}function I7(e,t,r){xs[Ss++]=xl,xs[Ss++]=Sl,xs[Ss++]=qh,qh=e;var i=xl;e=Sl;var n=32-Mo(i)-1;i&=~(1<<n),r+=1;var s=32-Mo(t)+n;if(30<s){var o=n-n%5;s=(i&(1<<o)-1).toString(32),i>>=o,n-=o,xl=1<<32-Mo(t)+n|r<<n|i,Sl=s+e}else xl=1<<s|r<<n|i,Sl=e}function zR(e){e.return!==null&&(hd(e,1),I7(e,1,0))}function UR(e){for(;e===px;)px=Jf[--Yf],Jf[Yf]=null,fx=Jf[--Yf],Jf[Yf]=null;for(;e===qh;)qh=xs[--Ss],xs[Ss]=null,Sl=xs[--Ss],xs[Ss]=null,xl=xs[--Ss],xs[Ss]=null}var Zn=null,Hn=null,Gt=!1,bo=null;function C7(e,t){var r=Ts(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function b4(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zn=e,Hn=dc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zn=e,Hn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=qh!==null?{id:xl,overflow:Sl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ts(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Zn=e,Hn=null,!0):!1;default:return!1}}function ZI(e){return(e.mode&1)!==0&&(e.flags&128)===0}function JI(e){if(Gt){var t=Hn;if(t){var r=t;if(!b4(e,t)){if(ZI(e))throw Error(re(418));t=dc(r.nextSibling);var i=Zn;t&&b4(e,t)?C7(i,r):(e.flags=e.flags&-4097|2,Gt=!1,Zn=e)}}else{if(ZI(e))throw Error(re(418));e.flags=e.flags&-4097|2,Gt=!1,Zn=e}}}function _4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zn=e}function sb(e){if(e!==Zn)return!1;if(!Gt)return _4(e),Gt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!GI(e.type,e.memoizedProps)),t&&(t=Hn)){if(ZI(e))throw L7(),Error(re(418));for(;t;)C7(e,t),t=dc(t.nextSibling)}if(_4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Hn=dc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Hn=null}}else Hn=Zn?dc(e.stateNode.nextSibling):null;return!0}function L7(){for(var e=Hn;e;)e=dc(e.nextSibling)}function Ym(){Hn=Zn=null,Gt=!1}function BR(e){bo===null?bo=[e]:bo.push(e)}var coe=jl.ReactCurrentBatchConfig;function sg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var i=r.stateNode}if(!i)throw Error(re(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=n.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,e))}return e}function ob(e,t){throw e=Object.prototype.toString.call(t),Error(re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function x4(e){var t=e._init;return t(e._payload)}function A7(e){function t(b,_){if(e){var S=b.deletions;S===null?(b.deletions=[_],b.flags|=16):S.push(_)}}function r(b,_){if(!e)return null;for(;_!==null;)t(b,_),_=_.sibling;return null}function i(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function n(b,_){return b=mc(b,_),b.index=0,b.sibling=null,b}function s(b,_,S){return b.index=S,e?(S=b.alternate,S!==null?(S=S.index,S<_?(b.flags|=2,_):S):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function a(b,_,S,$){return _===null||_.tag!==6?(_=bT(S,b.mode,$),_.return=b,_):(_=n(_,S),_.return=b,_)}function l(b,_,S,$){var M=S.type;return M===Bf?h(b,_,S.props.children,$,S.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ou&&x4(M)===_.type)?($=n(_,S.props),$.ref=sg(b,_,S),$.return=b,$):($=I_(S.type,S.key,S.props,null,b.mode,$),$.ref=sg(b,_,S),$.return=b,$)}function c(b,_,S,$){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=_T(S,b.mode,$),_.return=b,_):(_=n(_,S.children||[]),_.return=b,_)}function h(b,_,S,$,M){return _===null||_.tag!==7?(_=Rh(S,b.mode,$,M),_.return=b,_):(_=n(_,S),_.return=b,_)}function f(b,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=bT(""+_,b.mode,S),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Jw:return S=I_(_.type,_.key,_.props,null,b.mode,S),S.ref=sg(b,null,_),S.return=b,S;case Uf:return _=_T(_,b.mode,S),_.return=b,_;case Ou:var $=_._init;return f(b,$(_._payload),S)}if(Fg(_)||eg(_))return _=Rh(_,b.mode,S,null),_.return=b,_;ob(b,_)}return null}function m(b,_,S,$){var M=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return M!==null?null:a(b,_,""+S,$);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Jw:return S.key===M?l(b,_,S,$):null;case Uf:return S.key===M?c(b,_,S,$):null;case Ou:return M=S._init,m(b,_,M(S._payload),$)}if(Fg(S)||eg(S))return M!==null?null:h(b,_,S,$,null);ob(b,S)}return null}function y(b,_,S,$,M){if(typeof $=="string"&&$!==""||typeof $=="number")return b=b.get(S)||null,a(_,b,""+$,M);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Jw:return b=b.get($.key===null?S:$.key)||null,l(_,b,$,M);case Uf:return b=b.get($.key===null?S:$.key)||null,c(_,b,$,M);case Ou:var I=$._init;return y(b,_,S,I($._payload),M)}if(Fg($)||eg($))return b=b.get(S)||null,h(_,b,$,M,null);ob(_,$)}return null}function g(b,_,S,$){for(var M=null,I=null,C=_,L=_=0,V=null;C!==null&&L<S.length;L++){C.index>L?(V=C,C=null):V=C.sibling;var P=m(b,C,S[L],$);if(P===null){C===null&&(C=V);break}e&&C&&P.alternate===null&&t(b,C),_=s(P,_,L),I===null?M=P:I.sibling=P,I=P,C=V}if(L===S.length)return r(b,C),Gt&&hd(b,L),M;if(C===null){for(;L<S.length;L++)C=f(b,S[L],$),C!==null&&(_=s(C,_,L),I===null?M=C:I.sibling=C,I=C);return Gt&&hd(b,L),M}for(C=i(b,C);L<S.length;L++)V=y(C,b,L,S[L],$),V!==null&&(e&&V.alternate!==null&&C.delete(V.key===null?L:V.key),_=s(V,_,L),I===null?M=V:I.sibling=V,I=V);return e&&C.forEach(function(z){return t(b,z)}),Gt&&hd(b,L),M}function v(b,_,S,$){var M=eg(S);if(typeof M!="function")throw Error(re(150));if(S=M.call(S),S==null)throw Error(re(151));for(var I=M=null,C=_,L=_=0,V=null,P=S.next();C!==null&&!P.done;L++,P=S.next()){C.index>L?(V=C,C=null):V=C.sibling;var z=m(b,C,P.value,$);if(z===null){C===null&&(C=V);break}e&&C&&z.alternate===null&&t(b,C),_=s(z,_,L),I===null?M=z:I.sibling=z,I=z,C=V}if(P.done)return r(b,C),Gt&&hd(b,L),M;if(C===null){for(;!P.done;L++,P=S.next())P=f(b,P.value,$),P!==null&&(_=s(P,_,L),I===null?M=P:I.sibling=P,I=P);return Gt&&hd(b,L),M}for(C=i(b,C);!P.done;L++,P=S.next())P=y(C,b,L,P.value,$),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?L:P.key),_=s(P,_,L),I===null?M=P:I.sibling=P,I=P);return e&&C.forEach(function(Y){return t(b,Y)}),Gt&&hd(b,L),M}function x(b,_,S,$){if(typeof S=="object"&&S!==null&&S.type===Bf&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Jw:e:{for(var M=S.key,I=_;I!==null;){if(I.key===M){if(M=S.type,M===Bf){if(I.tag===7){r(b,I.sibling),_=n(I,S.props.children),_.return=b,b=_;break e}}else if(I.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ou&&x4(M)===I.type){r(b,I.sibling),_=n(I,S.props),_.ref=sg(b,I,S),_.return=b,b=_;break e}r(b,I);break}else t(b,I);I=I.sibling}S.type===Bf?(_=Rh(S.props.children,b.mode,$,S.key),_.return=b,b=_):($=I_(S.type,S.key,S.props,null,b.mode,$),$.ref=sg(b,_,S),$.return=b,b=$)}return o(b);case Uf:e:{for(I=S.key;_!==null;){if(_.key===I)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){r(b,_.sibling),_=n(_,S.children||[]),_.return=b,b=_;break e}else{r(b,_);break}else t(b,_);_=_.sibling}_=_T(S,b.mode,$),_.return=b,b=_}return o(b);case Ou:return I=S._init,x(b,_,I(S._payload),$)}if(Fg(S))return g(b,_,S,$);if(eg(S))return v(b,_,S,$);ob(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(r(b,_.sibling),_=n(_,S),_.return=b,b=_):(r(b,_),_=bT(S,b.mode,$),_.return=b,b=_),o(b)):r(b,_)}return x}var Qm=A7(!0),k7=A7(!1),mx=jc(null),yx=null,Qf=null,GR=null;function qR(){GR=Qf=yx=null}function HR(e){var t=mx.current;Dt(mx),e._currentValue=t}function YI(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function vm(e,t){yx=e,GR=Qf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wn=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(GR!==e)if(e={context:e,memoizedValue:t,next:null},Qf===null){if(yx===null)throw Error(re(308));Qf=e,yx.dependencies={lanes:0,firstContext:e}}else Qf=Qf.next=e;return t}var bh=null;function WR(e){bh===null?bh=[e]:bh.push(e)}function R7(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,WR(t)):(r.next=n.next,n.next=r),t.interleaved=r,Ol(e,i)}function Ol(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Nu=!1;function ZR(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O7(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function El(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hc(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,it&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,Ol(e,r)}return n=i.interleaved,n===null?(t.next=t,WR(i)):(t.next=n.next,n.next=t),i.interleaved=t,Ol(e,r)}function x_(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,RR(e,r)}}function S4(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function gx(e,t,r,i){var n=e.updateQueue;Nu=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=n.baseState;o=0,h=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((i&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,v=a;switch(m=t,y=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(y,f,m);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(y,f,m):g,m==null)break e;f=Kt({},f,m);break e;case 2:Nu=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=n.effects,m===null?n.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;m=a,a=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(1);if(h===null&&(l=f),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);Wh|=o,e.lanes=o,e.memoizedState=f}}function $4(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(re(191,n));n.call(i)}}}var ew={},ma=jc(ew),Kv=jc(ew),Xv=jc(ew);function _h(e){if(e===ew)throw Error(re(174));return e}function JR(e,t){switch(Ct(Xv,t),Ct(Kv,e),Ct(ma,ew),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:LI(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=LI(t,e)}Dt(ma),Ct(ma,t)}function Km(){Dt(ma),Dt(Kv),Dt(Xv)}function N7(e){_h(Xv.current);var t=_h(ma.current),r=LI(t,e.type);t!==r&&(Ct(Kv,e),Ct(ma,r))}function YR(e){Kv.current===e&&(Dt(ma),Dt(Kv))}var Jt=jc(0);function vx(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fT=[];function QR(){for(var e=0;e<fT.length;e++)fT[e]._workInProgressVersionPrimary=null;fT.length=0}var S_=jl.ReactCurrentDispatcher,mT=jl.ReactCurrentBatchConfig,Hh=0,Yt=null,Or=null,Wr=null,wx=!1,sv=!1,e1=0,doe=0;function hi(){throw Error(re(321))}function KR(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ro(e[r],t[r]))return!1;return!0}function XR(e,t,r,i,n,s){if(Hh=s,Yt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,S_.current=e===null||e.memoizedState===null?moe:yoe,e=r(i,n),sv){s=0;do{if(sv=!1,e1=0,25<=s)throw Error(re(301));s+=1,Wr=Or=null,t.updateQueue=null,S_.current=goe,e=r(i,n)}while(sv)}if(S_.current=bx,t=Or!==null&&Or.next!==null,Hh=0,Wr=Or=Yt=null,wx=!1,t)throw Error(re(300));return e}function eO(){var e=e1!==0;return e1=0,e}function ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?Yt.memoizedState=Wr=e:Wr=Wr.next=e,Wr}function Rs(){if(Or===null){var e=Yt.alternate;e=e!==null?e.memoizedState:null}else e=Or.next;var t=Wr===null?Yt.memoizedState:Wr.next;if(t!==null)Wr=t,Or=e;else{if(e===null)throw Error(re(310));Or=e,e={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},Wr===null?Yt.memoizedState=Wr=e:Wr=Wr.next=e}return Wr}function t1(e,t){return typeof t=="function"?t(e):t}function yT(e){var t=Rs(),r=t.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=e;var i=Or,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Hh&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,Yt.lanes|=h,Wh|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Ro(i,t.memoizedState)||(wn=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,Yt.lanes|=s,Wh|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function gT(e){var t=Rs(),r=t.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do s=e(s,o.action),o=o.next;while(o!==n);Ro(s,t.memoizedState)||(wn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function P7(){}function D7(e,t){var r=Yt,i=Rs(),n=t(),s=!Ro(i.memoizedState,n);if(s&&(i.memoizedState=n,wn=!0),i=i.queue,tO(V7.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||Wr!==null&&Wr.memoizedState.tag&1){if(r.flags|=2048,r1(9,j7.bind(null,r,i,n,t),void 0,null),Kr===null)throw Error(re(349));Hh&30||F7(r,t,n)}return n}function F7(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Yt.updateQueue,t===null?(t={lastEffect:null,stores:null},Yt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function j7(e,t,r,i){t.value=r,t.getSnapshot=i,z7(t)&&U7(e)}function V7(e,t,r){return r(function(){z7(t)&&U7(e)})}function z7(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ro(e,r)}catch{return!0}}function U7(e){var t=Ol(e,1);t!==null&&Io(t,e,1,-1)}function E4(e){var t=ia();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t1,lastRenderedState:e},t.queue=e,e=e.dispatch=foe.bind(null,Yt,e),[t.memoizedState,e]}function r1(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Yt.updateQueue,t===null?(t={lastEffect:null,stores:null},Yt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function B7(){return Rs().memoizedState}function $_(e,t,r,i){var n=ia();Yt.flags|=e,n.memoizedState=r1(1|t,r,void 0,i===void 0?null:i)}function d$(e,t,r,i){var n=Rs();i=i===void 0?null:i;var s=void 0;if(Or!==null){var o=Or.memoizedState;if(s=o.destroy,i!==null&&KR(i,o.deps)){n.memoizedState=r1(t,r,s,i);return}}Yt.flags|=e,n.memoizedState=r1(1|t,r,s,i)}function T4(e,t){return $_(8390656,8,e,t)}function tO(e,t){return d$(2048,8,e,t)}function G7(e,t){return d$(4,2,e,t)}function q7(e,t){return d$(4,4,e,t)}function H7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function W7(e,t,r){return r=r!=null?r.concat([e]):null,d$(4,4,H7.bind(null,t,e),r)}function rO(){}function Z7(e,t){var r=Rs();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&KR(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function J7(e,t){var r=Rs();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&KR(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Y7(e,t,r){return Hh&21?(Ro(r,t)||(r=t7(),Yt.lanes|=r,Wh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wn=!0),e.memoizedState=r)}function hoe(e,t){var r=wt;wt=r!==0&&4>r?r:4,e(!0);var i=mT.transition;mT.transition={};try{e(!1),t()}finally{wt=r,mT.transition=i}}function Q7(){return Rs().memoizedState}function poe(e,t,r){var i=fc(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},K7(e))X7(t,r);else if(r=R7(e,t,r,i),r!==null){var n=Zi();Io(r,e,i,n),eB(r,t,i)}}function foe(e,t,r){var i=fc(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(K7(e))X7(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(n.hasEagerState=!0,n.eagerState=a,Ro(a,o)){var l=t.interleaved;l===null?(n.next=n,WR(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}r=R7(e,t,n,i),r!==null&&(n=Zi(),Io(r,e,i,n),eB(r,t,i))}}function K7(e){var t=e.alternate;return e===Yt||t!==null&&t===Yt}function X7(e,t){sv=wx=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function eB(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,RR(e,r)}}var bx={readContext:ks,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},moe={readContext:ks,useCallback:function(e,t){return ia().memoizedState=[e,t===void 0?null:t],e},useContext:ks,useEffect:T4,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$_(4194308,4,H7.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $_(4194308,4,e,t)},useInsertionEffect:function(e,t){return $_(4,2,e,t)},useMemo:function(e,t){var r=ia();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ia();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=poe.bind(null,Yt,e),[i.memoizedState,e]},useRef:function(e){var t=ia();return e={current:e},t.memoizedState=e},useState:E4,useDebugValue:rO,useDeferredValue:function(e){return ia().memoizedState=e},useTransition:function(){var e=E4(!1),t=e[0];return e=hoe.bind(null,e[1]),ia().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Yt,n=ia();if(Gt){if(r===void 0)throw Error(re(407));r=r()}else{if(r=t(),Kr===null)throw Error(re(349));Hh&30||F7(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,T4(V7.bind(null,i,s,e),[e]),i.flags|=2048,r1(9,j7.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=ia(),t=Kr.identifierPrefix;if(Gt){var r=Sl,i=xl;r=(i&~(1<<32-Mo(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=e1++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=doe++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yoe={readContext:ks,useCallback:Z7,useContext:ks,useEffect:tO,useImperativeHandle:W7,useInsertionEffect:G7,useLayoutEffect:q7,useMemo:J7,useReducer:yT,useRef:B7,useState:function(){return yT(t1)},useDebugValue:rO,useDeferredValue:function(e){var t=Rs();return Y7(t,Or.memoizedState,e)},useTransition:function(){var e=yT(t1)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:P7,useSyncExternalStore:D7,useId:Q7,unstable_isNewReconciler:!1},goe={readContext:ks,useCallback:Z7,useContext:ks,useEffect:tO,useImperativeHandle:W7,useInsertionEffect:G7,useLayoutEffect:q7,useMemo:J7,useReducer:gT,useRef:B7,useState:function(){return gT(t1)},useDebugValue:rO,useDeferredValue:function(e){var t=Rs();return Or===null?t.memoizedState=e:Y7(t,Or.memoizedState,e)},useTransition:function(){var e=gT(t1)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:P7,useSyncExternalStore:D7,useId:Q7,unstable_isNewReconciler:!1};function fo(e,t){if(e&&e.defaultProps){t=Kt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function QI(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Kt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var h$={isMounted:function(e){return(e=e._reactInternals)?cp(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Zi(),n=fc(e),s=El(i,n);s.payload=t,r!=null&&(s.callback=r),t=hc(e,s,n),t!==null&&(Io(t,e,n,i),x_(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Zi(),n=fc(e),s=El(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=hc(e,s,n),t!==null&&(Io(t,e,n,i),x_(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Zi(),i=fc(e),n=El(r,i);n.tag=2,t!=null&&(n.callback=t),t=hc(e,n,i),t!==null&&(Io(t,e,i,r),x_(t,e,i))}};function M4(e,t,r,i,n,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Zv(r,i)||!Zv(n,s):!0}function tB(e,t,r){var i=!1,n=$c,s=t.contextType;return typeof s=="object"&&s!==null?s=ks(s):(n=xn(t)?Gh:Li.current,i=t.contextTypes,s=(i=i!=null)?Jm(e,n):$c),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=h$,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function I4(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&h$.enqueueReplaceState(t,t.state,null)}function KI(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},ZR(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=ks(s):(s=xn(t)?Gh:Li.current,n.context=Jm(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(QI(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&h$.enqueueReplaceState(n,n.state,null),gx(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Xm(e,t){try{var r="",i=t;do r+=qne(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function vT(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function XI(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var voe=typeof WeakMap=="function"?WeakMap:Map;function rB(e,t,r){r=El(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){xx||(xx=!0,u3=i),XI(e,t)},r}function iB(e,t,r){r=El(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){XI(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){XI(e,t),typeof i!="function"&&(pc===null?pc=new Set([this]):pc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function C4(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new voe;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=koe.bind(null,e,t,r),t.then(e,e))}function L4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function A4(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=El(-1,1),t.tag=2,hc(r,t,1))),r.lanes|=1),e)}var woe=jl.ReactCurrentOwner,wn=!1;function Bi(e,t,r,i){t.child=e===null?k7(t,null,r,i):Qm(t,e.child,r,i)}function k4(e,t,r,i,n){r=r.render;var s=t.ref;return vm(t,n),i=XR(e,t,r,i,s,n),r=eO(),e!==null&&!wn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Nl(e,t,n)):(Gt&&r&&zR(t),t.flags|=1,Bi(e,t,i,n),t.child)}function R4(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!cO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,nB(e,t,s,i,n)):(e=I_(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&n)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Zv,r(o,i)&&e.ref===t.ref)return Nl(e,t,n)}return t.flags|=1,e=mc(s,i),e.ref=t.ref,e.return=t,t.child=e}function nB(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(Zv(s,i)&&e.ref===t.ref)if(wn=!1,t.pendingProps=i=s,(e.lanes&n)!==0)e.flags&131072&&(wn=!0);else return t.lanes=e.lanes,Nl(e,t,n)}return e3(e,t,r,i,n)}function sB(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(Xf,qn),qn|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ct(Xf,qn),qn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,Ct(Xf,qn),qn|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,Ct(Xf,qn),qn|=i;return Bi(e,t,n,r),t.child}function oB(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function e3(e,t,r,i,n){var s=xn(r)?Gh:Li.current;return s=Jm(t,s),vm(t,n),r=XR(e,t,r,i,s,n),i=eO(),e!==null&&!wn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Nl(e,t,n)):(Gt&&i&&zR(t),t.flags|=1,Bi(e,t,r,n),t.child)}function O4(e,t,r,i,n){if(xn(r)){var s=!0;hx(t)}else s=!1;if(vm(t,n),t.stateNode===null)E_(e,t),tB(t,r,i),KI(t,r,i,n),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=ks(c):(c=xn(r)?Gh:Li.current,c=Jm(t,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&I4(t,o,i,c),Nu=!1;var m=t.memoizedState;o.state=m,gx(t,i,o,n),l=t.memoizedState,a!==i||m!==l||_n.current||Nu?(typeof h=="function"&&(QI(t,r,h,i),l=t.memoizedState),(a=Nu||M4(t,r,a,i,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,O7(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:fo(t.type,a),o.props=c,f=t.pendingProps,m=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=ks(l):(l=xn(r)?Gh:Li.current,l=Jm(t,l));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&I4(t,o,i,l),Nu=!1,m=t.memoizedState,o.state=m,gx(t,i,o,n);var g=t.memoizedState;a!==f||m!==g||_n.current||Nu?(typeof y=="function"&&(QI(t,r,y,i),g=t.memoizedState),(c=Nu||M4(t,r,c,i,m,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return t3(e,t,r,i,s,n)}function t3(e,t,r,i,n,s){oB(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return n&&w4(t,r,!1),Nl(e,t,s);i=t.stateNode,woe.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=Qm(t,e.child,null,s),t.child=Qm(t,null,a,s)):Bi(e,t,a,s),t.memoizedState=i.state,n&&w4(t,r,!0),t.child}function aB(e){var t=e.stateNode;t.pendingContext?v4(e,t.pendingContext,t.pendingContext!==t.context):t.context&&v4(e,t.context,!1),JR(e,t.containerInfo)}function N4(e,t,r,i,n){return Ym(),BR(n),t.flags|=256,Bi(e,t,r,i),t.child}var r3={dehydrated:null,treeContext:null,retryLane:0};function i3(e){return{baseLanes:e,cachePool:null,transitions:null}}function lB(e,t,r){var i=t.pendingProps,n=Jt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Ct(Jt,n&1),e===null)return JI(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=m$(o,i,0,null),e=Rh(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=i3(r),t.memoizedState=r3,e):iO(t,o));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return boe(e,t,o,i,a,n,r);if(s){s=i.fallback,o=t.mode,n=e.child,a=n.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=mc(n,l),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=mc(a,s):(s=Rh(s,o,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?i3(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=r3,i}return s=e.child,e=s.sibling,i=mc(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function iO(e,t){return t=m$({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ab(e,t,r,i){return i!==null&&BR(i),Qm(t,e.child,null,r),e=iO(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function boe(e,t,r,i,n,s,o){if(r)return t.flags&256?(t.flags&=-257,i=vT(Error(re(422))),ab(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=m$({mode:"visible",children:i.children},n,0,null),s=Rh(s,n,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Qm(t,e.child,null,o),t.child.memoizedState=i3(o),t.memoizedState=r3,s);if(!(t.mode&1))return ab(e,t,o,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(re(419)),i=vT(s,i,void 0),ab(e,t,o,i)}if(a=(o&e.childLanes)!==0,wn||a){if(i=Kr,i!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Ol(e,n),Io(i,e,n,-1))}return uO(),i=vT(Error(re(421))),ab(e,t,o,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Roe.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,Hn=dc(n.nextSibling),Zn=t,Gt=!0,bo=null,e!==null&&(xs[Ss++]=xl,xs[Ss++]=Sl,xs[Ss++]=qh,xl=e.id,Sl=e.overflow,qh=t),t=iO(t,i.children),t.flags|=4096,t)}function P4(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),YI(e.return,t,r)}function wT(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function uB(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(Bi(e,t,i.children,r),i=Jt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&P4(e,r,t);else if(e.tag===19)P4(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ct(Jt,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&vx(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),wT(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&vx(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}wT(t,!0,r,null,s);break;case"together":wT(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function E_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Wh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(re(153));if(t.child!==null){for(e=t.child,r=mc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=mc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function _oe(e,t,r){switch(t.tag){case 3:aB(t),Ym();break;case 5:N7(t);break;case 1:xn(t.type)&&hx(t);break;case 4:JR(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;Ct(mx,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ct(Jt,Jt.current&1),t.flags|=128,null):r&t.child.childLanes?lB(e,t,r):(Ct(Jt,Jt.current&1),e=Nl(e,t,r),e!==null?e.sibling:null);Ct(Jt,Jt.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return uB(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ct(Jt,Jt.current),i)break;return null;case 22:case 23:return t.lanes=0,sB(e,t,r)}return Nl(e,t,r)}var cB,n3,dB,hB;cB=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};n3=function(){};dB=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,_h(ma.current);var s=null;switch(r){case"input":n=TI(e,n),i=TI(e,i),s=[];break;case"select":n=Kt({},n,{value:void 0}),i=Kt({},i,{value:void 0}),s=[];break;case"textarea":n=CI(e,n),i=CI(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=cx)}AI(r,i);var o;r=null;for(c in n)if(!i.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var a=n[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zv.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=n!=null?n[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(zv.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&At("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};hB=function(e,t,r,i){r!==i&&(t.flags|=4)};function og(e,t){if(!Gt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function pi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function xoe(e,t,r){var i=t.pendingProps;switch(UR(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(t),null;case 1:return xn(t.type)&&dx(),pi(t),null;case 3:return i=t.stateNode,Km(),Dt(_n),Dt(Li),QR(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(sb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bo!==null&&(h3(bo),bo=null))),n3(e,t),pi(t),null;case 5:YR(t);var n=_h(Xv.current);if(r=t.type,e!==null&&t.stateNode!=null)dB(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(re(166));return pi(t),null}if(e=_h(ma.current),sb(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[ha]=t,i[Qv]=s,e=(t.mode&1)!==0,r){case"dialog":At("cancel",i),At("close",i);break;case"iframe":case"object":case"embed":At("load",i);break;case"video":case"audio":for(n=0;n<Vg.length;n++)At(Vg[n],i);break;case"source":At("error",i);break;case"img":case"image":case"link":At("error",i),At("load",i);break;case"details":At("toggle",i);break;case"input":q5(i,s),At("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},At("invalid",i);break;case"textarea":W5(i,s),At("invalid",i)}AI(r,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&nb(i.textContent,a,e),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&nb(i.textContent,a,e),n=["children",""+a]):zv.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&At("scroll",i)}switch(r){case"input":Yw(i),H5(i,s,!0);break;case"textarea":Yw(i),Z5(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=cx)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=VU(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(r,{is:i.is}):(e=o.createElement(r),r==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,r),e[ha]=t,e[Qv]=i,cB(e,t,!1,!1),t.stateNode=e;e:{switch(o=kI(r,i),r){case"dialog":At("cancel",e),At("close",e),n=i;break;case"iframe":case"object":case"embed":At("load",e),n=i;break;case"video":case"audio":for(n=0;n<Vg.length;n++)At(Vg[n],e);n=i;break;case"source":At("error",e),n=i;break;case"img":case"image":case"link":At("error",e),At("load",e),n=i;break;case"details":At("toggle",e),n=i;break;case"input":q5(e,i),n=TI(e,i),At("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Kt({},i,{value:void 0}),At("invalid",e);break;case"textarea":W5(e,i),n=CI(e,i),At("invalid",e);break;default:n=i}AI(r,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?BU(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zU(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Uv(e,l):typeof l=="number"&&Uv(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zv.hasOwnProperty(s)?l!=null&&s==="onScroll"&&At("scroll",e):l!=null&&MR(e,s,l,o))}switch(r){case"input":Yw(e),H5(e,i,!1);break;case"textarea":Yw(e),Z5(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Sc(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?fm(e,!!i.multiple,s,!1):i.defaultValue!=null&&fm(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=cx)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pi(t),null;case 6:if(e&&t.stateNode!=null)hB(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(re(166));if(r=_h(Xv.current),_h(ma.current),sb(t)){if(i=t.stateNode,r=t.memoizedProps,i[ha]=t,(s=i.nodeValue!==r)&&(e=Zn,e!==null))switch(e.tag){case 3:nb(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&nb(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[ha]=t,t.stateNode=i}return pi(t),null;case 13:if(Dt(Jt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Gt&&Hn!==null&&t.mode&1&&!(t.flags&128))L7(),Ym(),t.flags|=98560,s=!1;else if(s=sb(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(re(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(re(317));s[ha]=t}else Ym(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pi(t),s=!1}else bo!==null&&(h3(bo),bo=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Jt.current&1?Pr===0&&(Pr=3):uO())),t.updateQueue!==null&&(t.flags|=4),pi(t),null);case 4:return Km(),n3(e,t),e===null&&Jv(t.stateNode.containerInfo),pi(t),null;case 10:return HR(t.type._context),pi(t),null;case 17:return xn(t.type)&&dx(),pi(t),null;case 19:if(Dt(Jt),s=t.memoizedState,s===null)return pi(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)og(s,!1);else{if(Pr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=vx(e),o!==null){for(t.flags|=128,og(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ct(Jt,Jt.current&1|2),t.child}e=e.sibling}s.tail!==null&&fr()>ey&&(t.flags|=128,i=!0,og(s,!1),t.lanes=4194304)}else{if(!i)if(e=vx(o),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),og(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Gt)return pi(t),null}else 2*fr()-s.renderingStartTime>ey&&r!==1073741824&&(t.flags|=128,i=!0,og(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=fr(),t.sibling=null,r=Jt.current,Ct(Jt,i?r&1|2:r&1),t):(pi(t),null);case 22:case 23:return lO(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?qn&1073741824&&(pi(t),t.subtreeFlags&6&&(t.flags|=8192)):pi(t),null;case 24:return null;case 25:return null}throw Error(re(156,t.tag))}function Soe(e,t){switch(UR(t),t.tag){case 1:return xn(t.type)&&dx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Km(),Dt(_n),Dt(Li),QR(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return YR(t),null;case 13:if(Dt(Jt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(re(340));Ym()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Dt(Jt),null;case 4:return Km(),null;case 10:return HR(t.type._context),null;case 22:case 23:return lO(),null;case 24:return null;default:return null}}var lb=!1,$i=!1,$oe=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Kf(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){lr(e,t,i)}else r.current=null}function s3(e,t,r){try{r()}catch(i){lr(e,t,i)}}var D4=!1;function Eoe(e,t){if(UI=ax,e=g7(),VR(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=e,m=null;t:for(;;){for(var y;f!==r||n!==0&&f.nodeType!==3||(a=o+n),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===r&&++c===n&&(a=o),m===s&&++h===i&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(BI={focusedElem:e,selectionRange:r},ax=!1,ye=t;ye!==null;)if(t=ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ye=e;else for(;ye!==null;){t=ye;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,b=t.stateNode,_=b.getSnapshotBeforeUpdate(t.elementType===t.type?v:fo(t.type,v),x);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch($){lr(t,t.return,$)}if(e=t.sibling,e!==null){e.return=t.return,ye=e;break}ye=t.return}return g=D4,D4=!1,g}function ov(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&s3(t,r,s)}n=n.next}while(n!==i)}}function p$(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function o3(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function pB(e){var t=e.alternate;t!==null&&(e.alternate=null,pB(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ha],delete t[Qv],delete t[HI],delete t[aoe],delete t[loe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fB(e){return e.tag===5||e.tag===3||e.tag===4}function F4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fB(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function a3(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=cx));else if(i!==4&&(e=e.child,e!==null))for(a3(e,t,r),e=e.sibling;e!==null;)a3(e,t,r),e=e.sibling}function l3(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(l3(e,t,r),e=e.sibling;e!==null;)l3(e,t,r),e=e.sibling}var si=null,go=!1;function Wl(e,t,r){for(r=r.child;r!==null;)mB(e,t,r),r=r.sibling}function mB(e,t,r){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(s$,r)}catch{}switch(r.tag){case 5:$i||Kf(r,t);case 6:var i=si,n=go;si=null,Wl(e,t,r),si=i,go=n,si!==null&&(go?(e=si,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):si.removeChild(r.stateNode));break;case 18:si!==null&&(go?(e=si,r=r.stateNode,e.nodeType===8?hT(e.parentNode,r):e.nodeType===1&&hT(e,r),Hv(e)):hT(si,r.stateNode));break;case 4:i=si,n=go,si=r.stateNode.containerInfo,go=!0,Wl(e,t,r),si=i,go=n;break;case 0:case 11:case 14:case 15:if(!$i&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&s3(r,t,o),n=n.next}while(n!==i)}Wl(e,t,r);break;case 1:if(!$i&&(Kf(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){lr(r,t,a)}Wl(e,t,r);break;case 21:Wl(e,t,r);break;case 22:r.mode&1?($i=(i=$i)||r.memoizedState!==null,Wl(e,t,r),$i=i):Wl(e,t,r);break;default:Wl(e,t,r)}}function j4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new $oe),t.forEach(function(i){var n=Ooe.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function zs(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:si=a.stateNode,go=!1;break e;case 3:si=a.stateNode.containerInfo,go=!0;break e;case 4:si=a.stateNode.containerInfo,go=!0;break e}a=a.return}if(si===null)throw Error(re(160));mB(s,o,n),si=null,go=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(c){lr(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yB(t,e),t=t.sibling}function yB(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zs(t,e),Do(e),i&4){try{ov(3,e,e.return),p$(3,e)}catch(v){lr(e,e.return,v)}try{ov(5,e,e.return)}catch(v){lr(e,e.return,v)}}break;case 1:zs(t,e),Do(e),i&512&&r!==null&&Kf(r,r.return);break;case 5:if(zs(t,e),Do(e),i&512&&r!==null&&Kf(r,r.return),e.flags&32){var n=e.stateNode;try{Uv(n,"")}catch(v){lr(e,e.return,v)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&FU(n,s),kI(a,o);var c=kI(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?BU(n,f):h==="dangerouslySetInnerHTML"?zU(n,f):h==="children"?Uv(n,f):MR(n,h,f,c)}switch(a){case"input":MI(n,s);break;case"textarea":jU(n,s);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?fm(n,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?fm(n,!!s.multiple,s.defaultValue,!0):fm(n,!!s.multiple,s.multiple?[]:"",!1))}n[Qv]=s}catch(v){lr(e,e.return,v)}}break;case 6:if(zs(t,e),Do(e),i&4){if(e.stateNode===null)throw Error(re(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(v){lr(e,e.return,v)}}break;case 3:if(zs(t,e),Do(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Hv(t.containerInfo)}catch(v){lr(e,e.return,v)}break;case 4:zs(t,e),Do(e);break;case 13:zs(t,e),Do(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(oO=fr())),i&4&&j4(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?($i=(c=$i)||h,zs(t,e),$i=c):zs(t,e),Do(e),i&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&e.mode&1)for(ye=e,h=e.child;h!==null;){for(f=ye=h;ye!==null;){switch(m=ye,y=m.child,m.tag){case 0:case 11:case 14:case 15:ov(4,m,m.return);break;case 1:Kf(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){i=m,r=m.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){lr(i,r,v)}}break;case 5:Kf(m,m.return);break;case 22:if(m.memoizedState!==null){z4(f);continue}}y!==null?(y.return=m,ye=y):z4(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{n=f.stateNode,c?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=UU("display",o))}catch(v){lr(e,e.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){lr(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zs(t,e),Do(e),i&4&&j4(e);break;case 21:break;default:zs(t,e),Do(e)}}function Do(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(fB(r)){var i=r;break e}r=r.return}throw Error(re(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Uv(n,""),i.flags&=-33);var s=F4(e);l3(e,s,n);break;case 3:case 4:var o=i.stateNode.containerInfo,a=F4(e);a3(e,a,o);break;default:throw Error(re(161))}}catch(l){lr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Toe(e,t,r){ye=e,gB(e)}function gB(e,t,r){for(var i=(e.mode&1)!==0;ye!==null;){var n=ye,s=n.child;if(n.tag===22&&i){var o=n.memoizedState!==null||lb;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||$i;a=lb;var c=$i;if(lb=o,($i=l)&&!c)for(ye=n;ye!==null;)o=ye,l=o.child,o.tag===22&&o.memoizedState!==null?U4(n):l!==null?(l.return=o,ye=l):U4(n);for(;s!==null;)ye=s,gB(s),s=s.sibling;ye=n,lb=a,$i=c}V4(e)}else n.subtreeFlags&8772&&s!==null?(s.return=n,ye=s):V4(e)}}function V4(e){for(;ye!==null;){var t=ye;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$i||p$(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!$i)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:fo(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&$4(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}$4(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Hv(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}$i||t.flags&512&&o3(t)}catch(m){lr(t,t.return,m)}}if(t===e){ye=null;break}if(r=t.sibling,r!==null){r.return=t.return,ye=r;break}ye=t.return}}function z4(e){for(;ye!==null;){var t=ye;if(t===e){ye=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ye=r;break}ye=t.return}}function U4(e){for(;ye!==null;){var t=ye;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{p$(4,t)}catch(l){lr(t,r,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){lr(t,n,l)}}var s=t.return;try{o3(t)}catch(l){lr(t,s,l)}break;case 5:var o=t.return;try{o3(t)}catch(l){lr(t,o,l)}}}catch(l){lr(t,t.return,l)}if(t===e){ye=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ye=a;break}ye=t.return}}var Moe=Math.ceil,_x=jl.ReactCurrentDispatcher,nO=jl.ReactCurrentOwner,Cs=jl.ReactCurrentBatchConfig,it=0,Kr=null,Sr=null,li=0,qn=0,Xf=jc(0),Pr=0,i1=null,Wh=0,f$=0,sO=0,av=null,yn=null,oO=0,ey=1/0,al=null,xx=!1,u3=null,pc=null,ub=!1,Yu=null,Sx=0,lv=0,c3=null,T_=-1,M_=0;function Zi(){return it&6?fr():T_!==-1?T_:T_=fr()}function fc(e){return e.mode&1?it&2&&li!==0?li&-li:coe.transition!==null?(M_===0&&(M_=t7()),M_):(e=wt,e!==0||(e=window.event,e=e===void 0?16:l7(e.type)),e):1}function Io(e,t,r,i){if(50<lv)throw lv=0,c3=null,Error(re(185));Q1(e,r,i),(!(it&2)||e!==Kr)&&(e===Kr&&(!(it&2)&&(f$|=r),Pr===4&&qu(e,li)),Sn(e,i),r===1&&it===0&&!(t.mode&1)&&(ey=fr()+500,c$&&Vc()))}function Sn(e,t){var r=e.callbackNode;cse(e,t);var i=ox(e,e===Kr?li:0);if(i===0)r!==null&&Q5(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&Q5(r),t===1)e.tag===0?uoe(B4.bind(null,e)):M7(B4.bind(null,e)),soe(function(){!(it&6)&&Vc()}),r=null;else{switch(r7(i)){case 1:r=kR;break;case 4:r=XU;break;case 16:r=sx;break;case 536870912:r=e7;break;default:r=sx}r=EB(r,vB.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function vB(e,t){if(T_=-1,M_=0,it&6)throw Error(re(327));var r=e.callbackNode;if(wm()&&e.callbackNode!==r)return null;var i=ox(e,e===Kr?li:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=$x(e,i);else{t=i;var n=it;it|=2;var s=bB();(Kr!==e||li!==t)&&(al=null,ey=fr()+500,kh(e,t));do try{Loe();break}catch(a){wB(e,a)}while(1);qR(),_x.current=s,it=n,Sr!==null?t=0:(Kr=null,li=0,t=Pr)}if(t!==0){if(t===2&&(n=DI(e),n!==0&&(i=n,t=d3(e,n))),t===1)throw r=i1,kh(e,0),qu(e,i),Sn(e,fr()),r;if(t===6)qu(e,i);else{if(n=e.current.alternate,!(i&30)&&!Ioe(n)&&(t=$x(e,i),t===2&&(s=DI(e),s!==0&&(i=s,t=d3(e,s))),t===1))throw r=i1,kh(e,0),qu(e,i),Sn(e,fr()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(re(345));case 2:pd(e,yn,al);break;case 3:if(qu(e,i),(i&130023424)===i&&(t=oO+500-fr(),10<t)){if(ox(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){Zi(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=qI(pd.bind(null,e,yn,al),t);break}pd(e,yn,al);break;case 4:if(qu(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var o=31-Mo(i);s=1<<o,o=t[o],o>n&&(n=o),i&=~s}if(i=n,i=fr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Moe(i/1960))-i,10<i){e.timeoutHandle=qI(pd.bind(null,e,yn,al),i);break}pd(e,yn,al);break;case 5:pd(e,yn,al);break;default:throw Error(re(329))}}}return Sn(e,fr()),e.callbackNode===r?vB.bind(null,e):null}function d3(e,t){var r=av;return e.current.memoizedState.isDehydrated&&(kh(e,t).flags|=256),e=$x(e,t),e!==2&&(t=yn,yn=r,t!==null&&h3(t)),e}function h3(e){yn===null?yn=e:yn.push.apply(yn,e)}function Ioe(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!Ro(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qu(e,t){for(t&=~sO,t&=~f$,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Mo(t),i=1<<r;e[r]=-1,t&=~i}}function B4(e){if(it&6)throw Error(re(327));wm();var t=ox(e,0);if(!(t&1))return Sn(e,fr()),null;var r=$x(e,t);if(e.tag!==0&&r===2){var i=DI(e);i!==0&&(t=i,r=d3(e,i))}if(r===1)throw r=i1,kh(e,0),qu(e,t),Sn(e,fr()),r;if(r===6)throw Error(re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pd(e,yn,al),Sn(e,fr()),null}function aO(e,t){var r=it;it|=1;try{return e(t)}finally{it=r,it===0&&(ey=fr()+500,c$&&Vc())}}function Zh(e){Yu!==null&&Yu.tag===0&&!(it&6)&&wm();var t=it;it|=1;var r=Cs.transition,i=wt;try{if(Cs.transition=null,wt=1,e)return e()}finally{wt=i,Cs.transition=r,it=t,!(it&6)&&Vc()}}function lO(){qn=Xf.current,Dt(Xf)}function kh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,noe(r)),Sr!==null)for(r=Sr.return;r!==null;){var i=r;switch(UR(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&dx();break;case 3:Km(),Dt(_n),Dt(Li),QR();break;case 5:YR(i);break;case 4:Km();break;case 13:Dt(Jt);break;case 19:Dt(Jt);break;case 10:HR(i.type._context);break;case 22:case 23:lO()}r=r.return}if(Kr=e,Sr=e=mc(e.current,null),li=qn=t,Pr=0,i1=null,sO=f$=Wh=0,yn=av=null,bh!==null){for(t=0;t<bh.length;t++)if(r=bh[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var o=s.next;s.next=n,i.next=o}r.pending=i}bh=null}return e}function wB(e,t){do{var r=Sr;try{if(qR(),S_.current=bx,wx){for(var i=Yt.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}wx=!1}if(Hh=0,Wr=Or=Yt=null,sv=!1,e1=0,nO.current=null,r===null||r.return===null){Pr=1,i1=t,Sr=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=li,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=L4(o);if(y!==null){y.flags&=-257,A4(y,o,a,s,t),y.mode&1&&C4(s,c,t),t=y,l=c;var g=t.updateQueue;if(g===null){var v=new Set;v.add(l),t.updateQueue=v}else g.add(l);break e}else{if(!(t&1)){C4(s,c,t),uO();break e}l=Error(re(426))}}else if(Gt&&a.mode&1){var x=L4(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),A4(x,o,a,s,t),BR(Xm(l,a));break e}}s=l=Xm(l,a),Pr!==4&&(Pr=2),av===null?av=[s]:av.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=rB(s,l,t);S4(s,b);break e;case 1:a=l;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(pc===null||!pc.has(S)))){s.flags|=65536,t&=-t,s.lanes|=t;var $=iB(s,a,t);S4(s,$);break e}}s=s.return}while(s!==null)}xB(r)}catch(M){t=M,Sr===r&&r!==null&&(Sr=r=r.return);continue}break}while(1)}function bB(){var e=_x.current;return _x.current=bx,e===null?bx:e}function uO(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),Kr===null||!(Wh&268435455)&&!(f$&268435455)||qu(Kr,li)}function $x(e,t){var r=it;it|=2;var i=bB();(Kr!==e||li!==t)&&(al=null,kh(e,t));do try{Coe();break}catch(n){wB(e,n)}while(1);if(qR(),it=r,_x.current=i,Sr!==null)throw Error(re(261));return Kr=null,li=0,Pr}function Coe(){for(;Sr!==null;)_B(Sr)}function Loe(){for(;Sr!==null&&!tse();)_B(Sr)}function _B(e){var t=$B(e.alternate,e,qn);e.memoizedProps=e.pendingProps,t===null?xB(e):Sr=t,nO.current=null}function xB(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Soe(r,t),r!==null){r.flags&=32767,Sr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pr=6,Sr=null;return}}else if(r=xoe(r,t,qn),r!==null){Sr=r;return}if(t=t.sibling,t!==null){Sr=t;return}Sr=t=e}while(t!==null);Pr===0&&(Pr=5)}function pd(e,t,r){var i=wt,n=Cs.transition;try{Cs.transition=null,wt=1,Aoe(e,t,r,i)}finally{Cs.transition=n,wt=i}return null}function Aoe(e,t,r,i){do wm();while(Yu!==null);if(it&6)throw Error(re(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(dse(e,s),e===Kr&&(Sr=Kr=null,li=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ub||(ub=!0,EB(sx,function(){return wm(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Cs.transition,Cs.transition=null;var o=wt;wt=1;var a=it;it|=4,nO.current=null,Eoe(e,r),yB(r,e),Qse(BI),ax=!!UI,BI=UI=null,e.current=r,Toe(r),rse(),it=a,wt=o,Cs.transition=s}else e.current=r;if(ub&&(ub=!1,Yu=e,Sx=n),s=e.pendingLanes,s===0&&(pc=null),sse(r.stateNode),Sn(e,fr()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(xx)throw xx=!1,e=u3,u3=null,e;return Sx&1&&e.tag!==0&&wm(),s=e.pendingLanes,s&1?e===c3?lv++:(lv=0,c3=e):lv=0,Vc(),null}function wm(){if(Yu!==null){var e=r7(Sx),t=Cs.transition,r=wt;try{if(Cs.transition=null,wt=16>e?16:e,Yu===null)var i=!1;else{if(e=Yu,Yu=null,Sx=0,it&6)throw Error(re(331));var n=it;for(it|=4,ye=e.current;ye!==null;){var s=ye,o=s.child;if(ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ye=c;ye!==null;){var h=ye;switch(h.tag){case 0:case 11:case 15:ov(8,h,s)}var f=h.child;if(f!==null)f.return=h,ye=f;else for(;ye!==null;){h=ye;var m=h.sibling,y=h.return;if(pB(h),h===c){ye=null;break}if(m!==null){m.return=y,ye=m;break}ye=y}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ov(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,ye=b;break e}ye=s.return}}var _=e.current;for(ye=_;ye!==null;){o=ye;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ye=S;else e:for(o=_;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:p$(9,a)}}catch(M){lr(a,a.return,M)}if(a===o){ye=null;break e}var $=a.sibling;if($!==null){$.return=a.return,ye=$;break e}ye=a.return}}if(it=n,Vc(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(s$,e)}catch{}i=!0}return i}finally{wt=r,Cs.transition=t}}return!1}function G4(e,t,r){t=Xm(r,t),t=rB(e,t,1),e=hc(e,t,1),t=Zi(),e!==null&&(Q1(e,1,t),Sn(e,t))}function lr(e,t,r){if(e.tag===3)G4(e,e,r);else for(;t!==null;){if(t.tag===3){G4(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(pc===null||!pc.has(i))){e=Xm(r,e),e=iB(t,e,1),t=hc(t,e,1),e=Zi(),t!==null&&(Q1(t,1,e),Sn(t,e));break}}t=t.return}}function koe(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Zi(),e.pingedLanes|=e.suspendedLanes&r,Kr===e&&(li&r)===r&&(Pr===4||Pr===3&&(li&130023424)===li&&500>fr()-oO?kh(e,0):sO|=r),Sn(e,t)}function SB(e,t){t===0&&(e.mode&1?(t=Xw,Xw<<=1,!(Xw&130023424)&&(Xw=4194304)):t=1);var r=Zi();e=Ol(e,t),e!==null&&(Q1(e,t,r),Sn(e,r))}function Roe(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),SB(e,r)}function Ooe(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(re(314))}i!==null&&i.delete(t),SB(e,r)}var $B;$B=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||_n.current)wn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return wn=!1,_oe(e,t,r);wn=!!(e.flags&131072)}else wn=!1,Gt&&t.flags&1048576&&I7(t,fx,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;E_(e,t),e=t.pendingProps;var n=Jm(t,Li.current);vm(t,r),n=XR(null,t,i,e,n,r);var s=eO();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xn(i)?(s=!0,hx(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,ZR(t),n.updater=h$,t.stateNode=n,n._reactInternals=t,KI(t,i,e,r),t=t3(null,t,i,!0,s,r)):(t.tag=0,Gt&&s&&zR(t),Bi(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(E_(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=Poe(i),e=fo(i,e),n){case 0:t=e3(null,t,i,e,r);break e;case 1:t=O4(null,t,i,e,r);break e;case 11:t=k4(null,t,i,e,r);break e;case 14:t=R4(null,t,i,fo(i.type,e),r);break e}throw Error(re(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:fo(i,n),e3(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:fo(i,n),O4(e,t,i,n,r);case 3:e:{if(aB(t),e===null)throw Error(re(387));i=t.pendingProps,s=t.memoizedState,n=s.element,O7(e,t),gx(t,i,null,r);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Xm(Error(re(423)),t),t=N4(e,t,i,r,n);break e}else if(i!==n){n=Xm(Error(re(424)),t),t=N4(e,t,i,r,n);break e}else for(Hn=dc(t.stateNode.containerInfo.firstChild),Zn=t,Gt=!0,bo=null,r=k7(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ym(),i===n){t=Nl(e,t,r);break e}Bi(e,t,i,r)}t=t.child}return t;case 5:return N7(t),e===null&&JI(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,o=n.children,GI(i,n)?o=null:s!==null&&GI(i,s)&&(t.flags|=32),oB(e,t),Bi(e,t,o,r),t.child;case 6:return e===null&&JI(t),null;case 13:return lB(e,t,r);case 4:return JR(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Qm(t,null,i,r):Bi(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:fo(i,n),k4(e,t,i,n,r);case 7:return Bi(e,t,t.pendingProps,r),t.child;case 8:return Bi(e,t,t.pendingProps.children,r),t.child;case 12:return Bi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value,Ct(mx,i._currentValue),i._currentValue=o,s!==null)if(Ro(s.value,o)){if(s.children===n.children&&!_n.current){t=Nl(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=El(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),YI(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(re(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),YI(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bi(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,vm(t,r),n=ks(n),i=i(n),t.flags|=1,Bi(e,t,i,r),t.child;case 14:return i=t.type,n=fo(i,t.pendingProps),n=fo(i.type,n),R4(e,t,i,n,r);case 15:return nB(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:fo(i,n),E_(e,t),t.tag=1,xn(i)?(e=!0,hx(t)):e=!1,vm(t,r),tB(t,i,n),KI(t,i,n,r),t3(null,t,i,!0,e,r);case 19:return uB(e,t,r);case 22:return sB(e,t,r)}throw Error(re(156,t.tag))};function EB(e,t){return KU(e,t)}function Noe(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(e,t,r,i){return new Noe(e,t,r,i)}function cO(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Poe(e){if(typeof e=="function")return cO(e)?1:0;if(e!=null){if(e=e.$$typeof,e===CR)return 11;if(e===LR)return 14}return 2}function mc(e,t){var r=e.alternate;return r===null?(r=Ts(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function I_(e,t,r,i,n,s){var o=2;if(i=e,typeof e=="function")cO(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Bf:return Rh(r.children,n,s,t);case IR:o=8,n|=8;break;case xI:return e=Ts(12,r,t,n|2),e.elementType=xI,e.lanes=s,e;case SI:return e=Ts(13,r,t,n),e.elementType=SI,e.lanes=s,e;case $I:return e=Ts(19,r,t,n),e.elementType=$I,e.lanes=s,e;case NU:return m$(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case RU:o=10;break e;case OU:o=9;break e;case CR:o=11;break e;case LR:o=14;break e;case Ou:o=16,i=null;break e}throw Error(re(130,e==null?e:typeof e,""))}return t=Ts(o,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function Rh(e,t,r,i){return e=Ts(7,e,i,t),e.lanes=r,e}function m$(e,t,r,i){return e=Ts(22,e,i,t),e.elementType=NU,e.lanes=r,e.stateNode={isHidden:!1},e}function bT(e,t,r){return e=Ts(6,e,null,t),e.lanes=r,e}function _T(e,t,r){return t=Ts(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Doe(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tT(0),this.expirationTimes=tT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tT(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function dO(e,t,r,i,n,s,o,a,l){return e=new Doe(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ts(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ZR(s),e}function Foe(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uf,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function TB(e){if(!e)return $c;e=e._reactInternals;e:{if(cp(e)!==e||e.tag!==1)throw Error(re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(re(171))}if(e.tag===1){var r=e.type;if(xn(r))return T7(e,r,t)}return t}function MB(e,t,r,i,n,s,o,a,l){return e=dO(r,i,!0,e,n,s,o,a,l),e.context=TB(null),r=e.current,i=Zi(),n=fc(r),s=El(i,n),s.callback=t??null,hc(r,s,n),e.current.lanes=n,Q1(e,n,i),Sn(e,i),e}function y$(e,t,r,i){var n=t.current,s=Zi(),o=fc(n);return r=TB(r),t.context===null?t.context=r:t.pendingContext=r,t=El(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=hc(n,t,o),e!==null&&(Io(e,n,o,s),x_(e,n,o)),o}function Ex(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function q4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function hO(e,t){q4(e,t),(e=e.alternate)&&q4(e,t)}function joe(){return null}var IB=typeof reportError=="function"?reportError:function(e){console.error(e)};function pO(e){this._internalRoot=e}g$.prototype.render=pO.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(re(409));y$(e,t,null,null)};g$.prototype.unmount=pO.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zh(function(){y$(null,e,null,null)}),t[Rl]=null}};function g$(e){this._internalRoot=e}g$.prototype.unstable_scheduleHydration=function(e){if(e){var t=s7();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Gu.length&&t!==0&&t<Gu[r].priority;r++);Gu.splice(r,0,e),r===0&&a7(e)}};function fO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function v$(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function H4(){}function Voe(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var c=Ex(o);s.call(c)}}var o=MB(t,i,e,0,null,!1,!1,"",H4);return e._reactRootContainer=o,e[Rl]=o.current,Jv(e.nodeType===8?e.parentNode:e),Zh(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var c=Ex(l);a.call(c)}}var l=dO(e,0,!1,null,null,!1,!1,"",H4);return e._reactRootContainer=l,e[Rl]=l.current,Jv(e.nodeType===8?e.parentNode:e),Zh(function(){y$(t,l,r,i)}),l}function w$(e,t,r,i,n){var s=r._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=Ex(o);a.call(l)}}y$(t,o,e,n)}else o=Voe(r,t,e,n,i);return Ex(o)}i7=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=jg(t.pendingLanes);r!==0&&(RR(t,r|1),Sn(t,fr()),!(it&6)&&(ey=fr()+500,Vc()))}break;case 13:Zh(function(){var i=Ol(e,1);if(i!==null){var n=Zi();Io(i,e,1,n)}}),hO(e,1)}};OR=function(e){if(e.tag===13){var t=Ol(e,134217728);if(t!==null){var r=Zi();Io(t,e,134217728,r)}hO(e,134217728)}};n7=function(e){if(e.tag===13){var t=fc(e),r=Ol(e,t);if(r!==null){var i=Zi();Io(r,e,t,i)}hO(e,t)}};s7=function(){return wt};o7=function(e,t){var r=wt;try{return wt=e,t()}finally{wt=r}};OI=function(e,t,r){switch(t){case"input":if(MI(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=u$(i);if(!n)throw Error(re(90));DU(i),MI(i,n)}}}break;case"textarea":jU(e,r);break;case"select":t=r.value,t!=null&&fm(e,!!r.multiple,t,!1)}};HU=aO;WU=Zh;var zoe={usingClientEntryPoint:!1,Events:[X1,Wf,u$,GU,qU,aO]},ag={findFiberByHostInstance:wh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Uoe={bundleType:ag.bundleType,version:ag.version,rendererPackageName:ag.rendererPackageName,rendererConfig:ag.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=YU(e),e===null?null:e.stateNode},findFiberByHostInstance:ag.findFiberByHostInstance||joe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cb.isDisabled&&cb.supportsFiber)try{s$=cb.inject(Uoe),fa=cb}catch{}}ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zoe;ts.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fO(t))throw Error(re(200));return Foe(e,t,null,r)};ts.createRoot=function(e,t){if(!fO(e))throw Error(re(299));var r=!1,i="",n=IB;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=dO(e,1,!1,null,null,r,!1,i,n),e[Rl]=t.current,Jv(e.nodeType===8?e.parentNode:e),new pO(t)};ts.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(re(188)):(e=Object.keys(e).join(","),Error(re(268,e)));return e=YU(t),e=e===null?null:e.stateNode,e};ts.flushSync=function(e){return Zh(e)};ts.hydrate=function(e,t,r){if(!v$(t))throw Error(re(200));return w$(null,e,t,!0,r)};ts.hydrateRoot=function(e,t,r){if(!fO(e))throw Error(re(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",o=IB;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=MB(t,null,e,1,r??null,n,!1,s,o),e[Rl]=t.current,Jv(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new g$(t)};ts.render=function(e,t,r){if(!v$(t))throw Error(re(200));return w$(null,e,t,!1,r)};ts.unmountComponentAtNode=function(e){if(!v$(e))throw Error(re(40));return e._reactRootContainer?(Zh(function(){w$(null,null,e,!1,function(){e._reactRootContainer=null,e[Rl]=null})}),!0):!1};ts.unstable_batchedUpdates=aO;ts.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!v$(r))throw Error(re(200));if(e==null||e._reactInternals===void 0)throw Error(re(38));return w$(e,t,r,!1,i)};ts.version="18.3.1-next-f1338f8080-20240426";function CB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CB)}catch(e){console.error(e)}}CB(),CU.exports=ts;var Boe=CU.exports,LB,W4=Boe;LB=W4.createRoot,W4.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n1.apply(this,arguments)}var Qu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qu||(Qu={}));const Z4="popstate";function Goe(e){e===void 0&&(e={});function t(i,n){let{pathname:s,search:o,hash:a}=i.location;return p3("",{pathname:s,search:o,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(i,n){return typeof n=="string"?n:Tx(n)}return Hoe(t,r,null,e)}function cr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function AB(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function qoe(){return Math.random().toString(36).substr(2,8)}function J4(e,t){return{usr:e.state,key:e.key,idx:t}}function p3(e,t,r,i){return r===void 0&&(r=null),n1({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ly(t):t,{state:r,key:t&&t.key||i||qoe()})}function Tx(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Ly(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Hoe(e,t,r,i){i===void 0&&(i={});let{window:n=document.defaultView,v5Compat:s=!1}=i,o=n.history,a=Qu.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(n1({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Qu.Pop;let x=h(),b=x==null?null:x-c;c=x,l&&l({action:a,location:v.location,delta:b})}function m(x,b){a=Qu.Push;let _=p3(v.location,x,b);r&&r(_,x),c=h()+1;let S=J4(_,c),$=v.createHref(_);try{o.pushState(S,"",$)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;n.location.assign($)}s&&l&&l({action:a,location:v.location,delta:1})}function y(x,b){a=Qu.Replace;let _=p3(v.location,x,b);r&&r(_,x),c=h();let S=J4(_,c),$=v.createHref(_);o.replaceState(S,"",$),s&&l&&l({action:a,location:v.location,delta:0})}function g(x){let b=n.location.origin!=="null"?n.location.origin:n.location.href,_=typeof x=="string"?x:Tx(x);return _=_.replace(/ $/,"%20"),cr(b,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,b)}let v={get action(){return a},get location(){return e(n,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(Z4,f),l=x,()=>{n.removeEventListener(Z4,f),l=null}},createHref(x){return t(n,x)},createURL:g,encodeLocation(x){let b=g(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:y,go(x){return o.go(x)}};return v}var Y4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Y4||(Y4={}));function Woe(e,t,r){return r===void 0&&(r="/"),Zoe(e,t,r,!1)}function Zoe(e,t,r,i){let n=typeof t=="string"?Ly(t):t,s=ty(n.pathname||"/",r);if(s==null)return null;let o=kB(e);Joe(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=oae(s);a=nae(o[l],c,i)}return a}function kB(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let n=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(cr(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=yc([i,l.relativePath]),h=r.concat(l);s.children&&s.children.length>0&&(cr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),kB(s.children,t,h,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:rae(c,s.index),routesMeta:h})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))n(s,o);else for(let l of RB(s.path))n(s,o,l)}),t}function RB(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,n=r.endsWith("?"),s=r.replace(/\?$/,"");if(i.length===0)return n?[s,""]:[s];let o=RB(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),n&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function Joe(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:iae(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const Yoe=/^:[\w-]+$/,Qoe=3,Koe=2,Xoe=1,eae=10,tae=-2,Q4=e=>e==="*";function rae(e,t){let r=e.split("/"),i=r.length;return r.some(Q4)&&(i+=tae),t&&(i+=Koe),r.filter(n=>!Q4(n)).reduce((n,s)=>n+(Yoe.test(s)?Qoe:s===""?Xoe:eae),i)}function iae(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function nae(e,t,r){r===void 0&&(r=!1);let{routesMeta:i}=e,n={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?t:t.slice(s.length)||"/",f=Mx({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!f&&c&&r&&!i[i.length-1].route.index&&(f=Mx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:yc([s,f.pathname]),pathnameBase:cae(yc([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=yc([s,f.pathnameBase]))}return o}function Mx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=sae(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let s=n[0],o=s.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:i.reduce((c,h,f)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let v=a[f]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[f];return y&&!g?c[m]=void 0:c[m]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:e}}function sae(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),AB(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function oae(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return AB(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ty(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function aae(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:n=""}=typeof e=="string"?Ly(e):e;return{pathname:r?r.startsWith("/")?r:lae(r,t):t,search:dae(i),hash:hae(n)}}function lae(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function xT(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uae(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function OB(e,t){let r=uae(e);return t?r.map((i,n)=>n===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function NB(e,t,r,i){i===void 0&&(i=!1);let n;typeof e=="string"?n=Ly(e):(n=n1({},e),cr(!n.pathname||!n.pathname.includes("?"),xT("?","pathname","search",n)),cr(!n.pathname||!n.pathname.includes("#"),xT("#","pathname","hash",n)),cr(!n.search||!n.search.includes("#"),xT("#","search","hash",n)));let s=e===""||n.pathname==="",o=s?"/":n.pathname,a;if(o==null)a=r;else{let f=t.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;n.pathname=m.join("/")}a=f>=0?t[f]:"/"}let l=aae(n,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const yc=e=>e.join("/").replace(/\/\/+/g,"/"),cae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dae=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hae=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function pae(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const PB=["post","put","patch","delete"];new Set(PB);const fae=["get",...PB];new Set(fae);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},s1.apply(this,arguments)}const b$=H.createContext(null),DB=H.createContext(null),zc=H.createContext(null),_$=H.createContext(null),dp=H.createContext({outlet:null,matches:[],isDataRoute:!1}),FB=H.createContext(null);function mae(e,t){let{relative:r}=t===void 0?{}:t;tw()||cr(!1);let{basename:i,navigator:n}=H.useContext(zc),{hash:s,pathname:o,search:a}=x$(e,{relative:r}),l=o;return i!=="/"&&(l=o==="/"?i:yc([i,o])),n.createHref({pathname:l,search:a,hash:s})}function tw(){return H.useContext(_$)!=null}function rw(){return tw()||cr(!1),H.useContext(_$).location}function jB(e){H.useContext(zc).static||H.useLayoutEffect(e)}function yae(){let{isDataRoute:e}=H.useContext(dp);return e?Cae():gae()}function gae(){tw()||cr(!1);let e=H.useContext(b$),{basename:t,future:r,navigator:i}=H.useContext(zc),{matches:n}=H.useContext(dp),{pathname:s}=rw(),o=JSON.stringify(OB(n,r.v7_relativeSplatPath)),a=H.useRef(!1);return jB(()=>{a.current=!0}),H.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=NB(c,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:yc([t,f.pathname])),(h.replace?i.replace:i.push)(f,h.state,h)},[t,i,o,s,e])}function x$(e,t){let{relative:r}=t===void 0?{}:t,{future:i}=H.useContext(zc),{matches:n}=H.useContext(dp),{pathname:s}=rw(),o=JSON.stringify(OB(n,i.v7_relativeSplatPath));return H.useMemo(()=>NB(e,JSON.parse(o),s,r==="path"),[e,o,s,r])}function vae(e,t){return wae(e,t)}function wae(e,t,r,i){tw()||cr(!1);let{navigator:n}=H.useContext(zc),{matches:s}=H.useContext(dp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=rw(),h;if(t){var f;let x=typeof t=="string"?Ly(t):t;l==="/"||(f=x.pathname)!=null&&f.startsWith(l)||cr(!1),h=x}else h=c;let m=h.pathname||"/",y=m;if(l!=="/"){let x=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=Woe(e,{pathname:y}),v=$ae(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:yc([l,n.encodeLocation?n.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:yc([l,n.encodeLocation?n.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,r,i);return t&&v?H.createElement(_$.Provider,{value:{location:s1({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Qu.Pop}},v):v}function bae(){let e=Iae(),t=pae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),r?H.createElement("pre",{style:n},r):null,s)}const _ae=H.createElement(bae,null);class xae extends H.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?H.createElement(dp.Provider,{value:this.props.routeContext},H.createElement(FB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Sae(e){let{routeContext:t,match:r,children:i}=e,n=H.useContext(b$);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),H.createElement(dp.Provider,{value:t},i)}function $ae(e,t,r,i){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),i===void 0&&(i=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=i)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,a=(n=r)==null?void 0:n.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||cr(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:y}=r,g=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let y,g=!1,v=null,x=null;r&&(y=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||_ae,l&&(c<0&&m===0?(Lae("route-fallback",!1),g=!0,x=null):c===m&&(g=!0,x=f.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,m+1)),_=()=>{let S;return y?S=v:g?S=x:f.route.Component?S=H.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,H.createElement(Sae,{match:f,routeContext:{outlet:h,matches:b,isDataRoute:r!=null},children:S})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?H.createElement(xae,{location:r.location,revalidation:r.revalidation,component:v,error:y,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):_()},null)}var VB=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(VB||{}),Ix=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ix||{});function Eae(e){let t=H.useContext(b$);return t||cr(!1),t}function Tae(e){let t=H.useContext(DB);return t||cr(!1),t}function Mae(e){let t=H.useContext(dp);return t||cr(!1),t}function zB(e){let t=Mae(),r=t.matches[t.matches.length-1];return r.route.id||cr(!1),r.route.id}function Iae(){var e;let t=H.useContext(FB),r=Tae(Ix.UseRouteError),i=zB(Ix.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[i]}function Cae(){let{router:e}=Eae(VB.UseNavigateStable),t=zB(Ix.UseNavigateStable),r=H.useRef(!1);return jB(()=>{r.current=!0}),H.useCallback(function(n,s){s===void 0&&(s={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,s1({fromRouteId:t},s)))},[e,t])}const K4={};function Lae(e,t,r){!t&&!K4[e]&&(K4[e]=!0)}function Aae(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function C_(e){cr(!1)}function kae(e){let{basename:t="/",children:r=null,location:i,navigationType:n=Qu.Pop,navigator:s,static:o=!1,future:a}=e;tw()&&cr(!1);let l=t.replace(/^\/*/,"/"),c=H.useMemo(()=>({basename:l,navigator:s,static:o,future:s1({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Ly(i));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:g="default"}=i,v=H.useMemo(()=>{let x=ty(h,l);return x==null?null:{location:{pathname:x,search:f,hash:m,state:y,key:g},navigationType:n}},[l,h,f,m,y,g,n]);return v==null?null:H.createElement(zc.Provider,{value:c},H.createElement(_$.Provider,{children:r,value:v}))}function Rae(e){let{children:t,location:r}=e;return vae(f3(t),r)}new Promise(()=>{});function f3(e,t){t===void 0&&(t=[]);let r=[];return H.Children.forEach(e,(i,n)=>{if(!H.isValidElement(i))return;let s=[...t,n];if(i.type===H.Fragment){r.push.apply(r,f3(i.props.children,s));return}i.type!==C_&&cr(!1),!i.props.index||!i.props.children||cr(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=f3(i.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cx(){return Cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Cx.apply(this,arguments)}function UB(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,s;for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function Oae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Nae(e,t){return e.button===0&&(!t||t==="_self")&&!Oae(e)}const Pae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Dae=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Fae="6";try{window.__reactRouterVersion=Fae}catch{}const jae=H.createContext({isTransitioning:!1}),Vae="startTransition",X4=kne[Vae];function zae(e){let{basename:t,children:r,future:i,window:n}=e,s=H.useRef();s.current==null&&(s.current=Goe({window:n,v5Compat:!0}));let o=s.current,[a,l]=H.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=H.useCallback(f=>{c&&X4?X4(()=>l(f)):l(f)},[l,c]);return H.useLayoutEffect(()=>o.listen(h),[o,h]),H.useEffect(()=>Aae(i),[i]),H.createElement(kae,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:o,future:i})}const Uae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gae=H.forwardRef(function(t,r){let{onClick:i,relative:n,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=t,m=UB(t,Pae),{basename:y}=H.useContext(zc),g,v=!1;if(typeof c=="string"&&Bae.test(c)&&(g=c,Uae))try{let S=new URL(window.location.href),$=c.startsWith("//")?new URL(S.protocol+c):new URL(c),M=ty($.pathname,y);$.origin===S.origin&&M!=null?c=M+$.search+$.hash:v=!0}catch{}let x=mae(c,{relative:n}),b=Hae(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:n,viewTransition:f});function _(S){i&&i(S),S.defaultPrevented||b(S)}return H.createElement("a",Cx({},m,{href:g||x,onClick:v||s?i:_,ref:r,target:l}))}),Mp=H.forwardRef(function(t,r){let{"aria-current":i="page",caseSensitive:n=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=t,f=UB(t,Dae),m=x$(l,{relative:f.relative}),y=rw(),g=H.useContext(DB),{navigator:v,basename:x}=H.useContext(zc),b=g!=null&&Wae(m)&&c===!0,_=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,S=y.pathname,$=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(S=S.toLowerCase(),$=$?$.toLowerCase():null,_=_.toLowerCase()),$&&x&&($=ty($,x)||$);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let I=S===_||!o&&S.startsWith(_)&&S.charAt(M)==="/",C=$!=null&&($===_||!o&&$.startsWith(_)&&$.charAt(_.length)==="/"),L={isActive:I,isPending:C,isTransitioning:b},V=I?i:void 0,P;typeof s=="function"?P=s(L):P=[s,I?"active":null,C?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let z=typeof a=="function"?a(L):a;return H.createElement(Gae,Cx({},f,{"aria-current":V,className:P,ref:r,style:z,to:l,viewTransition:c}),typeof h=="function"?h(L):h)});var m3;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(m3||(m3={}));var eD;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(eD||(eD={}));function qae(e){let t=H.useContext(b$);return t||cr(!1),t}function Hae(e,t){let{target:r,replace:i,state:n,preventScrollReset:s,relative:o,viewTransition:a}=t===void 0?{}:t,l=yae(),c=rw(),h=x$(e,{relative:o});return H.useCallback(f=>{if(Nae(f,r)){f.preventDefault();let m=i!==void 0?i:Tx(c)===Tx(h);l(e,{replace:m,state:n,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,n,r,e,s,o,a])}function Wae(e,t){t===void 0&&(t={});let r=H.useContext(jae);r==null&&cr(!1);let{basename:i}=qae(m3.useViewTransitionState),n=x$(e,{relative:t.relative});if(!r.isTransitioning)return!1;let s=ty(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=ty(r.nextLocation.pathname,i)||r.nextLocation.pathname;return Mx(n.pathname,o)!=null||Mx(n.pathname,s)!=null}var Zae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Jae=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ct=(e,t)=>{const r=H.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},c)=>H.createElement("svg",{ref:c,...Zae,width:n,height:n,stroke:i,strokeWidth:o?Number(s)*24/Number(n):s,className:`lucide lucide-${Jae(e)}`,...l},[...t.map(([h,f])=>H.createElement(h,f)),...(Array.isArray(a)?a:[a])||[]]));return r.displayName=`${e}`,r},Yae=ct("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["line",{x1:"12",x2:"12",y1:"9",y2:"13",key:"1gkch0"}],["line",{x1:"12",x2:"12.01",y1:"17",y2:"17",key:"io3f8k"}]]),Qae=ct("ArrowRight",[["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}],["polyline",{points:"12 5 19 12 12 19",key:"sfr3i6"}]]),y3=ct("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),tD=ct("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Lx=ct("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Kae=ct("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),ST=ct("ChevronDown",[["polyline",{points:"6 9 12 15 18 9",key:"1do0m2"}]]),$T=ct("ChevronRight",[["polyline",{points:"9 18 15 12 9 6",key:"1rtp27"}]]),Xae=ct("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),pa=ct("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]),ele=ct("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),tle=ct("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),o1=ct("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),g3=ct("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),ry=ct("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),rle=ct("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),ile=ct("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),ET=ct("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),Tl=ct("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),uv=ct("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),nle=ct("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),BB=ct("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),sle=ct("Plus",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]),ole=ct("Ruler",[["path",{d:"M21.3 8.7 8.7 21.3c-1 1-2.5 1-3.4 0l-2.6-2.6c-1-1-1-2.5 0-3.4L15.3 2.7c1-1 2.5-1 3.4 0l2.6 2.6c1 1 1 2.5 0 3.4Z",key:"14xb44"}],["path",{d:"m7.5 10.5 2 2",key:"3h1c69"}],["path",{d:"m10.5 7.5 2 2",key:"1lvsmz"}],["path",{d:"m13.5 4.5 2 2",key:"1i616n"}],["path",{d:"m4.5 13.5 2 2",key:"16iojn"}]]),ale=ct("Satellite",[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]]),Pu=ct("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),lle=ct("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),a1=ct("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ule=ct("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),cle=ct("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ax=ct("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),S$=ct("X",[["line",{x1:"18",x2:"6",y1:"6",y2:"18",key:"15jfxm"}],["line",{x1:"6",x2:"18",y1:"6",y2:"18",key:"d1lma3"}]]),dle=({children:e})=>{const[t,r]=H.useState(!1);return w.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",dir:"rtl",children:[w.jsxs("header",{className:"bg-white shadow-sm",children:[w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"flex justify-between h-16",children:[w.jsx("div",{className:"flex items-center",children:w.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[w.jsx(uv,{className:"h-8 w-8 text-blue-600"}),w.jsx("span",{className:"mr-2 text-xl font-bold text-blue-800",children:"نظام المعلومات الجغرافية السوري"})]})}),w.jsxs("nav",{className:"hidden md:flex md:space-x-8 md:space-x-reverse",children:[w.jsxs(Mp,{to:"/",className:({isActive:i})=>`flex items-center space-x-2 space-x-reverse px-3 py-2 rounded-md ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[w.jsx(uv,{size:18}),w.jsx("span",{children:"الخريطة"})]}),w.jsxs(Mp,{to:"/water-analysis",className:({isActive:i})=>`flex items-center space-x-2 space-x-reverse px-3 py-2 rounded-md ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[w.jsx(y3,{size:18}),w.jsx("span",{children:"تحليل المسطحات المائية"})]}),w.jsxs(Mp,{to:"/about",className:({isActive:i})=>`flex items-center space-x-2 space-x-reverse px-3 py-2 rounded-md ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[w.jsx(ry,{size:18}),w.jsx("span",{children:"حول النظام"})]})]}),w.jsx("div",{className:"flex items-center md:hidden",children:w.jsx("button",{onClick:()=>r(!t),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none",children:t?w.jsx(S$,{className:"block h-6 w-6","aria-hidden":"true"}):w.jsx(nle,{className:"block h-6 w-6","aria-hidden":"true"})})})]})}),t&&w.jsx("div",{className:"md:hidden",children:w.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[w.jsxs(Mp,{to:"/",className:({isActive:i})=>`flex items-center space-x-2 space-x-reverse px-3 py-2 rounded-md ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>r(!1),children:[w.jsx(uv,{size:18}),w.jsx("span",{children:"الخريطة"})]}),w.jsxs(Mp,{to:"/water-analysis",className:({isActive:i})=>`flex items-center space-x-2 space-x-reverse px-3 py-2 rounded-md ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>r(!1),children:[w.jsx(y3,{size:18}),w.jsx("span",{children:"تحليل المسطحات المائية"})]}),w.jsxs(Mp,{to:"/about",className:({isActive:i})=>`flex items-center space-x-2 space-x-reverse px-3 py-2 rounded-md ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>r(!1),children:[w.jsx(ry,{size:18}),w.jsx("span",{children:"حول النظام"})]})]})})]}),w.jsx("main",{className:"flex-1",children:e}),w.jsx("footer",{className:"bg-white shadow-inner py-4",children:w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["© ",new Date().getFullYear()," نظام المعلومات الجغرافية السوري. جميع الحقوق محفوظة."]})})})]})};function u(e,t,r,i){var n,s=arguments.length,o=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function KDe(e,t){return function(r,i){t(r,i,e)}}function XDe(e,t,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(h){try{c(i.next(h))}catch(f){o(f)}}function l(h){try{c(i.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((i=i.apply(e,t||[])).next())})}function eFe(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(n=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");n&&(i=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var hle=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function tFe(e){function t(s){e.error=e.hasError?new hle(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,i=0;function n(){for(;r=e.stack.pop();)try{if(!r.async&&i===1)return i=0,e.stack.push(r),Promise.resolve().then(n);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(s).then(n,function(o){return t(o),n()})}else i|=1}catch(o){t(o)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return n()}const ple="modulepreload",fle=function(e){return"/HTHWater/"+e},rD={},B=function(t,r,i){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=fle(s),s in rD)return;rD[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let h=n.length-1;h>=0;h--){const f=n[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":ple,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};let Ku;function F(e){return typeof Ku[e]=="function"?Ku[e]=Ku[e](globalThis):Ku[e]}var lU,uU,cU,dU;Ku=(lU=globalThis.dojoConfig)!=null&&lU.has||(uU=globalThis.esriConfig)!=null&&uU.has?{...(cU=globalThis.dojoConfig)==null?void 0:cU.has,...(dU=globalThis.esriConfig)==null?void 0:dU.has}:{},F.add=(e,t,r,i)=>{(i||Ku[e]===void 0)&&(Ku[e]=t),r&&F(e)},F.cache=Ku,F.add("big-integer-warning-enabled",!0),F.add("esri-deprecation-warnings",!0),F.add("esri-tests-disable-screenshots",!1),F.add("esri-tests-use-full-window",!1),F.add("esri-tests-post-to-influx",!0),F.add("esri-cim-animations-enable-status","enabled"),F.add("esri-cim-animations-spotlight",!1),F.add("esri-cim-animations-freeze-time",!1),F.add("enable-feature:multiple-highlights",!0),(()=>{var t;F.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(F.add("host-browser",e),F.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),F.add("dom",e),F("host-browser")){const r=navigator,i=r.userAgent,n=r.appVersion,s=parseFloat(n);if(F.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),F.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),F.add("khtml",n.includes("Konqueror")?s:void 0),F.add("edge",parseFloat(i.split("Edge/")[1])||void 0),F.add("opr",parseFloat(i.split("OPR/")[1])||void 0),F.add("webkit",!F("wp")&&!F("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),F.add("chrome",!F("edge")&&!F("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),F.add("android",!F("wp")&&parseFloat(i.split("Android ")[1])||void 0),F.add("safari",!n.includes("Safari")||F("wp")||F("chrome")||F("android")||F("edge")||F("opr")?void 0:parseFloat(n.split("Version/")[1])),F.add("mac",n.includes("Macintosh")),!F("wp")&&/(iPhone|iPod|iPad)/.test(i)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));F.add(o,l),F.add("ios",l)}F("webkit")||(!i.includes("Gecko")||F("wp")||F("khtml")||F("edge")||F.add("mozilla",s),F("mozilla")&&F.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&F.add("esri-mobile",t),r&&F.add("esri-iPhone",r),F.add("esri-geolocation",!!navigator.geolocation)}F.add("esri-wasm","WebAssembly"in globalThis),F.add("esri-performance-mode-frames-between-render",20),F.add("esri-force-performance-mode",!1),F.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),F.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),F.add("esri-atomics","Atomics"in globalThis),F.add("esri-workers","Worker"in globalThis),F.add("web-feat:cache","caches"in globalThis),F.add("esri-workers-arraybuffer-transfer",!F("safari")||Number(F("safari"))>=12),F.add("workers-pool-size",8),F.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),F.add("featurelayer-simplify-payload-size-factors",[1,1,4]),F.add("featurelayer-fast-triangulation-enabled",!0),F.add("featurelayer-animation-enabled",!0),F.add("featurelayer-snapshot-enabled",!0),F.add("featurelayer-snapshot-point-min-threshold",8e4),F.add("featurelayer-snapshot-point-max-threshold",4e5),F.add("featurelayer-snapshot-point-coverage",.1),F.add("featurelayer-query-max-depth",4),F.add("featurelayer-query-pausing-enabled",!1),F.add("featurelayer-advanced-symbols",!1),F.add("featurelayer-pbf",!0),F.add("featurelayer-pbf-statistics",!1),F.add("feature-layers-workers",!0),F.add("feature-polyline-generalization-factor",1),F.add("mapview-transitions-duration",200),F.add("mapview-essential-goto-duration",200),F.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),F.add("mapserver-pbf-version-support",10.81),F.add("mapservice-popup-identify-max-tolerance",20),F.add("request-queue-concurrency-hosted",16),F.add("request-queue-concurrency-non-hosted",4),F.add("curve-densification-coarse-segments",128),F.add("curve-densification-max-segments",2e3),F.add("curve-densification-min-segments",3),F.add("curve-densification-pixels-per-segment",16),F.add("view-readyState-waiting-delay",1e3),F.add("gradient-depth-bias",.01),F.add("gradient-depth-epsilon",1e-8),F("host-webworker")||F("host-browser")&&(F.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),F.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{F.add("esri-image-decode",!0,!0,!0)}).catch(()=>{F.add("esri-image-decode",!1,!0,!0)})}return!1}),F.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function rFe(e){}function mle(e){return()=>e}function iFe(e){return e}let L_=class fd{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*fd._m}getInt(){return this._seed=(fd._a*this._seed+fd._c)%fd._m,this._seed}getFloat(){return this.getInt()/(fd._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/fd._m*i}};L_._m=2147483647,L_._a=48271,L_._c=0;const yle=1.5,nFe=1/yle,sFe=.5;function oFe(e,t){return t?e.filter((r,i,n)=>n.findIndex(t.bind(null,r))===i):Array.from(new Set(e))}function $$(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function iD(e,t,r){let i,n;return r?(i=t.filter(s=>!e.some(o=>r(o,s))),n=e.filter(s=>!t.some(o=>r(o,s)))):(i=t.filter(s=>!e.includes(s)),n=e.filter(s=>!t.includes(s))),{added:i,removed:n}}function aFe(e){return e&&typeof e.length=="number"}let GB=class{constructor(){this.last=0}};const qB=new GB;function v3(e,t,r,i){i=i||qB;const n=Math.max(0,i.last-10);for(let o=n;o<r;++o)if(e[o]===t)return i.last=o,o;const s=Math.min(n,r);for(let o=0;o<s;++o)if(e[o]===t)return i.last=o,o;return-1}function gle(e,t,r,i){const n=r??e.length,s=v3(e,t,n,i);if(s!==-1)return e[s]=e[n-1],r==null&&e.pop(),t}const Us=new Set;function vle(e,t,r=e.length,i=t.length,n,s){if(i===0||r===0)return r;Us.clear();for(let a=0;a<i;++a)Us.add(t[a]);n=n||qB;const o=Math.max(0,n.last-10);for(let a=o;a<r;++a)if(Us.has(e[a])&&(s==null||s.push(e[a]),Us.delete(e[a]),e[a]=e[r-1],--r,--a,Us.size===0||r===0))return Us.clear(),r;for(let a=0;a<o;++a)if(Us.has(e[a])&&(s==null||s.push(e[a]),Us.delete(e[a]),e[a]=e[r-1],--r,--a,Us.size===0||r===0))return Us.clear(),r;return Us.clear(),r}function uFe(e,t,r){const i=e.length;if(t>=i)return e.slice();const n=mO(r),s=new Set,o=[];for(;o.length<t;){const a=Math.floor(n()*i);s.has(a)||(s.add(a),o.push(e[a]))}return o}function mO(e){return e?(nD.seed=e,()=>nD.getFloat()):Math.random}const nD=new L_;function HB(e,t){const r=mO(t);for(let i=e.length-1;i>0;i--){const n=Math.floor(r()*(i+1)),s=e[i];e[i]=e[n],e[n]=s}return e}function WB(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function Ei(e,t){return e!=null}const cFe=[];function dFe(e){return e instanceof ArrayBuffer}function yO(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function ZB(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function JB(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function gO(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function YB(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function vO(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function QB(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function E$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function T$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function wle(e){return"buffer"in e}const KB=1024;function hFe(e){return T$(e)||E$(e)||vO(e)||gO(e)||yO(e)}function pFe(e){return T$(e)||E$(e)}function fFe(e){return T$(e)?179769e303:E$(e)?3402823e32:QB(e)?4294967295:YB(e)?65535:ZB(e)||JB(e)?255:vO(e)?2147483647:gO(e)?32767:yO(e)?127:256}function XB(e,t){let r;if(t)for(r in e)e.hasOwnProperty(r)&&(e[r]===void 0?delete e[r]:e[r]instanceof Object&&XB(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function O(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=rG(e);if(t!=null)return t;if(kx(e))return e.clone();if(eG(e))return e.map(O);if(tG(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=O(e[i]);return r}function w3(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=rG(e);if(t!=null)return t;if(eG(e)){let i=!0;const n=e.map(s=>{const o=w3(s);return s!=null&&o==null&&(i=!1),o});return i?n:null}if(kx(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(tG(e))return null;const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const n=e[i],s=w3(n);if(n!=null&&s==null)return null;r[i]=s}return r}function kx(e){return typeof e.clone=="function"}function eG(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function tG(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function sD(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function rG(e){if(yO(e)||ZB(e)||JB(e)||gO(e)||YB(e)||vO(e)||QB(e)||E$(e)||T$(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,O(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(O(r));return t}return null}function wO(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function iG(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&$$(e,t):e instanceof Set?t instanceof Set&&_le(e,t):e instanceof Map?t instanceof Map&&xle(e,t):!!sD(e)&&sD(t)&&ble(e,t))}function ble(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function _le(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function xle(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const n=t.get(r);if(n!==i||n===void 0&&!t.has(r))return!1}return!0}function bO(e,t,r=!1){return sG(e,t,r)}function iw(e,t){if(t!=null)return t[e]||nG(e.split("."),!1,t)}function Xr(e,t,r){const i=e.split("."),n=i.pop(),s=nG(i,!0,r);s&&n&&(s[n]=t)}function oD(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(oD(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(oD(e[r],t[r]))return!0;return!1}return e!==t}function nG(e,t,r){let i=r;for(const n of e){if(i==null)return;if(!(n in i)){if(!t)return;i[n]={}}i=i[n]}return i}function sG(e,t,r){return t?Object.keys(t).reduce((i,n)=>{let s=i[n],o=t[n];return s===o?i:s===void 0?(i[n]=O(o),i):(Array.isArray(o)||Array.isArray(i)?(s=s?Array.isArray(s)?i[n]=s.slice():i[n]=[s]:i[n]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{s.includes(a)||s.push(a)}):i[n]=o.slice())):o&&typeof o=="object"?i[n]=sG(s,o,r):i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=o),i)},e||{}):e}var hU;const Ke={apiKey:void 0,applicationName:"",applicationUrl:(hU=globalThis.location)==null?void 0:hU.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(bO(Ke,globalThis.esriConfig,!0),delete Ke.has),!Ke.assetsPath){{const e="4.32";Ke.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Ke.defaultAssetsPath=Ke.assetsPath}const Sle=/\{([^}]+)\}/g;function aD(e){return e??""}function nw(e,t){return t?e.replaceAll(Sle,typeof t=="object"?(r,i)=>aD(iw(i,t)):(r,i)=>aD(t(i))):e}function mFe(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t!=null&&t.includes(r)?r:`\\${r}`)}function oG(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let lD;function $le(e){return lD??(lD=new DOMParser),lD.parseFromString(e||"","text/html").body.innerText||""}function yFe(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function gFe(e,...t){let r=e[0];for(let i=0;i<t.length;++i)r+=t[i]+e[i+1];return r}const uD={info:0,warn:1,error:2,none:3};let W=class On{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,On._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=On.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,On._loggers.get(t)||new On({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!On._throttlingDisabled){const n=Tle(i),s=this._loggedMessages[t].get(n);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=On._tickCounter)return;this._loggedMessages[t].set(n,On._tickCounter),On._scheduleTickCounterIncrement()}for(const n of Ke.log.interceptors)if(n(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const n=i[t];if(n!=null)return n;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",Ele)}_matchLevel(t){const r=Ke.log.level||"warn";return uD[this._parentWithMember("level",r)]<=uD[t]}static _scheduleTickCounterIncrement(){On._tickCounterScheduled||(On._tickCounterScheduled=!0,Promise.resolve().then(()=>{On._tickCounter++,On._tickCounterScheduled=!1}))}};function Ele(e,t,...r){console[e](`[${t}]`,...r)}function Tle(...e){return oG(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}W._loggers=new Map,W._tickCounter=0,W._tickCounterScheduled=!1,W._throttlingDisabled=!1;function Mle(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,i)=>i===""?"$":(iw(i,t)??"").toString())}let aG=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&Mle(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},N=class lG extends aG{constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return O(r)}catch{return"[object]"}}))}}catch(t){throw W.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new lG(t.name,t.message,t.details)}};N.prototype.type="error";const cD=new WeakMap;function Ile(e,t,r=!1){const i=`🛑 DEPRECATED - ${t}`;if(!r)return void e.warn(i);let n=cD.get(e);n||(n=new Set,cD.set(e,n)),n.has(t)||(n.add(t),e.warn(i))}function Cle(e,t,r={}){if(F("esri-deprecation-warnings")){const{moduleName:i}=r;l1(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function Lle(e,t,r={}){if(F("esri-deprecation-warnings")){const{moduleName:i}=r;l1(e,`Property: ${(i?i+"::":"")+t}`,r)}}function Ale(e,t,r={}){F("esri-deprecation-warnings")&&l1(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function l1(e,t,r={}){if(F("esri-deprecation-warnings")){const{replacement:i,version:n,see:s,warnOnce:o}=r;let a=t;if(i&&(a+=`
	🛠️ Replacement: ${i}`),n&&(a+=`
	⚙️ Version: ${n}`),s)if(Array.isArray(s)){a+=`
	🔗 See for more details:`;for(const l of s)a+=`
		${l}`}else a+=`
	🔗 See ${s} for more details.`;Ile(e,a,o)}}function wFe(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function kle(e,t){for(const r of e)if(r!=null&&t(r))return r}function Rx(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let Ay=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(Rx(t)){const i=this._getOrCreateGroup(r);for(const n of t)hD(n)&&i.push(n)}else hD(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(i=>i.forEach(t));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(db(t))}remove(t){if(typeof t!="string"&&Rx(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(dD(this._getGroup(t)),this._groups.delete(db(t)),this):this}removeAll(){return this._groups.forEach(dD),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(db(t),r),r}_getGroup(t){return this._groups.get(db(t))}};function db(e){return e||"_default_"}function dD(e){for(const t of e)t instanceof Ay?t.removeAll():t.remove()}function hD(e){return e!=null&&(!!e.remove||e instanceof Ay)}function sw(e,t){if(e==null)throw new Error(t??"value is None")}function Et(e){return e==null||e.destroy(),null}function _Fe(e){return e==null||e.dispose(),null}function Ft(e){return e==null||e.remove(),null}function iy(e){return e==null||e.abort(),null}function xFe(e){return e==null||e.release(),null}function Rle(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function Ole(e,t){let r;return e.some((i,n)=>(r=t(i,n),r!=null)),r??void 0}const uG=Symbol("Accessor-beforeDestroy"),Nle={remove:()=>{}};function et(e){return e?{remove(){e&&(e(),e=void 0)}}:Nle}function cG(e){e.forEach(t=>t==null?void 0:t.remove())}function SFe(e){cG(e),e.length=0}function ow(e){return et(()=>cG(e))}function $Fe(e){return et(()=>{var t;return(t=e())==null?void 0:t.remove()})}function EFe(e){return et(()=>e==null?void 0:e.abort())}function Ple(e){return et(e!=null?()=>e.destroy():void 0)}function Mn(e){return e.__accessor__??null}function Dle(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function A_(e,t,r){return r?Ox(e,t,{policy:r,path:""}):Ox(e,t,null)}function Ox(e,t,r){return t?Object.keys(t).reduce((i,n)=>{const s=n;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${n}`:n,a=r.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(i[s]))return i[s]=t[s],i;if(i[s]===void 0)return i[s]=O(t[s]),i;let l=i[s],c=t[s];if(l===c)return i;if(Array.isArray(c)||Array.isArray(i))l=l?Array.isArray(l)?i[s]=l.slice():i[s]=[l]:i[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(h=>{l.includes(h)||l.push(h)}));else if(c&&typeof c=="object")if(r){const h=r.path;r.path=o,i[s]=Ox(l,c,r),r.path=h}else i[s]=Ox(l,c,null);else i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[s]=c);return i},e||{}):e}function dG(e){return Array.isArray(e)?e:e.split(".")}function pD(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Fle(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...pD(r));return t}return pD(e)}function hG(e,t,r,i){const n=Fle(t);if(n.length!==1){const s=n.map(o=>i(e,o,r));return ow(s)}return i(e,n[0],r)}function pG(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const i=Mn(t);return Dle(i,r)?i.get(r):t[r]}function fG(e,t,r){if(e==null)return e;const i=pG(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:fG(i,t,r+1)}function aw(e,t,r=0){return typeof t!="string"||t.includes(".")?fG(e,dG(t),r):pG(t,e)}function Hi(e,t){return aw(e,t)}function fD(e,t){return aw(t,e)!==void 0}var gn;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(gn||(gn={}));function lw(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=O(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function M$(e,t){const r=lw(e);let i=r[t];return i||(i=r[t]={}),i}function jle(e,t){return A_(e,t,zle)}const Vle=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function zle(e){return Vle.test(e)?"replace":"merge"}function Ule(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function Ble(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let hp=class b3{constructor(t,r,i,n=1,s=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(b3.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let n=0;n<i;n++)this._pool[n]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):Ble(r)&&r.acquire(...t),r}release(t){t&&!b3.test.disabled&&(this._releaseFunction?this._releaseFunction(t):Ule(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};hp.test={disabled:!1};let Gle=class{constructor(t,r){this._observers=t,this._observer=r}remove(){WB(this._observers,this._observer)}},mG=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return qle;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,n=!1;const s=r.length;for(let o=0;o<s;++o){const a=r[o];if(a.destroyed)n=!0;else if(a===t){i=!0;break}}return i||(r.push(t),n&&this._removeDestroyedObservers()),new Gle(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let n=0;n<r;++n){for(;n+i<r&&t[n+i].destroyed;)++i;if(i>0){if(!(n+i<r))break;t[n]=t[n+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const qle=et();var Te;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(Te||(Te={}));const _3=Te.USER+1;function Xu(e){switch(e){case"defaults":return Te.DEFAULTS;case"service":return Te.SERVICE;case"portal-item":return Te.PORTAL_ITEM;case"web-scene":return Te.WEB_SCENE;case"web-map":return Te.WEB_MAP;case"link-chart":return Te.LINK_CHART;case"user":return Te.USER;default:return null}}function Nx(e){switch(e){case Te.DEFAULTS:return"defaults";case Te.SERVICE:return"service";case Te.PORTAL_ITEM:return"portal-item";case Te.WEB_SCENE:return"web-scene";case Te.WEB_MAP:return"web-map";case Te.LINK_CHART:return"link-chart";case Te.USER:return"user"}}function Hle(e){return Nx(e)}var pt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(pt||(pt={}));let I$=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const Px=new I$,zg=[];let cv=Px;function Se(e){cv.onAccessed(e)}let k_=!1,R_=!1;function Pl(e,t,r){if(k_)return _O(e,t,r);let i=null;return yG(e),i=t.call(r),gG(),i}function Wle(e,t){return Pl(Px,e,t)}function _O(e,t,r){const i=k_;k_=!0,yG(e);let n=null;try{n=t.call(r)}catch(s){R_&&W.getLogger("esri.core.accessorSupport.tracking").error(s)}return gG(),k_=i,n}function yG(e){cv=e,zg.push(e)}function gG(){const e=zg.length;if(e>1){const t=zg.pop();cv=zg[e-2],t.onTrackingEnd()}else if(e===1){const t=zg.pop();cv=Px,t.onTrackingEnd()}else cv=Px}function vG(e,t){if(t.flags&pt.DepTrackingInitialized)return;t.flags|=pt.DepTrackingInitialized;const r=R_;R_=!1,t.flags&pt.AutoTracked?_O(t.trackingTarget,t.metadata.get,e):wG(e,t),R_=r}const Zle=[];function wG(e,t){t.flags&pt.ExplicitlyTracking||(t.flags|=pt.ExplicitlyTracking,_O(t.trackingTarget,()=>{const r=t.metadata.dependsOn||Zle;for(const i of r)if(typeof i!="string"||i.includes(".")){const n=dG(i);for(let s=0,o=e;s<n.length&&o!=null&&typeof o=="object";++s)o=mD(o,n[s],s!==n.length-1)}else mD(e,i,!1)}),t.flags&=~pt.ExplicitlyTracking)}function mD(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=Mn(e);if(n){const s=n.propertiesByName.get(i);s&&(Se(s),vG(e,s))}return r?e[i]:void 0}let yD=class extends mG{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new I$(this),this.flags=0,this.flags=pt.Dirty|(r.nonNullable?pt.NonNullable:0)|(r.hasOwnProperty("value")?pt.HasDefaultValue:0)|(r.get===void 0?pt.DepTrackingInitialized:0)|(r.dependsOn===void 0?pt.AutoTracked:0)}destroy(){this.flags&pt.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&Se(this);const r=t.store,i=this.propertyName,n=this.flags,s=r.get(i);if(n&pt.Computing||~n&pt.Dirty&&r.has(i))return s;this.flags|=pt.Computing;const o=t.host;let a;n&pt.AutoTracked?a=Pl(this.trackingTarget,this.metadata.get,o):(wG(o,this),a=this.metadata.get.call(o)),this.flags|=pt.DepTrackingInitialized,r.set(i,a,Te.COMPUTED);const l=r.get(i);return l===s?this.flags&=~pt.Dirty:Wle(this.commit,this),this.flags&=~pt.Computing,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~pt.Dirty,this.onCommitted()}onInvalidated(){~this.flags&pt.Overridden&&(this.flags|=pt.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},Jle=class bG{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new bG;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,O(i))}),r}get(t){return this._values.get(t)}originOf(){return Te.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function hb(e,t,r){return e!==void 0}function gD(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&pt.NonNullable)||(i.lifecycle,gn.INITIALIZING,!1))}let Yle=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=gn.INITIALIZING,this.store=new Jle,this.mutable=!0,this._origin=Te.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const n=new yD(i,r[i]);this.propertiesByName.set(i,n)}this.metadata=r}initialize(){this.lifecycle=gn.CONSTRUCTING}constructed(){this.lifecycle=gn.CONSTRUCTED}destroy(){this.lifecycle=gn.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==gn.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);this.mutable&&Se(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&pt.HasDefaultValue)return"defaults"}return Nx(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(hb(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);hb(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const n=this.propertiesByName.get(r);if(!hb(n))return"";const s=new I$,o=Pl(s,()=>{var c;return(c=n.metadata.get)==null?void 0:c.call(t)});let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;const l=s.accessed??new Set;if(l.size===0)return a;i+="  ";for(const c of l)c instanceof yD&&(a+=`${i}${c.propertyName}: undefined
`);return a}setAtOrigin(t,r,i){const n=this.propertiesByName.get(t);if(hb(n))return this._setAtOrigin(n,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&pt.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&pt.Overridden&&(r.flags&=~pt.Overridden,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!gD(i,t,r,this))return;const n=i.metadata.cast;if(n){const s=this._cast(n,r),{valid:o,value:a}=s;if(TT.release(s),!o)return;r=a}i.flags|=pt.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!gD(i,t,r,this))return;const n=i.metadata.cast;if(n){const o=this._cast(n,r),{valid:a,value:l}=o;if(TT.release(o),!a)return;r=l}const s=i.metadata.set;s?s.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=Xu(t)}getDefaultOrigin(){return Nx(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==gn.INITIALIZING?this._origin:Te.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const n=this.store,s=t.propertyName;n.has(s,i)&&wO(r,n.get(s))&&~t.flags&pt.Overridden&&i===n.originOf(s)||(t.invalidate(),n.set(s,r,i),t.commit(),vG(this.host,t))}_cast(t,r){const i=TT.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},Qle=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const TT=new hp(Qle);function Dx(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))Dx(e,i,t[i]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(-1,1)[0];return void Dx(Hi(e,n),s,r)}const i=e.__accessor__;i!=null&&Kle(t,i),e[t]=r}}function Kle(e,t){if(F("esri-unknown-property-errors")&&!Xle(e,t))throw new N("set:unknown-property",eue(e,t))}function Xle(e,t){return t.metadata[e]!=null}function eue(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let tue;function rue(){return tue}var vD;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(vD||(vD={}));function iue(e){e.length=0}let Gi=class{constructor(t=50,r=50){this._pool=new hp(Array,void 0,iue,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return MT.acquire()}static release(t){return MT.release(t)}static prune(){MT.prune()}};const MT=new Gi(100);let _G=class extends hp{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const pb=[];function Fx(e){pb.push(e),pb.length===1&&queueMicrotask(()=>{const t=pb.slice();pb.length=0;for(const r of t)r()})}let dv=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var x3;(function(e){const t=(s,o,a,l)=>{let c=o,h=o;const f=a>>>1,m=s[c-1];for(;h<=f;){h=c<<1,h<a&&l(s[h-1],s[h])<0&&++h;const y=s[h-1];if(l(y,m)<=0)break;s[c-1]=y,c=h}s[c-1]=m},r=(s,o)=>s<o?-1:s>o?1:0;function i(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let h=a>>>1;h>o;h--)t(s,h,a,l);const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let h=a>>>1;h>o;h--)t(s,h,a,l),yield;const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,l),yield}}e.sort=i,e.iterableSort=n})(x3||(x3={}));const wD=x3,nue=1.5,sue=1.1;let Oh=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new GB,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>bD(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const n=this.data[i];t(n)&&r.push(n)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,bD(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=v3(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(v3(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=vle(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){wD.sort(this.data,0,this.length,t)}iterableSort(t){return wD.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){const{data:i,length:n}=this;for(let s=0;s<n;++s)if(t.call(r,i[s]))return i[s]}filterInPlace(t,r){let i=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(r,s,n,this.data)&&(this.data[n]=this.data[i],this.data[i]=s,i++)}if(this._deallocator)for(let n=i;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:n}=this;for(let s=0;s<n;++s)t.call(r,i[s],s,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let n=0;n<this.length;++n)i[n]=t.call(r,this.data[n],n,this.data);return i}reduce(t,r){let i=r;for(let n=0;n<this.length;++n)i=t(i,this.data[n],n,this.data);return i}has(t){const r=this.length,i=this.data;for(let n=0;n<r;++n)if(i[n]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function bD(e){e.data.length>nue*e.length&&(e.data.length=Math.floor(e.length*sue))}function oue(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return et(()=>e.clearTimeout(i))}}}const ky=oue(globalThis);function C$(e){return aue(e)||xG(e)}function aue(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function xG(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function uw(e,t,r){if(!C$(e))throw new TypeError("target is not a Evented or EventTarget object");return xG(e)?lue(e,t,r):e.on(t,r)}function lue(e,t,r,i){if(Array.isArray(t)){const n=t.slice();for(const s of n)e.addEventListener(s,r,i);return et(()=>{for(const s of n)e.removeEventListener(s,r,i)})}return e.addEventListener(t,r,i),et(()=>e.removeEventListener(t,r,i))}function SG(e,t,r){if(!C$(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=uw(e,t,n=>{i.remove(),r.call(e,n)});return i}function Tt(e="Aborted"){return new N("AbortError",e)}function Ht(e,t="Aborted"){if(Xn(e))throw Tt(t)}function cw(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function Xn(e){const t=cw(e);return t!=null&&t.aborted}function _o(e){if(Ri(e))throw e}function _D(e){if(!Ri(e))throw e}function Ls(e,t){const r=cw(e);if(r!=null){if(!r.aborted)return SG(r,"abort",()=>t());t()}}function xO(e,t){const r=cw(e);if(r!=null)return Ht(r),SG(r,"abort",()=>t(Tt()))}function $G(e,t){return cw(t)==null?e:new Promise((r,i)=>{let n=Ls(t,()=>i(Tt()));const s=()=>{n=Ft(n)};e.then(s,s),e.then(r,i)})}function Ri(e){return(e==null?void 0:e.name)==="AbortError"}async function u1(e){try{return await e}catch(t){if(!Ri(t))throw t;return}}async function SO(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),n=await SO(i),s={};return r.map((o,a)=>s[o]=n[a]),s}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(i,n)=>{const s=r[n];return s.status==="fulfilled"?{promise:i,value:s.value}:{promise:i,error:s.reason}}))}async function uue(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function PFe(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function EG(e,t=void 0,r){const i=new AbortController;return Ls(r,()=>i.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);Ls(i,()=>{o&&(clearTimeout(o),s(Tt()))})})}function DFe(e,t,r,i){const n=r&&"abort"in r?r:null;i!=null||n||(i=r);let s=setTimeout(()=>{s=0,n==null||n.abort()},t);const o=()=>i||new N("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then(a=>{if(s===0)throw o();return clearTimeout(s),a},a=>{throw clearTimeout(s),s===0?o():a})}function cue(e,t){const r=new AbortController,i=setTimeout(()=>r.abort(),t);return Ls(e,()=>{r.abort(),clearTimeout(i)}),{...e,signal:r.signal}}function Ma(e){return e&&typeof e.then=="function"}function S3(e){return Ma(e)?e:Promise.resolve(e)}function dw(e,t=-1){let r,i,n,s,o=null;const a=(...l)=>{if(r){i=l,s&&s.reject(Tt()),s=es();const m=s.promise;if(o){const y=o;o=null,y.abort()}return m}if(n=s||es(),s=null,t>0){const m=new AbortController;r=S3(e(...l,m.signal));const y=r;EG(t).then(()=>{r===y&&(s?m.abort():o=m)})}else r=1,r=S3(e(...l));const c=()=>{const m=i;i=n=r=o=null,m!=null&&a(...m)},h=r,f=n;return h.then(c,c),h.then(f.resolve,f.reject),f.promise};return a}function es(){let e,t;const r=new Promise((n,s)=>{e=n,t=s}),i=n=>{e(n)};return i.resolve=n=>e(n),i.reject=n=>t(n),i.timeout=(n,s)=>ky.setTimeout(()=>i.reject(s),n),i.promise=r,i}async function xD(e){await Promise.resolve(),Ht(e)}function FFe(e){return e}function due(e){return 1e3*e}function jFe(e){return e}function VFe(e){return .001*e}let hue=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},pue=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},$3=0;const lg={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},E3=["prepare","preRender","render","postRender","update","finish"],T3=[],Jh=new Oh;let fue=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,TG()}};function mue(){Nh!=null&&(cancelAnimationFrame(Nh),Nh=requestAnimationFrame($O))}function TG(){Nh==null&&($3=performance.now(),Nh=requestAnimationFrame($O))}const jx={frameTasks:Jh,willDispatch:!1,clearFrameTasks:yue,dispatch:IG,executeFrameTasks:gue,reschedule:mue};function hw(e){const t=new pue(e);return T3.push(t),jx.willDispatch||(jx.willDispatch=!0,Fx(IG)),t}function ny(e){const t=new hue(e);return Jh.push(t),TG(),new fue(t)}let Nh=null;function yue(e=!1){Jh.forAll(t=>{t.removed=!0}),e&&MG()}function $O(){const e=performance.now();Nh=null,Nh=Jh.some(r=>!r.paused&&!r.removed)?requestAnimationFrame($O):null,jx.executeFrameTasks(e)}function gue(e){const t=e-$3;$3=e;const r=1e3/60,i=Math.max(0,t-r);lg.time=e,lg.frameDuration=r-i;for(let n=0;n<E3.length;n++){const s=performance.now(),o=E3[n];Jh.forAll(a=>{var l;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(lg.elapsedFrameTime=performance.now()-e,lg.deltaTime=a.ticks===0?0:t,(l=a.phases[o])==null||l.call(a,lg)))}),_ue[n].push(performance.now()-s)}MG(),xue.push(performance.now()-e)}const fb=new Oh;function MG(){Jh.forAll(e=>{e.removed&&fb.push(e)}),Jh.removeUnorderedMany(fb.data,fb.length),fb.clear()}function IG(){for(;T3.length;){const e=T3.shift();e.isActive&&e.callback()}jx.willDispatch=!1}function vue(e=1,t){const r=es(),i=()=>{Xn(t)?r.reject(Tt()):e===0?r():(--e,Fx(()=>i()))};return i(),r.promise}function wue(e){return vue(1,e)}async function bue(e){await wue(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const _ue=E3.map(e=>new dv(e)),xue=new dv("total");function CG(e,t){for(const r of e.values())if(t(r))return!0;return!1}function Vx(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function SD(e,t){return t!=null&&e.add(t),e}function EO(e,t){const r=new Set;return Vx(r,e),Vx(r,t),r}function Sue(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function GFe(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function qFe(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function $ue(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function Eue(e,t){return $ue(EO(e,t),Sue(e,t))}let Tue=0;function O_(){return++Tue}let L$=class extends I${constructor(t){super(new Mue(t)),this._observer&&$D.register(this,new WeakRef(this._observer),this)}destroy(){var t,r;this._observer&&$D.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(r=this._observer)==null||r.destroy()}},Mue=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Iue}};const $D=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function Iue(){}let bm=!1;const zx=[];function LG(e,t){let r=new L$(s),i=null,n=!1;function s(){if(!r||n)return;if(bm)return void RG(s);const a=i;r.clear(),bm=!0,n=!0,i=Pl(r,e),n=!1,bm=!1,t(i,a),OG()}function o(){r&&(r.destroy(),r=null,i=null)}return n=!0,i=Pl(r,e),n=!1,et(o)}function AG(e,t){let r=new L$(n),i=null;function n(){t(i,o)}function s(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=Pl(r,e),i):null}return o(),et(s)}function kG(e,t){let r=!1,i=!1;const n=!!(t!=null&&t.sync);let s=new L$(()=>{r||i||(i=!0,n?o():queueMicrotask(o))});function o(){i=!1,s&&!r&&(bm?RG(o):(s.clear(),bm=!0,r=!0,Pl(s,e),r=!1,bm=!1,OG()))}function a(){s&&(s.destroy(),s=null)}return r=!0,Pl(s,e),r=!1,et(a)}function RG(e){zx.includes(e)||zx.unshift(e)}function OG(){for(;zx.length;)zx.pop()()}var hv;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(hv||(hv={}));let c1=class{constructor(){this.uid=O_(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,n,s){return this.pool.acquire(hv.Untracked,t,r,i,n,s,wO)}static acquireTracked(t,r,i,n){return this.pool.acquire(hv.Tracked,t,r,i,null,null,n)}notify(t,r){this.type===hv.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,n,s,o,a){this.uid=O_(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=O_(),this.removed=!0}};c1.pool=new _G(c1);const N_=new Gi,Ml=new Set;let Ux;function Bx(e){Ml.delete(e),Ml.add(e),Ux||(Ux=hw(Aue))}function Cue(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function Lue(e){for(const t of Ml.values())t.target===e&&(t.removed=!0)}function Aue(){let e=10;for(;Ux&&e--;){Ux=null;const t=kue(),r=N_.acquire();for(const i of t){const n=i.uid;Cue(i),n===i.uid&&i.removed&&r.push(i)}for(const i of Ml)i.removed&&(r.push(i),Ml.delete(i));for(const i of r)c1.pool.release(i);N_.release(r),N_.release(t),M3.forEach(i=>i())}}function kue(){const e=N_.acquire();e.length=Ml.size;let t=0;for(const r of Ml)e[t]=r,++t;return Ml.clear(),e}const M3=new Set;function Rue(e){return M3.add(e),et(()=>M3.delete(e))}function Oue(e,t,r){let i=hG(e,t,r,(n,s,o)=>{let a,l,c=AG(()=>aw(n,s),(h,f)=>{var m;((m=n.__accessor__)==null?void 0:m.lifecycle)===gn.DESTROYED||a&&a.uid!==l?i.remove():(a||(a=c1.acquireUntracked(h,o,f,n,s),l=a.uid),Bx(a))});return et(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,Bx(a)),a=null),i=c=null})});return i}function Nue(e,t,r){const i=hG(e,t,r,(n,s,o)=>{let a=!1;return LG(()=>aw(n,s),(l,c)=>{n.__accessor__.lifecycle!==gn.DESTROYED?a||(a=!0,wO(c,l)||o.call(n,l,c,s,n),a=!1):i.remove()})});return i}function Pue(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==gn.DESTROYED?i?Nue(e,t,r):Oue(e,t,r):et()}function Due(e,t,r){let i,n,s=AG(e,(o,a)=>{i&&i.uid!==n?s.remove():(i||(i=c1.acquireTracked(o,t,a,r),n=i.uid),Bx(i))});return et(()=>{s.remove(),i&&(i.uid!==n||i.removed||(i.removed=!0,Bx(i)),i=null),s=null})}function Fue(e,t,r){let i=!1;return LG(e,(n,s)=>{i||(i=!0,r(s,n)||t(n,s),i=!1)})}function jue(e,t,r=!1,i=iG){return r?Fue(e,t,i):Due(e,t,i)}function ED(e){return CG(Ml,t=>t.oldValue===e)}function Vue(e,t){for(const r of e.values())if(t(r))return!0;return!1}function JFe(e,t){for(const r of e.values())if(t(r))return r;return null}function pw(e,t,r){const i=e.get(t);if(i!==void 0)return i;const n=r();return e.set(t,n),n}function YFe(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const _m=()=>W.getLogger("esri.core.accessorSupport.ensureTypes");function zue(e){return e==null?e:new Date(e)}function Uue(e){return e==null?e:!!e}function fw(e){return e==null?e:e.toString()}function qi(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function TO(e){return e==null?e:Math.round(parseFloat(e))}function Bue(e){return null}function Gue(e,t){return r=>{let i=e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function NG(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function Gx(e,t){return t!=null&&e&&!(t instanceof e)}function PG(e){return e&&"isCollection"in e}function TD(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function que(e,t){if(!(t!=null&&t.constructor)||!PG(t.constructor))return I3(e,t)?t:new e(t);const r=TD(e.prototype.itemType),i=TD(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(I3(e,t),t):new e(t):t}function I3(e,t){return!!NG(t)&&(_m().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+A$(e)+"'"),!0)}function mw(e,t){return t==null?t:PG(e)?que(e,t):Gx(e,t)?I3(e,t)?t:new e(t):t}function A$(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const Hue=new WeakMap;function Wue(e){switch(e){case Number:return t=>qi(t);case Xe:return TO;case Boolean:return Uue;case String:return fw;case Date:return zue;case k$:return Bue;default:return pw(Hue,e,()=>mw.bind(null,e))}}function Er(e,t){const r=Wue(e);return arguments.length===1?r:r(t)}function d1(e,t,r){return arguments.length===1?d1.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function Zue(e,t){return arguments.length===1?d1(r=>Er(e,r)):d1(r=>Er(e,r),t)}function DG(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>DG(e,t-1,i)):e(r)}function qx(e,t,r){if(arguments.length===2)return s=>qx(e,t,s);if(!r)return r;r=DG(e,t,r);let i=t,n=r;for(;i>0&&Array.isArray(n);)i--,n=n[0];if(n!==void 0)for(let s=0;s<i;s++)r=[r];return r}function Jue(e,t,r){return arguments.length===2?qx(i=>Er(e,i),t):qx(i=>Er(e,i),t,r)}function FG(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function C3(e,t){if(arguments.length===2)return C3(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(r.has(a)||n.some(f=>c==="string"&&f===String||c==="number"&&f===Number))||c==="object"&&n.some(f=>!Gx(a,f))?a:(h&&i.length?(s||(s=i.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),_m().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(f=>A$(f)).join(", ")),_m().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):_m().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Oo(e,t){if(arguments.length===2)return Oo(e).call(null,t);const r={},i=[],n=[];for(const l in e.typeMap){const c=e.typeMap[l];r[l]=Er(c),i.push(A$(c)),n.push(l)}const s=()=>`'${i.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!Gx(e.base,l)||l==null)return l;const c=a(l)||e.defaultKeyValue,h=r[c];if(!h)return _m().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Gx(e.typeMap[c],l))return l;if(typeof e.key=="string"&&!NG(l)){const f={};for(const m in l)m!==e.key&&(f[m]=l[m]);return h(f)}return h(l)}}let Xe=class{},k$=class{};const XFe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Yue(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function jG(e){switch(e.type){case"native":return Er(e.value);case"array":return d1(jG(e.value));case"one-of":return Que(e);default:return null}}function Que(e){let t=null;return(r,i)=>A3(r,e)?r:(t==null&&(t=L3(e)),_m().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function L3(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Xe:return"integer";case Date:return"date";case k$:return"null";default:return A$(e.value)}case"array":return`array of ${L3(e.value)}`;case"one-of":{const t=e.values.map(r=>L3(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function A3(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Xe:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case k$:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!A3(r,t.value));case"one-of":return t.values.some(r=>A3(e,r))}}function d(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),n=M$(t,r);i&&(i.get||i.set?(n.get=i.get||n.get,n.set=i.set||n.set):"value"in i&&("value"in e&&W.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=i.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[l],n.get=function(){let f=Hi(this,l);if(typeof f=="function"){h||(h=l.split(".").slice(0,-1).join("."));const m=Hi(this,h);m&&(f=f.bind(m))}return f},n.readOnly||(n.set=c?function(f){this._override(r,f)}:function(f){Dx(this,l,f)})}const o=e.type,a=e.types;if(!n.cast){let l;o?l=Kue(o):a&&(l=Array.isArray(a)?d1(Oo(a[0])):Oo(a)),e.cast=Xue(e.cast,l)}jle(n,e),e.range&&(n.cast=Gue(n.cast,e.range))}}function VG(e,t,r){const i=M$(e,r);i.json||(i.json={});let n=i.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function Kue(e){let t=0,r=e;if(Yue(e))return jG(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(FG(i))return t===0?C3(i):qx(C3(i),t);if(t===1)return Zue(i);if(t>1)return Jue(i,t);const n=e;return n.from?n.from:Er(n)}function Xue(e,t){if(e||t)return e?t?(r,i)=>t(e(r,i),i):e:t}function ece(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const n=t[i];r[i].forEach(s=>{t[s]=n}),delete t[i]}}}let Os=class extends aG{constructor(t,r,i){super(t,r,i)}};Os.prototype.type="warning";function zG(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const k3=()=>W.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function MD(e,t,r){var i,n;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((n=t.read)==null?void 0:n.enabled)===!1||ice(e)&&Xr("read.reader",Ry(e),t))}function Ry(e){var r,i;const t=e.ndimArray??0;if(t>1)return rce(e);if(t===1)return ID(e);if("type"in e&&BG(e.type)){const n=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,s=ID(typeof n=="function"?{type:n}:{types:n});return(o,a,l)=>{const c=s(o,a,l);return c&&new e.type(c)}}return MO(e)}function MO(e){return"type"in e?tce(e.type):nce(e.types)}function tce(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void k3().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,i),s}:e.fromJSON}function UG(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(n=>UG(e,n,r,i-1)):e(t,void 0,r)}function rce(e){const t=MO(e),r=UG.bind(null,t),i=e.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=r(n,o,i);let a=i,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)n=[n];return n}}function ID(e){const t=MO(e);return(r,i,n)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=t(r,void 0,n);return s!==void 0?[s]:void 0}}function BG(e){if(!zG(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?IO(t.Type):GG(t.Type))}function ice(e){return"types"in e?GG(e.types):IO(e.type)}function IO(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||BG(e))}function GG(e){for(const t in e.typeMap)if(!IO(e.typeMap[t]))return!1;return!0}function nce(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void k3().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=sce(e));const l=e.key;if(typeof l!="string")return;const c=n[l],h=c?t[c]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const m=`Type '${c||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new Os(`${r}:unsupported`,m,{definition:n,context:o})),void k3().error(m)}const f=new h;return f.read(n,o),i?i(f):f}}function sce(e){var r,i;const t={};for(const n in e.typeMap){const s=e.typeMap[n],o=lw(s.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;if((r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){t[a.json.type[0]]=s;continue}const l=(i=a.json)==null?void 0:i.write;if(!(l!=null&&l.writer)){t[n]=s;continue}const c=l.target,h=typeof c=="string"?c:e.key,f={};l.writer(n,f,h),f[h]&&(t[f[h]]=s)}return t}function oce(e){if(e.json||(e.json={}),LD(e.json),AD(e.json),CD(e.json),e.json.origins)for(const t in e.json.origins)LD(e.json.origins[t]),AD(e.json.origins[t]),CD(e.json.origins[t]);return!0}function CD(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function LD(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function AD(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function kD(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&zG(e.type))?t.write.writer=uce:r>1?t.write.writer=cce(r):t.types?Array.isArray(t.types)?t.write.writer=lce(t.types[0]):t.write.writer=ace(t.types):t.write.writer=h1}function ace(e){return(t,r,i,n)=>t?qG(t,e,n)?h1(t,r,i,n):void 0:h1(t,r,i,n)}function qG(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new N(`${i}:unsupported`,n,{definition:e,context:r})),W.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function lce(e){return(t,r,i,n)=>!t||!Array.isArray(t)?h1(t,r,i,n):h1(t.filter(s=>qG(s,e,n)),r,i,n)}function h1(e,t,r,i){Xr(r,Hx(e,i),t)}function Hx(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?Wx(e):e}function Wx(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function uce(e,t,r,i){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(s=>Hx(s,i)),typeof n.toArray=="function"&&(n=n.toArray())):n=[Hx(e,i)],Xr(r,n,t)}function HG(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>HG(i,t,r-1)):Hx(e,t)}function cce(e){return(t,r,i,n)=>{let s;if(t===null)s=null;else{s=HG(t,n,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}Xr(i,s,r)}}function dce(e,t){return CO(e,"any",t==null?void 0:t.origin)}function R3(e,t){return CO(e,"read",t==null?void 0:t.origin)}function WG(e,t){return CO(e,"write",t==null?void 0:t.origin)}function CO(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let n;n=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],n&&(t==="any"||t in n)&&(i=n)}return i}function hce(e){var r;const t=pce(e);if(e.json.origins)for(const i in e.json.origins){const n=e.json.origins[i],s=n.types?fce(n):t;MD(s,n,!1),n.types&&!n.write&&((r=e.json.write)!=null&&r.enabled)&&(n.write={...e.json.write}),kD(s,n)}MD(t,e.json,!0),kD(t,e.json)}function pce(e){return e.json.types?O3(e.json):e.type?ZG(e):O3(e)}function fce(e){return e.type?ZG(e):O3(e)}function ZG(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!FG(r);)r=r[0],t++;return{type:r,ndimArray:t}}function O3(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function mce(e){oce(e)&&(ece(e),hce(e))}const IT=new Set,CT=new Set;function T(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,gce(t);const r=[],i=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!IT.has(n.initialize)&&(IT.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!CT.has(n.destroy)&&(CT.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);IT.clear(),CT.clear();const s=class extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),i.length){let l=!1;const c=this[uG];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,c.call(this);for(let h=0;h<i.length;h++)i[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=lw(t.prototype),s.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function yce(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;r.mutable&&Se(i);const n=r.store;return n.has(e)?n.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function gce(e){const t=e.prototype,r=lw(t),i={};for(const n of Object.getOwnPropertyNames(r)){const s=r[n];mce(s),i[n]={enumerable:!0,configurable:!0,get:yce(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?RD("read-only",n):a.lifecycle===gn.CONSTRUCTED&&s.constructOnly?RD("construct-only",n):void a.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const RD=(e,t)=>{W.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var JG,YG;function vce(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const jo=Symbol("Accessor-Handles"),N3=Symbol("Accessor-Initialized");let ce=class P_{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}lw(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...c){const h=this.inherited;let f;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};try{f=l.apply(this,c)}catch(m){throw this.inherited=h,m}return this.inherited=h,f}:t[a]}for(const a in r){const l=vce(r[a]);d(l)(o.prototype,a)}return T(i)(o)}static freeze(t){return t instanceof P_?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof P_?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var i;if(this[JG]=null,this[YG]=!1,this.constructor===P_)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new Yle(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[N3]=!0}initialize(){}[uG](){this[jo]=Et(this[jo])}destroy(){var t;this.destroyed||(Lue(this),this.__accessor__.destroy(),(t=rue())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[N3]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===gn.DESTROYED||!1}commitProperty(t){Hi(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return Dx(this,t,r),this}watch(t,r,i){return Cle(W.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),Pue(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const n of i)n.remove();return}(this[jo]??(this[jo]=new Ay)).add(t,r)}removeHandles(t){var r;(r=this[jo])==null||r.remove(t)}removeAllHandles(){var t;(t=this[jo])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[jo])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[jo])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};JG=jo,YG=N3;let wce=class QG{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new QG;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,O(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??Te.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>{var n;return((n=this._values.get(i))==null?void 0:n.origin)===t})}set(t,r,i){if((i=this._normalizeOrigin(i))===Te.DEFAULTS){const n=this._values.get(t);if((n==null?void 0:n.origin)!=null&&n.origin>i)return}this._values.set(t,new bce(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===Te.DEFAULTS?t:Te.USER}},bce=class{constructor(t,r){this.value=t,this.origin=r}};function KG(e,t,r){t.keys().forEach(n=>{r.set(n,t.get(n),Te.DEFAULTS)});const i=e.metadata;Object.keys(i).forEach(n=>{e.internalGet(n)&&r.set(n,e.internalGet(n),Te.DEFAULTS)})}function _ce(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&fD(i,r))return!0}else for(const n of i)if(n===t||n.includes(".")&&n.indexOf(t)===0&&fD(n,r))return!0;return!1}function xce(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Sce(e,t,r,i,n){let s=R3(t[r],n);xce(s)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))s=R3(t[o],n),_ce(s,r,i)&&(e[o]=!0)}function $ce(e,t,r,i){const n=r.metadata,s=dce(n[t],i),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const XG={origin:"service"};function eq(e,t,r=XG){if(!t||typeof t!="object")return;const i=Mn(e),n=i.metadata,s={};for(const o of Object.getOwnPropertyNames(t))Sce(s,n,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const a=R3(n[o],r).read,l=a==null?void 0:a.source;let c;c=l&&typeof l=="string"?aw(t,l):t[o],a!=null&&a.reader&&(c=a.reader.call(e,c,t,r)),c!==void 0&&i.set(o,c)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||$ce(e,o,i,r)}i.setDefaultOrigin("user")}function Ece(e,t,r,i=XG){var s;const n={...i,messages:[]};r(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}function Tce(e,t,r,i,n){var o,a;const s={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,i,s,r,n),s}function tq(e,t,r,i,n,s){if(!(i!=null&&i.write))return!1;const o=Hi(e,r);if(!n&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,s??void 0);a!==void 0&&(n=a)}if(n||(n=i.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new N("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&W.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===Te.DEFAULTS)&&Mce(e,r,s,i,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Xu(s.origin))}function Mce(e,t,r,i,n){const s=i.default;if(s===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(e,t,r??void 0);return $$(o,n)}return!1}return s===n}function Ice(e,t,r,i){const n=Mn(e),s=n.metadata,o=WG(s[t],i);return!!o&&tq(e,n,t,o,r,i)}function rq(e,t,r){var s,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return A_(t,e.toJSON(r));const i=Mn(e),n=i.metadata;for(const a in n){const l=WG(n[a],r);if(!tq(e,i,a,l,void 0,r))continue;const c=Hi(e,a),h=Tce(e,l,l.write&&typeof l.write.target=="string"?l.write.target:a,c,r);Object.keys(h).length>0&&(t=A_(t,h),(o=(s=r==null?void 0:r.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>A_(t,h,()=>"replace-arrays"))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:Hle(i.store.originOf(a)),newOrigin:r.origin}))}return t}const iq=e=>{let t=class extends e{constructor(...r){super(...r);const i=Mn(this),n=i.store,s=new wce;i.store=s,KG(i,n,s)}read(r,i){eq(this,r,i)}write(r,i){return rq(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return Cce.call(this,r,i)}};return t=u([T("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Cce(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let Ug=class extends iq(ce){};Ug=u([T("esri.core.JSONSupport")],Ug),function(e){function t(r){return r&&typeof r=="object"&&"toJSON"in r&&typeof r.toJSON=="function"}e.JSONSupportMixin=iq,e.isSerializable=t}(Ug||(Ug={}));const G=Ug,Lce=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Ace={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function OD(e){const t=e==null?void 0:e.match(Lce);if(!t)return null;const[,r,i,n]=t;if(!r)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:h}=Ace;if(i)if(s=r,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function kce(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function nq(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function sq(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function Rce(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const Oce=()=>W.getLogger("esri.core.urlUtils"),Oy=Ke.request,ND="esri/config: esriConfig.request.proxyUrl is not set.",oq=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,aq=/^\s*http:/i,Nce=/^\s*https:/i,Pce=/^\s*file:/i,Dce=/:\d+$/,Fce=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,jce=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Vce=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let xm=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(jce);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(Vce),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const mb={},zce=new xm(Ke.applicationUrl);let Ti=zce;const Uce=Bce();let LO=Uce;const AO=()=>Ti,nje=()=>LO;function Bce(){const e=Ti.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${Ti.scheme}://${Ti.host}${Ti.port!=null?`:${Ti.port}`:""}`}${t}`}function mr(e){if(!e)return null;const t={path:null,query:null},r=new xm(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,i),t.query=kO(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function kO(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const n=i.indexOf("=");let s,o;n<0?(s=decodeURIComponent(i),o=""):(s=decodeURIComponent(i.slice(0,n)),o=decodeURIComponent(i.slice(n+1)));let a=r[s];typeof a=="string"&&(a=r[s]=[a]),Array.isArray(a)?a.push(o):r[s]=o}return r}function p1(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))).join("&"):Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const n=encodeURIComponent(r)+"=",s=t==null?void 0:t[r];return s?n+encodeURIComponent(s(i)):Array.isArray(i)?i.map(o=>G.isSerializable(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):G.isSerializable(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function lq(e=!1){let t,r=Oy.proxyUrl;if(typeof e=="string"){t=Jce(e);const i=R$(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw Oce().warn(ND),new N("urlUtils:proxy-not-set",ND);return t&&D3()&&(r=DO(r)),mr(r)}function sje(e,t=!1){const r=R$(e);let i,n;if(r){const s=RO(r.proxyUrl);i=s.path,n=s.query?kO(s.query):null}else if(t){const s=lq(e);i=s.path,n=s.query}if(i){const s=mr(e);e=i+"?"+s.path;const o=p1({...n,...s.query});o&&(e=`${e}?${o}`)}return e}const ug={path:"",query:""};function RO(e){const t=e.indexOf("?");return t!==-1?(ug.path=e.slice(0,t),ug.query=e.slice(t+1)):(ug.path=e,ug.query=null),ug}function uq(e){return e=(e=Jx(e=ede(e=RO(e).path),!0)).toLowerCase()}function Gce(e){const t={proxyUrl:e.proxyUrl,urlPrefix:uq(e.urlPrefix)},r=Oy.proxyRules,i=t.urlPrefix;let n=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;n=s;break}o.indexOf(i)===0&&(n=s+1)}return r.splice(n,0,t),n}function R$(e){const t=Oy.proxyRules,r=uq(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function qce(e,t){if(!e||!t)return!1;e=Zx(e),t=Zx(t);const r=OD(e),i=OD(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&sy(e,t,!0)}function cq(e,t){return e=Zx(e),t=Zx(t),Jx(e)===Jx(t)}function Zx(e){const t=(e=Co(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function P3(e,t=Oy.interceptors){const r=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i);if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function sy(e,t,r=!1){if(!e||!t)return!1;const i=j3(e),n=j3(t);return!(!r&&i.scheme!==n.scheme)&&i.host!=null&&n.host!=null&&i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function OO(e){if(typeof e=="string"){if(!Yn(e))return!0;e=j3(e)}if(sy(e,Ti))return!0;const t=Oy.trustedServers||[];for(let r=0;r<t.length;r++){const i=Hce(t[r]);for(let n=0;n<i.length;n++)if(sy(e,i[n]))return!0}return!1}function Hce(e){return mb[e]||(PO(e)||ga(e)?mb[e]=[new xm($s(e))]:mb[e]=[new xm(`http://${e}`),new xm(`https://${e}`)]),mb[e]}function $s(e,t=LO,r){return ga(e)?r!=null&&r.preserveProtocolRelative?e:Ti.scheme==="http"&&Ti.authority===Jn(e).slice(2)?`http:${e}`:`https:${e}`:PO(e)?e:oy(e[0]==="/"?Xce(t):t,e)}function NO(e,t=LO,r){if(e==null||!Yn(e))return e;const i=Co(e),n=i.toLowerCase(),s=Co(t).toLowerCase().replace(/\/+$/,""),o=r?Co(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(f,m,y)=>(y=f.indexOf(m,y))===-1?f.length:y;let l=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=a(n,"/",l+1);if(c===-1||o&&c<o.length)return e;e=i.slice(c);const h=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function Co(e){return e=ide(e=rde(e=tde(e=$s(e=e.trim()))))}function oy(...e){const t=e.filter(Ei);if(!(t!=null&&t.length))return;const r=[];if(Yn(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(r.push(n.slice(0,s+1)),Qce(t[0])&&(r[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<i.length;n++){const s=i[n];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&n===i.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function Jn(e,t=!1){if(e==null||O$(e)||pp(e))return null;let r=e.indexOf("://");if(r===-1&&ga(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=Jx(e,!0)),e}function Yn(e){return ga(e)||PO(e)}function O$(e){return e!=null&&e.slice(0,5)==="blob:"}function pp(e){return e!=null&&e.slice(0,5)==="data:"}function Wce(e){const t=ay(e);return t!=null&&t.isBase64?sq(t.data):null}function oje(e){return Rce(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Zce=/^data:(.*?)(;base64)?,(.*)$/;function ay(e){const t=e.match(Zce);if(!t)return null;const[,r,i,n]=t;return{mediaType:r,isBase64:!!i,data:n}}function dq(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function aje(e){return(await fetch(e)).blob()}function lje(e){const t=Wce(e);if(!t)return null;const r=ay(e);return new Blob([t],{type:r.mediaType})}function ga(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function PO(e){return e!=null&&oq.test(e)}function Jce(e){return e!=null&&Nce.test(e)||Ti.scheme==="https"&&ga(e)}function Yce(e){return e!=null&&aq.test(e)||Ti.scheme==="http"&&ga(e)}function Qce(e){return e!=null&&Pce.test(e)}function DO(e){return ga(e)?`https:${e}`:e.replace(aq,"https:")}function Kce(){return Ti.scheme==="http"}function D3(){return Ti.scheme==="https"}function Jx(e,t=!1){return ga(e)?e.slice(2):(e=e.replace(oq,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Xce(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function FO(e){let t=0;if(Yn(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function uje(e,t){if(!e)return"";const r=mr(e).path.replace(/\/+$/,""),i=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const n=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(n,"")}function ede(e){return e.endsWith("/")?e:`${e}/`}function hq(e){return e.replace(/\/+$/,"")}function tde(e){if(/^https?:\/\//i.test(e)){const t=RO(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function rde(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function ide(e){const t=Oy.httpsDomains;if(!Yce(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),Dce.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return Kce()&&i===Ti.authority&&!Fce.test(e)||(D3()&&i===Ti.authority||t&&t.some(n=>i===n||i.endsWith(`.${n}`))||D3()&&!R$(e))&&(e=DO(e)),e}function F3(e,t,r){if(!(t&&r&&e&&Yn(e)))return e;const i=e.indexOf("//"),n=e.indexOf("/",i+2),s=e.indexOf(":",i+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function j3(e){return typeof e=="string"?new xm($s(e)):(e.scheme||(e.scheme=Ti.scheme),e)}function cje(e){return sde.test(e)}function pq(e,t){const r=mr(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function nde(e,t,r){const i=mr(e),n=i.query||{};return n[t]=String(r),`${i.path}?${p1(n)}`}function D_(e,t){if(!t)return e;const r=mr(e),i=r.query||{};for(const[s,o]of Object.entries(t))o!=null&&(i[s]=o);const n=p1(i);return n?`${r.path}?${n}`:r.path}function dje(e){if(e==null)return null;const t=e.match(fq);return t?t[2]:null}function PD(e){if(e==null)return null;const t=e.match(fq);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function hje(e){return typeof e=="string"?ay(e)??{data:e}:new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(ay(i.result)),i.onerror=n=>r(n)})}const fq=/([^.]*)\.([^/]*)$/,sde=/(^data:image\/svg|\.svg$)/i,mq="20250407",yq="04d2b42da93678ca718b23aaf7e216985f10fa8e";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const ode="4.32";let Ee,jO=ode;jO="4.32.10";function pje(e){Ee=e}function ade(e){const t=Ee==null?void 0:Ee.findCredential(e);return t!=null&&t.token?nde(e,"token",t.token):e}F("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),F("host-webworker");function Ec(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=$s(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const n=NO(e,t.portalItem.itemUrl);n!=null&&lde.test(n)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(n).path)}return(e=V3(e,t==null?void 0:t.portal))&&N$.test(e)?zO(e):e}function yw(e,t,r=f1.YES){var n,s;if((e=e&&N$.test(e)?vq(e):e)==null)return e;!Yn(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=$s(e);if(t){const o=((n=t.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=t.url)==null?void 0:s.path);if(o){const a=V3(o,t.portal),l=V3(i,t.portal);i=NO(l,a,a),i!=null&&i!==l&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=gq(i,t==null?void 0:t.portal),Yn(i)&&(i=Co(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!Yn(i)&&!pp(i)&&r===f1.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function VO(e,t,r){return Ec(e,r)}function Yh(e,t,r,i){const n=yw(e,i);n!==void 0&&(t[r]=n)}const N$=/\/items\/([^/]+)\/resources\/(.*)/,lde=/^\.\/resources\//;function ude(e){const t=(e==null?void 0:e.match(N$))??null;return(t==null?void 0:t[1])??null}function cde(e){const t=(e==null?void 0:e.match(N$))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:a}=PD(r);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=PD(r.slice(i+1));return{prefix:r.slice(0,i),filename:n,extension:s}}function gq(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?F3(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function V3(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=AO();return sy(i,`${i.scheme}://${r}`)?F3(e,t.portalHostname,r):F3(e,r,t.portalHostname)}function zO(e){if(!e)return e||null;let t=e;return t&&Ee&&!Ee.findCredential(t)&&(t=nq(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function vq(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Ee&&!Ee.findCredential(t)&&(t=nq(t)),t}var f1;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(f1||(f1={}));const fje=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return f1},ensureMainOnlineDomain:gq,fromCDNUrl:vq,fromJSON:Ec,itemIdFromResourceUrl:ude,prefixAndFilenameFromResourceUrl:cde,read:VO,toCDNUrl:zO,toJSON:yw,write:Yh},Symbol.toStringTag,{value:"Module"})),wq={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},bq=Object.values(wq),_q=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${bq.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),dde=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${bq.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),hde=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function mje(e){return _q.test(e)}function Ny(e){if(e==null)return null;const t=mr(e),r=(t==null?void 0:t.path.match(_q))||(t==null?void 0:t.path.match(dde));if(!r)return null;const[,i,n,s,o]=r,a=n.indexOf("/");return{title:UO(a!==-1?n.slice(a+1):n),serverType:wq[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function pde(e){const t=mr(e).path.match(hde);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function UO(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function fde(e,t){const r=[];if(e){const i=Ny(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=UO(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function Yx(e){let t=Jn(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function mde(e,t){return e&&hq(pq(e,t))}function yde(e){let{url:t}=e;if(!t)return{url:t};t=pq(t,e.logger);const r=mr(t),i=Ny(r.path);let n;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(n=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const s=pde(r.path);s!=null&&(t=s.serviceUrl,n=s.sublayerId)}return{url:hq(t),layerId:n}}function gde(e,t,r,i,n){Yh(t,i,"url",n),i.url&&e.layerId!=null&&(i.url=oy(i.url,r,e.layerId.toString()))}function yje(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return r&&(i||n||s)}const vde=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function wde(e){const t=Jn(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!vde.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function xq(e,t){return!(!t&&!Ke.apiKey||!wde(e))}function bde(e,t,r=!1,i){return new Promise((n,s)=>{if(Xn(i))return void s(DD());let o=()=>{c(),s(new Error(`Unable to load ${t}`))},a=()=>{const h=e;c(),n(h)},l=()=>{if(!e)return;const h=e;c(),h.src="",s(DD())};const c=()=>{F("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,i!=null&&i.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",l),F("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function DD(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const Sq="Timeout exceeded";function _de(){return new Error(Sq)}function gje(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===Sq}function xde(e){Ke.request.crossOriginNoCorsDomains||(Ke.request.crossOriginNoCorsDomains={});const t=Ke.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[Jn(r)??""]=0:(t[Jn("http://"+r)??""]=0,t[Jn("https://"+r)??""]=0)}function Sde(e){const t=Ke.request.crossOriginNoCorsDomains;if(t){let r=Jn(e);if(r)return r=r.toLowerCase(),!sy(r,AO())&&t[r]<Date.now()-36e5}return!1}async function $de(e){var n;const t=mr(e);e=t.path,((n=t.query)==null?void 0:n.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=Ke.request.crossOriginNoCorsDomains,i=Jn(e);r&&i&&(r[i.toLowerCase()]=Date.now())}async function ft(e,t){var y;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=kO(t.query.toString().replaceAll("+"," ")));const r=pp(e),i=O$(e);i||r||(e=Co(e));const n={url:e,requestOptions:{...t}},s=g=>({data:g,getAllHeaders:ly,getHeader:ly,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=P3(e,_s.internalInterceptors);if(o){const g=await jD(o,n);if(g!=null)return s(g)}let a=P3(e);if(a){const g=await jD(a,n);if(g!=null)return s(g);a.after||a.error||(a=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"&&(F("host-webworker")||F("host-node")))throw Lo("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(t.method==="head"){if(t.body)throw Lo("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(r||i)throw Lo("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await Cde(),Qx)return Qx.execute(e,t);const l=new AbortController,c=Ls(t,()=>l.abort()),h={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:n,redoRequest:!1,useIdentity:_s.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=t.useRequestQueue?Ode(h):U3(h),m=await f.finally(()=>c==null?void 0:c.remove());return(y=a==null?void 0:a.after)==null||y.call(a,m),m}let Qx;const _s=Ke.request,$q="FormData"in globalThis,Ede=new Set([499,498,403,401]),Tde=new Set(["COM_0056","COM_0057","SB_0008"]),Mde=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],ly=()=>null,Kx=Symbol();function Ide(e){const t=Jn(e);t&&!ft._corsServers.includes(t)&&ft._corsServers.push(t)}function FD(e){const t=Jn(e);return!t||t.endsWith(".arcgis.com")||ft._corsServers.includes(t)||OO(t)}function Lo(e,t,r,i){let n="Error";const s={url:r.url,requestOptions:r.requestOptions,getAllHeaders:ly,getHeader:ly,ssl:!1};if(t instanceof N)return t.details?(t.details=O(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const o=i&&(()=>Array.from(i.headers)),a=i&&(h=>i.headers.get(h)),l=i==null?void 0:i.status,c=t.message;c&&(n=c),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=Kx in t?t[Kx]:t}return Ri(t)?Tt():new N(e,n,s)}async function Cde(){F("host-webworker")&&!Qx&&(Qx=await B(()=>import("./request-591c5f17.js"),[]))}async function z3(){Ee||await B(()=>import("./IdentityManager-ff64f72d.js"),[])}async function Lde(e){var a;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,n=r.body;let s=null,o=null;if($q&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:_s.priority,redirect:"follow",signal:i},(s||o)&&(e.fetchOptions.body=s||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=r.query)!=null&&a.token||s!=null&&s.get("token")),!e.hasToken&&xq(t)&&(r.query||(r.query={}),r.query.token=Ke.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!Eq(t)&&!Xn(i)){let l;r.authMode==="immediate"?(await z3(),l=await Ee.getCredential(t,{signal:i}),e.credential=l):r.authMode==="no-prompt"?(await z3(),l=await Ee.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=l):Ee&&(l=Ee.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function Eq(e){return Mde.some(t=>t.test(e))}async function Ade(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions??{},n=O$(t)||pp(t),s=r.responseType||"json",o=n?0:r.timeout!=null?r.timeout:_s.timeout;let a=!1;if(!n){e.useSSL&&(t=DO(t));let m={...r.query};e.credentialToken&&(m.token=e.credentialToken);let y=p1(m);F("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const g=t.length+1+y.length;let v;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||g>_s.maxUrlLength;const x=r.useProxy||!!R$(t);if(x){const b=lq(t);v=b.path,!a&&v.length+1+g>_s.maxUrlLength&&(a=!0),b.query&&(m={...b.query,...m})}if(i.method==="HEAD"&&(a||x)){if(a)throw g>_s.maxUrlLength?Lo("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Lo("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(x)throw Lo("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=D_(t,m):(i.body=p1(m),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=D_(t,m),x&&(e.useProxy=!0,t=`${v}?${t}`),m.token&&$q&&i.body instanceof FormData&&!kce(t)&&i.body.set("token",m.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!sy(t,AO())){if(OO(t))e.withCredentials=!0;else if(Ee){const b=Ee.findServerInfo(t);b!=null&&b.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",Sde(t)&&await $de(a?D_(t,m):t))}let l,c,h=0,f=!1;o>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")c=i,c.url=t,r.signal?c.signal=r.signal:delete c.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||kde(r.headers)||!n&&!e.useProxy&&_s.proxyUrl&&!FD(t)){if(ft._beforeFetch&&await ft._beforeFetch(t,i),l=await fetch(t,i),ft._afterFetch&&await ft._afterFetch(l),e.useProxy||Ide(t),r.responseType==="native")c=l;else if(i.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":c=await l.arrayBuffer();break;case"blob":case"image":c=await l.blob();break;default:c=await l.text()}if(h&&(clearTimeout(h),h=0),s==="json"||s==="xml"||s==="document")if(c)switch(s){case"json":c=JSON.parse(c);break;case"xml":c=VD(c,"application/xml");break;case"document":c=VD(c,"text/html")}else c=null;if(c){if(s==="array-buffer"||s==="blob"){const m=l.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&c[s==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(c).json();y.error&&(c=y)}catch{}}s==="image"&&c instanceof Blob&&(c=await zD(URL.createObjectURL(c),e,!0))}}else{c=await l.text();try{c=JSON.parse(c)}catch{}}}else c=await zD(t,e)}catch(m){if(m.name==="AbortError")throw f?_de():Tt("Request canceled");if(!(!l&&m instanceof TypeError&&_s.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||FD(t))throw m;e.redoRequest=!0,Gce({proxyUrl:_s.proxyUrl,urlPrefix:Jn(t)??""})}finally{h&&clearTimeout(h)}return[l,c]}async function jD(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(n){r=Lo("request:interceptor",n,t)}if((i instanceof Error||i instanceof N)&&(r=Lo("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function kde(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function VD(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}ft._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],ft._beforeFetch=void 0,ft._afterFetch=void 0;const Rde=new Map;async function Ode(e){const t=Pde(e.params.url);if(!t)return U3(e);const{QueueProcessor:r}=await B(()=>import("./QueueProcessor-faf2f495.js"),[]);return pw(Rde,t.origin,()=>{const n=t.isHosted?F("request-queue-concurrency-hosted"):F("request-queue-concurrency-non-hosted");return new r({concurrency:n,process:s=>{if(Xn(s.params.requestOptions))throw Lo("",Tt("Request canceled"),s.params);return U3(s)}})}).push(e)}async function U3(e){var s,o;let t,r;await Lde(e);try{do[t,r]=await Ade(e);while(!await Nde(e,t,r))}catch(a){const l=Lo("request:server",a,e.params,t);throw l.details.ssl=e.useSSL,(s=e.interceptor)!=null&&s.error&&e.interceptor.error(l),l}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!OO(i)){const a=Jn(i,!0);a&&_s.trustedServers.push(a)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&xde(r.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&Ee){const a=Ee.findServerInfo(n.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const c=Ee.findCredential(l,n.userId);c&&Ee._getIdenticalSvcIdx(l,c)===-1&&c.resources.unshift(l)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):ly,getHeader:t?a=>t.headers.get(a):ly,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Nde(e,t,r){var c;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let n,s;if(r&&(r.error&&typeof r.error=="object"?n=r.error:r.status==="error"&&Array.isArray(r.messages)&&(n={...r},n[Kx]=r,n.details=r.messages)),!n&&!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[Kx]=r,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const l=i.authMode;if(s===403&&(a===4||(c=n.message)!=null&&c.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&Ede.has(s)&&!Eq(e.params.url)&&(s!==403||(!o||!Tde.has(o))&&(a==null||a===2&&e.credentialToken))){await z3();try{const h=await Ee.getCredential(e.params.url,{error:Lo("request:server",n,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=h,e.credentialToken=h.token,e.useSSL=e.useSSL||h.ssl,!1}catch(h){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;n=h}}if(n)throw n;return!0}function zD(e,t,r=!1){const i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=_s.priority,n.src=e,bde(n,e,r,i)}function Pde(e){let t,r;return typeof e=="string"?(t=Jn(e,!0),r=Yx(e)):(t=e.origin,r=Yx(e.toString())),t==null?null:{origin:t,isHosted:r}}let Ns=class Tq{constructor(){this._emitter=new Tq.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){var c;let o=(c=this._listenersMap)==null?void 0:c.get(n);if(!o)return!1;const a=this._target||this;let l=!1;for(const h of o.slice()){const f="deref"in h?h.deref():h;f?f==null||f.call(a,s):l=!0}return l&&(o=o.filter(h=>!("deref"in h)||h.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(l=>this.on(l,s));return ow(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),et(()=>{var c;const a=(c=this._listenersMap)==null?void 0:c.get(n),l=(a==null?void 0:a.indexOf(s))??-1;l>=0&&a.splice(l,1)})}once(n,s){const o=this.on(n,a=>{o.remove();const l="deref"in s?s.deref():s;l==null||l.call(null,a)});return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let n=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=u([T("esri.core.Evented")],n),n};let r=class extends ce{constructor(){super(...arguments),this._emitter=new Ns.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,n){return this._emitter.emit(i,n)}on(i,n){return this._emitter.on(i,n)}once(i,n){return this._emitter.once(i,n)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=u([T("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(Ns);var lt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(lt||(lt={}));function BO(e){return(t,r)=>{t[r]=e}}let gw=class extends mG{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var fl;let Dde=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},Fde=class{constructor(t,r,i,n,s){this.target=t,this.added=r,this.removed=i,this.start=n,this.deleteCount=s}};const os=new hp(Dde,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function UD(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function LT(e){return e?e instanceof ll?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function AT(e){if(e!=null&&e.length)return e[0]}function jde(e,t,r,i){const n=Math.min(e.length-r,t.length-i);let s=0;for(;s<n&&e[r+s]===t[i+s];)s++;return s}function Mq(e,t,r,i){t&&t.forEach((n,s,o)=>{e.push(n),Mq(e,r.call(i,n,s,o),r,i)})}const Zl=new Set,Jl=new Set,Yl=new Set,kT=new Map;let Vde=0,ll=fl=class extends Ns.EventedAccessor{static isCollection(e){return e!=null&&e instanceof fl}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new gw,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Vde++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof fl?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Se(this._observable),this._items}set items(e){this._emitBeforeChanges(lt.ADD)||(this._splice(0,this.length,LT(e)),this._emitAfterChanges(lt.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return et();if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),et(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,i=this.on(e,n=>{var s;(s=r())==null||s.call(null,n),i.remove()});return i}add(e,t){if(Se(this._observable),this._emitBeforeChanges(lt.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(lt.ADD),this}addMany(e,t=this._items.length){if(Se(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(lt.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,LT(e)),this._emitAfterChanges(lt.ADD),this}at(e){if(Se(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Se(this._observable),!this.length||this._emitBeforeChanges(lt.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(lt.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Se(this._observable),this._createNewInstance({items:this._items.map(O)})}concat(...e){Se(this._observable);const t=e.map(LT);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Se(this._observable),!this.length||this._emitBeforeChanges(lt.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let n=0;n<i;n++)e.call(t,r[n],n,r);this._emitAfterChanges(lt.REMOVE)}destroyAll(){this.drain(UD)}destroyMany(e){const t=this.removeMany(e);return t.forEach(UD),t}every(e,t){return Se(this._observable),this._items.every(e,t)}filter(e,t){Se(this._observable);const r=arguments.length===2?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:r})}find(e,t){return Se(this._observable),this._items.find(e,t)}findIndex(e,t){return Se(this._observable),this._items.findIndex(e,t)}flatten(e,t){Se(this._observable);const r=[];return Mq(r,this,e,t),new fl(r)}forEach(e,t){return Se(this._observable),this._items.forEach(e,t)}getItemAt(e){return Se(this._observable),this._items[e]}getNextIndex(e){Se(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Se(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Se(this._observable),this._items.indexOf(e,t)}join(e=","){return Se(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Se(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Se(this._observable);const r=this._items.map(e,t);return new fl({items:r})}reorder(e,t=this.length-1){Se(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(lt.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(lt.MOVE)}return e}}pop(){if(Se(this._observable),!this.length||this._emitBeforeChanges(lt.REMOVE))return;const e=AT(this._splice(this.length-1,1));return this._emitAfterChanges(lt.REMOVE),e}push(...e){return Se(this._observable),this._emitBeforeChanges(lt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(lt.ADD)),this.length}reduce(e,t){Se(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){Se(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return Se(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Se(this._observable),e<0||e>=this.length||this._emitBeforeChanges(lt.REMOVE))return;const t=AT(this._splice(e,1));return this._emitAfterChanges(lt.REMOVE),t}removeMany(e){if(Se(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(lt.REMOVE))return[];const t=e instanceof fl?e.toArray():e,r=this._items,i=[],n=t.length;for(let s=0;s<n;s++){const o=t[s],a=r.indexOf(o);if(a>-1){const l=1+jde(t,r,s+1,a+1),c=this._splice(a,l);c&&c.length>0&&i.push.apply(i,c),s+=l-1}}return this._emitAfterChanges(lt.REMOVE),i}reverse(){if(Se(this._observable),this._emitBeforeChanges(lt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(lt.MOVE),this}shift(){if(Se(this._observable),!this.length||this._emitBeforeChanges(lt.REMOVE))return;const e=AT(this._splice(0,1));return this._emitAfterChanges(lt.REMOVE),e}slice(e=0,t=this.length){return Se(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Se(this._observable),this._items.some(e,t)}sort(e){if(Se(this._observable),!this.length||this._emitBeforeChanges(lt.MOVE)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(lt.MOVE),this}_requiresSort(e=(t,r)=>t===r?0:t<r?-1:1){const t=this.length-1;for(let r=0;r<t;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,t,...r){Se(this._observable);const i=(t?lt.REMOVE:0)|(r.length?lt.ADD:0);if(this._emitBeforeChanges(i))return[];const n=this._splice(e,t,r)||[];return this._emitAfterChanges(i),n}toArray(){return Se(this._observable),this._items.slice()}toJSON(){return Se(this._observable),this.toArray()}toLocaleString(){return Se(this._observable),this._items.toLocaleString()}toString(){return Se(this._observable),this._items.toString()}unshift(...e){return Se(this._observable),!e.length||this._emitBeforeChanges(lt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(lt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=hw(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=os.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),i.splice(e,0,s),e+=1,l-=1,c-=1);os.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=os.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);os.release(a)}}if(r!=null&&r.length){if(n){const h=[];for(const f of r){const m=n.ensureType(f);m==null&&f!=null||h.push(m)}r=h}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=e===this.length;if(a||l){const h=os.acquire();h.target=this,h.cancellable=!0;const f=os.acquire();f.target=this,f.cancellable=!1;for(const m of r)a?(h.reset(m),this.emit("before-add",h),h.defaultPrevented||(c?i.push(m):i.splice(e++,0,m),this._set("length",i.length),l&&(f.reset(m),this.emit("after-add",f)))):(c?i.push(m):i.splice(e++,0,m),this._set("length",i.length),f.reset(m),this.emit("after-add",f));os.release(f),os.release(h)}else{if(c)for(const h of r)i.push(h);else i.splice(e,0,...r);this._set("length",i.length)}}if((r!=null&&r.length||o!=null&&o.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const a=new Fde(this,r,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=os.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,os.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=os.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),os.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;Zl.clear(),Jl.clear(),Yl.clear();for(const{added:l,removed:c}of r){if(l)if(Yl.size===0&&Jl.size===0)for(const h of l)Zl.add(h);else for(const h of l)Jl.has(h)?(Yl.add(h),Jl.delete(h)):Yl.has(h)||Zl.add(h);if(c)if(Yl.size===0&&Zl.size===0)for(const h of c)Jl.add(h);else for(const h of c)Zl.has(h)?Zl.delete(h):(Yl.delete(h),Jl.add(h))}const i=Gi.acquire();Zl.forEach(l=>{i.push(l)});const n=Gi.acquire();Jl.forEach(l=>{n.push(l)});const s=this._items,o=t.items,a=Gi.acquire();if(Yl.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),t.listeners&&(i.length||n.length||a.length)){const l={target:this,added:i,removed:n,moved:a},c=t.listeners.length;for(let h=0;h<c;h++){const f=t.listeners[h];f.removed||f.callback.call(this,l)}}Gi.release(i),Gi.release(n),Gi.release(a)}Zl.clear(),Jl.clear(),Yl.clear()}};ll.ofType=e=>{if(!e)return fl;if(kT.has(e))return kT.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const n=e.typeMap[i].prototype.declaredClass;t?t+=` | ${n}`:t=n}let r=class extends fl{};return u([BO({Type:e,ensureType:typeof e=="function"?Er(e):Oo(e)})],r.prototype,"itemType",void 0),r=u([T(`esri.core.Collection<${t}>`)],r),kT.set(e,r),r},u([d()],ll.prototype,"_updating",void 0),u([d()],ll.prototype,"length",void 0),u([d()],ll.prototype,"items",null),u([d({readOnly:!0})],ll.prototype,"updating",null),ll=fl=u([T("esri.core.Collection")],ll);const ie=ll;function Dl(e,t,r=ie){return t||(t=new r),t===e||(t.removeAll(),zde(e)?t.addMany(e):e&&t.add(e)),t}function Iq(e){return e}function zde(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Du;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Du||(Du={}));let Ude=class{constructor(){this._resolver=es(),this._status=Du.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Du.RESOLVED,this._cleanUp()},()=>{this._status=Du.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Du.RESOLVED}isRejected(){return this._status===Du.REJECTED}isFulfilled(){return this._status!==Du.PENDING}abort(){this._resolver.reject(Tt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=es(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==i||Ri(n)||this._resolver.reject(n)}),t.resolve()}};const Cq=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new Ude,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=u([T("esri.core.Promise")],t),t};let Bg=class extends Cq(ce){};Bg=u([T("esri.core.Promise")],Bg),function(e){e.EsriPromiseMixin=Cq}(Bg||(Bg={}));const vw=Bg,Bde="not-loaded",Gde="loading",qde="failed",BD="loaded",Lq=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const c=xO(s,l);this.destroyed&&l(new N("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{c&&c.remove()})});if(this.loadStatus===Bde){this._set("loadStatus",Gde);const a=this._loadController=new AbortController;n({signal:a.signal})}return i(),o}})),this.when(()=>{this._set("loadStatus",BD),this._loadController=null},i=>{this._set("loadStatus",qde),this._set("loadError",i),this._loadController=null})}destroy(){this._loadController&&(this._loadController=iy(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===BD}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new N("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return u([d({readOnly:!0})],t.prototype,"loaded",null),u([d({readOnly:!0})],t.prototype,"loadError",void 0),u([d({clonable:!1})],t.prototype,"loadStatus",void 0),u([d({type:[Os],readOnly:!0})],t.prototype,"loadWarnings",null),t=u([T("esri.core.Loadable")],t),t};let Gg=class extends Lq(vw){};Gg=u([T("esri.core.Loadable")],Gg),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=Lq,e.isLoadable=t}(Gg||(Gg={}));const va=Gg;function Hde(e,t,r){return SO(e.map((i,n)=>t.apply(r,[i,n])))}async function Wde(e,t,r){return(await SO(e.map((i,n)=>t.apply(r,[i,n])))).map(i=>i.value)}function GO(e){return{ok:!0,value:e}}function qO(e){return{ok:!1,error:e}}function Zde(e){return e!=null&&e.ok===!0?e.value:null}function Jde(e){return e!=null&&e.ok===!1?e.error:null}async function P$(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return GO(await e)}catch(t){return qO(t)}}async function Yde(e){try{return GO(await e)}catch(t){return _o(t),qO(t)}}function ww(e,t){return new ou(e,t)}let ou=class extends ce{get value(){return Zde(this._result)}get error(){return Jde(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=iy(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(n=>{this._result=GO(n),this._cleanup()},n=>{this._result=qO(n),this._cleanup()}),this._abortHandle=Ls(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Ft(this._abortHandle),this._abortController=null}};u([d()],ou.prototype,"value",null),u([d()],ou.prototype,"error",null),u([d()],ou.prototype,"finished",null),u([d()],ou.prototype,"promise",void 0),u([d()],ou.prototype,"_result",void 0),ou=u([T("esri.core.asyncUtils.ReactiveTask")],ou);async function Aq(e,t){return await e.load(),Qde(e,t)}async function Qde(e,t){const r=[],i=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?i(...o):ie.isCollection(o)?o.forEach(a=>i(a)):va.isLoadable(o)&&r.push(o))};t(i);let n=null;if(await Wde(r,async s=>{const o=await P$(Kde(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return e}function Kde(e){return"loadAll"in e&&typeof e.loadAll=="function"}function te(e,t,r){let i,n;return t===void 0?(n=e,i=[void 0]):typeof t!="string"?(n=e,i=[void 0],r=t):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const l of i){const c=VG(s,l,n);c.write&&typeof c.write=="object"||(c.write={}),r&&(c.write.target=r),c.write.writer=a[o]}}}let je=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Xde(t),this.apiValues=GD(this._apiToJSON),this.jsonValues=GD(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,n,s)=>{const o=this.toJSON(i);o!==void 0&&Xr(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function Xde(e){const t={};for(const r in e)t[e[r]]=r;return t}function GD(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function ei(){return function(e,t){return new je(e,{ignoreUnknown:!0,...t})}}let HO=class{constructor(t,r,i,n,s,o){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=n,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Xt=new HO(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),ya=new HO(3396190,1/169.8944472236118,23e4,6e4,.111),Tc=new HO(1737400,0,0,0,0);function Nt(e){if(!Ke.assetsPath)throw W.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new N("assets:path-not-set","config.assetsPath is not set");return oy(Ke.assetsPath,e)}let RT,R=null;function WO(){return!!R}function ehe(){return!!F("esri-wasm")}function kq(){return RT||(RT=B(()=>import("./pe-wasm-027b8872.js"),["assets/pe-wasm-027b8872.js","assets/_commonjsHelpers-2f3e7994.js"]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Nt(`esri/geometry/support/${t}`)})).then(e=>{Nq(e)}),RT)}var B3,Pt;(function(e){function t(s,o,a){R.ensureCache.prepare();const l=hh(a),c=a===l,h=R.ensureFloat64(l),f=R._pe_geog_to_proj(R.getPointer(s),o,h);return f&&Hu(a,o,h,c),f}function r(s,o,a,l){switch(l){case Pt.PE_TRANSFORM_P_TO_G:return i(s,o,a);case Pt.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function i(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){R.ensureCache.prepare();const c=hh(a),h=a===c,f=R.ensureFloat64(c),m=R._pe_proj_to_geog_center(R.getPointer(s),o,f,l);return m&&Hu(a,o,f,h),m}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=n})(B3||(B3={})),function(e){function t(){e.PE_BUFFER_MAX=R.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=R.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=R.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=R.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=R.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=R.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=R.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=R.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=R.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=R.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=R.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=R.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=R.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=R.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=R.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=R.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=R.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=R.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=R.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=R.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=R.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=R.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=R.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=R.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=R.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=R.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=R.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=R.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=R.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=R.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=R.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=R.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Pt||(Pt={}));let Rq=null;var G3;(function(e){const t={},r={},i=y=>{const g=y.getType();switch(g){case Pt.PE_TYPE_GEOGCS:y=R.castObject(y,R.PeGeogcs);break;case Pt.PE_TYPE_PROJCS:y=R.castObject(y,R.PeProjcs);break;case Pt.PE_TYPE_GEOGTRAN:y=R.castObject(y,R.PeGeogtran);break;default:g&Pt.PE_TYPE_UNIT&&(y=R.castObject(y,R.PeUnit))}return y};function n(){R.PeFactory.prototype.initialize(null)}function s(y){return o(Pt.PE_TYPE_COORDSYS,y)}function o(y,g){let v=null,x=t[y];if(x||(x={},t[y]=x),x.hasOwnProperty(String(g))&&(v=x[g],R.compare(v,R.NULL)&&(v=null)),!v){const b=R.PeFactory.prototype.factoryByType(y,g);R.compare(b,R.NULL)||(v=i(b),x[g]=v)}return v}function a(y,g){let v=null,x=r[y];if(x||(x={},r[y]=x),x.hasOwnProperty(g)&&(v=x[g],R.compare(v,R.NULL)&&(v=null)),!v){const b=R.PeFactory.prototype.fromString(y,g);R.compare(b,R.NULL)||(v=i(b),x[g]=v)}return v}function l(y){return o(Pt.PE_TYPE_GEOGCS,y)}function c(y){return o(Pt.PE_TYPE_GEOGTRAN,y)}function h(y){return R.PeFactory.prototype.getCode(y)}function f(y){return o(Pt.PE_TYPE_PROJCS,y)}function m(y){return o(Pt.PE_TYPE_UNIT,y)}e.initialize=n,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=c,e.getCode=h,e.projcs=f,e.unit=m})(G3||(G3={}));let Oq=null;var Xx,q3,H3,W3,Z3,J3,eS,Y3,tS,rS,Q3;function Nq(e){function t(s,o,a){s[o]=a(s[o])}R=e,Pt.init(),Xx.init(),eS.init(),tS.init(),rS.init(),Rq=class extends R.PeDouble{constructor(s=NaN){super(s)}destroy(){R.destroy(this)}[Symbol.dispose](){this.destroy()}},Oq=class extends R.PeGCSExtent{destroy(){R.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[R.PeAngunit,R.PeDatum,R.PeGeogcs,R.PeGeogtran,R.PeObject,R.PeParameter,R.PePrimem,R.PeProjcs,R.PeSpheroid,R.PeUnit];for(const s of r)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(Pt.PE_NAME_MAX))});for(const s of[R.PeGeogtran,R.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(Pt.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const h=R.getValue(l,"*");a[c]=h?R.wrapPointer(h,R.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(R.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return Hu(l,a,s.call(this),o),l}),t(R.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=R._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!R.compare(l,R.NULL)){a=[l];const c=this.getSteps();if(c>1){const h=R.getPointer(l);for(let f=1;f<c;f++)a.push(R.wrapPointer(h+o*f,R.PeGTlistExtendedGTs))}}return a}});const i=R._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!R.compare(l,R.NULL)){a=[l];const c=l.getNump();if(c>1){const h=R.getPointer(l);for(let f=1;f<c;f++)a.push(R.wrapPointer(h+i*f,R.PeHorizon))}}return o.set(s,a),a};t(R.PeProjcs.prototype,"horizonGcsGenerate",n),t(R.PeProjcs.prototype,"horizonPcsGenerate",n),R.PeObject.prototype.toString=function(s=Pt.PE_STR_OPTS_NONE){R.ensureCache.prepare();const o=R.getPointer(this),a=R.ensureInt8(new Array(Pt.PE_BUFFER_MAX));return R.UTF8ToString(R._pe_object_to_string_ext(o,s,a))},R.PeGeogcs.prototype.destroy=function(){this.Delete(),ho(this),this.ptr=0},R.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},R.PeProjcs.prototype.destroy=function(){this.Delete(),ho(this),this.ptr=0},R.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function ho(e){if(!e)return;const t=R.getClass(e);if(!t)return;const r=R.getCache(t);if(!r)return;const i=R.getPointer(e);i&&delete r[i]}function yb(e,t){const r=[],i=new Array(t);for(let n=0;n<e;n++)r.push(R.ensureInt8(i));return r}function hh(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function Hu(e,t,r,i=!1){if(i)for(let n=0;n<2*t;n++)e[n]=R.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=R.getValue(r,"double"),e[s][1]=R.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=R.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=R._pe_getPeGTlistExtendedEntrySize()}function i(n,s,o,a,l,c){let h=null;const f=new R.PeInteger(c);try{const m=R.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,f);if((c=f.val)&&(h=[m],c>1)){const y=R.getPointer(m);for(let g=1;g<c;g++)h.push(R.wrapPointer(y+t*g,R.PeGTlistExtendedEntry))}}finally{R.destroy(f)}return h}e.init=r,e.getGTlist=i})(Xx||(Xx={})),function(e){function t(r){if(r!=null&&r.length){for(const i of r)ho(i),i.getEntries().forEach(n=>{ho(n);const s=n.getGeogtran();ho(s),s.getParameters().forEach(ho),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{ho(o);const a=o.getDatum();ho(a),ho(a.getSpheroid()),ho(o.getPrimem()),ho(o.getUnit())})});R.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(q3||(q3={})),function(e){function t(r,i,n,s,o){R.ensureCache.prepare();const a=hh(n),l=n===a,c=R.ensureFloat64(a);let h=0;s&&(h=R.ensureFloat64(s));const f=R._pe_geog_to_geog(R.getPointer(r),i,c,h,o);return f&&Hu(n,i,c,l),f}e.geogToGeog=t}(H3||(H3={})),function(e){function t(s,o,a,l,c,h,f,m){R.PeLineType.prototype.geodesic_coordinate(s,o,a,l,c,h,f,m)}function r(s,o,a,l,c,h,f,m,y){R.PeLineType.prototype.geodetic_coordinate(s,o,a,l,c,h,f,m,y)}function i(s,o,a,l,c,h,f,m,y,g){R.PeLineType.prototype.geodetic_distance(s,o,a,l,c,h,f,m,y,g)}function n(s,o,a,l,c,h,f,m,y){R.PeLineType.prototype.great_elliptic_distance(s,o,a,l,c,h,f,m,y)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=i,e.greatEllipticDistance=n}(W3||(W3={})),function(e){function t(o,a){return R.PeMath.prototype.phi_to_eta(o,a)}function r(o,a){return R.PeMath.prototype.eta_to_phi(o,a)}function i(o,a){return R.PeMath.prototype.phi_to_phig(o,a)}function n(o,a,l){return R.PeMath.prototype.q(o,a,l)}function s(o,a){return R.PeMath.prototype.q90(o,a)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=i,e.q=n,e.q90=s}(Z3||(Z3={})),function(e){const t=(c,h,f,m,y,g)=>{let v,x;switch(R.ensureCache.prepare(),c){case"dd":v=R._pe_geog_to_dd,x=Pt.PE_DD_MAX;break;case"ddm":v=R._pe_geog_to_ddm,x=Pt.PE_DDM_MAX;break;case"dms":v=R._pe_geog_to_dms,x=Pt.PE_DMS_MAX}let b=0;h&&(b=R.getPointer(h));const _=hh(m),S=R.ensureFloat64(_),$=yb(f,x),M=v(b,f,S,y,R.ensureInt32($));if(M)for(let I=0;I<f;I++)g[I]=R.UTF8ToString($[I]);return M},r=(c,h,f,m,y)=>{let g;switch(R.ensureCache.prepare(),c){case"dd":g=R._pe_dd_to_geog;break;case"ddm":g=R._pe_ddm_to_geog;break;case"dms":g=R._pe_dms_to_geog}let v=0;h&&(v=R.getPointer(h));const x=m.map($=>R.ensureString($)),b=R.ensureInt32(x),_=R.ensureFloat64(new Array(2*f)),S=g(v,f,b,_);return S&&Hu(y,f,_),S};function i(c,h,f,m,y){return t("dms",c,h,f,m,y)}function n(c,h,f,m){return r("dms",c,h,f,m)}function s(c,h,f,m,y){return t("ddm",c,h,f,m,y)}function o(c,h,f,m){return r("ddm",c,h,f,m)}function a(c,h,f,m,y){return t("dd",c,h,f,m,y)}function l(c,h,f,m){return r("dd",c,h,f,m)}e.geogToDms=i,e.dmsToGeog=n,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(J3||(J3={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=R.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=R.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=R.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=R.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=R.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(n,s,o,a,l,c,h){R.ensureCache.prepare();let f=0;n&&(f=R.getPointer(n));const m=hh(o),y=R.ensureFloat64(m),g=yb(s,Pt.PE_MGRS_MAX),v=R.ensureInt32(g),x=R._pe_geog_to_mgrs_extended(f,s,y,a,l,c,v);if(x)for(let b=0;b<s;b++)h[b]=R.UTF8ToString(g[b]);return x}function i(n,s,o,a,l){R.ensureCache.prepare();let c=0;n&&(c=R.getPointer(n));const h=o.map(g=>R.ensureString(g)),f=R.ensureInt32(h),m=R.ensureFloat64(new Array(2*s)),y=R._pe_mgrs_to_geog_extended(c,s,f,a,m);return y&&Hu(l,s,m),y}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(eS||(eS={})),function(e){function t(i,n,s,o,a,l,c){R.ensureCache.prepare();let h=0;i&&(h=R.getPointer(i));const f=hh(s),m=R.ensureFloat64(f),y=yb(n,Pt.PE_MGRS_MAX),g=R.ensureInt32(y),v=R._pe_geog_to_usng(h,n,m,o,a,l,g);if(v)for(let x=0;x<n;x++)c[x]=R.UTF8ToString(y[x]);return v}function r(i,n,s,o){R.ensureCache.prepare();let a=0;i&&(a=R.getPointer(i));const l=s.map(m=>R.ensureString(m)),c=R.ensureInt32(l),h=R.ensureFloat64(new Array(2*n)),f=R._pe_usng_to_geog(a,n,c,h);return f&&Hu(o,n,h),f}e.geogToUsng=t,e.usngToGeog=r}(Y3||(Y3={})),function(e){function t(){e.PE_UTM_OPTS_NONE=R.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=R.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=R.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(n,s,o,a,l){R.ensureCache.prepare();let c=0;n&&(c=R.getPointer(n));const h=hh(o),f=R.ensureFloat64(h),m=yb(s,Pt.PE_UTM_MAX),y=R.ensureInt32(m),g=R._pe_geog_to_utm(c,s,f,a,y);if(g)for(let v=0;v<s;v++)l[v]=R.UTF8ToString(m[v]);return g}function i(n,s,o,a,l){R.ensureCache.prepare();let c=0;n&&(c=R.getPointer(n));const h=o.map(g=>R.ensureString(g)),f=R.ensureInt32(h),m=R.ensureFloat64(new Array(2*s)),y=R._pe_utm_to_geog(c,s,f,a,m);return y&&Hu(l,s,m),y}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(tS||(tS={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=R.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=R.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=R.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=R.PePCSInfo.prototype.PE_POLE_POINT}function i(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(n)&&(a=t.get(n),a[s]&&(o=a[s])),o||(o=R.PePCSInfo.prototype.generate(n,s),a||(a=[],t.set(n,a)),a[s]=o),o}e.init=r,e.generate=i}(rS||(rS={})),function(e){function t(){return R.PeVersion.prototype.version_string()}e.versionString=t}(Q3||(Q3={}));const the=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return B3},get PeDefs(){return Pt},get PeDouble(){return Rq},get PeFactory(){return G3},get PeGCSExtent(){return Oq},get PeGTTransformations(){return H3},get PeGTlistExtended(){return Xx},get PeGTlistExtendedEntry(){return q3},get PeLineType(){return W3},get PeMath(){return Z3},get PeNotationDms(){return J3},get PeNotationMgrs(){return eS},get PeNotationUsng(){return Y3},get PeNotationUtm(){return tS},get PePCSInfo(){return rS},get PeVersion(){return Q3},_init:Nq,get _pe(){return R},isLoaded:WO,isSupported:ehe,load:kq},Symbol.toStringTag,{value:"Module"}));var Qh;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Qh||(Qh={}));let p;const E={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10665:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(p=2e3;p<=2045;p++)E[p]=0;for(p=2056;p<=2065;p++)E[p]=0;for(p=2067;p<=2135;p++)E[p]=0;for(p=2137;p<=2154;p++)E[p]=0;for(p=2161;p<=2170;p++)E[p]=0;for(p=2172;p<=2193;p++)E[p]=0;for(p=2195;p<=2198;p++)E[p]=0;for(p=2200;p<=2203;p++)E[p]=0;for(p=2205;p<=2217;p++)E[p]=0;for(p=2222;p<=2224;p++)E[p]=1;for(p=2225;p<=2250;p++)E[p]=2;for(p=2251;p<=2253;p++)E[p]=1;for(p=2257;p<=2264;p++)E[p]=2;for(p=2274;p<=2279;p++)E[p]=2;for(p=2280;p<=2282;p++)E[p]=1;for(p=2283;p<=2289;p++)E[p]=2;for(p=2290;p<=2292;p++)E[p]=0;for(p=2308;p<=2313;p++)E[p]=0;for(p=2315;p<=2491;p++)E[p]=0;for(p=2494;p<=2866;p++)E[p]=0;for(p=2867;p<=2869;p++)E[p]=1;for(p=2870;p<=2888;p++)E[p]=2;for(p=2891;p<=2895;p++)E[p]=2;for(p=2896;p<=2898;p++)E[p]=1;for(p=2902;p<=2908;p++)E[p]=2;for(p=2915;p<=2920;p++)E[p]=2;for(p=2921;p<=2923;p++)E[p]=1;for(p=2924;p<=2930;p++)E[p]=2;for(p=2931;p<=2962;p++)E[p]=0;for(p=2964;p<=2968;p++)E[p]=2;for(p=2969;p<=2973;p++)E[p]=0;for(p=2975;p<=2991;p++)E[p]=0;for(p=2995;p<=3051;p++)E[p]=0;for(p=3054;p<=3079;p++)E[p]=0;for(p=3081;p<=3088;p++)E[p]=0;for(p=3092;p<=3101;p++)E[p]=0;for(p=3106;p<=3138;p++)E[p]=0;for(p=3146;p<=3151;p++)E[p]=0;for(p=3153;p<=3166;p++)E[p]=0;for(p=3168;p<=3172;p++)E[p]=0;for(p=3174;p<=3203;p++)E[p]=0;for(p=3294;p<=3358;p++)E[p]=0;for(p=3367;p<=3403;p++)E[p]=0;for(p=3408;p<=3416;p++)E[p]=0;for(p=3417;p<=3438;p++)E[p]=2;for(p=3441;p<=3446;p++)E[p]=2;for(p=3447;p<=3450;p++)E[p]=0;for(p=3451;p<=3459;p++)E[p]=2;for(p=3460;p<=3478;p++)E[p]=0;for(p=3554;p<=3559;p++)E[p]=0;for(p=3560;p<=3570;p++)E[p]=2;for(p=3571;p<=3581;p++)E[p]=0;for(p=3594;p<=3597;p++)E[p]=0;for(p=3601;p<=3604;p++)E[p]=0;for(p=3637;p<=3639;p++)E[p]=0;for(p=3665;p<=3667;p++)E[p]=0;for(p=3693;p<=3695;p++)E[p]=0;for(p=3701;p<=3727;p++)E[p]=0;for(p=3728;p<=3739;p++)E[p]=2;for(p=3740;p<=3751;p++)E[p]=0;for(p=3753;p<=3760;p++)E[p]=2;for(p=3761;p<=3773;p++)E[p]=0;for(p=3775;p<=3777;p++)E[p]=0;for(p=3779;p<=3781;p++)E[p]=0;for(p=3783;p<=3785;p++)E[p]=0;for(p=3788;p<=3791;p++)E[p]=0;for(p=3797;p<=3802;p++)E[p]=0;for(p=3814;p<=3816;p++)E[p]=0;for(p=3825;p<=3829;p++)E[p]=0;for(p=3832;p<=3841;p++)E[p]=0;for(p=3844;p<=3852;p++)E[p]=0;for(p=3873;p<=3885;p++)E[p]=0;for(p=3890;p<=3893;p++)E[p]=0;for(p=3907;p<=3912;p++)E[p]=0;for(p=3942;p<=3950;p++)E[p]=0;for(p=3968;p<=3970;p++)E[p]=0;for(p=3973;p<=3976;p++)E[p]=0;for(p=3986;p<=3989;p++)E[p]=0;for(p=3994;p<=3997;p++)E[p]=0;for(p=4048;p<=4051;p++)E[p]=0;for(p=4056;p<=4063;p++)E[p]=0;for(p=4093;p<=4096;p++)E[p]=0;for(p=4390;p<=4398;p++)E[p]=0;for(p=4399;p<=4413;p++)E[p]=2;for(p=4418;p<=4433;p++)E[p]=2;for(p=4455;p<=4457;p++)E[p]=2;for(p=4484;p<=4489;p++)E[p]=0;for(p=4491;p<=4554;p++)E[p]=0;for(p=4568;p<=4589;p++)E[p]=0;for(p=4652;p<=4656;p++)E[p]=0;for(p=4766;p<=4800;p++)E[p]=0;for(p=5014;p<=5016;p++)E[p]=0;for(p=5069;p<=5072;p++)E[p]=0;for(p=5105;p<=5130;p++)E[p]=0;for(p=5167;p<=5188;p++)E[p]=0;for(p=5253;p<=5259;p++)E[p]=0;for(p=5269;p<=5275;p++)E[p]=0;for(p=5292;p<=5311;p++)E[p]=0;for(p=5329;p<=5331;p++)E[p]=0;for(p=5343;p<=5349;p++)E[p]=0;for(p=5355;p<=5357;p++)E[p]=0;for(p=5387;p<=5389;p++)E[p]=0;for(p=5459;p<=5463;p++)E[p]=0;for(p=5479;p<=5482;p++)E[p]=0;for(p=5518;p<=5520;p++)E[p]=0;for(p=5530;p<=5539;p++)E[p]=0;for(p=5550;p<=5552;p++)E[p]=0;for(p=5562;p<=5583;p++)E[p]=0;for(p=5623;p<=5625;p++)E[p]=2;for(p=5631;p<=5639;p++)E[p]=0;for(p=5649;p<=5653;p++)E[p]=0;for(p=5663;p<=5680;p++)E[p]=0;for(p=5682;p<=5685;p++)E[p]=0;for(p=5875;p<=5877;p++)E[p]=0;for(p=5896;p<=5899;p++)E[p]=0;for(p=5921;p<=5940;p++)E[p]=0;for(p=6050;p<=6125;p++)E[p]=0;for(p=6244;p<=6275;p++)E[p]=0;for(p=6328;p<=6348;p++)E[p]=0;for(p=6350;p<=6356;p++)E[p]=0;for(p=6366;p<=6372;p++)E[p]=0;for(p=6381;p<=6387;p++)E[p]=0;for(p=6393;p<=6404;p++)E[p]=0;for(p=6480;p<=6483;p++)E[p]=0;for(p=6511;p<=6514;p++)E[p]=0;for(p=6579;p<=6581;p++)E[p]=0;for(p=6619;p<=6624;p++)E[p]=0;for(p=6625;p<=6627;p++)E[p]=2;for(p=6628;p<=6632;p++)E[p]=0;for(p=6634;p<=6637;p++)E[p]=0;for(p=6669;p<=6692;p++)E[p]=0;for(p=6707;p<=6709;p++)E[p]=0;for(p=6720;p<=6723;p++)E[p]=0;for(p=6732;p<=6738;p++)E[p]=0;for(p=6931;p<=6933;p++)E[p]=0;for(p=6956;p<=6959;p++)E[p]=0;for(p=7005;p<=7007;p++)E[p]=0;for(p=7057;p<=7070;p++)E[p]=2;for(p=7074;p<=7082;p++)E[p]=0;for(p=7109;p<=7118;p++)E[p]=0;for(p=7119;p<=7127;p++)E[p]=1;for(p=7374;p<=7376;p++)E[p]=0;for(p=7528;p<=7586;p++)E[p]=0;for(p=7587;p<=7645;p++)E[p]=2;for(p=7692;p<=7696;p++)E[p]=0;for(p=7755;p<=7787;p++)E[p]=0;for(p=7791;p<=7795;p++)E[p]=0;for(p=7799;p<=7801;p++)E[p]=0;for(p=7803;p<=7805;p++)E[p]=0;for(p=7825;p<=7831;p++)E[p]=0;for(p=7845;p<=7859;p++)E[p]=0;for(p=8013;p<=8032;p++)E[p]=0;for(p=8065;p<=8068;p++)E[p]=1;for(p=8518;p<=8529;p++)E[p]=2;for(p=8533;p<=8536;p++)E[p]=2;for(p=8538;p<=8540;p++)E[p]=2;for(p=8677;p<=8679;p++)E[p]=0;for(p=8836;p<=8840;p++)E[p]=0;for(p=8857;p<=8859;p++)E[p]=0;for(p=8908;p<=8910;p++)E[p]=0;for(p=9154;p<=9159;p++)E[p]=0;for(p=9205;p<=9218;p++)E[p]=0;for(p=9271;p<=9273;p++)E[p]=0;for(p=9295;p<=9297;p++)E[p]=0;for(p=9356;p<=9360;p++)E[p]=0;for(p=9404;p<=9407;p++)E[p]=0;for(p=9476;p<=9482;p++)E[p]=0;for(p=9487;p<=9494;p++)E[p]=0;for(p=9697;p<=9699;p++)E[p]=0;for(p=9821;p<=9865;p++)E[p]=0;for(p=10285;p<=10291;p++)E[p]=0;for(p=10314;p<=10317;p++)E[p]=0;for(p=10448;p<=10465;p++)E[p]=0;for(p=10731;p<=10733;p++)E[p]=0;for(p=11114;p<=11118;p++)E[p]=0;for(p=20004;p<=20032;p++)E[p]=0;for(p=20047;p<=20049;p++)E[p]=0;for(p=20062;p<=20092;p++)E[p]=0;for(p=20135;p<=20138;p++)E[p]=0;for(p=20248;p<=20258;p++)E[p]=0;for(p=20348;p<=20358;p++)E[p]=0;for(p=20436;p<=20440;p++)E[p]=0;for(p=20822;p<=20824;p++)E[p]=0;for(p=20904;p<=20932;p++)E[p]=0;for(p=20934;p<=20936;p++)E[p]=0;for(p=21004;p<=21032;p++)E[p]=0;for(p=21035;p<=21037;p++)E[p]=0;for(p=21095;p<=21097;p++)E[p]=0;for(p=21148;p<=21150;p++)E[p]=0;for(p=21207;p<=21264;p++)E[p]=0;for(p=21307;p<=21364;p++)E[p]=0;for(p=21413;p<=21423;p++)E[p]=0;for(p=21453;p<=21463;p++)E[p]=0;for(p=21473;p<=21483;p++)E[p]=0;for(p=21780;p<=21782;p++)E[p]=0;for(p=21891;p<=21894;p++)E[p]=0;for(p=21896;p<=21899;p++)E[p]=0;for(p=22171;p<=22177;p++)E[p]=0;for(p=22181;p<=22187;p++)E[p]=0;for(p=22191;p<=22197;p++)E[p]=0;for(p=22207;p<=22222;p++)E[p]=0;for(p=22229;p<=22232;p++)E[p]=0;for(p=22234;p<=22236;p++)E[p]=0;for(p=22243;p<=22250;p++)E[p]=0;for(p=22262;p<=22265;p++)E[p]=0;for(p=22307;p<=22322;p++)E[p]=0;for(p=22348;p<=22357;p++)E[p]=0;for(p=22407;p<=22422;p++)E[p]=0;for(p=22462;p<=22465;p++)E[p]=0;for(p=22521;p<=22525;p++)E[p]=0;for(p=22607;p<=22622;p++)E[p]=0;for(p=22641;p<=22646;p++)E[p]=0;for(p=22648;p<=22657;p++)E[p]=0;for(p=22707;p<=22722;p++)E[p]=0;for(p=22762;p<=22765;p++)E[p]=0;for(p=22807;p<=22822;p++)E[p]=0;for(p=22991;p<=22994;p++)E[p]=0;for(p=23028;p<=23038;p++)E[p]=0;for(p=23301;p<=23333;p++)E[p]=2;for(p=23830;p<=23853;p++)E[p]=0;for(p=23866;p<=23872;p++)E[p]=0;for(p=23877;p<=23884;p++)E[p]=0;for(p=23886;p<=23894;p++)E[p]=0;for(p=23946;p<=23948;p++)E[p]=0;for(p=24311;p<=24313;p++)E[p]=0;for(p=24342;p<=24347;p++)E[p]=0;for(p=24370;p<=24374;p++)E[p]=10;for(p=24375;p<=24381;p++)E[p]=0;for(p=24718;p<=24721;p++)E[p]=0;for(p=24817;p<=24821;p++)E[p]=0;for(p=24877;p<=24882;p++)E[p]=0;for(p=24891;p<=24893;p++)E[p]=0;for(p=25391;p<=25395;p++)E[p]=0;for(p=25828;p<=25838;p++)E[p]=0;for(p=26191;p<=26195;p++)E[p]=0;for(p=26391;p<=26393;p++)E[p]=0;for(p=26701;p<=26722;p++)E[p]=0;for(p=26729;p<=26799;p++)E[p]=2;for(p=26801;p<=26803;p++)E[p]=2;for(p=26811;p<=26813;p++)E[p]=2;for(p=26847;p<=26870;p++)E[p]=2;for(p=26891;p<=26899;p++)E[p]=0;for(p=26901;p<=26923;p++)E[p]=0;for(p=26929;p<=26946;p++)E[p]=0;for(p=26948;p<=26998;p++)E[p]=0;for(p=27037;p<=27040;p++)E[p]=0;for(p=27205;p<=27232;p++)E[p]=0;for(p=27258;p<=27260;p++)E[p]=0;for(p=27391;p<=27398;p++)E[p]=0;for(p=27561;p<=27564;p++)E[p]=0;for(p=27571;p<=27574;p++)E[p]=0;for(p=27581;p<=27584;p++)E[p]=0;for(p=27591;p<=27594;p++)E[p]=0;for(p=27700;p<=27707;p++)E[p]=0;for(p=28191;p<=28193;p++)E[p]=0;for(p=28348;p<=28358;p++)E[p]=0;for(p=28402;p<=28432;p++)E[p]=0;for(p=28462;p<=28492;p++)E[p]=0;for(p=29118;p<=29122;p++)E[p]=0;for(p=29168;p<=29172;p++)E[p]=0;for(p=29177;p<=29185;p++)E[p]=0;for(p=29187;p<=29195;p++)E[p]=0;for(p=29900;p<=29903;p++)E[p]=0;for(p=30161;p<=30179;p++)E[p]=0;for(p=30491;p<=30494;p++)E[p]=0;for(p=30729;p<=30732;p++)E[p]=0;for(p=31251;p<=31259;p++)E[p]=0;for(p=31265;p<=31268;p++)E[p]=0;for(p=31275;p<=31279;p++)E[p]=0;for(p=31281;p<=31297;p++)E[p]=0;for(p=31461;p<=31469;p++)E[p]=0;for(p=31491;p<=31495;p++)E[p]=0;for(p=31917;p<=31922;p++)E[p]=0;for(p=31965;p<=32e3;p++)E[p]=0;for(p=32001;p<=32003;p++)E[p]=2;for(p=32005;p<=32031;p++)E[p]=2;for(p=32033;p<=32060;p++)E[p]=2;for(p=32064;p<=32067;p++)E[p]=2;for(p=32074;p<=32077;p++)E[p]=2;for(p=32081;p<=32086;p++)E[p]=0;for(p=32107;p<=32130;p++)E[p]=0;for(p=32133;p<=32159;p++)E[p]=0;for(p=32164;p<=32167;p++)E[p]=2;for(p=32180;p<=32199;p++)E[p]=0;for(p=32201;p<=32260;p++)E[p]=0;for(p=32301;p<=32360;p++)E[p]=0;for(p=32401;p<=32460;p++)E[p]=0;for(p=32501;p<=32560;p++)E[p]=0;for(p=32601;p<=32662;p++)E[p]=0;for(p=32664;p<=32667;p++)E[p]=2;for(p=32701;p<=32761;p++)E[p]=0;for(p=53001;p<=53004;p++)E[p]=0;for(p=53008;p<=53019;p++)E[p]=0;for(p=53021;p<=53032;p++)E[p]=0;for(p=53034;p<=53037;p++)E[p]=0;for(p=53042;p<=53046;p++)E[p]=0;for(p=53074;p<=53080;p++)E[p]=0;for(p=54001;p<=54004;p++)E[p]=0;for(p=54008;p<=54019;p++)E[p]=0;for(p=54021;p<=54032;p++)E[p]=0;for(p=54034;p<=54037;p++)E[p]=0;for(p=54042;p<=54046;p++)E[p]=0;for(p=54048;p<=54053;p++)E[p]=0;for(p=54074;p<=54080;p++)E[p]=0;for(p=54098;p<=54101;p++)E[p]=0;for(p=102001;p<=102040;p++)E[p]=0;for(p=102042;p<=102063;p++)E[p]=0;for(p=102065;p<=102067;p++)E[p]=0;for(p=102070;p<=102117;p++)E[p]=0;for(p=102122;p<=102216;p++)E[p]=0;for(p=102221;p<=102377;p++)E[p]=0;for(p=102382;p<=102388;p++)E[p]=0;for(p=102389;p<=102398;p++)E[p]=2;for(p=102399;p<=102444;p++)E[p]=0;for(p=102445;p<=102447;p++)E[p]=2;for(p=102448;p<=102458;p++)E[p]=0;for(p=102459;p<=102468;p++)E[p]=2;for(p=102469;p<=102499;p++)E[p]=0;for(p=102500;p<=102519;p++)E[p]=1;for(p=102520;p<=102524;p++)E[p]=0;for(p=102525;p<=102529;p++)E[p]=2;for(p=102530;p<=102588;p++)E[p]=0;for(p=102590;p<=102598;p++)E[p]=0;for(p=102601;p<=102603;p++)E[p]=0;for(p=102605;p<=102628;p++)E[p]=0;for(p=102629;p<=102646;p++)E[p]=2;for(p=102648;p<=102700;p++)E[p]=2;for(p=102701;p<=102703;p++)E[p]=0;for(p=102707;p<=102730;p++)E[p]=2;for(p=102733;p<=102758;p++)E[p]=2;for(p=102767;p<=102900;p++)E[p]=0;for(p=102901;p<=102933;p++)E[p]=2;for(p=102934;p<=102950;p++)E[p]=13;for(p=102951;p<=102963;p++)E[p]=0;for(p=102965;p<=102969;p++)E[p]=0;for(p=102971;p<=102973;p++)E[p]=0;for(p=102975;p<=102989;p++)E[p]=0;for(p=102990;p<=102992;p++)E[p]=1;for(p=102997;p<=103002;p++)E[p]=0;for(p=103003;p<=103008;p++)E[p]=2;for(p=103009;p<=103011;p++)E[p]=0;for(p=103012;p<=103014;p++)E[p]=2;for(p=103019;p<=103021;p++)E[p]=0;for(p=103022;p<=103024;p++)E[p]=2;for(p=103029;p<=103031;p++)E[p]=0;for(p=103032;p<=103034;p++)E[p]=2;for(p=103065;p<=103068;p++)E[p]=0;for(p=103074;p<=103076;p++)E[p]=0;for(p=103077;p<=103079;p++)E[p]=1;for(p=103080;p<=103082;p++)E[p]=0;for(p=103083;p<=103085;p++)E[p]=2;for(p=103090;p<=103093;p++)E[p]=0;for(p=103097;p<=103099;p++)E[p]=0;for(p=103100;p<=103102;p++)E[p]=2;for(p=103107;p<=103109;p++)E[p]=0;for(p=103110;p<=103112;p++)E[p]=2;for(p=103113;p<=103116;p++)E[p]=0;for(p=103117;p<=103120;p++)E[p]=2;for(p=103153;p<=103157;p++)E[p]=0;for(p=103158;p<=103162;p++)E[p]=2;for(p=103163;p<=103165;p++)E[p]=0;for(p=103166;p<=103168;p++)E[p]=1;for(p=103169;p<=103171;p++)E[p]=2;for(p=103186;p<=103188;p++)E[p]=0;for(p=103189;p<=103191;p++)E[p]=2;for(p=103192;p<=103195;p++)E[p]=0;for(p=103196;p<=103199;p++)E[p]=2;for(p=103200;p<=103224;p++)E[p]=0;for(p=103225;p<=103227;p++)E[p]=1;for(p=103232;p<=103237;p++)E[p]=0;for(p=103238;p<=103243;p++)E[p]=2;for(p=103244;p<=103246;p++)E[p]=0;for(p=103247;p<=103249;p++)E[p]=2;for(p=103254;p<=103256;p++)E[p]=0;for(p=103257;p<=103259;p++)E[p]=2;for(p=103264;p<=103266;p++)E[p]=0;for(p=103267;p<=103269;p++)E[p]=2;for(p=103300;p<=103375;p++)E[p]=0;for(p=103381;p<=103383;p++)E[p]=0;for(p=103384;p<=103386;p++)E[p]=1;for(p=103387;p<=103389;p++)E[p]=0;for(p=103390;p<=103392;p++)E[p]=2;for(p=103397;p<=103399;p++)E[p]=0;for(p=103400;p<=103471;p++)E[p]=2;for(p=103476;p<=103478;p++)E[p]=0;for(p=103479;p<=103481;p++)E[p]=2;for(p=103486;p<=103488;p++)E[p]=0;for(p=103489;p<=103491;p++)E[p]=2;for(p=103492;p<=103495;p++)E[p]=0;for(p=103496;p<=103499;p++)E[p]=2;for(p=103528;p<=103543;p++)E[p]=0;for(p=103544;p<=103548;p++)E[p]=2;for(p=103549;p<=103551;p++)E[p]=0;for(p=103552;p<=103554;p++)E[p]=1;for(p=103555;p<=103557;p++)E[p]=2;for(p=103558;p<=103560;p++)E[p]=0;for(p=103571;p<=103573;p++)E[p]=0;for(p=103574;p<=103576;p++)E[p]=2;for(p=103577;p<=103580;p++)E[p]=0;for(p=103581;p<=103583;p++)E[p]=2;for(p=103595;p<=103694;p++)E[p]=0;for(p=103696;p<=103699;p++)E[p]=0;for(p=103700;p<=103793;p++)E[p]=2;for(p=103794;p<=103890;p++)E[p]=0;for(p=103891;p<=103896;p++)E[p]=2;for(p=103900;p<=103971;p++)E[p]=2;for(p=103972;p<=103977;p++)E[p]=0;for(p=112e3;p<=112101;p++)E[p]=0;const Pq=[102100,102113,3857,3785,900913],rhe=[104905,104971],ihe=[4326,...Pq,...rhe],m1=[-20037508342788905e-9,20037508342788905e-9],K3=[-20037508342787e-6,20037508342787e-6],OT={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:m1,origin:K3,dx:1e-5},Dq={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:m1,origin:K3,dx:1e-5},102100:OT,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:m1,origin:K3,dx:1e-5},3857:OT,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:OT};function Dr(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||wa(e)&&wa(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const a=t.latestWkid;return a!=null&&r===a}let n,s;return e.wkt2&&t.wkt2?(n=e.wkt2,s=t.wkt2):e.wkt&&t.wkt&&(n=e.wkt,s=t.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function Ji(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&Dq[t]||null}function Fq(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function Py(e){if(!Wn(e))return!1;const{wkid:t}=e;if(t)return E[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function nhe(e){return!(jq(e)||Vq(e))}function Kh(e){return(e==null?void 0:e.wkid)===4326}function Mje(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function qD(e){return(e==null?void 0:e.wkid)===Qh.CGCS2000}function wa(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&Pq.includes(t)}function she(e){return(e==null?void 0:e.wkid)===32662}function D$(e){return e===Qh.GCSMARS2000||e===Qh.GCSMARS2000_SPHERE}function jq(e){return D$(e==null?void 0:e.wkid)}function F$(e){return e===Qh.GCSMOON2000}function Vq(e){return F$(e==null?void 0:e.wkid)}function ohe(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&ihe.includes(t)}function Wn(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const zq={wkid:4326,wkt:nw(Dq[4326].wkTemplate,{Central_Meridian:"0.0"})},Uq={wkid:102100,latestWkid:3857},ahe={wkid:32662};function ZO(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const lhe=ZO(Xt),JO=ZO(ya),YO=ZO(Tc),uhe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Xt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},che=JO.wkt.toUpperCase(),dhe=YO.wkt.toUpperCase();function hhe(e){if(e!=null&&Wn(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(D$(t))return ya;const i=r==null?void 0:r.toUpperCase();if(r&&i===che)return ya;if(F$(t)||i&&i===dhe)return Tc}return Xt}function Ije(e){return D$(e)?ya:F$(e)?Tc:Xt}function iS(e){return Dr(e,lhe)}function Mc(e){return iS(e)||Dr(e,JO)||Dr(e,YO)}const Bq=39.37,phe=Xt.radius*Math.PI/200,Gq=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,uy=E,qq=/UNIT\[([^\]]+)]/i,fhe=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),mhe=ei()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Bs=e=>e*e,Ql=e=>e*e*e,y1={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Bs(.001)},"square-centimeters":{inBaseUnits:Bs(.01)},"square-decimeters":{inBaseUnits:Bs(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Bs(1e3)},"square-inches":{inBaseUnits:Bs(.0254)},"square-feet":{inBaseUnits:Bs(.3048)},"square-yards":{inBaseUnits:Bs(.9144)},"square-miles":{inBaseUnits:Bs(1609.344)},"square-nautical-miles":{inBaseUnits:Bs(1852)},"square-us-feet":{inBaseUnits:Bs(1200/3937)},acres:{inBaseUnits:.0015625*Bs(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Ql(.001)},"cubic-centimeters":{inBaseUnits:1e3*Ql(.01)},"cubic-decimeters":{inBaseUnits:1e3*Ql(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Ql(1e3)},"cubic-inches":{inBaseUnits:1e3*Ql(.0254)},"cubic-feet":{inBaseUnits:1e3*Ql(.3048)},"cubic-yards":{inBaseUnits:1e3*Ql(.9144)},"cubic-miles":{inBaseUnits:1e3*Ql(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},yhe=(()=>{const e={};for(const t in y1)for(const r in y1[t].units)e[r]=t;return e})();function ghe(e,t,r){return e*y1[r].units[t].inBaseUnits}function vhe(e,t,r){return e/y1[r].units[t].inBaseUnits}const Hq=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],whe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function X3(e){const t=yhe[e];if(!t)throw new Error("unknown type");return t}function HD(e,t=null){return t=t||X3(e),y1[t].baseUnit===e}function or(e,t,r){if(t===r)return e;const i=X3(t);if(i!==X3(r))throw new Error("incompatible units");const n=HD(t,i)?e:ghe(e,t,i);return HD(r,i)?n:vhe(n,r,i)}function Cje(e,t,r,i=!1){if(!i&&Py(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=fp(t);return n!==r&&(e=n?or(e,n,r):or(e*=Ds(t),"meters",r)),e}function Lje(e,t,r,i=!1){if(!i&&Py(r))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=fp(r);return t!==n&&(e=n?or(e,t,n):or(e,t,"meters")/Ds(r)),e}function bhe(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function Aje(e){return bhe(e)}function kje(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function Rje(e,t){const r=or(e,t,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function Oje(e,t){const r=or(e,t,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function Nje(e,t){const r=or(e,t,"feet");return Math.abs(r)<1e3?"feet":"miles"}function Pje(e,t){const r=or(e,t,"feet");return Math.abs(r)<1e5?"feet":"miles"}function Dje(e,t){const r=or(e,t,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function Fje(e,t){const r=or(e,t,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function _he(e,t,r){return or(e,t,"meters")/(r*Math.PI/180)}function QO(e){return mhe.fromJSON(e.toLowerCase())||null}function nS(e){if(e!=null&&!nhe(e))return 1;const t=Ds(e);return t>1e5?1:t}function Wq(e){return Ds(e)>=hhe(e).metersPerDegree?"meters":fp(e)}function Ds(e,t=Xt.metersPerDegree){return xhe(e,!0)??t}function xhe(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let n=null;if(r){if(D$(r))return ya.metersPerDegree;if(F$(r))return Tc.metersPerDegree;n=uy.values[uy[r]],!n&&t&&fhe.has(r)&&(n=phe)}else i&&(Yq(i)?n=WD(Gq.exec(i),n):Jq(i)&&(n=WD(qq.exec(i),n)));return n}function jje(e){return Py(e)?1:Ds(e)}function WD(e,t){return e!=null&&e[1]?Zq(e[1]):t}function Zq(e){return parseFloat(e.split(",")[1])}function fp(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=uy.units[uy[t]];else if(r){const n=Yq(r)?Gq:Jq(r)?qq:null;if(n){const s=n.exec(r);s!=null&&s[1]&&(i=$he(s[1]))}}return i!=null?QO(i):null}function Vje(e){const t=fp(e);return t!=null&&Hq.includes(t)?t:null}function zje(e){const t=Wq(e);return t!=null&&Hq.includes(t)?t:null}function Uje(e){const t=fp(e);return t==null?null:whe.get(t)}function Jq(e){return/^GEOCCS/i.test(e)}function Yq(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const She=1e-7;function $he(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!QO(r)){const i=Zq(e);r=null;const n=uy.values;for(let s=0;s<n.length;++s)if(Math.abs(i-n[s])<She){r=uy.units[s];break}}return r}function Bje(e){const t=fp(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const Ehe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},The={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Mhe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Ihe=ei()(Ehe),Che=ei()(The),Gje=ei()(Mhe);var Vo;let mt=Vo=class extends G{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return Vo.WebMercator;if((e==null?void 0:e.wkid)===4326)return Vo.WGS84;const t=new Vo;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Kh(this)}get isWebMercator(){return wa(this)}get isGeographic(){return Py(this)}get isWrappable(){return ohe(this)}get metersPerUnit(){return Ds(this)}get unit(){return fp(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Vo.WGS84)return new Vo(zq);if(this===Vo.WebMercator)return new Vo(Uq);const e=new Vo;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=O(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||i?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===t&&n.referenceServiceName===r:n.id===t}return Dr(this,e)}toJSON(e){return this.write(void 0,e)}};mt.GCS_NAD_1927=null,mt.WGS84=null,mt.WebMercator=null,mt.PlateCarree=null,u([d({readOnly:!0})],mt.prototype,"isWGS84",null),u([d({readOnly:!0})],mt.prototype,"isWebMercator",null),u([d({readOnly:!0})],mt.prototype,"isGeographic",null),u([d({readOnly:!0})],mt.prototype,"isWrappable",null),u([d({type:Xe,json:{write:!0}})],mt.prototype,"latestWkid",void 0),u([d({readOnly:!0})],mt.prototype,"metersPerUnit",null),u([d({readOnly:!0})],mt.prototype,"unit",null),u([d({type:Xe,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],mt.prototype,"wkid",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],mt.prototype,"wkt",void 0),u([te("wkt"),te("web-scene","wkt")],mt.prototype,"writeWkt",null),u([d({type:String,json:{write:!1}})],mt.prototype,"wkt2",void 0),u([d({type:Xe,json:{write:!0}})],mt.prototype,"vcsWkid",void 0),u([d({type:Xe,json:{write:!0}})],mt.prototype,"latestVcsWkid",void 0),u([d()],mt.prototype,"imageCoordinateSystem",void 0),mt=Vo=u([T("esri.geometry.SpatialReference")],mt),mt.prototype.toJSON.isDefaultToJSON=!0,mt.GCS_NAD_1927=ce.freeze(new mt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),mt.WGS84=ce.freeze(new mt(zq)),mt.WebMercator=ce.freeze(new mt(Uq)),mt.PlateCarree=ce.freeze(new mt(ahe));const Ie=mt;function J(e,t,r){let i,n;return t===void 0||Array.isArray(t)?(n=e,r=t,i=[void 0]):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;i.forEach(l=>{const c=VG(s,l,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],r&&(c.read.source=(c.read.source||[]).concat(r))})}}let zo=class extends G{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ie.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof Ie)return t;if(t!=null){const i=new Ie;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};u([d()],zo.prototype,"type",void 0),u([d({readOnly:!0})],zo.prototype,"cache",null),u([d({readOnly:!0})],zo.prototype,"extent",null),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],zo.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],zo.prototype,"hasZ",void 0),u([d({type:Ie,json:{write:!0},value:Ie.WGS84})],zo.prototype,"spatialReference",void 0),u([J("spatialReference")],zo.prototype,"readSpatialReference",null),zo=u([T("esri.geometry.Geometry")],zo);const Vl=zo,Lhe=Object.prototype.toString;function Ahe(e){const t="__accessorMetadata__"in e?Er(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return khe.apply(this,r)}}function khe(e,t,r,i){M$(e,t).cast=i}function Rhe(e){return(t,r)=>{M$(t,e).cast=t[r]}}function He(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&Lhe.call(e[0])==="[object Function]"?Ahe(e[0]):e.length===1&&typeof e[0]=="string"?Rhe(e[0]):void 0}function cy(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new N("Mesh geometries are not supported for this operation")}function Ohe(e){e.forEach(cy)}const Nhe=57.29577951308232,Phe=.017453292519943;function ZD(e){return e*Nhe}function JD(e){return e*Phe}function Hje(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Xt.radius))}function eC(e){return e.wkid!=null||e.wkt!=null}const NT=[0,0];function sS(e,t,r,i,n){const s=e,o=n;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,NT,i);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,NT,i),[o.xmax,o.ymax]=t(s.xmax,s.ymax,NT,i);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let h=0;h<a.length;h++){const f=a[h];c=[],l.push(c);for(let m=0;m<f.length;m++)c.push(t(f[m][0],f[m][1],[0,0],i)),f[m].length>2&&c[m].push(f[m][2]),f[m].length>3&&c[m].push(f[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=t(a[c][0],a[c][1],[0,0],i),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return n}function F_(e,t){const r=e&&(eC(e)?e:e.spatialReference),i=t&&(eC(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!Dr(i,r)||wa(i)&&Kh(r)||wa(r)&&Kh(i))}function j$(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(eC(t)?t:t.spatialReference);return F_(r,i)?Dr(r,i)?O(e):wa(i)?sS(e,em,Ie.WebMercator,!1,O(e)):Kh(i)?sS(e,V$,Ie.WGS84,!1,O(e)):null:null}function em(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=JD(t);return r[0]=JD(e)*Xt.radius,r[1]=Xt.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function V$(e,t,r=[0,0],i=!1){if(e===m1[0])r[0]=-180;else if(e===m1[1])r[0]=180;else{const n=ZD(e/Xt.radius);r[0]=i?n:n-360*Math.floor((n+180)/360)}return r[1]=ZD(Math.PI/2-2*Math.atan(Math.exp(-t/Xt.radius))),r}function Ph(e,t=!1,r=O(e)){return cy(e),cy(r),sS(e,em,Ie.WebMercator,t,r)}function tm(e,t=!1,r=O(e)){return cy(e),cy(r),sS(e,V$,Ie.WGS84,t,r)}function Qq(e,t){const r=e.x-t.x,i=e.y-t.y,n=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+n*n)}function Dhe(e){var t;return((t=Kq(e,Xq))==null?void 0:t[0])??null}function Fhe(e){var t;return((t=Kq(e,Xq))==null?void 0:t[1])??null}function Kq({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(wa(r))return V$(e,t,i);if(Py(r))return i[0]=e,i[1]=t,i}return null}const Xq=[0,0];var j_;const PT=[0,0];function YD(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Di=j_=class extends Vl{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",ce.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],r=s[2],i=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,i=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new Ie(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)W.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)W.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const a=em(s.longitude,s.latitude,PT);e=a[0],t=a[1]}}}else YD(r)?(n=r,r=null):YD(i)&&(n=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?W.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&W.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return Fhe(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",em(r,e,PT)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return Dhe(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",em(e,t,PT)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new j_;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return j_.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:n,spatialReference:s}=this,{z:o,m:a}=e;let{x:l,y:c,spatialReference:h}=e;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,c]=em(l,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,c]=V$(l,c),h=s}return t===l&&r===c&&i===o&&n===a&&s.wkid===h.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=Ji(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,n=2*i;let s;return t>i?(s=Math.ceil(Math.abs(t-i)/n),t-=s*n):t<r&&(s=Math.ceil(Math.abs(t-r)/n),t+=s*n),this._set("x",t),this}distance(e){return Qq(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],Di.prototype,"cache",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Di.prototype,"hasM",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Di.prototype,"hasZ",null),u([d({type:Number})],Di.prototype,"latitude",null),u([d({type:Number})],Di.prototype,"longitude",null),u([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),He(e=>isNaN(e)?e:qi(e))],Di.prototype,"x",void 0),u([te("x")],Di.prototype,"writeX",null),u([J("x")],Di.prototype,"readX",null),u([d({type:Number,json:{write:!0}})],Di.prototype,"y",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Di.prototype,"z",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Di.prototype,"m",void 0),Di=j_=u([T("esri.geometry.Point")],Di),Di.prototype.toJSON.isDefaultToJSON=!0;const Re=Di,DT=[0,0];function bw(e,t){return t!=null&&Ui(e,t.x,t.y,t.z)}function Wje(e,t){var r;if(!((r=t.points)!=null&&r.length))return!1;for(const i of t.points)if(!dy(e,i))return!1;return!0}function jhe(e,t){const{xmin:r,ymin:i,zmin:n,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Ui(e,r,i,n)&&Ui(e,r,o,n)&&Ui(e,s,o,n)&&Ui(e,s,i,n)&&Ui(e,r,i,a)&&Ui(e,r,o,a)&&Ui(e,s,o,a)&&Ui(e,s,i,a):Ui(e,r,i)&&Ui(e,r,o)&&Ui(e,s,o)&&Ui(e,s,i)}function dy(e,t){return Ui(e,t[0],t[1])}function Vhe(e,t){return Ui(e,t[0],t[1],t[2])}function Ui(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function KO(e,t){return DT[1]=t.y,DT[0]=t.x,zhe(e,DT)}function zhe(e,t){return XO(e.rings,t)}function XO(e,t){if(!e)return!1;if(Uhe(e))return QD(!1,e,t);let r=!1;for(let i=0,n=e.length;i<n;i++)r=QD(r,e[i],t);return r}function Uhe(e){return!Array.isArray(e[0][0])}function QD(e,t,r){const[i,n]=r;let s=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[c,h]=t[a],[f,m]=t[o];(h<n&&m>=n||m<n&&h>=n)&&c+(n-h)/(m-h)*(f-c)<i&&(s=!s)}return s}function Bhe(e,t){return bw(e,t)}function Ghe(e,t){const r=e.hasZ&&t.hasZ;let i,n,s;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function qhe(e,t){const{points:r,hasZ:i}=t,n=i?Vhe:dy;for(const s of r)if(n(e,s))return!0;return!1}const Xh=[0,0],ep=[0,0],tp=[0,0],rp=[0,0],Hhe=[Xh,ep,tp,rp],eH=[[tp,Xh],[Xh,ep],[ep,rp],[rp,tp]];function Whe(e,t){return Zhe(e,t.rings)}function Zhe(e,t){Xh[0]=e.xmin,Xh[1]=e.ymax,ep[0]=e.xmax,ep[1]=e.ymax,tp[0]=e.xmin,tp[1]=e.ymin,rp[0]=e.xmax,rp[1]=e.ymin;for(const r of Hhe)if(XO(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(dy(e,i))return!0;for(let n=1;n<r.length;n++){const s=r[n];if(dy(e,s)||tH(i,s,eH))return!0;i=s}}return!1}function Jhe(e,t){Xh[0]=e.xmin,Xh[1]=e.ymax,ep[0]=e.xmax,ep[1]=e.ymax,tp[0]=e.xmin,tp[1]=e.ymin,rp[0]=e.xmax,rp[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let n=i[0];if(dy(e,n))return!0;for(let s=1;s<i.length;s++){const o=i[s];if(dy(e,o)||tH(n,o,eH))return!0;n=o}}return!1}const zr=[0,0];function Yhe(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.length-1;n++){const s=r[n],o=r[n+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const c=e[a][l],h=e[a][l+1];if(tC(s,o,c,h,zr)&&!(zr[0]===s[0]&&zr[1]===s[1]||zr[0]===c[0]&&zr[1]===c[1]||zr[0]===o[0]&&zr[1]===o[1]||zr[0]===h[0]&&zr[1]===h[1]))return!0}}const i=r.length;if(!(i<=4))for(let n=0;n<i-3;n++){let s=i-1;n===0&&(s=i-2);const o=r[n],a=r[n+1];for(let l=n+2;l<s;l++){const c=r[l],h=r[l+1];if(tC(o,a,c,h,zr)&&!(zr[0]===o[0]&&zr[1]===o[1]||zr[0]===c[0]&&zr[1]===c[1]||zr[0]===a[0]&&zr[1]===a[1]||zr[0]===h[0]&&zr[1]===h[1]))return!0}}}return!1}function tH(e,t,r){for(let i=0;i<r.length;i++)if(tC(e,t,r[i][0],r[i][1]))return!0;return!1}function tC(e,t,r,i,n){const[s,o]=e,[a,l]=t,[c,h]=r,[f,m]=i,y=f-c,g=s-c,v=a-s,x=m-h,b=o-h,_=l-o,S=x*v-y*_;if(S===0)return!1;const $=(y*b-x*g)/S,M=(v*b-_*g)/S;return $>=0&&$<=1&&M>=0&&M<=1&&(n&&(n[0]=s+$*(a-s),n[1]=o+$*(l-o)),!0)}function Qhe(e){switch(e){case"esriGeometryEnvelope":case"extent":return Ghe;case"esriGeometryMultipoint":case"multipoint":return qhe;case"esriGeometryPoint":case"point":return Bhe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Whe;case"esriGeometryPolyline":case"polyline":return Jhe}}var Ys;function Khe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Kl(e,t,r){return t==null?r:r==null?t:e(t,r)}let Cr=Ys=class extends Vl{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,n){return Khe(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Ie.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:n??Ie.WGS84}}static fromPoint(e){return new Ys({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Re({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Ys;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&F_(t,r)&&(e=t.isWebMercator?Ph(e):tm(e,!0)),e.type==="point"?bw(this,e):e.type==="extent"&&jhe(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&F_(t,r)&&(e=t.isWebMercator?Ph(e):tm(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!Dr(t,r)&&F_(t,r)&&(e=t.isWebMercator?Ph(e):tm(e,!0)),Qhe(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Kl(Math.min,this.zmin,e.zmin),this.zmax=Kl(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Kl(Math.min,this.mmin,e.mmin),this.mmax=Kl(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Kl(Math.max,this.zmin,e.zmin),this.zmax=Kl(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Kl(Math.max,this.mmin,e.mmin),this.mmax=Kl(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Ji(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?tm(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=FT(i.x,e).x),this.spatialReference=new Ie(nw((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,n=this.xmin,s=this.xmax;return n>=r&&n<=i&&s>=r&&s<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const n=r??Ji(i);if(n==null)return this;const s=this._getParts(n).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const h=(l.zmax-l.zmin)/2;for(let f=0;f<c.length;f++)c[f].push(h)}if(a){const h=(l.mmax-l.mmin)/2;for(let f=0;f<c.length;f++)c[f].push(h)}return c}),hasZ:o,hasM:a,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let h;e=e||Ji(o);const[f,m]=e.valid;h=FT(this.xmin,e);const y=h.x,g=h.frameId;h=FT(this.xmax,e);const v=h.x,x=h.frameId,b=y===v&&a>0;if(a>2*m){const _=new Ys(l<c?y:v,n,m,s,o),S=new Ys(f,n,l<c?v:y,s,o),$=new Ys(0,n,m,s,o),M=new Ys(f,n,0,s,o),I=[],C=[];_.contains($)&&I.push(g),_.contains(M)&&C.push(g),S.contains($)&&I.push(x),S.contains(M)&&C.push(x);for(let L=g+1;L<x;L++)I.push(L),C.push(L);t.push({extent:_,frameIds:[g]},{extent:S,frameIds:[x]},{extent:$,frameIds:I},{extent:M,frameIds:C})}else y>v||b?t.push({extent:new Ys(y,n,m,s,o),frameIds:[g]},{extent:new Ys(f,n,v,s,o),frameIds:[x]}):t.push({extent:new Ys(y,n,v,s,o),frameIds:[g]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const n={};r&&(n.zmin=this.zmin,n.zmax=this.zmax),i&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}};function FT(e,t){const[r,i]=t.valid,n=2*i;let s,o=0;return e>i?(s=Math.ceil(Math.abs(e-i)/n),e-=s*n,o=s):e<r&&(s=Math.ceil(Math.abs(e-r)/n),e+=s*n,o=-s),{x:e,frameId:o}}u([d({readOnly:!0})],Cr.prototype,"cache",null),u([d({readOnly:!0})],Cr.prototype,"center",null),u([d({readOnly:!0})],Cr.prototype,"extent",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Cr.prototype,"hasM",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Cr.prototype,"hasZ",null),u([d({readOnly:!0})],Cr.prototype,"height",null),u([d({readOnly:!0})],Cr.prototype,"width",null),u([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Cr.prototype,"xmin",void 0),u([d({type:Number,json:{write:!0}})],Cr.prototype,"ymin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Cr.prototype,"mmin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Cr.prototype,"zmin",void 0),u([d({type:Number,json:{write:!0}})],Cr.prototype,"xmax",void 0),u([d({type:Number,json:{write:!0}})],Cr.prototype,"ymax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Cr.prototype,"mmax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Cr.prototype,"zmax",void 0),Cr=Ys=u([T("esri.geometry.Extent")],Cr),Cr.prototype.toJSON.isDefaultToJSON=!0;const bt=Cr;let pv;var pU,fU;const Xhe=((pU=globalThis.esriConfig)==null?void 0:pU.locale)??((fU=globalThis.dojoConfig)==null?void 0:fU.locale);var mU;const fv=(mU=globalThis.document)==null?void 0:mU.documentElement;function rH(){var r;const e=fv==null?void 0:fv.getAttribute("lang"),t=(r=globalThis.navigator)==null?void 0:r.language;return Xhe??e??t??"en"}function $n(){return pv===void 0&&(pv=rH()),pv}function Zje(e=$n()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const V_=[];function eN(e){return V_.push(e),et(()=>V_.splice(V_.indexOf(e),1))}const z_=[];function tN(e){return z_.push(e),et(()=>z_.splice(z_.indexOf(e),1))}function KD(){const e=rH();pv!==e&&([...z_].forEach(t=>t(e)),pv=e,[...V_].forEach(t=>t(e)))}var yU;(yU=globalThis.addEventListener)==null||yU.call(globalThis,"languagechange",KD),fv&&new MutationObserver(()=>{KD()}).observe(fv,{attributeFilter:["lang"]});let gb;function epe(e){return gb&&!gb.destroyed||(gb=e()),gb}var rC;const tpe=new je({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let ls=rC=class extends ce{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new rC({categories:this.categories?O(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=j$(this.extent,Ie.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:r,bbox:i,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>tpe.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};u([d()],ls.prototype,"categories",void 0),u([d()],ls.prototype,"disableExtraQuery",void 0),u([d({type:bt})],ls.prototype,"extent",void 0),u([d()],ls.prototype,"filter",void 0),u([d()],ls.prototype,"num",void 0),u([d()],ls.prototype,"query",void 0),u([d()],ls.prototype,"sortField",void 0),u([d()],ls.prototype,"sortOrder",null),u([d()],ls.prototype,"start",void 0),ls=rC=u([T("esri.portal.PortalQueryParams")],ls);const So=ls;var iC;let gr=iC=class extends G{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new N("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new iC({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Er(So,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new So,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new So,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(i=>{const n=i.contentCategorySetsGroupQuery;if(n){const s=new So({disableExtraQuery:!0,num:1,query:n});return r.queryGroups(s,t)}throw new N("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const n=i.results[0],s=new So({num:1,query:`typekeywords:"${e}"`});return n.queryItems(s,t)}throw new N("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]}):[])}};u([d()],gr.prototype,"access",void 0),u([d({type:Date})],gr.prototype,"created",void 0),u([d()],gr.prototype,"description",void 0),u([d()],gr.prototype,"id",void 0),u([d()],gr.prototype,"isInvitationOnly",void 0),u([d({type:Date})],gr.prototype,"modified",void 0),u([d()],gr.prototype,"owner",void 0),u([d()],gr.prototype,"portal",void 0),u([d()],gr.prototype,"snippet",void 0),u([d()],gr.prototype,"sortField",void 0),u([d()],gr.prototype,"sortOrder",void 0),u([d()],gr.prototype,"sourceJSON",void 0),u([d()],gr.prototype,"tags",void 0),u([d()],gr.prototype,"thumbnail",void 0),u([d({readOnly:!0})],gr.prototype,"thumbnailUrl",null),u([d()],gr.prototype,"title",void 0),u([d({readOnly:!0})],gr.prototype,"url",null),gr=iC=u([T("esri.portal.PortalGroup")],gr);const nC=gr;let md=class extends ce{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([d()],md.prototype,"nextQueryParams",void 0),u([d()],md.prototype,"queryParams",void 0),u([d()],md.prototype,"results",void 0),u([d()],md.prototype,"total",void 0),md=u([T("esri.portal.PortalQueryResult")],md);const rpe=md;let ja=class extends G{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new N("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([d({type:Date})],ja.prototype,"created",void 0),u([d()],ja.prototype,"id",void 0),u([d()],ja.prototype,"portal",void 0),u([d()],ja.prototype,"title",void 0),u([d({readOnly:!0})],ja.prototype,"url",null),u([d()],ja.prototype,"username",void 0),ja=u([T("esri.portal.PortalFolder")],ja);const ipe=ja;var sC;let $t=sC=class extends G{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),r!=null&&(typeof r=="string"?n.query.text=r:typeof r=="object"&&(n.query.text=JSON.stringify(r))));let s=this.userContentUrl;return i&&(s+="/"+(typeof i=="string"?i:i.id)),this.portal.request(s+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",i=[],n=e.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:t}},o=await this.portal.request(r,s);for(const a of o.results){const l=e.find(f=>a.itemId===f.id),c=a.success;let h=null;c?(l.id=null,l.portal=null):a.error&&(h=new N("portal:delete-item-failed",a.error.message,a.error)),i.push({item:l,success:c,error:h})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const n=ipe.fromJSON(i);return n.portal=this.portal,n}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=nC.fromJSON(r);return i.portal=this.portal,i}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await B(()=>Promise.resolve().then(()=>iH),void 0),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},n=await this.portal.request(t,{query:i});let s;return n!=null&&n.items?(s=n.items.map(o=>{const a=r.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new nC({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new N("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new N("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new sC({sourceJSON:e});return t.read(e),t}};u([d()],$t.prototype,"access",void 0),u([d({type:Date})],$t.prototype,"created",void 0),u([d()],$t.prototype,"culture",void 0),u([d()],$t.prototype,"description",void 0),u([d()],$t.prototype,"email",void 0),u([d()],$t.prototype,"favGroupId",void 0),u([d()],$t.prototype,"fullName",void 0),u([d({type:Date})],$t.prototype,"modified",void 0),u([d()],$t.prototype,"orgId",void 0),u([d()],$t.prototype,"portal",void 0),u([d()],$t.prototype,"preferredView",void 0),u([d()],$t.prototype,"privileges",void 0),u([d()],$t.prototype,"region",void 0),u([d()],$t.prototype,"role",void 0),u([d()],$t.prototype,"roleId",void 0),u([d()],$t.prototype,"sourceJSON",void 0),u([d()],$t.prototype,"thumbnail",void 0),u([d({readOnly:!0})],$t.prototype,"thumbnailUrl",null),u([d()],$t.prototype,"units",void 0),u([d({readOnly:!0})],$t.prototype,"userContentUrl",null),u([d({readOnly:!0})],$t.prototype,"url",null),u([d()],$t.prototype,"username",void 0),u([d()],$t.prototype,"userLicenseTypeId",void 0),u([d()],$t.prototype,"userType",void 0),$t=sC=u([T("esri.portal.PortalUser")],$t);const rN=$t;var Nn;let cg;const XD={PortalGroup:()=>Promise.resolve({default:nC}),PortalItem:()=>B(()=>Promise.resolve().then(()=>iH),void 0),PortalUser:()=>Promise.resolve({default:rN})};let K=Nn=class extends G.JSONSupportMixin(va){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ke.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){eF.unregister(this),this.defaultBasemap=Et(this.defaultBasemap),this.defaultDevBasemap=Et(this.defaultDevBasemap),this.defaultVectorBasemap=Et(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Ft(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Ke.request.trustedServers.includes(t)||Ke.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return xq(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=rN.fromJSON(e),t.portal=this),t}load(e){const t=B(()=>Promise.resolve().then(()=>Kme),void 0).then(({default:r})=>{Ht(e),cg=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var i;if(!this.hasAPIKey&&Ee){const n=Ee;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Nn.AUTH_MODE_AUTO&&this.authMode!==Nn.AUTH_MODE_NO_PROMPT||((i=this._esriIdCredentialCreateHandle)==null||i.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",npe(new WeakRef(this))),eF.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await B(()=>import("./ElevationLayer-eccc19ed.js"),["assets/ElevationLayer-eccc19ed.js","assets/ArcGISCachedService-09f07e9f.js","assets/TileInfoTilemapCache-fa639d97.js","assets/TilemapCache-15696041.js","assets/ByteSizeUnit-d4757d40.js","assets/memoryEstimations-e8cfae6e.js","assets/WorkerHandle-12b1e58d.js"])).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,t);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new So;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const r=(await this.queryItems(t,e)).results.find(i=>i.type==="Web Scene");return r?new cg({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Xn(e)?Promise.reject(Tt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(t=>t.classificationSchema):null}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new So({num:100,sortField:"title"});if(t!=null&&t.length){const i=[];for(const n of t)i.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return Xn(e)?Promise.reject(Tt()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||$n();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||$n();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return epe(()=>new Nn)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",n={authMode:e,query:{culture:$n().toLowerCase()},withCredentials:!0,...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this.request(i,n)}queryPortal(e,t,r,i){const n=Er(So,t),s=o=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...i}).then(a=>{const l=n.clone();return l.start=a.nextStart,new rpe({nextQueryParams:l,queryParams:n,total:a.total,results:Nn._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(_o(l),a)));return r&&XD[r]?XD[r]().then(({default:o})=>(Ht(i),s(o))):s()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new N("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Nn.AUTH_MODE_ANONYMOUS||this.authMode===Nn.AUTH_MODE_NO_PROMPT&&!Ee)return Promise.reject(new N("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Ee?Ee.getCredential(this.restUrl,{prompt:this.authMode!==Nn.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var r;const t=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(i=>{const n=Nn._resultsToTypedArray(r,{portal:this},i);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():i)).then(()=>n,()=>n)})}request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===Nn.AUTH_MODE_ANONYMOUS||this.authMode===Nn.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=t,c={authMode:i,body:n,cacheBust:s,method:o,query:r,responseType:a,timeout:0,signal:l};return t.withCredentials&&(c.withCredentials=!0),ft(this._normalizeSSL(e),c).then(h=>h.data)}toJSON(){throw new N("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Nn({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new N("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new So;r.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,t);if(!i.total)return[];const n=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const s=await n.queryItems(r,t);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new cg({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(this.hasAPIKey)return[];const i=new So({query:r,disableExtraQuery:!0}),n=await this.queryGroups(i,t);if(!n.total)return[];const s=n.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(i,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new cg({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=cg.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,i){let n;if(r){const s=i!=null?i.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};K.AUTH_MODE_ANONYMOUS="anonymous",K.AUTH_MODE_AUTO="auto",K.AUTH_MODE_IMMEDIATE="immediate",K.AUTH_MODE_NO_PROMPT="no-prompt",u([d()],K.prototype,"access",void 0),u([d()],K.prototype,"allSSL",void 0),u([d()],K.prototype,"authMode",void 0),u([d()],K.prototype,"authorizedCrossOriginDomains",void 0),u([J("authorizedCrossOriginDomains")],K.prototype,"readAuthorizedCrossOriginDomains",null),u([d()],K.prototype,"basemapGalleryGroupQuery",void 0),u([d({json:{name:"3DBasemapGalleryGroupQuery"}})],K.prototype,"basemapGalleryGroupQuery3D",void 0),u([d()],K.prototype,"bingKey",void 0),u([d()],K.prototype,"canListApps",void 0),u([d()],K.prototype,"canListData",void 0),u([d()],K.prototype,"canListPreProvisionedItems",void 0),u([d()],K.prototype,"canProvisionDirectPurchase",void 0),u([d()],K.prototype,"canSearchPublic",void 0),u([d()],K.prototype,"canShareBingPublic",void 0),u([d()],K.prototype,"canSharePublic",void 0),u([d()],K.prototype,"canSignInArcGIS",void 0),u([d()],K.prototype,"canSignInIDP",void 0),u([d()],K.prototype,"colorSetsGroupQuery",void 0),u([d()],K.prototype,"commentsEnabled",void 0),u([d({type:Date})],K.prototype,"created",void 0),u([d()],K.prototype,"credential",void 0),u([d()],K.prototype,"culture",void 0),u([d()],K.prototype,"currentVersion",void 0),u([d()],K.prototype,"customBaseUrl",void 0),u([d()],K.prototype,"default3DBasemapQuery",void 0),u([d()],K.prototype,"defaultBasemap",void 0),u([J("defaultBasemap")],K.prototype,"readDefaultBasemap",null),u([d()],K.prototype,"defaultDevBasemap",void 0),u([J("defaultDevBasemap")],K.prototype,"readDefaultDevBasemap",null),u([d({type:bt})],K.prototype,"defaultExtent",void 0),u([d()],K.prototype,"defaultVectorBasemap",void 0),u([J("defaultVectorBasemap")],K.prototype,"readDefaultVectorBasemap",null),u([d()],K.prototype,"description",void 0),u([d()],K.prototype,"devBasemapGalleryGroupQuery",void 0),u([d()],K.prototype,"eueiEnabled",void 0),u([d({readOnly:!0})],K.prototype,"extraQuery",null),u([d()],K.prototype,"featuredGroups",void 0),u([d()],K.prototype,"featuredItemsGroupQuery",void 0),u([d()],K.prototype,"galleryTemplatesGroupQuery",void 0),u([d()],K.prototype,"layoutGroupQuery",void 0),u([d()],K.prototype,"livingAtlasGroupQuery",void 0),u([d({readOnly:!0})],K.prototype,"hasAPIKey",null),u([d()],K.prototype,"hasCategorySchema",void 0),u([d()],K.prototype,"hasClassificationSchema",void 0),u([d()],K.prototype,"helpBase",void 0),u([d()],K.prototype,"helperServices",void 0),u([d()],K.prototype,"helpMap",void 0),u([d()],K.prototype,"homePageFeaturedContent",void 0),u([d()],K.prototype,"homePageFeaturedContentCount",void 0),u([d()],K.prototype,"httpPort",void 0),u([d()],K.prototype,"httpsPort",void 0),u([d()],K.prototype,"id",void 0),u([d()],K.prototype,"ipCntryCode",void 0),u([d({readOnly:!0})],K.prototype,"isOrganization",null),u([d()],K.prototype,"isPortal",void 0),u([d()],K.prototype,"isReadOnly",void 0),u([d({readOnly:!0})],K.prototype,"itemPageUrl",null),u([d()],K.prototype,"layerTemplatesGroupQuery",void 0),u([d()],K.prototype,"maxTokenExpirationMinutes",void 0),u([d({type:Date})],K.prototype,"modified",void 0),u([d()],K.prototype,"name",void 0),u([d()],K.prototype,"portalHostname",void 0),u([d()],K.prototype,"portalMode",void 0),u([d()],K.prototype,"portalProperties",void 0),u([d()],K.prototype,"region",void 0),u([d()],K.prototype,"recycleBinEnabled",void 0),u([d({readOnly:!0})],K.prototype,"restUrl",null),u([d()],K.prototype,"rotatorPanels",void 0),u([d()],K.prototype,"showHomePageDescription",void 0),u([d()],K.prototype,"sourceJSON",void 0),u([d()],K.prototype,"staticImagesUrl",void 0),u([d({json:{name:"2DStylesGroupQuery"}})],K.prototype,"stylesGroupQuery2d",void 0),u([d({json:{name:"stylesGroupQuery"}})],K.prototype,"stylesGroupQuery3d",void 0),u([d()],K.prototype,"supportsHostedServices",void 0),u([d()],K.prototype,"symbolSetsGroupQuery",void 0),u([d()],K.prototype,"templatesGroupQuery",void 0),u([d()],K.prototype,"thumbnail",void 0),u([d({readOnly:!0})],K.prototype,"thumbnailUrl",null),u([d()],K.prototype,"units",void 0),u([d()],K.prototype,"url",void 0),u([d()],K.prototype,"urlKey",void 0),u([J("urlKey")],K.prototype,"readUrlKey",null),u([d()],K.prototype,"user",void 0),u([J("user")],K.prototype,"readUser",null),u([d()],K.prototype,"use3dBasemaps",void 0),u([d()],K.prototype,"useDefault3dBasemap",void 0),u([d()],K.prototype,"useStandardizedQuery",void 0),u([d()],K.prototype,"useVectorBasemaps",void 0),u([d()],K.prototype,"vectorBasemapGalleryGroupQuery",void 0),K=Nn=u([T("esri.portal.Portal")],K);const Ai=K,eF=new FinalizationRegistry(e=>{e.remove()});function npe(e){const t=Ee;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let Va=class extends ce{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:tF(t.path,t.portalItem)}:t}set path(t){t!=null&&Yn(t)?W.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return tF(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new N("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey,_ts:r!=null&&r.cacheBust?Date.now():null},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await B(()=>import("./resourceUtils-356a6cff.js"),[]);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function tF(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Yn(e)&&(e=NO(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}u([d()],Va.prototype,"portalItem",void 0),u([d({type:String,value:null})],Va.prototype,"path",null),u([He("path")],Va.prototype,"_castPath",null),u([d({type:String,readOnly:!0})],Va.prototype,"url",null),u([d({type:String,readOnly:!0})],Va.prototype,"cdnUrl",null),u([d({type:String,readOnly:!0})],Va.prototype,"itemRelativeUrl",null),Va=u([T("esri.portal.PortalItemResource")],Va);const spe=Va;let qg=class extends ce{constructor(t){super(t),this.created=null,this.rating=null}};u([d({type:Date})],qg.prototype,"created",void 0),u([d()],qg.prototype,"rating",void 0),qg=u([T("esri.portal.PortalRating")],qg);const jT=qg;var yd;const ope=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),ape=new Set(["KML","GeoJson","CSV"]);let Ce=yd=class extends G.JSONSupportMixin(va){static from(e){return mw(yd,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new bt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var y;const e=((y=this.type)==null?void 0:y.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let n,s=!1,o=!1,a=!1,l=!1,c=!1,h=!1,f=!1,m=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),c=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),n=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":h?"utilitynetwork":s?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(c=t.includes("Spatiotemporal"),f=t.includes("Relational"),n=c||f?"mapimages":s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):n=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?n="maps":e==="web scene"?n=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?n="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?n="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?n="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?n="datafiles":e==="360 vr experience"?n="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?n="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?n="addindesktop":e==="pdf"?n="pdf":e==="microsoft word"?n="word":e==="microsoft excel"?n="excel":e==="microsoft powerpoint"?n="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?n="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?n="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?n="layersgray":e==="analysis model"?n="analysismodel":e==="scene package"?n="scenepackage":e==="3dtiles package"?n="3dtileslayerpackage":e==="3dtiles service"?n="3dtileslayer":e==="mobile scene package"?n="mobilescenepackage":e==="tile package"||e==="compact tile package"?n="tilepackage":e==="task file"?n="taskfile":e==="report template"?n="report-template":e==="statistical data collection"?n="statisticaldatacollection":e==="insights workbook"?n="workbook":e==="insights model"?n="insightsmodel":e==="insights page"?n="insightspage":e==="insights theme"?n="insightstheme":e==="hub initiative"?n="hubinitiative":e==="hub page"?n="hubpage":e==="hub site application"?n="hubsite":e==="hub event"?n="hubevent":e==="hub project"?n="hubproject":e==="relational database connection"?n="relationaldatabaseconnection":e==="big data file share"?n="datastorecollection":e==="image collection"?n="imagecollection":e==="desktop style"?n="desktopstyle":e==="style"?n=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?n="dashboard":e==="raster function template"?n="rasterprocessingtemplate":e==="vector tile package"?n="vectortilepackage":e==="ortho mapping project"?n="orthomappingproject":e==="ortho mapping template"?n="orthomappingtemplate":e==="solution"?n="solutions":e==="geopackage"?n="geopackage":e==="deep learning package"?n="deeplearningpackage":e==="real time analytic"?n="realtimeanalytics":e==="reality mapping project"?n="realitymappingproject":e==="big data analytic"?n="bigdataanalytics":e==="feed"?n="feed":e==="excalibur imagery project"?n="excaliburimageryproject":e==="notebook"?n="notebook":e==="storymap"?n="storymap":e==="survey123 add in"?n="survey123addin":e==="mission"?n="mission":e==="mission report"?n="missionreport":e==="mission template"?n="missiontemplate":e==="quickcapture project"?n="quickcaptureproject":e==="pro report"?n="proreport":e==="pro report template"?n="proreporttemplate":e==="urban model"?n="urbanmodel":e==="urban project"?n="urbanproject":e==="web experience"?n="experiencebuilder":e==="web experience template"?n="webexperiencetemplate":e==="experience builder widget"?n="experiencebuilderwidget":e==="experience builder widget package"?n="experiencebuilderwidgetpackage":e==="workflow"?n="workflow":e==="kernel gateway connection"?n="kernelgatewayconnection":e==="insights script"?n="insightsscript":e==="hub initiative template"?n="hubinitiativetemplate":e==="storymap theme"?n="storymaptheme":e==="knowledge graph"?n="knowledgegraph":e==="knowledge graph layer"?n="knowledgegraphlayer":e==="knowledge studio project"?n="knowledgestudio":e==="native application"?n="nativeapp":e==="native application installer"?n="nativeappinstaller":e==="web link chart"?n="linkchart":e==="knowledge graph web investigation"?n="investigation":e==="ogcfeatureserver"?n="features":e==="pro presentation"?n="propresentation":e==="pro project"?n="proproject":e==="insights workbook package"?n="insightsworkbookpackage":e==="apache parquet"?n="apacheparquet":e==="notebook code snippet library"?n="notebookcodesnippets":e==="suitability model"?n="suitabilitymodel":e==="esri classifier definition"?n="classifierdefinition":e==="esri classification schema"?n="classificationschema":e==="insights data engineering workbook"?n="dataengineeringworkbook":e==="insights data engineering model"?n="dataengineeringmodel":e==="deep learning studio project"?n="deeplearningproject":e==="discussion"?n="discussion":e==="allsource project"?n="allsourceproject":e==="api key"?n="apikey":e==="data pipeline"?n="datapipelines":e==="group layer"?(m=t.includes("Map"),n=m?"layergroup2d":"layergroup"):n=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",n?Nt(r+n+i+".png"):null}get isLayer(){return this.type!=null&&ope.has(this.type)}get itemCdnUrl(){return zO(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,n;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((n=(i=this.portal)==null?void 0:i.user)==null?void 0:n.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=Ai.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},r=e instanceof jT?e.rating:e;return r==null||isNaN(r)||typeof e!="number"||(t.query.rating=r),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new jT({rating:r,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:O(this.applicationProxies),avgRating:this.avgRating,categories:O(this.categories),classification:O(this.classification),created:O(this.created),culture:this.culture,description:this.description,extent:O(this.extent),groupCategories:O(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:O(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:O(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:O(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:O(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new yd({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(t=e[r])==null?void 0:t.join(", ");for(const r of["extent","classification"]){const i=e[r];i&&(e[r]=JSON.stringify(i))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new jT(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},yd)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new N("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new N("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:n,tags:s,title:o}=e||{},a={method:"post",query:{copyPrivateResources:i==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!i,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await t.request(`${r}/copy`,a);return new yd({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")pp(t)?i.query={data:t}:i.query={url:$s(t)},r!=null&&(i.query.filename=r);else{const n=new FormData;r!=null?n.append("file",t,r):n.append("file",t),i.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new N("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await B(()=>import("./resourceUtils-356a6cff.js"),[]);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await B(()=>import("./resourceUtils-356a6cff.js"),[]);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await B(()=>import("./resourceUtils-356a6cff.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new N("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await B(()=>import("./resourceUtils-356a6cff.js"),[]);return t(this,e)}resourceFromPath(e){return new spe({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:O(this.categories),classification:O(this.classification),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:O(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:O(this.typeKeywords),url:this.url};return XB(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new yd({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};u([d({type:["private","shared","org","public"]})],Ce.prototype,"access",void 0),u([d()],Ce.prototype,"accessInformation",void 0),u([d({type:String})],Ce.prototype,"apiKey",void 0),u([d({json:{read:{source:"appProxies"}}})],Ce.prototype,"applicationProxies",void 0),u([d()],Ce.prototype,"avgRating",void 0),u([d()],Ce.prototype,"categories",void 0),u([d()],Ce.prototype,"classification",void 0),u([d({type:Date})],Ce.prototype,"created",void 0),u([d()],Ce.prototype,"culture",void 0),u([d()],Ce.prototype,"description",void 0),u([d({readOnly:!0})],Ce.prototype,"displayName",null),u([d({type:bt})],Ce.prototype,"extent",void 0),u([J("extent")],Ce.prototype,"readExtent",null),u([d()],Ce.prototype,"groupCategories",void 0),u([d({readOnly:!0})],Ce.prototype,"iconUrl",null),u([d()],Ce.prototype,"id",void 0),u([d({readOnly:!0})],Ce.prototype,"isLayer",null),u([d({type:Boolean,readOnly:!0})],Ce.prototype,"isOrgItem",void 0),u([d()],Ce.prototype,"itemControl",void 0),u([d({readOnly:!0})],Ce.prototype,"itemPageUrl",null),u([d({readOnly:!0})],Ce.prototype,"itemUrl",null),u([d()],Ce.prototype,"licenseInfo",void 0),u([d({type:Date})],Ce.prototype,"modified",void 0),u([d()],Ce.prototype,"name",void 0),u([d()],Ce.prototype,"numComments",void 0),u([d()],Ce.prototype,"numRatings",void 0),u([d()],Ce.prototype,"numViews",void 0),u([d()],Ce.prototype,"owner",void 0),u([d()],Ce.prototype,"ownerFolder",void 0),u([d({type:Ai})],Ce.prototype,"portal",void 0),u([d()],Ce.prototype,"screenshots",void 0),u([d()],Ce.prototype,"size",void 0),u([d()],Ce.prototype,"snippet",void 0),u([d()],Ce.prototype,"sourceJSON",void 0),u([d({type:String})],Ce.prototype,"sourceUrl",void 0),u([d({type:String})],Ce.prototype,"spatialReference",void 0),u([d()],Ce.prototype,"tags",void 0),u([d()],Ce.prototype,"thumbnail",void 0),u([d({readOnly:!0})],Ce.prototype,"thumbnailUrl",null),u([d()],Ce.prototype,"title",void 0),u([d()],Ce.prototype,"type",void 0),u([d()],Ce.prototype,"typeKeywords",void 0),u([d({type:String,json:{read(e,t){var r;if(ape.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],Ce.prototype,"url",void 0),u([d({readOnly:!0})],Ce.prototype,"userItemUrl",null),Ce=yd=u([T("esri.portal.PortalItem")],Ce);const mv=Ce,iH=Object.freeze(Object.defineProperty({__proto__:null,default:mv},Symbol.toStringTag,{value:"Module"})),rF=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,nH={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function lpe(e){return e in nH}function iF(e){if(lpe(e)){const t=nH[e];return t===!0?e:t}return null}const Hg=[],Sm=new Map;function nF(e){for(const t of Sm.keys())oH(e.pattern,t)&&Sm.delete(t)}function upe(e){return Hg.includes(e)||(nF(e),Hg.unshift(e)),et(()=>{const t=Hg.indexOf(e);t>-1&&(Hg.splice(t,1),nF(e))})}async function iN(e){const t=$n();Sm.has(e)||Sm.set(e,cpe(e,t));const r=Sm.get(e);return r&&await dpe.add(r),r}function sH(e){if(!rF.test(e))return null;const t=rF.exec(e);if(t===null)return null;const[,r,i]=t;return iF(r+(i?"-"+i.toUpperCase():""))??iF(r)}async function cpe(e,t){const r=[];for(const i of Hg)if(oH(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(n){r.push(n)}throw r.length?new N("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new N("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function oH(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}tN(()=>{Sm.clear()});const dpe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=es())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function hpe(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await iN("esri/t9n/basemaps");return r[e]||r[t]}const oC={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Nt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Nt("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Nt("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Nt("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Nt("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Nt("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}},ba="system",ip="unknown",_a="UTC",ppe=Intl.DateTimeFormat().resolvedOptions().timeZone,sF=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class mp extends Error{}class fpe extends mp{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class mpe extends mp{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class ype extends mp{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class rm extends mp{}class aH extends mp{constructor(t){super(`Invalid unit ${t}`)}}class xi extends mp{}class Xl extends mp{constructor(){super("Zone is an abstract class")}}const le="numeric",No="short",Qn="long",oS={year:le,month:le,day:le},lH={year:le,month:No,day:le},gpe={year:le,month:No,day:le,weekday:No},uH={year:le,month:Qn,day:le},cH={year:le,month:Qn,day:le,weekday:Qn},dH={hour:le,minute:le},hH={hour:le,minute:le,second:le},pH={hour:le,minute:le,second:le,timeZoneName:No},fH={hour:le,minute:le,second:le,timeZoneName:Qn},mH={hour:le,minute:le,hourCycle:"h23"},yH={hour:le,minute:le,second:le,hourCycle:"h23"},gH={hour:le,minute:le,second:le,hourCycle:"h23",timeZoneName:No},vH={hour:le,minute:le,second:le,hourCycle:"h23",timeZoneName:Qn},wH={year:le,month:le,day:le,hour:le,minute:le},bH={year:le,month:le,day:le,hour:le,minute:le,second:le},_H={year:le,month:No,day:le,hour:le,minute:le},xH={year:le,month:No,day:le,hour:le,minute:le,second:le},vpe={year:le,month:No,day:le,weekday:No,hour:le,minute:le},SH={year:le,month:Qn,day:le,hour:le,minute:le,timeZoneName:No},$H={year:le,month:Qn,day:le,hour:le,minute:le,second:le,timeZoneName:No},EH={year:le,month:Qn,day:le,weekday:Qn,hour:le,minute:le,timeZoneName:Qn},TH={year:le,month:Qn,day:le,weekday:Qn,hour:le,minute:le,second:le,timeZoneName:Qn};class yp{get type(){throw new Xl}get name(){throw new Xl}get ianaName(){return this.name}get isUniversal(){throw new Xl}offsetName(t,r){throw new Xl}formatOffset(t,r){throw new Xl}offset(t){throw new Xl}equals(t){throw new Xl}get isValid(){throw new Xl}}let VT=null;class z$ extends yp{static get instance(){return VT===null&&(VT=new z$),VT}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return NH(t,r,i)}formatOffset(t,r){return yv(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let U_={};function wpe(e){return U_[e]||(U_[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),U_[e]}const bpe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function _pe(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,n,s,o,a,l,c,h]=i;return[o,n,s,a,l,c,h]}function xpe(e,t){const r=e.formatToParts(t),i=[];for(let n=0;n<r.length;n++){const{type:s,value:o}=r[n],a=bpe[s];s==="era"?i[a]=o:ke(a)||(i[a]=parseInt(o,10))}return i}let vb={};class In extends yp{static create(t){return vb[t]||(vb[t]=new In(t)),vb[t]}static resetCache(){vb={},U_={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=In.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return NH(t,r,i,this.name)}formatOffset(t,r){return yv(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=wpe(this.name);let[n,s,o,a,l,c,h]=i.formatToParts?xpe(i,r):_pe(i,r);a==="BC"&&(n=-Math.abs(n)+1);const m=B$({year:n,month:s,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let y=+r;const g=y%1e3;return y-=g>=0?g:1e3+g,(m-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let oF={};function Spe(e,t={}){const r=JSON.stringify([e,t]);let i=oF[r];return i||(i=new Intl.ListFormat(e,t),oF[r]=i),i}let aC={};function lC(e,t={}){const r=JSON.stringify([e,t]);let i=aC[r];return i||(i=new Intl.DateTimeFormat(e,t),aC[r]=i),i}let uC={};function $pe(e,t={}){const r=JSON.stringify([e,t]);let i=uC[r];return i||(i=new Intl.NumberFormat(e,t),uC[r]=i),i}let cC={};function Epe(e,t={}){const{base:r,...i}=t,n=JSON.stringify([e,i]);let s=cC[n];return s||(s=new Intl.RelativeTimeFormat(e,t),cC[n]=s),s}let Wg=null;function Tpe(){return Wg||(Wg=new Intl.DateTimeFormat().resolvedOptions().locale,Wg)}let aF={};function Mpe(e){let t=aF[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,aF[e]=t}return t}function Ipe(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,n;try{i=lC(e).resolvedOptions(),n=e}catch{const l=e.substring(0,r);i=lC(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=i;return[n,s,o]}}function Cpe(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function Lpe(e){const t=[];for(let r=1;r<=12;r++){const i=be.utc(2009,r,1);t.push(e(i))}return t}function Ape(e){const t=[];for(let r=1;r<=7;r++){const i=be.utc(2016,11,13+r);t.push(e(i))}return t}function wb(e,t,r,i){const n=e.listingMode();return n==="error"?null:n==="en"?r(t):i(t)}function kpe(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class Rpe{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=$pe(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):lN(t,3);return xr(r,this.padTo)}}}class Ope{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&In.create(a).valid?(n=a,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=lC(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Npe{constructor(t,r,i){this.opts={style:"long",...i},!r&&RH()&&(this.rtf=Epe(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):nfe(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const Ppe={firstDay:1,minimalDays:4,weekend:[6,7]};class gt{static fromOpts(t){return gt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,n,s=!1){const o=t||ar.defaultLocale,a=o||(s?"en-US":Tpe()),l=r||ar.defaultNumberingSystem,c=i||ar.defaultOutputCalendar,h=dC(n)||ar.defaultWeekSettings;return new gt(a,l,c,h,o)}static resetCache(){Wg=null,aC={},uC={},cC={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:n}={}){return gt.create(t,r,i,n)}constructor(t,r,i,n,s){const[o,a,l]=Ipe(t);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=i||l||null,this.weekSettings=n,this.intl=Cpe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=kpe(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:gt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,dC(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return wb(this,t,FH,()=>{const i=r?{month:t,day:"numeric"}:{month:t},n=r?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=Lpe(s=>this.extract(s,i,"month"))),this.monthsCache[n][t]})}weekdays(t,r=!1){return wb(this,t,zH,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=r?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=Ape(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return wb(this,void 0,()=>UH,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[be.utc(2016,11,13,9),be.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return wb(this,t,BH,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[be.utc(-40,1,1),be.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const n=this.dtFormatter(t,r),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new Rpe(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new Ope(t,this.intl,r)}relFormatter(t={}){return new Npe(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Spe(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:OH()?Mpe(this.locale):Ppe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let zT=null;class Jr extends yp{static get utcInstance(){return zT===null&&(zT=new Jr(0)),zT}static instance(t){return t===0?Jr.utcInstance:new Jr(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Jr(G$(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${yv(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${yv(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return yv(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Dpe extends yp{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Wu(e,t){if(ke(e)||e===null)return t;if(e instanceof yp)return e;if(Bpe(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?z$.instance:r==="utc"||r==="gmt"?Jr.utcInstance:Jr.parseSpecifier(r)||In.create(e)}else return gc(e)?Jr.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new Dpe(e)}const nN={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},lF={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Fpe=nN.hanidec.replace(/[\[|\]]/g,"").split("");function jpe(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(nN.hanidec)!==-1)t+=Fpe.indexOf(e[r]);else for(const n in lF){const[s,o]=lF[n];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}let Kp={};function Vpe(){Kp={}}function Gs({numberingSystem:e},t=""){const r=e||"latn";return Kp[r]||(Kp[r]={}),Kp[r][t]||(Kp[r][t]=new RegExp(`${nN[r]}${t}`)),Kp[r][t]}let uF=()=>Date.now(),cF="system",dF=null,hF=null,pF=null,fF=60,mF,yF=null;class ar{static get now(){return uF}static set now(t){uF=t}static set defaultZone(t){cF=t}static get defaultZone(){return Wu(cF,z$.instance)}static get defaultLocale(){return dF}static set defaultLocale(t){dF=t}static get defaultNumberingSystem(){return hF}static set defaultNumberingSystem(t){hF=t}static get defaultOutputCalendar(){return pF}static set defaultOutputCalendar(t){pF=t}static get defaultWeekSettings(){return yF}static set defaultWeekSettings(t){yF=dC(t)}static get twoDigitCutoffYear(){return fF}static set twoDigitCutoffYear(t){fF=t%100}static get throwOnInvalid(){return mF}static set throwOnInvalid(t){mF=t}static resetCaches(){gt.resetCache(),In.resetCache(),be.resetCache(),Vpe()}}class $o{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const MH=[0,31,59,90,120,151,181,212,243,273,304,334],IH=[0,31,60,91,121,152,182,213,244,274,305,335];function Ms(e,t){return new $o("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function sN(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function CH(e,t,r){return r+(_w(e)?IH:MH)[t-1]}function LH(e,t){const r=_w(e)?IH:MH,i=r.findIndex(s=>s<t),n=t-r[i];return{month:i+1,day:n}}function oN(e,t){return(e-t+7)%7+1}function aS(e,t=4,r=1){const{year:i,month:n,day:s}=e,o=CH(i,n,s),a=oN(sN(i,n,s),r);let l=Math.floor((o-a+14-t)/7),c;return l<1?(c=i-1,l=g1(c,t,r)):l>g1(i,t,r)?(c=i+1,l=1):c=i,{weekYear:c,weekNumber:l,weekday:a,...q$(e)}}function gF(e,t=4,r=1){const{weekYear:i,weekNumber:n,weekday:s}=e,o=oN(sN(i,1,t),r),a=$m(i);let l=n*7+s-o-7+t,c;l<1?(c=i-1,l+=$m(c)):l>a?(c=i+1,l-=$m(i)):c=i;const{month:h,day:f}=LH(c,l);return{year:c,month:h,day:f,...q$(e)}}function UT(e){const{year:t,month:r,day:i}=e,n=CH(t,r,i);return{year:t,ordinal:n,...q$(e)}}function vF(e){const{year:t,ordinal:r}=e,{month:i,day:n}=LH(t,r);return{year:t,month:i,day:n,...q$(e)}}function wF(e,t){if(!ke(e.localWeekday)||!ke(e.localWeekNumber)||!ke(e.localWeekYear)){if(!ke(e.weekday)||!ke(e.weekNumber)||!ke(e.weekYear))throw new rm("Cannot mix locale-based week fields with ISO-based week fields");return ke(e.localWeekday)||(e.weekday=e.localWeekday),ke(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),ke(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function zpe(e,t=4,r=1){const i=U$(e.weekYear),n=Is(e.weekNumber,1,g1(e.weekYear,t,r)),s=Is(e.weekday,1,7);return i?n?s?!1:Ms("weekday",e.weekday):Ms("week",e.weekNumber):Ms("weekYear",e.weekYear)}function Upe(e){const t=U$(e.year),r=Is(e.ordinal,1,$m(e.year));return t?r?!1:Ms("ordinal",e.ordinal):Ms("year",e.year)}function AH(e){const t=U$(e.year),r=Is(e.month,1,12),i=Is(e.day,1,lS(e.year,e.month));return t?r?i?!1:Ms("day",e.day):Ms("month",e.month):Ms("year",e.year)}function kH(e){const{hour:t,minute:r,second:i,millisecond:n}=e,s=Is(t,0,23)||t===24&&r===0&&i===0&&n===0,o=Is(r,0,59),a=Is(i,0,59),l=Is(n,0,999);return s?o?a?l?!1:Ms("millisecond",n):Ms("second",i):Ms("minute",r):Ms("hour",t)}function ke(e){return typeof e>"u"}function gc(e){return typeof e=="number"}function U$(e){return typeof e=="number"&&e%1===0}function Bpe(e){return typeof e=="string"}function Gpe(e){return Object.prototype.toString.call(e)==="[object Date]"}function RH(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function OH(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function qpe(e){return Array.isArray(e)?e:[e]}function bF(e,t,r){if(e.length!==0)return e.reduce((i,n)=>{const s=[t(n),n];return i&&r(i[0],s[0])===i[0]?i:s},null)[1]}function Hpe(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function hy(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dC(e){if(e==null)return null;if(typeof e!="object")throw new xi("Week settings must be an object");if(!Is(e.firstDay,1,7)||!Is(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Is(t,1,7)))throw new xi("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Is(e,t,r){return U$(e)&&e>=t&&e<=r}function Wpe(e,t){return e-t*Math.floor(e/t)}function xr(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Fu(e){if(!(ke(e)||e===null||e===""))return parseInt(e,10)}function Xc(e){if(!(ke(e)||e===null||e===""))return parseFloat(e)}function aN(e){if(!(ke(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function lN(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function _w(e){return e%4===0&&(e%100!==0||e%400===0)}function $m(e){return _w(e)?366:365}function lS(e,t){const r=Wpe(t-1,12)+1,i=e+(t-r)/12;return r===2?_w(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function B$(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function _F(e,t,r){return-oN(sN(e,1,t),r)+t-1}function g1(e,t=4,r=1){const i=_F(e,t,r),n=_F(e+1,t,r);return($m(e)-i+n)/7}function hC(e){return e>99?e:e>ar.twoDigitCutoffYear?1900+e:2e3+e}function NH(e,t,r,i=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function G$(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,n=r<0||Object.is(r,-0)?-i:i;return r*60+n}function PH(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new xi(`Invalid unit value ${e}`);return t}function uS(e,t){const r={};for(const i in e)if(hy(e,i)){const n=e[i];if(n==null)continue;r[t(i)]=PH(n)}return r}function yv(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${xr(r,2)}:${xr(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${xr(r,2)}${xr(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function q$(e){return Hpe(e,["hour","minute","second","millisecond"])}const Zpe=["January","February","March","April","May","June","July","August","September","October","November","December"],DH=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Jpe=["J","F","M","A","M","J","J","A","S","O","N","D"];function FH(e){switch(e){case"narrow":return[...Jpe];case"short":return[...DH];case"long":return[...Zpe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const jH=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],VH=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ype=["M","T","W","T","F","S","S"];function zH(e){switch(e){case"narrow":return[...Ype];case"short":return[...VH];case"long":return[...jH];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const UH=["AM","PM"],Qpe=["Before Christ","Anno Domini"],Kpe=["BC","AD"],Xpe=["B","A"];function BH(e){switch(e){case"narrow":return[...Xpe];case"short":return[...Kpe];case"long":return[...Qpe];default:return null}}function efe(e){return UH[e.hour<12?0:1]}function tfe(e,t){return zH(t)[e.weekday-1]}function rfe(e,t){return FH(t)[e.month-1]}function ife(e,t){return BH(t)[e.year<0?0:1]}function nfe(e,t,r="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${n[e][0]}`;case-1:return f?"yesterday":`last ${n[e][0]}`;case 0:return f?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=n[e],h=i?l?c[1]:c[2]||c[1]:l?n[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function xF(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const sfe={D:oS,DD:lH,DDD:uH,DDDD:cH,t:dH,tt:hH,ttt:pH,tttt:fH,T:mH,TT:yH,TTT:gH,TTTT:vH,f:wH,ff:_H,fff:SH,ffff:EH,F:bH,FF:xH,FFF:$H,FFFF:TH};class Mi{static create(t,r={}){return new Mi(t,r)}static parseFormat(t){let r=null,i="",n=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),r=null,i="",n=!n):n||a===r?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,r=a)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return sfe[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return xr(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,g)=>this.loc.extract(t,y,g),o=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",a=()=>i?efe(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,g)=>i?rfe(t,y):s(g?{month:y}:{month:y,day:"numeric"},"month"),c=(y,g)=>i?tfe(t,y):s(g?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const g=Mi.macroTokenToFormatOpts(y);return g?this.formatWithSystemDefault(t,g):y},f=y=>i?ife(t,y):s({era:y},"era"),m=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(y)}};return xF(Mi.parseFormat(r),m)}formatDurationFromString(t,r){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>c=>{const h=i(c);return h?this.num(l.get(h),c.length):c},s=Mi.parseFormat(r),o=s.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return xF(s,n(a))}}const GH=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Dy(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function Fy(...e){return t=>e.reduce(([r,i,n],s)=>{const[o,a,l]=s(t,n);return[{...r,...o},a||i,l]},[{},null,1]).slice(0,2)}function jy(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const n=r.exec(e);if(n)return i(n)}return[null,null]}function qH(...e){return(t,r)=>{const i={};let n;for(n=0;n<e.length;n++)i[e[n]]=Fu(t[r+n]);return[i,null,r+n]}}const HH=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ofe=`(?:${HH.source}?(?:\\[(${GH.source})\\])?)?`,uN=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,WH=RegExp(`${uN.source}${ofe}`),cN=RegExp(`(?:T${WH.source})?`),afe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,lfe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,ufe=/(\d{4})-?(\d{3})/,cfe=qH("weekYear","weekNumber","weekDay"),dfe=qH("year","ordinal"),hfe=/(\d{4})-(\d\d)-(\d\d)/,ZH=RegExp(`${uN.source} ?(?:${HH.source}|(${GH.source}))?`),pfe=RegExp(`(?: ${ZH.source})?`);function Em(e,t,r){const i=e[t];return ke(i)?r:Fu(i)}function ffe(e,t){return[{year:Em(e,t),month:Em(e,t+1,1),day:Em(e,t+2,1)},null,t+3]}function Vy(e,t){return[{hours:Em(e,t,0),minutes:Em(e,t+1,0),seconds:Em(e,t+2,0),milliseconds:aN(e[t+3])},null,t+4]}function xw(e,t){const r=!e[t]&&!e[t+1],i=G$(e[t+1],e[t+2]),n=r?null:Jr.instance(i);return[{},n,t+3]}function Sw(e,t){const r=e[t]?In.create(e[t]):null;return[{},r,t+1]}const mfe=RegExp(`^T?${uN.source}$`),yfe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function gfe(e){const[t,r,i,n,s,o,a,l,c]=e,h=t[0]==="-",f=l&&l[0]==="-",m=(y,g=!1)=>y!==void 0&&(g||y&&h)?-y:y;return[{years:m(Xc(r)),months:m(Xc(i)),weeks:m(Xc(n)),days:m(Xc(s)),hours:m(Xc(o)),minutes:m(Xc(a)),seconds:m(Xc(l),l==="-0"),milliseconds:m(aN(c),f)}]}const vfe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function dN(e,t,r,i,n,s,o){const a={year:t.length===2?hC(Fu(t)):Fu(t),month:DH.indexOf(r)+1,day:Fu(i),hour:Fu(n),minute:Fu(s)};return o&&(a.second=Fu(o)),e&&(a.weekday=e.length>3?jH.indexOf(e)+1:VH.indexOf(e)+1),a}const wfe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function bfe(e){const[,t,r,i,n,s,o,a,l,c,h,f]=e,m=dN(t,n,i,r,s,o,a);let y;return l?y=vfe[l]:c?y=0:y=G$(h,f),[m,new Jr(y)]}function _fe(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const xfe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Sfe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,$fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function SF(e){const[,t,r,i,n,s,o,a]=e;return[dN(t,n,i,r,s,o,a),Jr.utcInstance]}function Efe(e){const[,t,r,i,n,s,o,a]=e;return[dN(t,a,r,i,n,s,o),Jr.utcInstance]}const Tfe=Dy(afe,cN),Mfe=Dy(lfe,cN),Ife=Dy(ufe,cN),Cfe=Dy(WH),JH=Fy(ffe,Vy,xw,Sw),Lfe=Fy(cfe,Vy,xw,Sw),Afe=Fy(dfe,Vy,xw,Sw),kfe=Fy(Vy,xw,Sw);function Rfe(e){return jy(e,[Tfe,JH],[Mfe,Lfe],[Ife,Afe],[Cfe,kfe])}function Ofe(e){return jy(_fe(e),[wfe,bfe])}function Nfe(e){return jy(e,[xfe,SF],[Sfe,SF],[$fe,Efe])}function Pfe(e){return jy(e,[yfe,gfe])}const Dfe=Fy(Vy);function Ffe(e){return jy(e,[mfe,Dfe])}const jfe=Dy(hfe,pfe),Vfe=Dy(ZH),zfe=Fy(Vy,xw,Sw);function Ufe(e){return jy(e,[jfe,JH],[Vfe,zfe])}const $F="Invalid Duration",YH={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Bfe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...YH},as=146097/400,Ip=146097/4800,Gfe={years:{quarters:4,months:12,weeks:as/7,days:as,hours:as*24,minutes:as*24*60,seconds:as*24*60*60,milliseconds:as*24*60*60*1e3},quarters:{months:3,weeks:as/28,days:as/4,hours:as*24/4,minutes:as*24*60/4,seconds:as*24*60*60/4,milliseconds:as*24*60*60*1e3/4},months:{weeks:Ip/7,days:Ip,hours:Ip*24,minutes:Ip*24*60,seconds:Ip*24*60*60,milliseconds:Ip*24*60*60*1e3},...YH},xh=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],qfe=xh.slice(0).reverse();function eu(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new rt(i)}function QH(e,t){let r=t.milliseconds??0;for(const i of qfe.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function EF(e,t){const r=QH(e,t)<0?-1:1;xh.reduceRight((i,n)=>{if(ke(t[n]))return i;if(i){const s=t[i]*r,o=e[n][i],a=Math.floor(s/o);t[n]+=a*r,t[i]-=a*o*r}return n},null),xh.reduce((i,n)=>{if(ke(t[n]))return i;if(i){const s=t[i]%1;t[i]-=s,t[n]+=s*e[i][n]}return n},null)}function Hfe(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class rt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?Gfe:Bfe;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||gt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return rt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new xi(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new rt({values:uS(t,rt.normalizeUnit),loc:gt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(gc(t))return rt.fromMillis(t);if(rt.isDuration(t))return t;if(typeof t=="object")return rt.fromObject(t);throw new xi(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=Pfe(t);return i?rt.fromObject(i,r):rt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=Ffe(t);return i?rt.fromObject(i,r):rt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new xi("need to specify a reason the Duration is invalid");const i=t instanceof $o?t:new $o(t,r);if(ar.throwOnInvalid)throw new ype(i);return new rt({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new aH(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Mi.create(this.loc,i).formatDurationFromString(this,t):$F}toHuman(t={}){if(!this.isValid)return $F;const r=xh.map(i=>{const n=this.values[i];return ke(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=lN(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},be.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?QH(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=rt.fromDurationLike(t),i={};for(const n of xh)(hy(r.values,n)||hy(this.values,n))&&(i[n]=r.get(n)+this.get(n));return eu(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=rt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=PH(t(this.values[i],i));return eu(this,{values:r},!0)}get(t){return this[rt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...uS(t,rt.normalizeUnit)};return eu(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:n}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:n,conversionAccuracy:i};return eu(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return EF(this.matrix,t),eu(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Hfe(this.normalize().shiftToAll().toObject());return eu(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>rt.normalizeUnit(o));const r={},i={},n=this.toObject();let s;for(const o of xh)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;gc(n[o])&&(a+=n[o]);const l=Math.trunc(a);r[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else gc(n[o])&&(i[o]=n[o]);for(const o in i)i[o]!==0&&(r[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return EF(this.matrix,r),eu(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return eu(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of xh)if(!r(this.values[i],t.values[i]))return!1;return!0}}const Cp="Invalid Interval";function Wfe(e,t){return!e||!e.isValid?sr.invalid("missing or invalid start"):!t||!t.isValid?sr.invalid("missing or invalid end"):t<e?sr.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class sr{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new xi("need to specify a reason the Interval is invalid");const i=t instanceof $o?t:new $o(t,r);if(ar.throwOnInvalid)throw new mpe(i);return new sr({invalid:i})}static fromDateTimes(t,r){const i=dg(t),n=dg(r),s=Wfe(i,n);return s??new sr({start:i,end:n})}static after(t,r){const i=rt.fromDurationLike(r),n=dg(t);return sr.fromDateTimes(n,n.plus(i))}static before(t,r){const i=rt.fromDurationLike(r),n=dg(t);return sr.fromDateTimes(n.minus(i),n)}static fromISO(t,r){const[i,n]=(t||"").split("/",2);if(i&&n){let s,o;try{s=be.fromISO(i,r),o=s.isValid}catch{o=!1}let a,l;try{a=be.fromISO(n,r),l=a.isValid}catch{l=!1}if(o&&l)return sr.fromDateTimes(s,a);if(o){const c=rt.fromISO(n,r);if(c.isValid)return sr.after(s,c)}else if(l){const c=rt.fromISO(i,r);if(c.isValid)return sr.before(a,c)}}return sr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let n;return r!=null&&r.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(t,r),Math.floor(n.diff(i,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?sr.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(dg).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s:n}=this,s=0;for(;n<this.e;){const o=r[s]||this.e,a=+o>+this.e?this.e:o;i.push(sr.fromDateTimes(n,a)),n=a,s+=1}return i}splitBy(t){const r=rt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(sr.fromDateTimes(i,s)),i=s,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:sr.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return sr.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const n=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?r=l.time:(r&&+r!=+l.time&&n.push(sr.fromDateTimes(r,l.time)),r=null);return sr.merge(n)}difference(...t){return sr.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Cp}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=oS,r={}){return this.isValid?Mi.create(this.s.loc.clone(r),t).formatInterval(this):Cp}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Cp}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Cp}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Cp}toFormat(t,{separator:r=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:Cp}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):rt.invalid(this.invalidReason)}mapEndpoints(t){return sr.fromDateTimes(t(this.s),t(this.e))}}class bb{static hasDST(t=ar.defaultZone){const r=be.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return In.isValidZone(t)}static normalizeZone(t){return Wu(t,ar.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||gt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||gt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||gt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||gt.create(r,i,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||gt.create(r,i,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||gt.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||gt.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return gt.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return gt.create(r,null,"gregory").eras(t)}static features(){return{relative:RH(),localeWeek:OH()}}}function TF(e,t){const r=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(rt.fromMillis(i).as("days"))}function Zfe(e,t,r){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=TF(l,c);return(h-h%7)/7}],["days",TF]],n={},s=e;let o,a;for(const[l,c]of i)r.indexOf(l)>=0&&(o=l,n[l]=c(e,t),a=s.plus(n),a>t?(n[l]--,e=s.plus(n),e>t&&(a=e,n[l]--,e=s.plus(n))):e=a);return[e,n,a,o]}function Jfe(e,t,r,i){let[n,s,o,a]=Zfe(e,t,r);const l=t-n,c=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const h=rt.fromObject(s,i);return c.length>0?rt.fromMillis(l,i).shiftTo(...c).plus(h):h}const Yfe="missing Intl.DateTimeFormat.formatToParts support";function ht(e,t=r=>r){return{regex:e,deser:([r])=>t(jpe(r))}}const Qfe=String.fromCharCode(160),KH=`[ ${Qfe}]`,XH=new RegExp(KH,"g");function Kfe(e){return e.replace(/\./g,"\\.?").replace(XH,KH)}function MF(e){return e.replace(/\./g,"").replace(XH," ").toLowerCase()}function qs(e,t){return e===null?null:{regex:RegExp(e.map(Kfe).join("|")),deser:([r])=>e.findIndex(i=>MF(r)===MF(i))+t}}function IF(e,t){return{regex:e,deser:([,r,i])=>G$(r,i),groups:t}}function _b(e){return{regex:e,deser:([t])=>t}}function Xfe(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function eme(e,t){const r=Gs(t),i=Gs(t,"{2}"),n=Gs(t,"{3}"),s=Gs(t,"{4}"),o=Gs(t,"{6}"),a=Gs(t,"{1,2}"),l=Gs(t,"{1,3}"),c=Gs(t,"{1,6}"),h=Gs(t,"{1,9}"),f=Gs(t,"{2,4}"),m=Gs(t,"{4,6}"),y=x=>({regex:RegExp(Xfe(x.val)),deser:([b])=>b,literal:!0}),v=(x=>{if(e.literal)return y(x);switch(x.val){case"G":return qs(t.eras("short"),0);case"GG":return qs(t.eras("long"),0);case"y":return ht(c);case"yy":return ht(f,hC);case"yyyy":return ht(s);case"yyyyy":return ht(m);case"yyyyyy":return ht(o);case"M":return ht(a);case"MM":return ht(i);case"MMM":return qs(t.months("short",!0),1);case"MMMM":return qs(t.months("long",!0),1);case"L":return ht(a);case"LL":return ht(i);case"LLL":return qs(t.months("short",!1),1);case"LLLL":return qs(t.months("long",!1),1);case"d":return ht(a);case"dd":return ht(i);case"o":return ht(l);case"ooo":return ht(n);case"HH":return ht(i);case"H":return ht(a);case"hh":return ht(i);case"h":return ht(a);case"mm":return ht(i);case"m":return ht(a);case"q":return ht(a);case"qq":return ht(i);case"s":return ht(a);case"ss":return ht(i);case"S":return ht(l);case"SSS":return ht(n);case"u":return _b(h);case"uu":return _b(a);case"uuu":return ht(r);case"a":return qs(t.meridiems(),0);case"kkkk":return ht(s);case"kk":return ht(f,hC);case"W":return ht(a);case"WW":return ht(i);case"E":case"c":return ht(r);case"EEE":return qs(t.weekdays("short",!1),1);case"EEEE":return qs(t.weekdays("long",!1),1);case"ccc":return qs(t.weekdays("short",!0),1);case"cccc":return qs(t.weekdays("long",!0),1);case"Z":case"ZZ":return IF(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return IF(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return _b(/[a-z_+-/]{1,256}?/i);case" ":return _b(/[^\S\n\r]/);default:return y(x)}})(e)||{invalidReason:Yfe};return v.token=e,v}const tme={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function rme(e,t,r){const{type:i,value:n}=e;if(i==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=tme[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function ime(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function nme(e,t,r){const i=e.match(t);if(i){const n={};let s=1;for(const o in r)if(hy(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,n]}else return[i,{}]}function sme(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return ke(e.z)||(r=In.create(e.z)),ke(e.Z)||(r||(r=new Jr(e.Z)),i=e.Z),ke(e.q)||(e.M=(e.q-1)*3+1),ke(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),ke(e.u)||(e.S=aN(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),r,i]}let BT=null;function ome(){return BT||(BT=be.fromMillis(1555555555555)),BT}function ame(e,t){if(e.literal)return e;const r=Mi.macroTokenToFormatOpts(e.val),i=iW(r,t);return i==null||i.includes(void 0)?e:i}function eW(e,t){return Array.prototype.concat(...e.map(r=>ame(r,t)))}class tW{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=eW(Mi.parseFormat(r),t),this.units=this.tokens.map(i=>eme(i,t)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,n]=ime(this.units);this.regex=RegExp(i,"i"),this.handlers=n}}explainFromTokens(t){if(this.isValid){const[r,i]=nme(t,this.regex,this.handlers),[n,s,o]=i?sme(i):[null,null,void 0];if(hy(i,"a")&&hy(i,"H"))throw new rm("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:n,zone:s,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function rW(e,t,r){return new tW(e,r).explainFromTokens(t)}function lme(e,t,r){const{result:i,zone:n,specificOffset:s,invalidReason:o}=rW(e,t,r);return[i,n,s,o]}function iW(e,t){if(!e)return null;const i=Mi.create(t,e).dtFormatter(ome()),n=i.formatToParts(),s=i.resolvedOptions();return n.map(o=>rme(o,e,s))}const GT="Invalid DateTime",CF=864e13;function Zg(e){return new $o("unsupported zone",`the zone "${e.name}" is not supported`)}function qT(e){return e.weekData===null&&(e.weekData=aS(e.c)),e.weekData}function HT(e){return e.localWeekData===null&&(e.localWeekData=aS(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function ed(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new be({...r,...t,old:r})}function nW(e,t,r){let i=e-t*60*1e3;const n=r.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;const s=r.offset(i);return n===s?[i,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function xb(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function B_(e,t,r){return nW(B$(e),t,r)}function LF(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:n,day:Math.min(e.c.day,lS(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=rt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=B$(s);let[l,c]=nW(a,r,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function Lp(e,t,r,i,n,s){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=be.fromObject(e,{...r,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return be.invalid(new $o("unparsable",`the input "${n}" can't be parsed as ${i}`))}function Sb(e,t,r=!0){return e.isValid?Mi.create(gt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function WT(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=xr(e.c.year,r?6:4),t?(i+="-",i+=xr(e.c.month),i+="-",i+=xr(e.c.day)):(i+=xr(e.c.month),i+=xr(e.c.day)),i}function AF(e,t,r,i,n,s){let o=xr(e.c.hour);return t?(o+=":",o+=xr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=xr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=xr(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=xr(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=xr(Math.trunc(-e.o/60)),o+=":",o+=xr(Math.trunc(-e.o%60))):(o+="+",o+=xr(Math.trunc(e.o/60)),o+=":",o+=xr(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const sW={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},ume={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},cme={ordinal:1,hour:0,minute:0,second:0,millisecond:0},oW=["year","month","day","hour","minute","second","millisecond"],dme=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],hme=["year","ordinal","hour","minute","second","millisecond"];function pme(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new aH(e);return t}function kF(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return pme(e)}}function fme(e){return q_[e]||(G_===void 0&&(G_=ar.now()),q_[e]=e.offset(G_)),q_[e]}function RF(e,t){const r=Wu(t.zone,ar.defaultZone);if(!r.isValid)return be.invalid(Zg(r));const i=gt.fromObject(t);let n,s;if(ke(e.year))n=ar.now();else{for(const l of oW)ke(e[l])&&(e[l]=sW[l]);const o=AH(e)||kH(e);if(o)return be.invalid(o);const a=fme(r);[n,s]=B_(e,a,r)}return new be({ts:n,zone:r,loc:i,o:s})}function OF(e,t,r){const i=ke(r.round)?!0:r.round,n=(o,a)=>(o=lN(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return n(s(r.unit),r.unit);for(const o of r.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(e>t?-0:0,r.units[r.units.length-1])}function NF(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let G_,q_={};class be{constructor(t){const r=t.zone||ar.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new $o("invalid input"):null)||(r.isValid?null:Zg(r));this.ts=ke(t.ts)?ar.now():t.ts;let n=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[n,s]=[t.old.c,t.old.o];else{const a=gc(t.o)&&!t.old?t.o:r.offset(this.ts);n=xb(this.ts,a),i=Number.isNaN(n.year)?new $o("invalid input"):null,n=i?null:n,s=i?null:a}this._zone=r,this.loc=t.loc||gt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new be({})}static local(){const[t,r]=NF(arguments),[i,n,s,o,a,l,c]=r;return RF({year:i,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,r]=NF(arguments),[i,n,s,o,a,l,c]=r;return t.zone=Jr.utcInstance,RF({year:i,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,r={}){const i=Gpe(t)?t.valueOf():NaN;if(Number.isNaN(i))return be.invalid("invalid input");const n=Wu(r.zone,ar.defaultZone);return n.isValid?new be({ts:i,zone:n,loc:gt.fromObject(r)}):be.invalid(Zg(n))}static fromMillis(t,r={}){if(gc(t))return t<-CF||t>CF?be.invalid("Timestamp out of range"):new be({ts:t,zone:Wu(r.zone,ar.defaultZone),loc:gt.fromObject(r)});throw new xi(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(gc(t))return new be({ts:t*1e3,zone:Wu(r.zone,ar.defaultZone),loc:gt.fromObject(r)});throw new xi("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=Wu(r.zone,ar.defaultZone);if(!i.isValid)return be.invalid(Zg(i));const n=gt.fromObject(r),s=uS(t,kF),{minDaysInFirstWeek:o,startOfWeek:a}=wF(s,n),l=ar.now(),c=ke(r.specificOffset)?i.offset(l):r.specificOffset,h=!ke(s.ordinal),f=!ke(s.year),m=!ke(s.month)||!ke(s.day),y=f||m,g=s.weekYear||s.weekNumber;if((y||h)&&g)throw new rm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&h)throw new rm("Can't mix ordinal dates with month/day");const v=g||s.weekday&&!y;let x,b,_=xb(l,c);v?(x=dme,b=ume,_=aS(_,o,a)):h?(x=hme,b=cme,_=UT(_)):(x=oW,b=sW);let S=!1;for(const P of x){const z=s[P];ke(z)?S?s[P]=b[P]:s[P]=_[P]:S=!0}const $=v?zpe(s,o,a):h?Upe(s):AH(s),M=$||kH(s);if(M)return be.invalid(M);const I=v?gF(s,o,a):h?vF(s):s,[C,L]=B_(I,c,i),V=new be({ts:C,zone:i,o:L,loc:n});return s.weekday&&y&&t.weekday!==V.weekday?be.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${V.toISO()}`):V.isValid?V:be.invalid(V.invalid)}static fromISO(t,r={}){const[i,n]=Rfe(t);return Lp(i,n,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,n]=Ofe(t);return Lp(i,n,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,n]=Nfe(t);return Lp(i,n,r,"HTTP",r)}static fromFormat(t,r,i={}){if(ke(t)||ke(r))throw new xi("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,o=gt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,c,h]=lme(o,t,r);return h?be.invalid(h):Lp(a,l,i,`format ${r}`,t,c)}static fromString(t,r,i={}){return be.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,n]=Ufe(t);return Lp(i,n,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new xi("need to specify a reason the DateTime is invalid");const i=t instanceof $o?t:new $o(t,r);if(ar.throwOnInvalid)throw new fpe(i);return new be({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=iW(t,gt.fromObject(r));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(t,r={}){return eW(Mi.parseFormat(t),gt.fromObject(r)).map(n=>n.val).join("")}static resetCache(){G_=void 0,q_={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?qT(this).weekYear:NaN}get weekNumber(){return this.isValid?qT(this).weekNumber:NaN}get weekday(){return this.isValid?qT(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?HT(this).weekday:NaN}get localWeekNumber(){return this.isValid?HT(this).weekNumber:NaN}get localWeekYear(){return this.isValid?HT(this).weekYear:NaN}get ordinal(){return this.isValid?UT(this.c).ordinal:NaN}get monthShort(){return this.isValid?bb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?bb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?bb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?bb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=B$(this.c),n=this.zone.offset(i-t),s=this.zone.offset(i+t),o=this.zone.offset(i-n*r),a=this.zone.offset(i-s*r);if(o===a)return[this];const l=i-o*r,c=i-a*r,h=xb(l,o),f=xb(c,a);return h.hour===f.hour&&h.minute===f.minute&&h.second===f.second&&h.millisecond===f.millisecond?[ed(this,{ts:l}),ed(this,{ts:c})]:[this]}get isInLeapYear(){return _w(this.year)}get daysInMonth(){return lS(this.year,this.month)}get daysInYear(){return this.isValid?$m(this.year):NaN}get weeksInWeekYear(){return this.isValid?g1(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?g1(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:n}=Mi.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:n}}toUTC(t=0,r={}){return this.setZone(Jr.instance(t),r)}toLocal(){return this.setZone(ar.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=Wu(t,ar.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(r||i){const s=t.offset(this.ts),o=this.toObject();[n]=B_(o,s,t)}return ed(this,{ts:n,zone:t})}else return be.invalid(Zg(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return ed(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=uS(t,kF),{minDaysInFirstWeek:i,startOfWeek:n}=wF(r,this.loc),s=!ke(r.weekYear)||!ke(r.weekNumber)||!ke(r.weekday),o=!ke(r.ordinal),a=!ke(r.year),l=!ke(r.month)||!ke(r.day),c=a||l,h=r.weekYear||r.weekNumber;if((c||o)&&h)throw new rm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new rm("Can't mix ordinal dates with month/day");let f;s?f=gF({...aS(this.c,i,n),...r},i,n):ke(r.ordinal)?(f={...this.toObject(),...r},ke(r.day)&&(f.day=Math.min(lS(f.year,f.month),f.day))):f=vF({...UT(this.c),...r});const[m,y]=B_(f,this.o,this.zone);return ed(this,{ts:m,o:y})}plus(t){if(!this.isValid)return this;const r=rt.fromDurationLike(t);return ed(this,LF(this,r))}minus(t){if(!this.isValid)return this;const r=rt.fromDurationLike(t).negate();return ed(this,LF(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},n=rt.normalizeUnit(t);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks")if(r){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?Mi.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):GT}toLocaleString(t=oS,r={}){return this.isValid?Mi.create(this.loc.clone(r),t).formatDateTime(this):GT}toLocaleParts(t={}){return this.isValid?Mi.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=WT(this,o);return a+="T",a+=AF(this,o,r,i,n,s),a}toISODate({format:t="extended"}={}){return this.isValid?WT(this,t==="extended"):null}toISOWeekDate(){return Sb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+AF(this,o==="extended",r,t,i,s):null}toRFC2822(){return Sb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Sb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?WT(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(r||t)&&(i&&(n+=" "),r?n+="z":t&&(n+="ZZ")),Sb(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():GT}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return rt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=qpe(r).map(rt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=Jfe(a,l,s,n);return o?c.negate():c}diffNow(t="milliseconds",r={}){return this.diff(be.now(),t,r)}until(t){return this.isValid?sr.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const n=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(r,i)<=n&&n<=s.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||be.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),OF(r,this.plus(i),{...t,numeric:"always",units:n,unit:s})}toRelativeCalendar(t={}){return this.isValid?OF(t.base||be.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(be.isDateTime))throw new xi("min requires all arguments be DateTimes");return bF(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(be.isDateTime))throw new xi("max requires all arguments be DateTimes");return bF(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:n=null,numberingSystem:s=null}=i,o=gt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return rW(o,t,r)}static fromStringExplain(t,r,i={}){return be.fromFormatExplain(t,r,i)}static buildFormatParser(t,r={}){const{locale:i=null,numberingSystem:n=null}=r,s=gt.fromOpts({locale:i,numberingSystem:n,defaultToEN:!0});return new tW(s,t)}static fromFormatParser(t,r,i={}){if(ke(t)||ke(r))throw new xi("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=i,o=gt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!o.equals(r.locale))throw new xi(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:h}=r.explainFromTokens(t);return h?be.invalid(h):Lp(a,l,i,`format ${r.format}`,t,c)}static get DATE_SHORT(){return oS}static get DATE_MED(){return lH}static get DATE_MED_WITH_WEEKDAY(){return gpe}static get DATE_FULL(){return uH}static get DATE_HUGE(){return cH}static get TIME_SIMPLE(){return dH}static get TIME_WITH_SECONDS(){return hH}static get TIME_WITH_SHORT_OFFSET(){return pH}static get TIME_WITH_LONG_OFFSET(){return fH}static get TIME_24_SIMPLE(){return mH}static get TIME_24_WITH_SECONDS(){return yH}static get TIME_24_WITH_SHORT_OFFSET(){return gH}static get TIME_24_WITH_LONG_OFFSET(){return vH}static get DATETIME_SHORT(){return wH}static get DATETIME_SHORT_WITH_SECONDS(){return bH}static get DATETIME_MED(){return _H}static get DATETIME_MED_WITH_SECONDS(){return xH}static get DATETIME_MED_WITH_WEEKDAY(){return vpe}static get DATETIME_FULL(){return SH}static get DATETIME_FULL_WITH_SECONDS(){return $H}static get DATETIME_HUGE(){return EH}static get DATETIME_HUGE_WITH_SECONDS(){return TH}}function dg(e){if(be.isDateTime(e))return e;if(e&&e.valueOf&&gc(e.valueOf()))return be.fromJSDate(e);if(e&&typeof e=="object")return be.fromObject(e);throw new xi(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const mme="shortOffset";function yme(e){return"timeZoneIANA"in e}function gme(e){return e.startsWith("UTC")}function v1(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?H_(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?vme(r):null}}}}}function H_(e,t=ba){return e?yme(e)?e.timeZoneIANA:wme(e,t):t}function vme(e){return{timeZoneIANA:e}}function wme(e,t=ba){if(!e||!sF.has(e.timeZone))return t;const r=sF.get(e.timeZone);return gme(e.timeZone)||e.respectsDaylightSaving?r:bme(r)}function bme(e){const t=be.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${Jr.instance(-r).formatOffset(0,"narrow")}`}function _me(e,t,r,i,n){if(t&&n==="date")return{timeZone:_a,timeZoneName:void 0};const s=i.timeStyle||i.hour,o=r===ip;return{timeZone:o?n==="timestamp-offset"?void 0:e??_a:r,timeZoneName:o&&s?mme:void 0}}function xme(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));return e===ba||e===ip||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const Sme={year:void 0,month:void 0,day:void 0,weekday:void 0},$me={hour:void 0,minute:void 0,second:void 0},aW={timeZone:_a},Fo={year:"numeric",month:"numeric",day:"numeric"},hg={year:"numeric",month:"long",day:"numeric"},pg={year:"numeric",month:"short",day:"numeric"},fg={year:"numeric",month:"long",weekday:"long",day:"numeric"},ju={hour:"numeric",minute:"numeric"},gd={...ju,second:"numeric"},lW={hourCycle:"h23"},mg={...ju,...lW},yg={...gd,...lW},uW={"short-date":Fo,"short-date-short-time":{...Fo,...ju},"short-date-short-time-24":{...Fo,...mg},"short-date-long-time":{...Fo,...gd},"short-date-long-time-24":{...Fo,...yg},"short-date-le":Fo,"short-date-le-short-time":{...Fo,...ju},"short-date-le-short-time-24":{...Fo,...mg},"short-date-le-long-time":{...Fo,...gd},"short-date-le-long-time-24":{...Fo,...yg},"long-month-day-year":hg,"long-month-day-year-short-time":{...hg,...ju},"long-month-day-year-short-time-24":{...hg,...mg},"long-month-day-year-long-time":{...hg,...gd},"long-month-day-year-long-time-24":{...hg,...yg},"day-short-month-year":pg,"day-short-month-year-short-time":{...pg,...ju},"day-short-month-year-short-time-24":{...pg,...mg},"day-short-month-year-long-time":{...pg,...gd},"day-short-month-year-long-time-24":{...pg,...yg},"long-date":fg,"long-date-short-time":{...fg,...ju},"long-date-short-time-24":{...fg,...mg},"long-date-long-time":{...fg,...gd},"long-date-long-time-24":{...fg,...yg},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":ju,"long-time":gd},Eme=ei()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),cW={ar:"ar-u-nu-latn-ca-gregory"};let pC=new WeakMap;const H$=uW["short-date-short-time"];function Tme(e){let t=pC.get(e);if(!t){const r=$n(),i=cW[r]||r,n=hN(e.timeZone??ba),s={...e,timeZone:n};t=new Intl.DateTimeFormat(i,s),pC.set(e,t)}return t}function gg(e){return uW[e]}function Eo(e,t=H$){return Tme(t).format(e)}function Mme(e,t=H$){return Eo(new Date(e),{...t,...aW,...$me})}function Ime(e,t=H$){return Eo(new Date(`1970-01-01T${e}Z`),{...t,...aW,...Sme})}function Cme(e,t=H$){if(t.timeZone)return Eo(new Date(e),t);const r=be.fromISO(e,{setZone:!0}),i=$n(),n=cW[i]??i,s=r.offset===0?_a:t.timeZone,o={...t,timeZone:s};return r.toLocaleString(o,{locale:n})}function hN(e){switch(e){case ba:return ppe;case ip:return _a;default:return e}}tN(()=>{pC=new WeakMap});const Lme={ar:"ar-u-nu-latn"};let W_=new WeakMap,dW={};function fC(e){const t=e||dW;if(!W_.has(t)){const r=$n(),i=Lme[$n()]||r;W_.set(t,new Intl.NumberFormat(i,e))}return W_.get(t)}function Xje(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function np(e,t){return Object.is(e,-0)&&(e=0),fC(t).format(e)}function e6e(e,t=$n()){var i,n;if(!e)return null;let r=PF.get(t);if(!r){const s=fC().formatToParts(12345.6),o=[...fC({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((y,g)=>[y,g])),l=new RegExp(`[${(i=s.find(y=>y.type==="group"))==null?void 0:i.value}]`,"g"),c=new RegExp(`[${(n=s.find(y=>y.type==="decimal"))==null?void 0:n.value}]`),h=new RegExp(`[${o.join("")}]`,"g"),f=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,m=/[-\u2212\u2013\u2014\u2015]/g;r=y=>{if((y=y.trim().replaceAll(l,"").replace(c,".").replace(h,v=>String(a.get(v))).replaceAll(f,"").replaceAll(m,"-"))==="")return null;const g=Number(y);return isNaN(g)?null:g},PF.set(t,r)}return r(e)}tN(()=>{W_=new WeakMap,dW={}});const PF=new Map,hW=()=>W.getLogger("esri.intl.substitute");function w1(e,t,r={}){const{format:i={}}=r;return nw(e,n=>Ame(n,t,i))}function Ame(e,t,r){let i,n;const s=e.indexOf(":");if(s===-1?i=e.trim():(i=e.slice(0,s).trim(),n=e.slice(s+1).trim()),!i)return"";const o=iw(i,t);if(o==null)return"";const a=(n?r==null?void 0:r[n]:null)??(r==null?void 0:r[i]);return a?kme(o,a):n?Rme(o,n):pN(o)}function kme(e,t){switch(t.type){case"date":return Eo(e,t.intlOptions);case"number":return np(e,t.intlOptions);default:return hW().warn("missing format descriptor for key {key}"),pN(e)}}function Rme(e,t){switch(t.toLowerCase()){case"dateformat":return Eo(e);case"numberformat":return np(e);default:return hW().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Eo(e):/^numberformat/i.test(t)?np(e):pN(e)}}function pN(e){switch(typeof e){case"string":return e;case"number":return np(e);case"boolean":return""+e;default:return e instanceof Date?Eo(e):""}}async function Ome(e,t,r,i){const n=t.exec(r);if(!n)throw new N("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=sH(i),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let h;try{h=await DF(e(c))}catch(f){if(c===l)throw new N("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{h=await DF(e(l))}catch(m){throw new N("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:m})}}return h}async function DF(e){if(FF.fetchBundleAsset!=null)return FF.fetchBundleAsset(e);const t=await ft(e,{responseType:"text"});return JSON.parse(t.data)}let Nme=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let n;n=typeof i=="string"?s=>new URL(s,new URL(i,window.location.href)).href:i instanceof URL?s=>new URL(s,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return Ome(this.getAssetUrl,this.matcher,t,r)}};function Pme(e){return new Nme(e)}const FF={};upe(Pme({pattern:"esri/",location:Nt}));let za=class extends ce{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const t=this.language;let r=t==="local"||t==="global"?t:sH(t??$n())??"global";return r=r==="no"?"nb":r,r}};u([d()],za.prototype,"apiKey",void 0),u([d()],za.prototype,"id",void 0),u([d()],za.prototype,"language",void 0),u([d()],za.prototype,"places",void 0),u([d()],za.prototype,"serviceUrl",void 0),u([d()],za.prototype,"worldview",void 0),za=u([T("esri.support.BasemapStyle")],za);const Dme=za;function Fme(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function jme(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function vd(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const i6e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function mC(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function n6e(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function W$(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function s6e(e){var r;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((r=e==null?void 0:e.source)==null?void 0:r.type)==="feature-layer"}async function fN(e,t){const r=Ee==null?void 0:Ee.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const n=`${e.slice(0,i)}/rest/info`,s=t!=null?t.signal:null,{data:o}=await ft(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function pW(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Vme(e){return pW(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function zme(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Ume(e){return!!zme(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const Bme=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),fW=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wcs","wfs","wms","wmts"]),Gme=new Set([...fW,"link-chart"]);function qme(e){switch(e.layerContainerType){case"basemap":return Bme;case"operational-layers":return e.origin==="link-chart"?Gme:fW;default:return null}}function Hme(e,t){if(t.restrictedWebMapWriting){const r=qme(t);return r==null||r.has(e.type)&&!W$(e)}return!0}function Wme(e,t){var r;if(t)if(W$(e)){const i=iw("featureCollection.layers",t),n=(r=i==null?void 0:i[0])==null?void 0:r.layerDefinition;n&&jF(e,n)}else e.type!=="group"&&jF(e,t)}function jF(e,t){"maxScale"in e&&(t.maxScale=Wx(e.maxScale)??void 0),"minScale"in e&&(t.minScale=Wx(e.minScale)??void 0)}function Zme(e,t){if(Wme(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=Wx(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(W$(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function VF(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r!=null&&r.messages&&r.messages.push(new N("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(W$(e)&&!e.isTable)t=e.resourceInfo;else if(Hme(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&Zme(e,t=O(t)),t}var Jg;let Jme=0,Pn=Jg=class extends G.JSONSupportMixin(va){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Jme++,this.baseLayers=new ie,this.referenceLayers=new ie;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&W.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{W.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Et(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Dl(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=VF(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&i.push(s)}),this.referenceLayers.forEach(n=>{const s=VF(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&(n.type!=="scene"&&(s.isReference=!0),i.push(s))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",Dl(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Aq(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>kx(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>kx(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new Jg({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var r;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const n=O(i);return n.url&&ga(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&ga(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;Ht(e);const n=[];if(t){const s=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const o=t.data.id;n.push(hpe(o).then(a=>{a&&this.read({title:a},t.context)}))}}else r?n.push(this._loadFromItem(r,e)):i&&n.push(this._loadFromStylesService(i,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,r){var l,c;const i=(l=this.resourceInfo)==null?void 0:l.context,n=((c=this.portalItem)==null?void 0:c.portal)||(i==null?void 0:i.portal)||null,s=Qme[(i==null?void 0:i.origin)||""]??"web-map",{populateOperationalLayers:o}=await B(()=>import("./layersCreator-3167bc94.js"),["assets/layersCreator-3167bc94.js","assets/loadUtils-25f64202.js","assets/fetchService-ee26faaa.js","assets/associatedFeatureServiceUtils-97d0532b.js","assets/lazyLayerLoader-ea88f5c3.js","assets/portalLayers-89d904f1.js"]),a=[];if(Ht(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const h={context:{...i,origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=g=>s==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,m=o(this.baseLayers,e.baseMapLayers.filter(g=>!f(g)),h);a.push(m);const y=o(this.referenceLayers,e.baseMapLayers.filter(f),h);a.push(y)}await Promise.allSettled(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),n=mr(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:Yme[e.type||""]??"web-map",portal:e.portal||Ai.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Ai.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}async _loadFromStylesService(e,t){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${r}/styles/${e.id}/self`,n=`${r}/webmaps/${e.id}`,[s,o]=await Promise.all([(await ft(i,{query:{token:e.apiKey},signal:t==null?void 0:t.signal})).data,(await ft(n,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=s.thumbnailUrl);const a=mr(n);if(this._set("resourceInfo",{data:o.baseMap??{},context:{origin:"web-map",url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:o.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,a,t),e.apiKey)for(const l of[...this.baseLayers,...this.referenceLayers])"apiKey"in l&&(l.apiKey=e.apiKey)}static fromId(e){const t=oC[e];return t?t.itemId?new Jg({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):Jg.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};u([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ie}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],Pn.prototype,"baseLayers",null),u([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Pn.prototype,"id",void 0),u([d({type:mv})],Pn.prototype,"portalItem",void 0),u([d()],Pn.prototype,"referenceLayers",null),u([d({readOnly:!0})],Pn.prototype,"resourceInfo",void 0),u([d({type:Ie})],Pn.prototype,"spatialReference",void 0),u([d({type:Dme})],Pn.prototype,"style",void 0),u([d()],Pn.prototype,"thumbnailUrl",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Pn.prototype,"title",void 0),u([te("title")],Pn.prototype,"writeTitle",null),Pn=Jg=u([T("esri.Basemap")],Pn);const Yme={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Qme={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},gv=Pn,Kme=Object.freeze(Object.defineProperty({__proto__:null,default:gv},Symbol.toStringTag,{value:"Module"})),cS={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function mW(e){return!!cS[e]||!!cS[e.toLowerCase()]}function mN(e){return cS[e]??cS[e.toLowerCase()]}function Xme(e){return[...mN(e)]}function ZT(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function yW(e,t,r,i=1){const n=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,o=2*r-s;return[Math.round(255*ZT(o,s,n+1/3)),Math.round(255*ZT(o,s,n)),Math.round(255*ZT(o,s,n-1/3)),i]}function eye(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,s=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&i,o>>=r,a[3]=n*l/255),l=o&i,o>>=r,a[2]=n*l,l=o&i,o>>=r,a[1]=n*l,l=o&i,o>>=r,a[0]=n*l,a}const o6e=2.2,zF=new Float32Array(1);function a6e(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Cn(e,t,r){return Math.min(Math.max(e,t),r)}function l6e(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function Yg(e,t,r){return e+(t-e)*r}function u6e(e,t,r,i,n){return Yg(i,n,(e-t)/(r-t))}function Z$(e){return e*Math.PI/180}function gW(e){return 180*e/Math.PI}function c6e(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function d6e(e){return Math.acos(Cn(e,-1,1))}function tye(e){return Math.asin(Cn(e,-1,1))}function Ao(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}function vW(e,t,r=1e-6){return!Ao(e,t,r)&&e>t}function yC(e,t,r=1e-6){return!Ao(e,t,r)&&e<t}function rye(e,t,r=1e-6){return Ao(e,t,r)||e>t}const dS=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function gC(e){return dS.setFloat64(0,e),dS.getBigInt64(0)}function iye(e){return dS.setBigInt64(0,e),dS.getFloat64(0)}const Z_=BigInt("1000000"),nye=wW(1);function wW(e){const t=gC(e=Math.abs(e)),r=iye(t<=Z_?Z_:t-Z_);return Math.abs(e-r)}function h6e(e,t,r=nye){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&wW(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=gC(e),n=gC(t);return i<0!=n<0?!1:!((i<n?n-i:i-n)>Z_)}function p6e(e){return bW(Math.max(-UF,Math.min(e,UF)))}function bW(e){return zF[0]=e,zF[0]}function f6e(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Ao(t,1)&&Ao(r,1)&&Ao(i,1))}const UF=bW(34028234663852886e22);function m6e(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let i=t.toString().split("e");return i=(t=Math[e](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function $b(e){return Cn(TO(e),0,255)}function Eb(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function Tb(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let Q=class Lr{static blendColors(t,r,i,n=new Lr){return n.r=Math.round(t.r+(r.r-t.r)*i),n.g=Math.round(t.g+(r.g-t.g)*i),n.b=Math.round(t.b+(r.b-t.b)*i),n.a=t.a+(r.a-t.a)*i,n._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(i){const n=i[2].split(/\s*,\s*/),s=i[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(l=>2.56*parseFloat(l));return n.length===4&&(a[3]=parseFloat(n[3])),Lr.fromArray(a,r)}return Lr.fromArray(n.map(a=>parseFloat(a)),r)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return Lr.fromArray(yW(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),r)}return null}static fromHex(t,r=new Lr){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const i=parseInt(t.slice(1,2),16),n=parseInt(t.slice(2,3),16),s=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return Lr.fromArray([i+16*i,n+16*n,s+16*s,(o+16*o)/255],r)}case 7:case 9:{const i=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return Lr.fromArray([i,n,s,o/255],r)}default:return null}}static fromArray(t,r=new Lr){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=mW(t)?mN(t):null;return i&&Lr.fromArray(i,r)||Lr.fromRgb(t,r)||Lr.fromHex(t,r)}static fromJSON(t){return t!=null?new Lr([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Lr.fromString(t,this):Array.isArray(t)?Lr.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Lr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,n=i===3||i===4,s=i===4||i===8,o=`#${Tb(this.r,n)}${Tb(this.g,n)}${Tb(this.b,n)}${s?Tb(Math.round(255*this.a),n):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Lr.AlphaMode.ALWAYS){const r=$b(this.r),i=$b(this.g),n=$b(this.b);return t===Lr.AlphaMode.ALWAYS||this.a!==1?[r,i,n,$b(255*this.a)]:[r,i,n]}clone(){return new Lr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(Eb(this.r,0,255)),this.g=Math.round(Eb(this.g,0,255)),this.b=Math.round(Eb(this.b,0,255)),this.a=Eb(this.a,0,1),this}_set(t,r,i,n){this.r=t,this.g=r,this.b=i,this.a=n}};Q.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Q);function ve(e,t={}){const r=e instanceof je?e:new je(e,t),{alwaysWriteDefaults:i,default:n,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:l=!1}=t;return d({type:s?r.apiValues:String,json:{type:r.jsonValues,default:n,name:o,read:!l&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:a,readOnly:l})}var vC;let J_=vC=class extends G{constructor(e){super(e),this.type="none"}clone(){return new vC({type:this.type})}};u([ve({none:"none",stayAbove:"stay-above"}),d({json:{write:{isRequired:!0}}})],J_.prototype,"type",void 0),J_=vC=u([T("esri.ground.NavigationConstraint")],J_);const sye=Symbol("GroundInstance");function J$(e){const t=TO(100*(1-e));return Math.max(0,Math.min(t,100))}function b1(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var _W,wC;let Ua=wC=class extends G.JSONSupportMixin(va){constructor(e){super(e),this[_W]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ie;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&W.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{Ri(e)||W.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)Et(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get layers(){return this._get("layers")}set layers(e){this._set("layers",Dl(e,this._get("layers")))}writeLayers(e,t,r,i){const n=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};mle(s)().write(o,i)&&n.push(o)}else i!=null&&i.messages&&i.messages.push(new N("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Aq(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await B(()=>import("./ElevationQuery-c2ef35c3.js"),[]);Ht(t);const i=new r,n=this.layers.filter(BF).toArray();return i.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await B(()=>import("./ElevationQuery-c2ef35c3.js"),[]);Ht(t);const i=new r,n=this.layers.filter(BF).toArray();return i.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:O(this.surfaceColor),navigationConstraint:O(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new wC({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=(t==null?void 0:t.origin)||"web-scene",n=(t==null?void 0:t.portal)||null,s=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await B(()=>import("./layersCreator-3167bc94.js"),["assets/layersCreator-3167bc94.js","assets/loadUtils-25f64202.js","assets/fetchService-ee26faaa.js","assets/associatedFeatureServiceUtils-97d0532b.js","assets/lazyLayerLoader-ea88f5c3.js","assets/portalLayers-89d904f1.js"]);Ht(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:i,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}await Promise.allSettled(a)}};function oye(e){return e&&"createElevationSampler"in e}function BF(e){return e.type==="elevation"||oye(e)}_W=sye,u([d({json:{read:!1,write:{isRequired:!0}}})],Ua.prototype,"layers",null),u([te("layers")],Ua.prototype,"writeLayers",null),u([d({readOnly:!0})],Ua.prototype,"resourceInfo",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Xe,read:{reader:b1,source:"transparency"},write:{writer:(e,t)=>{t.transparency=J$(e)},target:"transparency"}}})],Ua.prototype,"opacity",void 0),u([d({type:Q,json:{type:[Xe],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Ua.prototype,"surfaceColor",void 0),u([d({type:J_,json:{write:!0}})],Ua.prototype,"navigationConstraint",void 0),Ua=wC=u([T("esri.Ground")],Ua);const hS=Ua;function ee(e,t,r={}){return yN(e,t,r,xW)}function Ln(e,t,r={}){return yN(e,t,r,SW)}function yN(e,t,r={},i){let n=null;const s=r.once?(o,a)=>{i(o)&&(Ft(n),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(n=jue(e,s,r.sync,r.equals),r.initial){const o=e();s(o,o)}return n}function En(e,t,r,i={}){let n=null,s=null,o=null;function a(){var h;n&&s&&(s.remove(),(h=i.onListenerRemove)==null||h.call(i,n),n=null,s=null)}function l(h){i.once&&i.once&&Ft(o),r(h)}const c=ee(e,(h,f)=>{var m;a(),C$(h)&&(n=h,s=uw(h,t,l),(m=i.onListenerAdd)==null||m.call(i,h))},{sync:i.sync,initial:!0});return o=et(()=>{c.remove(),a()}),o}function Y$(e,t){return aye(e,SW,t)}function aye(e,t,r){if(Xn(r))return Promise.reject(Tt());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let n=null;function s(){n=Ft(n)}return new Promise((o,a)=>{n=ow([Ls(r,()=>{s(),a(Tt())}),yN(e,l=>{s(),o(l)},{sync:!1,once:!0},t??xW)])})}function xW(e){return!0}function SW(e){return!!e}function y6e(e,t,r={}){let i=!1;const n=ee(e,(s,o)=>{i||t(s,o)},r);return{remove(){n.remove()},pause(){i=!0},resume(){i=!1}}}function lye(e,t){const r=new ie,i=En(e,"after-splice",({added:n,start:s,deleteCount:o})=>{const a=r.splice(s,o);for(const l of a)l.remove();if(n!=null&&n.length){const l=n.map(t);r.addMany(l,s)}},{sync:!0,onListenerRemove:()=>r.drain(n=>n.remove()),onListenerAdd:n=>r.addMany(n.items.map(t))});return r.addHandles(i),r}function g6e(e,t){const r=new ie,i=lye(e,a=>ww(async l=>{const c=await t(a,l);if(Xn(l))throw c.remove(),Tt();return c})),n=()=>null,s=async a=>{const l=await a.promise,c=i.indexOf(a);c<0||r.splice(c,1,l)};r.addMany(i.items.map(n));for(const a of i)u1(s(a));const o=i.on("after-splice",({added:a,start:l,deleteCount:c})=>{const h=r.splice(l,c);for(const f of h)f==null||f.remove();if(a!=null&&a.length){r.addMany(a.map(n),l);for(const f of a)u1(s(f))}});return r.addHandles([Ple(i),o]),r}const xa={sync:!0},Ye={initial:!0},fn={sync:!0,initial:!0};let Xp=class extends ie{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(kG(()=>this._refresh(),xa))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(t){return new ie(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(n=>!!n);for(const n of r)if(n){if(i(n)){const s=this.indexOf(n,t);s>=0?s!==t&&this.reorder(n,t):this.add(n,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)t=this._processCollection(t,o);else t=this._processCollection(t,s)}}return t}};u([d()],Xp.prototype,"getCollections",void 0),u([d()],Xp.prototype,"getChildrenFunction",void 0),u([d()],Xp.prototype,"itemFilterFunction",void 0),Xp=u([T("esri.core.CollectionFlattener")],Xp);const _1=Xp,Mb=new WeakMap;function gN(e){return!e.destroyed&&(Mb.has(e)||e.addHandles([ee(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||gN(t))},t=>Mb.set(e,t),fn),et(()=>Mb.delete(e))]),Mb.get(e))}function GF(e,t){var a;const r=e.parent,i=e.layer;if((i==null?void 0:i.type)!=="map-image"||!i.sourceJSON||!r)return!1;const n=i.sourceJSON.layers;if(!n)return!1;const s=n.find(l=>e.id===l.id),o=t==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return(s==null?void 0:s.type)===o&&((a=n.find(l=>l.id===r.id))==null?void 0:a.type)==="Catalog Layer"}function uye(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function cye(e){var t,r;return!(!uye(e)||!((r=(t=Vme(e))==null?void 0:t.operations)!=null&&r.supportsEditing)||"editingEnabled"in e&&!Ume(e)||gN(e))}const dye=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,hye="screenUtils.toPt: input not recognized!",$W=96;function qt(e){return e?e/72*$W:0}function An(e){return e?72*e/$W:0}function qe(e){if(typeof e=="string"){const t=e.match(dye);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=i==="px"?An(r):r;return n?-s:s}return console.warn(hye),null}return e}function Yr(e=0,t=0){return{x:e,y:t}}function w6e(e){return e?Yr(e.x,e.y):null}function b6e(e=0,t=0){return[e,t]}function _6e(e=0,t=0,r=0){return[e,t,r]}function x6e(e){return e}function S6e(e){return e}function $6e(e){return e}function E6e(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function Q$(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function pye(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function fye(e,t,r,i,n,s,o,a,l,c,h,f,m,y,g,v){const x=new Float32Array(16);return x[0]=e,x[1]=t,x[2]=r,x[3]=i,x[4]=n,x[5]=s,x[6]=o,x[7]=a,x[8]=l,x[9]=c,x[10]=h,x[11]=f,x[12]=m,x[13]=y,x[14]=g,x[15]=v,x}function mye(e,t){return new Float32Array(e,t,16)}const yye=Q$();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:yye,clone:pye,create:Q$,createView:mye,fromValues:fye},Symbol.toStringTag,{value:"Module"}));function Uc(){return[0,0,0]}function vN(e){return[e[0],e[1],e[2]]}function zy(e,t,r){return[e,t,r]}function gye(e,t,r){return[e,t,r]}function vye(e,t=Uc()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function wye(e,t){return new Float64Array(e,t,3)}function EW(){return Uc()}function TW(){return zy(1,1,1)}function MW(){return zy(1,0,0)}function IW(){return zy(0,1,0)}function CW(){return zy(0,0,1)}const bye=EW(),LW=TW(),_ye=MW(),xye=IW(),Sye=CW();Object.freeze(Object.defineProperty({__proto__:null,ONES:LW,UNIT_X:_ye,UNIT_Y:xye,UNIT_Z:Sye,ZEROS:bye,clone:vN,create:Uc,createView:wye,freeze:gye,fromArray:vye,fromValues:zy,ones:TW,unitX:MW,unitY:IW,unitZ:CW,zeros:EW},Symbol.toStringTag,{value:"Module"}));let wN=1e-6;function Yi(){return wN}function $ye(e){wN=e}const K$=Math.random,Eye=Math.PI/180,Tye=180/Math.PI;function bN(e){return e*Eye}function Mye(e){return e*Tye}function Iye(e,t){return Math.abs(e-t)<=wN*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:K$,equals:Iye,getEpsilon:Yi,setEpsilon:$ye,toDegree:Mye,toRadian:bN},Symbol.toStringTag,{value:"Module"}));function AW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Bc(e,t,r,i,n,s,o,a,l,c,h,f,m,y,g,v,x){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e[9]=h,e[10]=f,e[11]=m,e[12]=y,e[13]=g,e[14]=v,e[15]=x,e}function X$(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Gc(e,t){if(e===t){const r=t[1],i=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Cye(e,t){return kW(e,t)||X$(e),e}function kW(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],x=t[14],b=t[15],_=r*a-i*o,S=r*l-n*o,$=r*c-s*o,M=i*l-n*a,I=i*c-s*a,C=n*c-s*l,L=h*v-f*g,V=h*x-m*g,P=h*b-y*g,z=f*x-m*v,Y=f*b-y*v,oe=m*b-y*x;let ae=_*oe-S*Y+$*z+M*P-I*V+C*L;return ae?(ae=1/ae,e[0]=(a*oe-l*Y+c*z)*ae,e[1]=(n*Y-i*oe-s*z)*ae,e[2]=(v*C-x*I+b*M)*ae,e[3]=(m*I-f*C-y*M)*ae,e[4]=(l*P-o*oe-c*V)*ae,e[5]=(r*oe-n*P+s*V)*ae,e[6]=(x*$-g*C-b*S)*ae,e[7]=(h*C-m*$+y*S)*ae,e[8]=(o*Y-a*P+c*L)*ae,e[9]=(i*P-r*Y-s*L)*ae,e[10]=(g*I-v*$+b*_)*ae,e[11]=(f*$-h*I-y*_)*ae,e[12]=(a*V-o*z-l*L)*ae,e[13]=(r*z-i*V+n*L)*ae,e[14]=(v*S-g*M-x*_)*ae,e[15]=(h*M-f*S+m*_)*ae,e):null}function Lye(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],x=t[14],b=t[15];return e[0]=a*(m*b-y*x)-f*(l*b-c*x)+v*(l*y-c*m),e[1]=-(i*(m*b-y*x)-f*(n*b-s*x)+v*(n*y-s*m)),e[2]=i*(l*b-c*x)-a*(n*b-s*x)+v*(n*c-s*l),e[3]=-(i*(l*y-c*m)-a*(n*y-s*m)+f*(n*c-s*l)),e[4]=-(o*(m*b-y*x)-h*(l*b-c*x)+g*(l*y-c*m)),e[5]=r*(m*b-y*x)-h*(n*b-s*x)+g*(n*y-s*m),e[6]=-(r*(l*b-c*x)-o*(n*b-s*x)+g*(n*c-s*l)),e[7]=r*(l*y-c*m)-o*(n*y-s*m)+h*(n*c-s*l),e[8]=o*(f*b-y*v)-h*(a*b-c*v)+g*(a*y-c*f),e[9]=-(r*(f*b-y*v)-h*(i*b-s*v)+g*(i*y-s*f)),e[10]=r*(a*b-c*v)-o*(i*b-s*v)+g*(i*c-s*a),e[11]=-(r*(a*y-c*f)-o*(i*y-s*f)+h*(i*c-s*a)),e[12]=-(o*(f*x-m*v)-h*(a*x-l*v)+g*(a*m-l*f)),e[13]=r*(f*x-m*v)-h*(i*x-n*v)+g*(i*m-n*f),e[14]=-(r*(a*x-l*v)-o*(i*x-n*v)+g*(i*l-n*a)),e[15]=r*(a*m-l*f)-o*(i*m-n*f)+h*(i*l-n*a),e}function Aye(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],f=e[10],m=e[11],y=e[12],g=e[13],v=e[14],x=e[15];return(t*o-r*s)*(f*x-m*v)-(t*a-i*s)*(h*x-m*g)+(t*l-n*s)*(h*v-f*g)+(r*a-i*o)*(c*x-m*y)-(r*l-n*o)*(c*v-f*y)+(i*l-n*a)*(c*g-h*y)}function RW(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=t[9],y=t[10],g=t[11],v=t[12],x=t[13],b=t[14],_=t[15];let S=r[0],$=r[1],M=r[2],I=r[3];return e[0]=S*i+$*a+M*f+I*v,e[1]=S*n+$*l+M*m+I*x,e[2]=S*s+$*c+M*y+I*b,e[3]=S*o+$*h+M*g+I*_,S=r[4],$=r[5],M=r[6],I=r[7],e[4]=S*i+$*a+M*f+I*v,e[5]=S*n+$*l+M*m+I*x,e[6]=S*s+$*c+M*y+I*b,e[7]=S*o+$*h+M*g+I*_,S=r[8],$=r[9],M=r[10],I=r[11],e[8]=S*i+$*a+M*f+I*v,e[9]=S*n+$*l+M*m+I*x,e[10]=S*s+$*c+M*y+I*b,e[11]=S*o+$*h+M*g+I*_,S=r[12],$=r[13],M=r[14],I=r[15],e[12]=S*i+$*a+M*f+I*v,e[13]=S*n+$*l+M*m+I*x,e[14]=S*s+$*c+M*y+I*b,e[15]=S*o+$*h+M*g+I*_,e}function kye(e,t,r){const i=r[0],n=r[1],s=r[2];if(t===e)e[12]=t[0]*i+t[4]*n+t[8]*s+t[12],e[13]=t[1]*i+t[5]*n+t[9]*s+t[13],e[14]=t[2]*i+t[6]*n+t[10]*s+t[14],e[15]=t[3]*i+t[7]*n+t[11]*s+t[15];else{const o=t[0],a=t[1],l=t[2],c=t[3],h=t[4],f=t[5],m=t[6],y=t[7],g=t[8],v=t[9],x=t[10],b=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=h,e[5]=f,e[6]=m,e[7]=y,e[8]=g,e[9]=v,e[10]=x,e[11]=b,e[12]=o*i+h*n+g*s+t[12],e[13]=a*i+f*n+v*s+t[13],e[14]=l*i+m*n+x*s+t[14],e[15]=c*i+y*n+b*s+t[15]}return e}function Rye(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Oye(e,t,r,i){let n=i[0],s=i[1],o=i[2],a=Math.sqrt(n*n+s*s+o*o);if(a<=Yi())return void AW(e,t);a=1/a,n*=a,s*=a,o*=a;const l=Math.sin(r),c=Math.cos(r),h=1-c,f=t[0],m=t[1],y=t[2],g=t[3],v=t[4],x=t[5],b=t[6],_=t[7],S=t[8],$=t[9],M=t[10],I=t[11],C=n*n*h+c,L=s*n*h+o*l,V=o*n*h-s*l,P=n*s*h-o*l,z=s*s*h+c,Y=o*s*h+n*l,oe=n*o*h+s*l,ae=s*o*h-n*l,Ge=o*o*h+c;e[0]=f*C+v*L+S*V,e[1]=m*C+x*L+$*V,e[2]=y*C+b*L+M*V,e[3]=g*C+_*L+I*V,e[4]=f*P+v*z+S*Y,e[5]=m*P+x*z+$*Y,e[6]=y*P+b*z+M*Y,e[7]=g*P+_*z+I*Y,e[8]=f*oe+v*ae+S*Ge,e[9]=m*oe+x*ae+$*Ge,e[10]=y*oe+b*ae+M*Ge,e[11]=g*oe+_*ae+I*Ge,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function Nye(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+c*i,e[5]=o*n+h*i,e[6]=a*n+f*i,e[7]=l*n+m*i,e[8]=c*n-s*i,e[9]=h*n-o*i,e[10]=f*n-a*i,e[11]=m*n-l*i,e}function Pye(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],c=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-c*i,e[1]=o*n-h*i,e[2]=a*n-f*i,e[3]=l*n-m*i,e[8]=s*i+c*n,e[9]=o*i+h*n,e[10]=a*i+f*n,e[11]=l*i+m*n,e}function Dye(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],h=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+c*i,e[1]=o*n+h*i,e[2]=a*n+f*i,e[3]=l*n+m*i,e[4]=c*n-s*i,e[5]=h*n-o*i,e[6]=f*n-a*i,e[7]=m*n-l*i,e}function Fye(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function jye(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Vye(e,t,r){if(t===0)return X$(e);let i=r[0],n=r[1],s=r[2],o=Math.sqrt(i*i+n*n+s*s);if(o<=Yi())return null;o=1/o,i*=o,n*=o,s*=o;const a=Math.sin(t),l=Math.cos(t),c=1-l;return e[0]=i*i*c+l,e[1]=n*i*c+s*a,e[2]=s*i*c-n*a,e[3]=0,e[4]=i*n*c-s*a,e[5]=n*n*c+l,e[6]=s*n*c+i*a,e[7]=0,e[8]=i*s*c+n*a,e[9]=n*s*c-i*a,e[10]=s*s*c+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zye(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Uye(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bye(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function OW(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=i+i,l=n+n,c=s+s,h=i*a,f=i*l,m=i*c,y=n*l,g=n*c,v=s*c,x=o*a,b=o*l,_=o*c;return e[0]=1-(y+v),e[1]=f+_,e[2]=m-b,e[3]=0,e[4]=f-_,e[5]=1-(h+v),e[6]=g+x,e[7]=0,e[8]=m+b,e[9]=g-x,e[10]=1-(h+y),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Gye(e,t){const r=qye,i=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=i*i+n*n+s*s+o*o;return f>0?(r[0]=2*(a*o+h*i+l*s-c*n)/f,r[1]=2*(l*o+h*n+c*i-a*s)/f,r[2]=2*(c*o+h*s+a*n-l*i)/f):(r[0]=2*(a*o+h*i+l*s-c*n),r[1]=2*(l*o+h*n+c*i-a*s),r[2]=2*(c*o+h*s+a*n-l*i)),OW(e,t,r),e}const qye=Uc();function Hye(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Wye(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+c*c+h*h),e}function Zye(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function Jye(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3],l=n+n,c=s+s,h=o+o,f=n*l,m=n*c,y=n*h,g=s*c,v=s*h,x=o*h,b=a*l,_=a*c,S=a*h,$=i[0],M=i[1],I=i[2];return e[0]=(1-(g+x))*$,e[1]=(m+S)*$,e[2]=(y-_)*$,e[3]=0,e[4]=(m-S)*M,e[5]=(1-(f+x))*M,e[6]=(v+b)*M,e[7]=0,e[8]=(y+_)*I,e[9]=(v-b)*I,e[10]=(1-(f+g))*I,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Yye(e,t,r,i,n){const s=t[0],o=t[1],a=t[2],l=t[3],c=s+s,h=o+o,f=a+a,m=s*c,y=s*h,g=s*f,v=o*h,x=o*f,b=a*f,_=l*c,S=l*h,$=l*f,M=i[0],I=i[1],C=i[2],L=n[0],V=n[1],P=n[2],z=(1-(v+b))*M,Y=(y+$)*M,oe=(g-S)*M,ae=(y-$)*I,Ge=(1-(m+b))*I,dt=(x+_)*I,Ve=(g+S)*C,Z=(x-_)*C,j=(1-(m+v))*C;return e[0]=z,e[1]=Y,e[2]=oe,e[3]=0,e[4]=ae,e[5]=Ge,e[6]=dt,e[7]=0,e[8]=Ve,e[9]=Z,e[10]=j,e[11]=0,e[12]=r[0]+L-(z*L+ae*V+Ve*P),e[13]=r[1]+V-(Y*L+Ge*V+Z*P),e[14]=r[2]+P-(oe*L+dt*V+j*P),e[15]=1,e}function Qye(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,c=r*o,h=i*o,f=i*a,m=n*o,y=n*a,g=n*l,v=s*o,x=s*a,b=s*l;return e[0]=1-f-g,e[1]=h+b,e[2]=m-x,e[3]=0,e[4]=h-b,e[5]=1-c-g,e[6]=y+v,e[7]=0,e[8]=m+x,e[9]=y-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Kye(e,t,r,i,n,s,o){const a=1/(r-t),l=1/(n-i),c=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(n+i)*l,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function Xye(e,t,r,i,n){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(i-n),e[10]=(n+i)*o,e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e}function ege(e,t,r,i){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(n+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(n-s)*c*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function tge(e,t,r,i,n,s,o){const a=1/(t-r),l=1/(i-n),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*a,e[13]=(n+i)*l,e[14]=(o+s)*c,e[15]=1,e}function rge(e,t,r,i){const n=t[0],s=t[1],o=t[2];let a=n-r[0],l=s-r[1],c=o-r[2];const h=Yi();if(Math.abs(a)<h&&Math.abs(l)<h&&Math.abs(c)<h)return void X$(e);let f=1/Math.sqrt(a*a+l*l+c*c);a*=f,l*=f,c*=f;const m=i[0],y=i[1],g=i[2];let v=y*c-g*l,x=g*a-m*c,b=m*l-y*a;f=Math.sqrt(v*v+x*x+b*b),f?(f=1/f,v*=f,x*=f,b*=f):(v=0,x=0,b=0);let _=l*b-c*x,S=c*v-a*b,$=a*x-l*v;f=Math.sqrt(_*_+S*S+$*$),f?(f=1/f,_*=f,S*=f,$*=f):(_=0,S=0,$=0),e[0]=v,e[1]=_,e[2]=a,e[3]=0,e[4]=x,e[5]=S,e[6]=l,e[7]=0,e[8]=b,e[9]=$,e[10]=c,e[11]=0,e[12]=-(v*n+x*s+b*o),e[13]=-(_*n+S*s+$*o),e[14]=-(a*n+l*s+c*o),e[15]=1}function ige(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=i[0],l=i[1],c=i[2];let h=n-r[0],f=s-r[1],m=o-r[2],y=h*h+f*f+m*m;y>0&&(y=1/Math.sqrt(y),h*=y,f*=y,m*=y);let g=l*m-c*f,v=c*h-a*m,x=a*f-l*h;return y=g*g+v*v+x*x,y>0&&(y=1/Math.sqrt(y),g*=y,v*=y,x*=y),e[0]=g,e[1]=v,e[2]=x,e[3]=0,e[4]=f*x-m*v,e[5]=m*g-h*x,e[6]=h*v-f*g,e[7]=0,e[8]=h,e[9]=f,e[10]=m,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e}function nge(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function sge(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function oge(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function NW(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function age(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function lge(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function uge(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function cge(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=e[9],m=e[10],y=e[11],g=e[12],v=e[13],x=e[14],b=e[15],_=t[0],S=t[1],$=t[2],M=t[3],I=t[4],C=t[5],L=t[6],V=t[7],P=t[8],z=t[9],Y=t[10],oe=t[11],ae=t[12],Ge=t[13],dt=t[14],Ve=t[15],Z=Yi();return Math.abs(r-_)<=Z*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-S)<=Z*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(n-$)<=Z*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(s-M)<=Z*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-I)<=Z*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-C)<=Z*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(l-L)<=Z*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(c-V)<=Z*Math.max(1,Math.abs(c),Math.abs(V))&&Math.abs(h-P)<=Z*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(f-z)<=Z*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(m-Y)<=Z*Math.max(1,Math.abs(m),Math.abs(Y))&&Math.abs(y-oe)<=Z*Math.max(1,Math.abs(y),Math.abs(oe))&&Math.abs(g-ae)<=Z*Math.max(1,Math.abs(g),Math.abs(ae))&&Math.abs(v-Ge)<=Z*Math.max(1,Math.abs(v),Math.abs(Ge))&&Math.abs(x-dt)<=Z*Math.max(1,Math.abs(x),Math.abs(dt))&&Math.abs(b-Ve)<=Z*Math.max(1,Math.abs(b),Math.abs(Ve))}function dge(e){const t=Yi(),r=e[0],i=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(i*i+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}function hge(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const pge=RW,fge=NW;Object.freeze(Object.defineProperty({__proto__:null,add:oge,adjoint:Lye,copy:AW,determinant:Aye,equals:cge,exactEquals:uge,frob:sge,fromQuat:Qye,fromQuat2:Gye,fromRotation:Vye,fromRotationTranslation:OW,fromRotationTranslationScale:Jye,fromRotationTranslationScaleOrigin:Yye,fromScaling:jye,fromTranslation:Fye,fromXRotation:zye,fromYRotation:Uye,fromZRotation:Bye,frustum:Kye,getRotation:Zye,getScaling:Wye,getTranslation:Hye,hasIdentityRotation:hge,identity:X$,invert:kW,invertOrIdentity:Cye,isOrthoNormal:dge,lookAt:rge,mul:pge,multiply:RW,multiplyScalar:age,multiplyScalarAndAdd:lge,ortho:tge,perspective:Xye,perspectiveFromFieldOfView:ege,rotate:Oye,rotateX:Nye,rotateY:Pye,rotateZ:Dye,scale:Rye,set:Bc,str:nge,sub:fge,subtract:NW,targetTo:ige,translate:kye,transpose:Gc},Symbol.toStringTag,{value:"Module"}));const mge=(e,t)=>{const r=Bc(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Gc(r,r)},yge=(e,t)=>{const r=Bc(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Gc(r,r)},gge=(e,t)=>{const r=1-t,i=Bc(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Gc(i,i)},vge=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),n=Bc(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return Gc(n,n)},wge=(e,t)=>{const r=1-2*t,i=Bc(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return Gc(i,i)},bge=(e,t)=>{const r=Bc(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Gc(r,r)},_ge=(e,t)=>{const r=1-t,i=Bc(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Gc(i,i)};let PW=class DW{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=mn(t.strength,r.strength,i),this.radius=mn(t.radius,r.radius,i),this.threshold=mn(t.threshold,r.threshold,i)}clone(){return new DW(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:vv(this.radius),strength:this.strength,threshold:this.threshold}}},FW=class jW{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(mn(t.radius,r.radius,i))}clone(){return new jW(this.radius)}toJSON(){return{type:"blur",radius:vv(this.radius)}}},bC=class VW{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=mn(t.amount,r.amount,i),this._updateMatrix()}clone(){return new VW(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Q$();switch(this.type){case"brightness":this._colorMatrix=mge(t,this.amount);break;case"contrast":this._colorMatrix=yge(t,this.amount);break;case"grayscale":this._colorMatrix=gge(t,this.amount);break;case"invert":this._colorMatrix=wge(t,this.amount);break;case"saturate":this._colorMatrix=bge(t,this.amount);break;case"sepia":this._colorMatrix=_ge(t,this.amount)}}},zW=class UW{constructor(t,r,i,n){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=n,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=mn(t.offsetX,r.offsetX,i),this.offsetY=mn(t.offsetY,r.offsetY,i),this.blurRadius=mn(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(mn(t.color[0],r.color[0],i)),this.color[1]=Math.round(mn(t.color[1],r.color[1],i)),this.color[2]=Math.round(mn(t.color[2],r.color[2],i)),this.color[3]=mn(t.color[3],r.color[3],i)}clone(){return new UW(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:vv(this.offsetX),yoffset:vv(this.offsetY),blurRadius:vv(this.blurRadius),color:t}}},BW=class GW{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=mn(t.angle,r.angle,i),this._updateMatrix()}clone(){return new GW(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Q$();this._colorMatrix=vge(t,this.angle)}},qW=class HW{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=mn(t.amount,r.amount,i)}clone(){return new HW(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function mn(e,t,r){return e+(t-e)*r}function vv(e){return Math.round(1e3*An(e))/1e3}function xge(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new bC(e.type,0);case"saturate":case"brightness":case"contrast":return new bC(e.type,1);case"opacity":return new qW(1);case"hue-rotate":return new BW(0);case"blur":return new FW(0);case"drop-shadow":return new zW(0,0,0,[...mN("transparent")]);case"bloom":return new PW(0,0,1)}}function WW(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,n)=>i.type===r[n].type)}function ZW(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let n=i.length;n<r.length;n++)i.push(xge(r[n]))}function Sge(e){const t=e[0];return!!t&&"type"in t}const JT=()=>W.getLogger("esri.support.basemapUtils");function $ge(){return{}}function Ege(e){for(const t in e){const r=e[t];Et(r),delete e[t]}}function Tge(e,t){let r;if(typeof e=="string"){const i=e in oC,n=!i&&e.includes("/");if(!i&&!n){if(Ke.apiKey)JT().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(oC).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");JT().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`)}return null}t&&(r=t[e]),r||(r=i?gv.fromId(e):new gv({style:{id:e}}),t&&(t[e]=r))}else r=Er(gv,e);return r!=null&&r.destroyed&&(JT().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function Mge(e){return new _1({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function YT(e){for(const t of e.values())t==null||t.destroy();e.clear()}const qF={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Ige(e){let t=null;if(typeof e=="string")if(e in qF){const r=qF[e];t=new hS({resourceInfo:{data:{layers:[r]}}})}else W.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Er(hS,e);return t}let JW=0;const YW=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+JW++})}};return t=u([T("esri.core.Identifiable")],t),t},Cge=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:JW++})}};return t=u([T("esri.core.Identifiable.NumericIdentifiable")],t),t};let Qg=class extends YW(class{}){};Qg=u([T("esri.core.Identifiable")],Qg),function(e){e.IdentifiableMixin=YW,e.NumericIdentifiableMixin=Cge}(Qg||(Qg={}));const qc=Qg;async function Lge(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await B(()=>import("./portalLayers-89d904f1.js"),["assets/portalLayers-89d904f1.js","assets/associatedFeatureServiceUtils-97d0532b.js","assets/fetchService-ee26faaa.js","assets/loadUtils-25f64202.js","assets/lazyLayerLoader-ea88f5c3.js"]);try{return await r(t)}catch(n){const s=t==null?void 0:t.portalItem,o=(s==null?void 0:s.id)||"unset",a=((i=s==null?void 0:s.portal)==null?void 0:i.url)||Ke.portalUrl;throw W.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",n),n}}const _C={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function QT(e,t,r,i=ba){const n=new In(hN(i)),s=be.fromJSDate(e,{zone:n}),o=r==="decades"||r==="centuries"?"year":KW(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),s.plus({[o]:t}).toJSDate()}function M6e(e,t,r="milliseconds"){const i=e.getTime(),n=QW(t,r,"milliseconds");return new Date(i+n)}function HF(e,t,r=ba){const i=new In(hN(r)),n=be.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=n.startOf("year"),{year:a}=o,l=a-a%(t==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=KW(t);return n.startOf(s).toJSDate()}function QW(e,t,r){return e===0?0:e*_C[t]/_C[r]}function I6e(e,t){return e&&t?e.intersection(t):e||t}function KW(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var us;let Gn=us=class extends G{static get allTime(){return WF}static get empty(){return Age}static fromArray(e){return new us({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(us.allTime)}get isEmpty(){return this.equals(us.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new us({end:this.end,start:this.start})}equals(e){var s,o,a,l;if(!e)return!1;const t=((s=this.start)==null?void 0:s.getTime())??this.start,r=((o=this.end)==null?void 0:o.getTime())??this.end,i=((a=e.start)==null?void 0:a.getTime())??e.start,n=((l=e.end)==null?void 0:l.getTime())??e.end;return t===i&&r===n}expandTo(e,t=ba){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=HF(r,e,t));let i=this.end;if(i){const n=HF(i,e,t);i=i.getTime()===n.getTime()?n:QT(n,1,e,t)}return new us({start:r,end:i})}intersection(e){var a,l,c,h;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return us.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,r=((l=this.end)==null?void 0:l.getTime())??1/0,i=((c=e.start)==null?void 0:c.getTime())??-1/0,n=((h=e.end)==null?void 0:h.getTime())??1/0;let s,o;return i>=t&&i<=r?s=i:t>=i&&t<=n&&(s=t),r>=i&&r<=n?o=r:n>=t&&n<=r&&(o=n),s==null||o==null||isNaN(s)||isNaN(o)?us.empty:new us({start:s===-1/0?null:new Date(s),end:o===1/0?null:new Date(o)})}offset(e,t,r=ba){if(this.isEmpty||this.isAllTime)return this.clone();const i=new us,{start:n,end:s}=this;return n!=null&&(i.start=QT(n,e,t,r)),s!=null&&(i.end=QT(s,e,t,r)),i}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return WF.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new us({start:t,end:r})}};u([d({type:Date,json:{write:{allowNull:!0}}})],Gn.prototype,"end",void 0),u([J("end")],Gn.prototype,"readEnd",null),u([te("end")],Gn.prototype,"writeEnd",null),u([d({readOnly:!0,json:{read:!1}})],Gn.prototype,"isAllTime",null),u([d({readOnly:!0,json:{read:!1}})],Gn.prototype,"isEmpty",null),u([d({type:Date,json:{write:{allowNull:!0}}})],Gn.prototype,"start",void 0),u([J("start")],Gn.prototype,"readStart",null),u([te("start")],Gn.prototype,"writeStart",null),Gn=us=u([T("esri.time.TimeExtent")],Gn);const Fl=Gn,WF=new Gn,Age=new Gn({start:void 0,end:void 0});let kge=0,rr=class extends Ns.EventedMixin(qc.IdentifiableMixin(va)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new bt(-180,-90,180,90,Ie.WGS84),this.id=Date.now().toString(16)+"-layer-"+kge++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ie.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await B(()=>import("./arcgisLayers-7a9f6889.js"),["assets/arcgisLayers-7a9f6889.js","assets/associatedFeatureServiceUtils-97d0532b.js","assets/fetchService-ee26faaa.js","assets/lazyLayerLoader-ea88f5c3.js"])).fromUrl(r)}static fromPortalItem(t){return Lge(t)}initialize(){this.when().catch(t=>{Ri(t)||W.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const r=this.parent;return t&&r&&"effectiveVisible"in r&&t&&(t=r.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return mr(this.url)}createLayerView(t,r){return Promise.reject(new N("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await ft(t,{query:{f:"json"},responseType:"json"})).data;throw new N("layer:no-attribution-data","Layer does not have attribution data")}};u([d({type:String})],rr.prototype,"attributionDataUrl",void 0),u([d({readOnly:!0})],rr.prototype,"effectiveVisible",null),u([d({type:bt})],rr.prototype,"fullExtent",void 0),u([d({readOnly:!0})],rr.prototype,"hasAttributionData",null),u([d({type:String,clonable:!1})],rr.prototype,"id",void 0),u([d({type:Boolean,nonNullable:!0})],rr.prototype,"legendEnabled",void 0),u([d({type:["show","hide","hide-children"]})],rr.prototype,"listMode",void 0),u([d({type:Number,range:{min:0,max:1},nonNullable:!0})],rr.prototype,"opacity",void 0),u([d({clonable:!1})],rr.prototype,"parent",void 0),u([d({readOnly:!0})],rr.prototype,"parsedUrl",null),u([d({type:Boolean,readOnly:!0})],rr.prototype,"persistenceEnabled",void 0),u([d({type:Boolean})],rr.prototype,"popupEnabled",void 0),u([d({type:Boolean})],rr.prototype,"attributionVisible",void 0),u([d({type:Ie})],rr.prototype,"spatialReference",void 0),u([d({type:String})],rr.prototype,"title",void 0),u([d({readOnly:!0,json:{read:!1}})],rr.prototype,"type",void 0),u([d()],rr.prototype,"url",void 0),u([d({type:Fl})],rr.prototype,"visibilityTimeExtent",void 0),u([d({type:Boolean,nonNullable:!0})],rr.prototype,"visible",void 0),rr=u([T("esri.layers.Layer")],rr);const eE=rr;function xC(e,t,r){let i,n;if(e)for(let s=0,o=e.length;s<o;s++){if(i=e.at(s),(i==null?void 0:i[t])===r)return i;if((i==null?void 0:i.type)==="group"&&(n=xC(i.layers,t,r),n))return n}}const Rge=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new ie;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||W.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void W.getLogger(this).error("#add()","Cannot add layer to itself.");i(o.item)}),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",Dl(r,this._get("layers")))}add(r,i){const n=this.layers;if(i=n.getNextIndex(i),r instanceof eE){const s=r;s.parent===this?this.reorder(s,i):n.add(s,i)}else Ma(r)?r.then(s=>{this.destroyed||this.add(s,i)}):W.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const n=this.layers;let s=n.getNextIndex(i);r.slice().forEach(o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(r){return xC(this.layers,"id",r)}findLayerByUid(r){return xC(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return u([d()],t.prototype,"layers",null),t=u([T("esri.support.LayersMixin")],t),t},Oge=new Set(["feature","subtype-group"]);function SC(e,t,r){if(e)for(let i=0,n=e.length;i<n;i++){const s=e.at(i);if(s[t]===r)return s;if((s==null?void 0:s.type)==="group"){const o=SC(s.tables,t,r);if(o)return o}}}const Nge=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new ie,this.addHandles([this.tables.on("after-add",i=>{const n=i.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,Oge.has(n.type)||W.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",Dl(r,this._get("tables")))}findTableById(r){return SC(this.tables,"id",r)}findTableByUid(r){return SC(this.tables,"uid",r)}};return u([d()],t.prototype,"tables",null),t=u([T("esri.support.TablesMixin")],t),t};let Qs=class extends Nge(Rge(Ns.EventedMixin(ce))){constructor(t){super(t),this.allLayers=new _1({getCollections:()=>{var r,i,n;return[(r=this.basemap)==null?void 0:r.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=Mge(this),this.basemap=null,this.editableLayers=new _1({getCollections:()=>[this.allLayers],itemFilterFunction:cye}),this.ground=new hS,this._basemapCache=$ge()}destroy(){Ege(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Et(this.basemap),Et(this.ground),this._set("ground",null)}castBasemap(t){return Tge(t,this._basemapCache)}castGround(t){return Ige(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};u([d({readOnly:!0,dependsOn:[]})],Qs.prototype,"allLayers",void 0),u([d({readOnly:!0})],Qs.prototype,"allTables",void 0),u([d({type:gv,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Qs.prototype,"basemap",void 0),u([He("basemap")],Qs.prototype,"castBasemap",null),u([d({readOnly:!0})],Qs.prototype,"editableLayers",void 0),u([d({type:hS,nonNullable:!0})],Qs.prototype,"ground",void 0),u([He("ground")],Qs.prototype,"castGround",null),u([d()],Qs.prototype,"undoRedo",void 0),Qs=u([T("esri.Map")],Qs);const XW=Qs,eZ=e=>{let t=class extends e{clone(){var l;const r=Mn(this);sw(r,"unable to clone instance of non-accessor class");const i=r.metadata,n=r.store,s={},o=new Map;for(const c in i){const h=i[c],f=n==null?void 0:n.originOf(c),m=h.clonable;if(h.readOnly||m===!1||f!==Te.USER&&f!==Te.DEFAULTS&&f!==Te.WEB_MAP&&f!==Te.WEB_SCENE)continue;const y=this[c];let g=null;g=typeof m=="function"?m(y):m==="reference"?y:w3(y),y!=null&&g==null||(f===Te.DEFAULTS?o.set(c,g):s[c]=g)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const c=(l=Mn(a))==null?void 0:l.store;if(c)for(const[h,f]of o)c.set(h,f,Te.DEFAULTS)}return a}};return t=u([T("esri.core.Clonable")],t),t};let Kg=class extends eZ(ce){};Kg=u([T("esri.core.Clonable")],Kg),function(e){e.ClonableMixin=eZ}(Kg||(Kg={}));const Be=Kg;let wd=class extends Be{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],wd.prototype,"row",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],wd.prototype,"column",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],wd.prototype,"rows",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],wd.prototype,"columns",void 0),wd=u([T("esri.CameraLayout")],wd);const tZ=wd;let _N=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return ZF(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return Cn(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+$C(this.range,t-r,i)}minimalMonotonic(t,r,i){return ZF(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,n=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(n)?i:n}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function ZF(e,t,r,i,n=0,s=!1){return(i-=n)<t?i+=$C(e,t-i):i>r&&(i-=$C(e,i-r)),s&&i===r&&(i=t),i+n}function $C(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const O6e=new _N(0,2*Math.PI),N6e=new _N(-Math.PI,Math.PI),Pge=new _N(0,360);let Uo=class extends Be.ClonableMixin(G){constructor(...t){super(...t),this.position=new Re([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new tZ}normalizeCtorArgs(t,r,i,n){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const s={position:t};return r!=null&&(s.heading=r),i!=null&&(s.tilt=i),n!=null&&(s.fov=n),s}return t}writePosition(t,r,i,n){const s=t.clone();s.x=qi(t.x||0),s.y=qi(t.y||0),s.z=t.hasZ?qi(t.z||0):t.z,r[i]=s.write({},n)}readPosition(t,r){const i=new Re;return i.read(t,r),i.x=qi(i.x||0),i.y=qi(i.y||0),i.z=i.hasZ?qi(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};u([d({type:Re,json:{write:{isRequired:!0}}})],Uo.prototype,"position",void 0),u([te("position")],Uo.prototype,"writePosition",null),u([J("position")],Uo.prototype,"readPosition",null),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),He(e=>Pge.normalize(qi(e)))],Uo.prototype,"heading",void 0),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),He(e=>Cn(qi(e),-180,180))],Uo.prototype,"tilt",void 0),u([d({type:Number,nonNullable:!0,json:{default:55,write:!0}}),He(e=>Cn(qi(e,55),1,170))],Uo.prototype,"fov",void 0),u([d({type:tZ,nonNullable:!0,json:{read:!1,write:!1}})],Uo.prototype,"layout",void 0),Uo=u([T("esri.Camera")],Uo);const Dge=Uo;function py(e,t,r=!1){let{hasM:i,hasZ:n}=e;Array.isArray(t)?t.length!==4||i||n?t.length===3&&r&&!i?(n=!0,i=!1):t.length===3&&i&&n&&(i=!1,n=!1):(i=!0,n=!0):(n=!n&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=i}var EC;function JF(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function Fge(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let au=EC=class extends Vl{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var n;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):Fge(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(n=r.points)==null?void 0:n[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new bt,r=this.hasZ,i=this.hasM,n=r?3:2,s=e[0],o=JF(Math.min),a=JF(Math.max);let l,c,h,f,[m,y]=s,[g,v]=s;for(let x=0,b=e.length;x<b;x++){const _=e[x],[S,$]=_;if(m=o(m,S),y=o(y,$),g=a(g,S),v=a(v,$),r&&_.length>2){const M=_[2];l=o(l,M),h=a(h,M)}if(i&&_.length>n){const M=_[n];c=o(c,M),f=a(f,M)}}return t.xmin=m,t.ymin=y,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=h):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=c,t.mmax=f):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=O(this.points)}addPoint(e){return py(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:O(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new EC(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new Re(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Re(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(py(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};u([d({readOnly:!0})],au.prototype,"cache",null),u([d()],au.prototype,"extent",null),u([d({type:[[Number]],json:{write:{isRequired:!0}}})],au.prototype,"points",void 0),u([te("points")],au.prototype,"writePoints",null),au=EC=u([T("esri.geometry.Multipoint")],au),au.prototype.toJSON.isDefaultToJSON=!0;const tE=au;function D6e(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function jge(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var pS;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(pS||(pS={}));function F6e(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,r=e.hasM;if(e.type==="point")return r&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:r?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice();if(e.type==="polyline")return e.paths.slice();if(e.type==="multipoint")return e.points.slice();if(e.type==="extent"){const i=e.clone().normalize();if(!i)return null;let n=!1,s=!1;return i.forEach(o=>{o.hasZ&&(n=!0),o.hasM&&(s=!0)}),i.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})}return null}function rE(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function rZ(e,t,r){const i=e[0]+r*(t[0]-e[0]),n=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,n,e[2]+r*(t[2]-e[2])]:[i,n]}function Vge(e,t,r,i){return zge(e,t,r[i],r[i+1])}function zge(e,t,r,i){const[n,s]=t,[o,a]=r,[l,c]=i,h=l-o,f=c-a,m=h*h+f*f,y=(n-o)*h+(s-a)*f,g=Math.min(1,Math.max(0,y/m));return e[0]=o+h*g,e[1]=a+f*g,e}function j6e(e,t,r,i,n,s){let o=r,a=i,l=n-o,c=s-a;if(l!==0||c!==0){const h=((e-o)*l+(t-a)*c)/(l*l+c*c);h>1?(o=n,a=s):h>0&&(o+=l*h,a+=c*h)}return l=e-o,c=t-a,l*l+c*c}function iZ(e,t){return rZ(e,t,.5)}function V6e(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=rE(e[i],e[i+1]);return r}function z6e(e,t){if(t<=0)return e[0];const r=e.length;let i=0;for(let n=0;n<r-1;++n){const s=rE(e[n],e[n+1]);if(t-i<s){const o=(t-i)/s;return rZ(e[n],e[n+1],o)}i+=s}return e[r-1]}function nZ(e,t=pS.X,r=pS.Y){let i=0;const n=e.length;let s=e[0];for(let o=1;o<n;o++){const a=e[o];i+=(a[t]-s[t])*(a[r]+s[r]),s=a}if(!sZ(e)){const o=e[0];i+=(o[t]-s[t])*(o[r]+s[r])}return i>=0}function sZ(e){const t=e.length;return t<3||$$(e[0],e[t-1])}function U6e(e){"rings"in e&&(Uge(e),Bge(e))}function Uge(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)sZ(r)||(r.push(r[0].slice()),t=!0);return t}function Bge(e){if(!("rings"in e)||e.rings.length===0||nZ(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function B6e(e){return e.type!=="polygon"&&e.type!=="polyline"||Gge(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function Gge(e,t){const r=Ji(t);if(!r)return;const i=r.valid[0],n=r.valid[1],s=n-i;for(const o of e){let a=1/0,l=-1/0;for(const h of o){const f=qge(h[0],i,n);a=Math.min(a,f),l=Math.max(l,f),h[0]=f}const c=l-a;s-c<c&&o.forEach(h=>{h[0]<0&&(h[0]+=s)})}}function qge(e,t,r){const i=r-t;return e<t?r-(t-e)%i:e>r?t+(e-t)%i:e}function G6e(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[r,i]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return r.length===i.length&&r.every((n,s)=>n.length===i[s].length)}function q6e(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function Hge(e){return e?Wge(e.rings,e.hasZ??!1):null}function Wge(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=oZ(e[s],t,n);a&&i.push(a)}if(i.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?Zge(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function oZ(e,t,r){let i=0,n=0,s=0,o=0,a=0;const l=e.length?e[0][0]:0,c=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const y=e[m],g=e[(m+1)%e.length],[v,x,b]=y,_=v-l,S=x-c,[$,M,I]=g,C=$-l,L=M-c,V=_*L-C*S;if(o+=V,i+=(_+C)*V,n+=(S+L)*V,t&&y.length>2&&g.length>2){const P=b-h,z=I-h,Y=_*z-C*P;s+=(P+z)*Y,a+=Y}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),x<r[2]&&(r[2]=x),x>r[3]&&(r[3]=x),t&&(b<r[4]&&(r[4]=b),b>r[5]&&(r[5]=b))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[i/(6*o)+l,n/(6*o)+c,o];return t&&(r[4]===r[5]||a===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=s/(6*a)+h,f[4]=a)),f}function H6e(e,t){let r=0,i=0,n=0;e.nextPoint();const s=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const c=[e.x,e.y],[h,f]=l,m=h-s,y=f-o,[g,v]=c,x=g-s,b=v-o,_=m*b-x*y;n+=_,r+=(m+x)*_,i+=(y+b)*_,h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),f<t[2]&&(t[2]=f),f>t[3]&&(t[3]=f)}return n>0&&(n*=-1),n?(n*=.5,[r/(6*n)+s,i/(6*n)+o,n]):null}function Zge(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,c=e.length;l<c-1;l++){const h=e[l],f=e[l+1];if(h&&f){r[0]=h[0],r[1]=h[1],i[0]=f[0],i[1]=f[1],t&&h.length>2&&f.length>2&&(r[2]=h[2],i[2]=f[2]);const m=rE(r,i);if(m){n+=m;const y=iZ(h,f);s+=m*y[0],o+=m*y[1],t&&y.length>2&&(a+=m*y[2])}}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.length?e[0]:null}function Jge(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],n=[],s=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=oZ(jge(e),e.hasZ,s);o&&n.push(o)}if(n.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],t&&(i[2]=n[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?Yge(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function Yge(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(e.nextPoint()){let l=e.x,c=e.y,h=e.z;for(;e.nextPoint();){const f=e.x,m=e.y,y=e.z;r[0]=l,r[1]=c,i[0]=f,i[1]=m,t&&(r[2]=h,i[2]=y);const g=rE(r,i);if(g){n+=g;const v=iZ(r,i);s+=g*v[0],o+=g*v[1],t&&v.length>2&&(a+=g*v[2])}l=f,c=m,h=y}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const Qge=1e-6;function W6e(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<Qge){const n=Jge(e);return n?[n[0],n[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)Xge(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const Kge=1/3;function Xge(e,t,r){if(!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,n=r.y;r.nextPoint();let s,o=r.x-i,a=r.y-n,l=0,c=0;for(;r.nextPoint();)l=r.x-i,c=r.y-n,s=.5*Kge*(l*a-c*o),e[0]+=s*(o+l),e[1]+=s*(a+c),o=l,a=c;const h=r.getCurrentRingArea(),f=[i,n];return f[0]-=t[0],f[1]-=t[1],f[0]*=h,f[1]*=h,e[0]+=f[0],e[1]+=f[1],e}function Wi(e=i0e){return[e[0],e[1],e[2],e[3]]}function aZ(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function Z6e(e,t,r,i,n=Wi()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function J6e(e,t=Wi()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function e0e(e,t,r=new bt){return r.xmin=e[0],r.ymin=e[1],r.xmax=e[2],r.ymax=e[3],r.spatialReference=t,r}function Y6e(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Q6e(e,t,r){if(t!=null)if("length"in t)TC(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else aZ(r,e)}function K6e(e,t,r=e){const i=t.length;let n=e[0],s=e[1],o=e[2],a=e[3];for(let l=0;l<i;l++){const c=t[l];n=Math.min(n,c[0]),s=Math.min(s,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return r[0]=n,r[1]=s,r[2]=o,r[3]=a,r}function X6e(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function xN(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function SN(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function e8e(e){return xN(e)*SN(e)}function t8e(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function r8e(e){const t=xN(e),r=SN(e);return Math.sqrt(t*t+r*r)}function i8e(e,t){return t0e(e,t.x,t.y)}function t0e(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function n8e(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function s8e(e,t,r){return Math.max(t[0],e[0])-r<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-r<=Math.min(t[3],e[3])}function r0e(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function o8e(e,t,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+t,i[3]=e[3]+r,i}function a8e(e){return e?aZ(e,YF):Wi(YF)}function TC(e){return e!=null&&e.length===4}function l8e(e,t){return TC(e)&&TC(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const YF=[1/0,1/0,-1/0,-1/0],i0e=[0,0,0,0];function lZ(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function uZ(e){return e.points!==void 0}function cZ(e){return e.x!==void 0&&e.y!==void 0}function dZ(e){return e.paths!==void 0}function hZ(e){return e.rings!==void 0}function pZ(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const ec=pZ(Math.min),tc=pZ(Math.max);function u8e(e,t){return dZ(t)?fy(e,t.paths,!1,!1):hZ(t)?fy(e,t.rings,!1,!1):uZ(t)?$N(e,t.points,!1,!1,!1,!1):lZ(t)?fZ(e,t):(cZ(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function c8e(e){let t,r,i,n;for(e.reset(),t=i=1/0,r=n=-1/0;e.nextPath();){const s=n0e(e);t=Math.min(s[0],t),i=Math.min(s[1],i),r=Math.max(s[2],r),n=Math.max(s[3],n)}return Wi([t,i,r,n])}function n0e(e){let t,r,i,n;for(t=i=1/0,r=n=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),n=Math.max(e.y,n);return Wi([t,i,r,n])}function d8e(e,t){return dZ(t)?fy(e,t.paths,!0,!1):hZ(t)?fy(e,t.rings,!0,!1):uZ(t)?$N(e,t.points,!0,!1,!0,!1):lZ(t)?fZ(e,t,!0,!1,!0,!1):(cZ(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function fy(e,t,r,i){const n=r?3:2;if(!t.length||!t[0].length)return null;let s,o,a,l,[c,h]=t[0][0],[f,m]=t[0][0];for(let y=0;y<t.length;y++){const g=t[y];for(let v=0;v<g.length;v++){const x=g[v],[b,_]=x;if(c=ec(c,b),h=ec(h,_),f=tc(f,b),m=tc(m,_),r&&x.length>2){const S=x[2];s=ec(s,S),o=tc(o,S)}if(i&&x.length>n){const S=x[n];a=ec(s,S),l=tc(o,S)}}}return r?i?(e[0]=c,e[1]=h,e[2]=s,e[3]=a,e[4]=f,e[5]=m,e[6]=o,e[7]=l,e.length=8,e):(e[0]=c,e[1]=h,e[2]=s,e[3]=f,e[4]=m,e[5]=o,e.length=6,e):i?(e[0]=c,e[1]=h,e[2]=a,e[3]=f,e[4]=m,e[5]=l,e.length=6,e):(e[0]=c,e[1]=h,e[2]=f,e[3]=m,e.length=4,e)}function fZ(e,t,r,i,n,s){const o=t.xmin,a=t.xmax,l=t.ymin,c=t.ymax;let h=t.zmin,f=t.zmax,m=t.mmin,y=t.mmax;return n?(h=h||0,f=f||0,s?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=h,e[3]=m,e[4]=a,e[5]=c,e[6]=f,e[7]=y,e):(e[0]=o,e[1]=l,e[2]=h,e[3]=a,e[4]=c,e[5]=f,e)):s?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=m,e[3]=a,e[4]=c,e[5]=y,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=c,e)}function $N(e,t,r,i,n,s){const o=r?3:2,a=i&&s,l=r&&n;if(!t.length||!t[0].length)return null;let c,h,f,m,[y,g]=t[0],[v,x]=t[0];for(let b=0;b<t.length;b++){const _=t[b],[S,$]=_;if(y=ec(y,S),g=ec(g,$),v=tc(v,S),x=tc(x,$),l&&_.length>2){const M=_[2];c=ec(c,M),h=tc(h,M)}if(a&&_.length>o){const M=_[o];f=ec(c,M),m=tc(h,M)}}return n?(c=c||0,h=h||0,s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=c,e[3]=f,e[4]=v,e[5]=x,e[6]=h,e[7]=m,e):(e[0]=y,e[1]=g,e[2]=c,e[3]=v,e[4]=x,e[5]=h,e)):s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=f,e[3]=v,e[4]=x,e[5]=m,e):(e[0]=y,e[1]=g,e[2]=v,e[3]=x,e)}function s0e(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function o0e(e){return e.points!==void 0}function a0e(e){return e.x!==void 0&&e.y!==void 0}function l0e(e){return e.paths!==void 0}function u0e(e){return e.rings!==void 0}const EN=[];function mZ(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function yZ(e,t,r,i,n,s){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:n,zmax:s}}function gZ(e,t,r,i,n,s){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:n,mmax:s}}function vZ(e,t,r,i,n,s,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:n,ymax:s,zmax:o,mmax:a}}function TN(e,t=!1,r=!1){return t?r?vZ(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):yZ(e[0],e[1],e[2],e[3],e[4],e[5]):r?gZ(e[0],e[1],e[2],e[3],e[4],e[5]):mZ(e[0],e[1],e[2],e[3])}function h8e(e){return e?s0e(e)?e:a0e(e)?d0e(e):u0e(e)?wZ(e):l0e(e)?bZ(e):o0e(e)?c0e(e):null:null}function c0e(e){const{hasZ:t,hasM:r,points:i}=e;return TN($N(EN,i,t??!1,r??!1),t,r)}function d0e(e){const{x:t,y:r,z:i,m:n}=e,s=n!=null;return i!=null?s?vZ(t,r,i,n,t,r,i,n):yZ(t,r,i,t,r,i):s?gZ(t,r,n,t,r,n):mZ(t,r,t,r)}function wZ(e){const{hasZ:t,hasM:r,rings:i}=e,n=fy(EN,i,t??!1,r??!1);return n?TN(n,t,r):null}function bZ(e){const{hasZ:t,hasM:r,paths:i}=e,n=fy(EN,i,t??!1,r??!1);return n?TN(n,t,r):null}var Y_;function QF(e){return!Array.isArray(e[0])}function h0e(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function p0e(e){var s,o;if(!e)return;let{rings:t,hasM:r,hasZ:i,spatialReference:n}=e;switch(t??(t=[]),h0e(t)&&(t=[t]),(o=(s=t[0])==null?void 0:s[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return n??(n=Ie.WGS84),{...e,hasM:r,hasZ:i,rings:t,spatialReference:n}}let vs=Y_=class extends Vl{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let i=!1,n=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(n=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:r};return i&&(s.hasZ=!0),n&&(s.hasM=!0),new Y_(s)}constructor(e){super(p0e(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Hge(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Re;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=O(e)}get extent(){const e=wZ(this),{spatialReference:t}=this;return e?new bt({...e,spatialReference:t}):null}get isSelfIntersecting(){return Yhe(this.rings)}writeRings(e,t){t.rings=O(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(QF(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new Y_;return e.spatialReference=this.spatialReference,e.rings=O(this.rings),e.curveRings=O(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([n,s,o,a],[l,c,h,f])=>n===l&&s===c&&(o==null&&h==null||o===h)&&(a==null&&f==null||a===f);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=e.rings[n];if(!$$(s,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=j$(e,this.spatialReference);return KO(this,t??e)}isClockwise(e){const t=QF(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return nZ(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new Re(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new Re(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new Re(r[0],r[1],r[2],r[3],this.spatialReference):new Re(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(py(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Re(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new Re(n,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(py(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],vs.prototype,"cache",null),u([d({readOnly:!0})],vs.prototype,"centroid",null),u([d({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],vs.prototype,"curveRings",void 0),u([te("curveRings")],vs.prototype,"writeCurveRings",null),u([d({readOnly:!0})],vs.prototype,"extent",null),u([d({readOnly:!0})],vs.prototype,"isSelfIntersecting",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],vs.prototype,"rings",void 0),u([te("rings")],vs.prototype,"writeRings",null),vs=Y_=u([T("esri.geometry.Polygon")],vs);const Ps=vs;vs.prototype.toJSON.isDefaultToJSON=!0;var MC;function f0e(e){return!Array.isArray(e[0])}function m0e(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function y0e(e){var s,o;if(!e)return;let{paths:t,hasM:r,hasZ:i,spatialReference:n}=e;switch(t??(t=[]),m0e(t)&&(t=[t]),(o=(s=t[0])==null?void 0:s[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return n??(n=Ie.WGS84),{...e,hasM:r,hasZ:i,paths:t,spatialReference:n}}let na=MC=class extends Vl{constructor(e){super(y0e(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=O(e)}get extent(){const e=bZ(this),{spatialReference:t}=this;return e?new bt({...e,spatialReference:t}):null}writePaths(e,t){t.paths=O(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(f0e(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new MC;return e.spatialReference=this.spatialReference,e.paths=O(this.paths),e.curvePaths=O(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new Re(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new Re(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new Re(r[0],r[1],r[2],r[3],this.spatialReference):new Re(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(py(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new Re(n,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Re(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(py(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],na.prototype,"cache",null),u([d({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],na.prototype,"curvePaths",void 0),u([te("curvePaths")],na.prototype,"writeCurvePaths",null),u([d({readOnly:!0})],na.prototype,"extent",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],na.prototype,"paths",void 0),u([te("paths")],na.prototype,"writePaths",null),na=MC=u([T("esri.geometry.Polyline")],na);const To=na;na.prototype.toJSON.isDefaultToJSON=!0;function _Z(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function xZ(e){return e.points!==void 0}function SZ(e){return e.x!==void 0&&e.y!==void 0}function MN(e){return e.paths!==void 0||e.curvePaths!==void 0}function Dh(e){return e.rings!==void 0||e.curveRings!==void 0}function sp(e){return e==null?null:e instanceof Vl?e:SZ(e)?Re.fromJSON(e):MN(e)?To.fromJSON(e):Dh(e)?Ps.fromJSON(e):xZ(e)?tE.fromJSON(e):_Z(e)?bt.fromJSON(e):null}function IN(e){return e?SZ(e)?"esriGeometryPoint":MN(e)?"esriGeometryPolyline":Dh(e)?"esriGeometryPolygon":_Z(e)?"esriGeometryEnvelope":xZ(e)?"esriGeometryMultipoint":null:null}const g0e={esriGeometryPoint:Re,esriGeometryPolyline:To,esriGeometryPolygon:Ps,esriGeometryEnvelope:bt,esriGeometryMultipoint:tE,esriGeometryMultiPatch:Ps};function v0e(e){return e&&g0e[e]||null}const CN=ei()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),KF=ei()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),$w={base:Vl,key:"type",typeMap:{extent:bt,multipoint:tE,point:Re,polyline:To,polygon:Ps}};var IC;let lu=IC=class extends G{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new IC({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:KT}}}}})],lu.prototype,"rotation",void 0),u([He("rotation")],lu.prototype,"castRotation",null),u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:KT}}}}})],lu.prototype,"scale",void 0),u([d({types:$w,json:{read:sp,write:!0,origins:{"web-scene":{read:sp,write:{overridePolicy:KT}}}}})],lu.prototype,"targetGeometry",void 0),u([d({type:Dge,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],lu.prototype,"camera",void 0),lu=IC=u([T("esri.Viewpoint")],lu);const As=lu;function KT(){return{enabled:!this.camera}}let fS=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new gw,this._items=new Set}get length(){return Se(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Se(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Se(this._observable),yield*this._items}};const $Z=new FinalizationRegistry(e=>{e.close()});function w0e(e,t){$Z.register(e,t,t)}function b0e(e){$Z.unregister(e)}function EZ(e,t){return new Proxy({},{get:(r,i,n)=>(...s)=>{let o,a;const l=s[s.length-1];return _0e(l)&&(o=l.signal,a=l.transferList,s.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),s,{transferList:a,signal:o})}})}function _0e(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const x0e={statsWorker:()=>B(()=>import("./statsWorker-a8e07f1a.js"),["assets/statsWorker-a8e07f1a.js","assets/utils-2e9e979b.js","assets/quantizationUtils-4be91068.js","assets/utils-2020b5b6.js","assets/ClassBreaksDefinition-b3e165ef.js"]),geometryEngineWorker:()=>B(()=>import("./geometryEngineWorker-37cbcfc0.js"),["assets/geometryEngineWorker-37cbcfc0.js","assets/geometryEngineJSON-59bdfd38.js","assets/geometryEngineBase-58446043.js","assets/_commonjsHelpers-2f3e7994.js","assets/json-48e3ea08.js"]),arcadeGeometryOperatorsWorker:()=>B(()=>import("./operatorsWorker-1d32f0c7.js"),[]),CSVSourceWorker:()=>B(()=>import("./CSVSourceWorker-71c2510e.js"),["assets/CSVSourceWorker-71c2510e.js","assets/date-bbf7d1ee.js","assets/json-48e3ea08.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/executeQueryForSnapping-70139bc1.js","assets/queryUtils-d1b9b043.js","assets/QueryEngine-f230a222.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/WhereClauseCache-0ccefe60.js","assets/WhereClause-d056521f.js","assets/TimeOnly-68b4478b.js","assets/timeSupport-074410ca.js","assets/quantizationUtils-4be91068.js","assets/utils-2e9e979b.js","assets/utils-2020b5b6.js","assets/ClassBreaksDefinition-b3e165ef.js","assets/SnappingCandidate-970faec6.js","assets/FixedIntervalBinParameters-16f91595.js","assets/FeatureStore-2f7cb602.js","assets/BoundsStore-ae680be4.js","assets/PooledRBush-682067e3.js","assets/optimizedFeatureQueryEngineAdapter-1690ccf0.js","assets/number-bcbf97df.js"]),EdgeProcessingWorker:()=>B(()=>import("./EdgeProcessingWorker-54513cd2.js"),["assets/EdgeProcessingWorker-54513cd2.js","assets/workerHelper-c4e9ff40.js","assets/InterleavedLayout-dfda3115.js","assets/BufferView-5d617a3a.js","assets/types-1305598a.js","assets/edgeProcessing-59098013.js","assets/deduplicate-20054b53.js","assets/Indices-c3d21335.js","assets/VertexAttribute-2e1bbe8b.js","assets/glUtil-71505363.js","assets/VertexElementDescriptor-2925c6af.js","assets/Normals-bec3d1b2.js"]),ElevationSamplerWorker:()=>B(()=>import("./ElevationSamplerWorker-697ab11e.js"),["assets/ElevationSamplerWorker-697ab11e.js","assets/PooledRBush-682067e3.js","assets/MeshLocalVertexSpace-205953f5.js","assets/vertexSpaceConversion-a98124bf.js","assets/mat3f64-e19cdcb8.js","assets/mat4f64-7b47076d.js","assets/spatialReferenceEllipsoidUtils-53921753.js","assets/computeTranslationToOriginAndRotation-44aba095.js","assets/projectPointToVector-417832fa.js","assets/meshVertexSpaceUtils-17de56f2.js","assets/vec3-fb0321b6.js","assets/BufferView-5d617a3a.js","assets/vec4-35b317ed.js"]),FeatureServiceSnappingSourceWorker:()=>B(()=>import("./FeatureServiceSnappingSourceWorker-de584515.js"),["assets/FeatureServiceSnappingSourceWorker-de584515.js","assets/executeQueryForSnapping-70139bc1.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/QueryEngine-f230a222.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/WhereClauseCache-0ccefe60.js","assets/WhereClause-d056521f.js","assets/TimeOnly-68b4478b.js","assets/timeSupport-074410ca.js","assets/quantizationUtils-4be91068.js","assets/utils-2e9e979b.js","assets/utils-2020b5b6.js","assets/ClassBreaksDefinition-b3e165ef.js","assets/SnappingCandidate-970faec6.js","assets/FixedIntervalBinParameters-16f91595.js","assets/FeatureStore-2f7cb602.js","assets/BoundsStore-ae680be4.js","assets/PooledRBush-682067e3.js","assets/optimizedFeatureQueryEngineAdapter-1690ccf0.js","assets/symbologySnappingCandidates-07699f53.js","assets/pbfQueryUtils-fd62a34b.js","assets/pbf-8ef4f2aa.js","assets/query-bbf38cc9.js","assets/ByteSizeUnit-d4757d40.js"]),GeoJSONSourceWorker:()=>B(()=>import("./GeoJSONSourceWorker-18b7bfb8.js"),["assets/GeoJSONSourceWorker-18b7bfb8.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/executeQueryForSnapping-70139bc1.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/QueryEngine-f230a222.js","assets/WhereClauseCache-0ccefe60.js","assets/WhereClause-d056521f.js","assets/TimeOnly-68b4478b.js","assets/timeSupport-074410ca.js","assets/quantizationUtils-4be91068.js","assets/utils-2e9e979b.js","assets/utils-2020b5b6.js","assets/ClassBreaksDefinition-b3e165ef.js","assets/SnappingCandidate-970faec6.js","assets/FixedIntervalBinParameters-16f91595.js","assets/FeatureStore-2f7cb602.js","assets/BoundsStore-ae680be4.js","assets/PooledRBush-682067e3.js","assets/optimizedFeatureQueryEngineAdapter-1690ccf0.js","assets/geojson-d4df0c23.js","assets/date-bbf7d1ee.js","assets/sourceUtils-b2c9564d.js"]),LercWorker:()=>B(()=>import("./LercWorker-103dbf69.js"),[]),MemorySourceWorker:()=>B(()=>import("./MemorySourceWorker-ec090143.js"),["assets/MemorySourceWorker-ec090143.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/objectIdUtils-789e911a.js","assets/executeQueryForSnapping-70139bc1.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/QueryEngine-f230a222.js","assets/WhereClauseCache-0ccefe60.js","assets/WhereClause-d056521f.js","assets/TimeOnly-68b4478b.js","assets/timeSupport-074410ca.js","assets/quantizationUtils-4be91068.js","assets/utils-2e9e979b.js","assets/utils-2020b5b6.js","assets/ClassBreaksDefinition-b3e165ef.js","assets/SnappingCandidate-970faec6.js","assets/FixedIntervalBinParameters-16f91595.js","assets/FeatureStore-2f7cb602.js","assets/BoundsStore-ae680be4.js","assets/PooledRBush-682067e3.js","assets/optimizedFeatureQueryEngineAdapter-1690ccf0.js","assets/sourceUtils-b2c9564d.js","assets/date-bbf7d1ee.js"]),PBFDecoderWorker:()=>B(()=>import("./PBFDecoderWorker-4901f1b4.js"),["assets/PBFDecoderWorker-4901f1b4.js","assets/dehydratedFeatures-e02325c0.js","assets/memoryEstimations-e8cfae6e.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/pbfQueryUtils-fd62a34b.js","assets/pbf-8ef4f2aa.js"]),FeaturePipelineWorker:()=>B(()=>import("./FeaturePipelineWorker-b5550333.js"),["assets/FeaturePipelineWorker-b5550333.js","assets/AttributeStore-9129c901.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/UpdateTracking2D-48735ec0.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/TimeOnly-68b4478b.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-4be91068.js","assets/streamLayerUtils-649b6193.js","assets/MeshWriterRegistry-9f18b11c.js","assets/TechniqueType-75b634fe.js","assets/PieChartMeshWriter-e447f001.js","assets/TurboLine-3f229dee.js","assets/utils-552ee4cb.js","assets/earcut-5a6c70eb.js","assets/grouping-7d0d2896.js","assets/QueueProcessor-faf2f495.js","assets/optimizedFeatureQueryEngineAdapter-1690ccf0.js","assets/QueryEngine-f230a222.js","assets/WhereClauseCache-0ccefe60.js","assets/WhereClause-d056521f.js","assets/utils-2e9e979b.js","assets/utils-2020b5b6.js","assets/ClassBreaksDefinition-b3e165ef.js","assets/SnappingCandidate-970faec6.js","assets/FixedIntervalBinParameters-16f91595.js","assets/operatorGeodeticDensify-65ed1bd6.js","assets/SimpleGeometryCursor-e3941f41.js","assets/geodeticCurveType-07cde097.js","assets/normalizeUtilsSync-6f653769.js","assets/query-bbf38cc9.js","assets/pbfQueryUtils-fd62a34b.js","assets/pbf-8ef4f2aa.js","assets/ogcFeatureUtils-2006845d.js","assets/geojson-d4df0c23.js","assets/date-bbf7d1ee.js","assets/sourceUtils-b2c9564d.js","assets/parquet-6bc9e364.js","assets/CircularArray-50add9d1.js","assets/createConnection-22bcc0e4.js"]),PointCloudWorker:()=>B(()=>import("./PointCloudWorker-d1c98c43.js"),["assets/PointCloudWorker-d1c98c43.js","assets/quat-a74ccdda.js","assets/mat3f64-e19cdcb8.js","assets/quatf64-216ddd5a.js","assets/vec3f32-ad1dc57f.js","assets/PointCloudUniqueValueRenderer-8963fb76.js","assets/I3SBinaryReader-18502053.js","assets/VertexAttribute-2e1bbe8b.js","assets/orientedBoundingBox-78e22e5b.js","assets/mat4f64-7b47076d.js","assets/spatialReferenceEllipsoidUtils-53921753.js","assets/computeTranslationToOriginAndRotation-44aba095.js","assets/plane-4ee7a2fd.js"]),RasterWorker:()=>B(()=>import("./RasterWorker-9ac1d82d.js"),["assets/RasterWorker-9ac1d82d.js","assets/dataUtils-3ad6dce9.js","assets/RasterSymbolizer-9887a470.js","assets/_commonjsHelpers-2f3e7994.js","assets/rasterFunctionHelper-65bc3878.js","assets/rasterProjectionHelper-09063703.js","assets/PolynomialTransform-18b475d3.js"]),SceneLayerSnappingSourceWorker:()=>B(()=>import("./SceneLayerSnappingSourceWorker-771e15e2.js"),["assets/SceneLayerSnappingSourceWorker-771e15e2.js","assets/lineSegment-0baad763.js","assets/sphere-935a1925.js","assets/mat3f64-e19cdcb8.js","assets/plane-4ee7a2fd.js","assets/mat4f64-7b47076d.js","assets/quatf64-216ddd5a.js","assets/Octree-d2a19f22.js","assets/InterleavedLayout-dfda3115.js","assets/BufferView-5d617a3a.js","assets/types-1305598a.js","assets/edgeProcessing-59098013.js","assets/deduplicate-20054b53.js","assets/Indices-c3d21335.js","assets/VertexAttribute-2e1bbe8b.js","assets/glUtil-71505363.js","assets/VertexElementDescriptor-2925c6af.js","assets/Normals-bec3d1b2.js"]),SceneLayerWorker:()=>B(()=>import("./SceneLayerWorker-46db7196.js"),["assets/SceneLayerWorker-46db7196.js","assets/MeshLocalVertexSpace-205953f5.js","assets/vec3-fb0321b6.js","assets/projectVectorToVector-0faf6a11.js","assets/projectPointToVector-417832fa.js","assets/sphere-935a1925.js","assets/mat3f64-e19cdcb8.js","assets/plane-4ee7a2fd.js","assets/mat4f64-7b47076d.js","assets/quatf64-216ddd5a.js","assets/I3SUtil-62fd7c24.js","assets/I3SBinaryReader-18502053.js","assets/VertexAttribute-2e1bbe8b.js","assets/edgeUtils-589a6d75.js","assets/floatRGBA-d388c598.js","assets/NormalAttribute.glsl-eadcafa8.js","assets/glsl-d181cb51.js","assets/ShaderOutput-dd99ffd7.js","assets/BindType-0376b293.js","assets/orientedBoundingBox-78e22e5b.js","assets/quat-a74ccdda.js","assets/spatialReferenceEllipsoidUtils-53921753.js","assets/computeTranslationToOriginAndRotation-44aba095.js"]),WFSSourceWorker:()=>B(()=>import("./WFSSourceWorker-e4afe6b1.js"),["assets/WFSSourceWorker-e4afe6b1.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/executeQueryForSnapping-70139bc1.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/QueryEngine-f230a222.js","assets/WhereClauseCache-0ccefe60.js","assets/WhereClause-d056521f.js","assets/TimeOnly-68b4478b.js","assets/timeSupport-074410ca.js","assets/quantizationUtils-4be91068.js","assets/utils-2e9e979b.js","assets/utils-2020b5b6.js","assets/ClassBreaksDefinition-b3e165ef.js","assets/SnappingCandidate-970faec6.js","assets/FixedIntervalBinParameters-16f91595.js","assets/FeatureStore-2f7cb602.js","assets/BoundsStore-ae680be4.js","assets/PooledRBush-682067e3.js","assets/optimizedFeatureQueryEngineAdapter-1690ccf0.js","assets/geojson-d4df0c23.js","assets/date-bbf7d1ee.js","assets/sourceUtils-b2c9564d.js","assets/wfsUtils-5adae3d1.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>B(()=>import("./WorkerTileHandler-76f7e650.js"),["assets/WorkerTileHandler-76f7e650.js","assets/enums-fb086c25.js","assets/GeometryUtils-e2c839d5.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-d2ee7f7c.js","assets/pbf-8ef4f2aa.js","assets/memoryEstimations-e8cfae6e.js","assets/TurboLine-3f229dee.js","assets/SourceLayerData-01372888.js","assets/StyleRepository-3f4aa23d.js","assets/VertexElementDescriptor-2925c6af.js","assets/earcut-5a6c70eb.js","assets/BidiEngine-664145a5.js"]),Lyr3DWorker:()=>B(()=>import("./Lyr3DWorker-ab0fff05.js"),[]),Feature3DPipelineWorker:()=>B(()=>import("./Feature3DPipelineWorker-5191f8b0.js"),["assets/Feature3DPipelineWorker-5191f8b0.js","assets/QueryEngine-f230a222.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/WhereClauseCache-0ccefe60.js","assets/WhereClause-d056521f.js","assets/TimeOnly-68b4478b.js","assets/timeSupport-074410ca.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/quantizationUtils-4be91068.js","assets/utils-2e9e979b.js","assets/utils-2020b5b6.js","assets/ClassBreaksDefinition-b3e165ef.js","assets/SnappingCandidate-970faec6.js","assets/FixedIntervalBinParameters-16f91595.js","assets/PooledRBush-682067e3.js","assets/query-bbf38cc9.js","assets/pbfQueryUtils-fd62a34b.js","assets/pbf-8ef4f2aa.js","assets/Indices-c3d21335.js","assets/projectVectorToPoint-fdfb2632.js","assets/Geometry-8dafe6ab.js","assets/renderState-dc27abc6.js","assets/basicInterfaces-cbf2757f.js","assets/ShaderOutput-dd99ffd7.js","assets/mat4f64-7b47076d.js","assets/BindType-0376b293.js","assets/glsl-d181cb51.js","assets/mat3f64-e19cdcb8.js","assets/VertexAttribute-2e1bbe8b.js","assets/boundedPlane-115aaf8f.js","assets/sphere-935a1925.js","assets/plane-4ee7a2fd.js","assets/quatf64-216ddd5a.js","assets/lineSegment-0baad763.js","assets/orientedBoundingBox-78e22e5b.js","assets/quat-a74ccdda.js","assets/spatialReferenceEllipsoidUtils-53921753.js","assets/computeTranslationToOriginAndRotation-44aba095.js","assets/requestImageUtils-5ec618eb.js","assets/TextureFormat-60b88abd.js","assets/InterleavedLayout-dfda3115.js","assets/BufferView-5d617a3a.js","assets/types-1305598a.js","assets/triangle-fb2c2339.js","assets/glUtil-71505363.js","assets/VertexElementDescriptor-2925c6af.js","assets/HUDMaterial-aa8eaf1d.js","assets/Octree-d2a19f22.js","assets/VertexArrayObject-95d73b2d.js","assets/floatRGBA-d388c598.js","assets/dehydratedFeatureUtils-6e1a7878.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/meshVertexSpaceUtils-17de56f2.js","assets/MeshLocalVertexSpace-205953f5.js","assets/projectVectorToVector-0faf6a11.js","assets/projectPointToVector-417832fa.js","assets/hydratedFeatures-e3b8e6f3.js","assets/vec3f32-ad1dc57f.js","assets/ShaderBuilder-7a2c64b1.js","assets/IntersectorInterfaces-a9229f3a.js","assets/DefaultMaterial-c6707533.js","assets/NormalAttribute.glsl-eadcafa8.js","assets/LodResources-c91c2e91.js"]),TextureCompressionWorker:()=>B(()=>import("./TextureCompressionWorker-0774fd50.js"),["assets/TextureCompressionWorker-0774fd50.js","assets/TextureFormat-60b88abd.js"])},TZ="worker:port-closed";var Zr;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Zr||(Zr={}));let S0e=0;function MZ(){return S0e++}function $0e(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function x1(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function LN(e,t,r,i){if(t.type===Zr.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Zr.INVOKE&&t.type!==Zr.RESPONSE)return void e.postMessage(t);let n;if($0e(r)?(n=XF(r.transferList),t.data=r.result):(n=XF(i),t.data=r),n){if(F("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Zr.INVOKE:throw o;case Zr.RESPONSE:return void LN(e,{type:Zr.RESPONSE,jobId:t.jobId,error:x1(o)})}}}e.postMessage(t,n)}else e.postMessage(t)}function S1(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function XF(e){if(!(e!=null&&e.length))return null;if(F("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!E0e(r));return t.length?t:null}function E0e(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function f8e(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===TZ;if(!(Ri(t)||r))throw t;return}}const{CLOSE:ej,ABORT:tj,INVOKE:rj,RESPONSE:vg,OPEN_PORT:ij,ON:T0e}=Zr,M0e=2;let I0e=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Zr.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Ic=class ef{static connect(t,r){const i=new MessageChannel;let n;n=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new ef(i.port1,{channel:i,client:n,schedule:r});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),ef.clients.set(s,n),i.port2}static loadWorker(t){const r=x0e[t];return r?r():Promise.resolve(null)}constructor(t,r,i){this._port=t,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new I0e(n=>this._onInvokeMessage(n)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:ej}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=i==null?void 0:i.signal,s=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new N(TZ,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=MZ();return new Promise((a,l)=>{if(Xn(n))return this._processWork(),void l(Tt());const c=Ls(n,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),Ft(f.abortHandle),this._post({type:tj,jobId:o}),l(Tt()))}),h={resolve:a,reject:l,abortHandle:c,debugInfo:t};this._outJobs.set(o,h),this._post({type:rj,jobId:o,methodName:t,abortable:n!=null},r,s)})}createInvokeProxy(t){return EZ(this,t)}on(t,r){const i=new MessageChannel;function n(s){r(s.data)}return this._port.postMessage({type:Zr.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",n),i.port1.start(),et(()=>{i.port1.postMessage({type:Zr.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:ij,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=M0e)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:n,resolver:s}=t;this.apply(r,i,n).then(a=>s.resolve(a)).catch(a=>s.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Ft(t.abortHandle),t.reject(Tt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const i=S1(t);if(i)switch(i.type){case vg:this._onResponseMessage(i);break;case rj:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case tj:this._onAbortMessage(i);break;case ej:this._onCloseMessage();break;case ij:this._onOpenPortMessage(i);break;case T0e:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&ef.clients.get(this)===t&&t.destroy(),ef.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n=[],abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,h=c[r];try{if(!h&&r&&r.includes(".")){const f=r.split(".");for(let m=0;m<f.length-1;m++)c=c[f[m]],h=c[f[m+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);n.push({client:this,signal:o?o.signal:null}),l=h.apply(c,n)}catch(f){return void this._post({type:vg,jobId:i,error:x1(f)})}Ma(l)?(a.set(i,{controller:o,promise:l}),l.then(f=>{a.has(i)&&(a.delete(i),this._post({type:vg,jobId:i},f))},f=>{a.has(i)&&(a.delete(i),Ri(f)||this._post({type:vg,jobId:i,error:x1(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:vg,jobId:i},l)}_onOpenPortMessage(t){new ef(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,s=>{r.postMessage(s)}),n=uw(t.port,"message",s=>{const o=S1(s);(o==null?void 0:o.type)===Zr.CLOSE&&(n.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs;if(!s.has(r))return;const o=s.get(r);s.delete(r),this._processWork(),Ft(o.abortHandle),i?o.reject(N.fromJSON(JSON.parse(i))):o.resolve(n)}_post(t,r,i){return LN(this._port,t,r,i)}};Ic.kernelInfo={buildDate:mq,fullVersion:jO,revision:yq},Ic.clients=new Map;let C0e=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new fS}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise((i,n)=>{let s=!0;const o=a=>{Ht(r.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];Ma(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new Ic(c,r,this._ongoingJobsQueue),o(i),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new Ic(l,r,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a==null?void 0:a.invoke(t,r,i))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Tt(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i==null?void 0:i.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,b0e(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=es();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a==null?void 0:a.jobAdded())}return n.promise}createInvokeProxy(t){return EZ(this,t)}on(t,r){return Promise.all(this._clientPromises).then(()=>ow(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(r[n]=s.openPort()),--i==0&&t(r)})})}get test(){}};const L0e={async request(e,t){var o,a;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((o=P3(e.url))!=null&&o.after)?i:"array-buffer";const n=await ft(e.url,r),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((a=n.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},nj={};function A0e(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.slice())||[],paths:{...nj.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=nj.baseUrl),t}let k0e=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}},Q_=class{constructor(){this._dispatcher=new k0e,this._workerPostMessage({type:Zr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Fx(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){Fx(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=S1(t);if(r&&r.type===Zr.OPEN){const{modulePath:i,jobId:n}=r;let s=await Ic.loadWorker(i);s||(s=await B(()=>import(i),[]));const o=Ic.connect(s);this._workerPostMessage({type:Zr.OPENED,jobId:n,data:o})}}};const CC=()=>W.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:R0e}=Zr,O0e='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Ib,Cb;const sj="Failed to create Worker. Fallback to execute module in main thread";async function N0e(){if(!F("esri-workers"))return oj(new Q_);if(!Ib&&!Cb)try{const t=O0e.split("{CONFIGURATION}").join(P0e());Ib=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Cb=t||{}}let e;if(Ib)try{e=new Worker(Ib,{name:"esri-worker-"+D0e++})}catch{CC().warn(sj,Cb),e=new Q_}else CC().warn(sj,Cb),e=new Q_;return oj(e)}async function oj(e){return new Promise(t=>{function r(n){const s=S1(n);s&&s.type===R0e&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(n){n.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),CC().warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new Q_).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function P0e(){let e;if(Ke.default!=null){const n={...Ke};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(Ke));e.assetsPath=$s(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?$s(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=$n(),e.has={"esri-csp-restrictions":F("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":F("esri-2d-update-debug"),"esri-2d-log-updating":F("esri-2d-log-updating"),"featurelayer-pbf":F("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":F("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":F("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":F("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":F("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":F("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":F("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":F("featurelayer-snapshot-enabled"),"esri-atomics":F("esri-atomics"),"esri-shared-array-buffer":F("esri-shared-array-buffer"),"esri-tiles-debug":F("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":F("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":F("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=$s(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=$s(e.workers.workerPath):e.workers.workerPath=$s(Nt("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Ke.workers.loaderConfig,r=A0e({baseUrl:t==null?void 0:t.baseUrl,locale:$n(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:mq,fullVersion:jO,revision:yq}})}let D0e=0;const{ABORT:aj,INVOKE:F0e,OPEN:j0e,OPENED:V0e,RESPONSE:wg}=Zr;let z0e=class IZ{static async create(t){const r=await N0e();return new IZ(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),W.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,n=MZ();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:xO(i,()=>{this._outJobs.delete(n),this._post({type:aj,jobId:n})})};this._outJobs.set(n,a),this._post({type:j0e,jobId:n,modulePath:t})})}_onMessage(t){const r=S1(t);if(r)switch(r.type){case V0e:this._onOpenedMessage(r);break;case wg:this._onResponseMessage(r);break;case aj:this._onAbortMessage(r);break;case F0e:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);n&&(n.controller&&n.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,l=L0e[r];let c;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);c=l.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:wg,jobId:i,error:x1(h)})}Ma(c)?(a.set(i,{controller:o,promise:c}),c.then(h=>{a.has(i)&&(a.delete(i),this._post({type:wg,jobId:i},h))},h=>{a.has(i)&&(a.delete(i),h||(h={message:"Error encountered at method"+r}),Ri(h)||this._post({type:wg,jobId:i,error:x1(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:wg,jobId:i},c)}_onOpenedMessage(t){const{jobId:r,data:i}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),Ft(n.abortHandle),n.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),Ft(s.abortHandle),i?s.reject(N.fromJSON(JSON.parse(i))):s.resolve(n))}_post(t,r,i){return LN(this.worker,t,r,i)}};const lj=F("host-browser")?Math.min(navigator.hardwareConcurrency-1,F("workers-pool-size")??8):0;let Sh=F("esri-mobile")?Math.min(lj,3):lj;Sh||(Sh=F("safari")&&F("mac")?7:2);let uj=0;const K_=[];function U0e(){LZ()}async function Lb(e,t){const r=new C0e,{registryTarget:i,...n}=t;return await r.open(e,n),i&&w0e(i,r),r}async function CZ(e,t={}){if(typeof e!="string")throw new N("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(F("host-webworker")&&!F("esri-workers")&&(r="local"),r==="local"){let i=await Ic.loadWorker(e);i||(i=await B(()=>import(e),[])),Ht(t.signal);const n=t.client||i;return Lb([Ic.connect(i,t.schedule)],{...t,client:n})}if(await LZ(),Ht(t.signal),r==="dedicated"){const i=uj++%Sh;return Lb([await K_[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,Sh);if(i<Sh){const n=new Array(i);for(let s=0;s<i;++s){const o=uj++%Sh;n[s]=K_[o].open(e,t)}return Lb(n,t)}}return Lb(K_.map(i=>i.open(e,t)),t)}let Ab=null;async function LZ(){if(Ab)return Ab;new AbortController;const e=[];for(let t=0;t<Sh;t++){const r=z0e.create(t).then(i=>(K_[t]=i,i));e.push(r)}return Ab=Promise.all(e),Ab}const w8e=Math.PI/180,b8e=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,tu=Xt.radius,Hs=Xt.eccentricitySquared,B0e={a1:tu*Hs,a2:tu*Hs*tu*Hs,a3:tu*Hs*Hs/2,a4:tu*Hs*tu*Hs*2.5,a5:tu*Hs+tu*Hs*Hs/2,a6:1-Hs},_8e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Xt.radius,f:Xt.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Tc.radius,f:Tc.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:ya.radius,f:ya.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:ya.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var D;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(D||(D={}));const G0e={[D.WGS84]:{[D.CGCS2000]:Ot,[D.GCSMARS2000]:null,[D.GCSMOON2000]:null,[D.LON_LAT]:Ot,[D.SPHERICAL_ECEF]:bv,[D.SPHERICAL_MARS_PCPF]:null,[D.SPHERICAL_MOON_PCPF]:null,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:Tm,[D.PLATE_CARREE]:Mm,[D.WGS84]:Ot,[D.WGS84_ECEF]:Lm},[D.CGCS2000]:{[D.CGCS2000]:Ot,[D.GCSMARS2000]:null,[D.GCSMOON2000]:null,[D.LON_LAT]:Ot,[D.SPHERICAL_ECEF]:bv,[D.SPHERICAL_MARS_PCPF]:null,[D.SPHERICAL_MOON_PCPF]:null,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:Tm,[D.PLATE_CARREE]:Mm,[D.WGS84]:Ot,[D.WGS84_ECEF]:Lm},[D.GCSMARS2000]:{[D.CGCS2000]:null,[D.GCSMARS2000]:Ot,[D.GCSMOON2000]:null,[D.LON_LAT]:Ot,[D.SPHERICAL_ECEF]:null,[D.SPHERICAL_MARS_PCPF]:hj,[D.SPHERICAL_MOON_PCPF]:null,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:null,[D.PLATE_CARREE]:null,[D.WGS84]:null,[D.WGS84_ECEF]:null},[D.GCSMOON2000]:{[D.CGCS2000]:null,[D.GCSMARS2000]:null,[D.GCSMOON2000]:Ot,[D.LON_LAT]:Ot,[D.SPHERICAL_ECEF]:null,[D.SPHERICAL_MARS_PCPF]:null,[D.SPHERICAL_MOON_PCPF]:dj,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:null,[D.PLATE_CARREE]:null,[D.WGS84]:null,[D.WGS84_ECEF]:null},[D.WEB_MERCATOR]:{[D.CGCS2000]:wv,[D.GCSMARS2000]:null,[D.GCSMOON2000]:null,[D.LON_LAT]:wv,[D.SPHERICAL_ECEF]:H0e,[D.SPHERICAL_MARS_PCPF]:null,[D.SPHERICAL_MOON_PCPF]:null,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:Ot,[D.PLATE_CARREE]:J0e,[D.WGS84]:wv,[D.WGS84_ECEF]:W0e},[D.WGS84_ECEF]:{[D.CGCS2000]:Am,[D.GCSMARS2000]:null,[D.GCSMOON2000]:null,[D.LON_LAT]:Am,[D.SPHERICAL_ECEF]:nve,[D.SPHERICAL_MARS_PCPF]:null,[D.SPHERICAL_MOON_PCPF]:null,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:sve,[D.PLATE_CARREE]:Y0e,[D.WGS84]:Am,[D.WGS84_ECEF]:Ot},[D.SPHERICAL_ECEF]:{[D.CGCS2000]:Cm,[D.GCSMARS2000]:null,[D.GCSMOON2000]:null,[D.LON_LAT]:Cm,[D.SPHERICAL_ECEF]:Ot,[D.SPHERICAL_MARS_PCPF]:null,[D.SPHERICAL_MOON_PCPF]:null,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:tve,[D.PLATE_CARREE]:Q0e,[D.WGS84]:Cm,[D.WGS84_ECEF]:rve},[D.SPHERICAL_MARS_PCPF]:{[D.CGCS2000]:null,[D.GCSMARS2000]:fj,[D.GCSMOON2000]:null,[D.LON_LAT]:fj,[D.SPHERICAL_ECEF]:null,[D.SPHERICAL_MARS_PCPF]:Ot,[D.SPHERICAL_MOON_PCPF]:null,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:null,[D.PLATE_CARREE]:null,[D.WGS84]:null,[D.WGS84_ECEF]:null},[D.SPHERICAL_MOON_PCPF]:{[D.CGCS2000]:null,[D.GCSMARS2000]:null,[D.GCSMOON2000]:pj,[D.LON_LAT]:pj,[D.SPHERICAL_ECEF]:null,[D.SPHERICAL_MARS_PCPF]:null,[D.SPHERICAL_MOON_PCPF]:Ot,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:null,[D.PLATE_CARREE]:null,[D.WGS84]:null,[D.WGS84_ECEF]:null},[D.UNKNOWN]:{[D.CGCS2000]:null,[D.GCSMARS2000]:null,[D.GCSMOON2000]:null,[D.LON_LAT]:null,[D.SPHERICAL_ECEF]:null,[D.SPHERICAL_MARS_PCPF]:null,[D.SPHERICAL_MOON_PCPF]:null,[D.UNKNOWN]:Ot,[D.WEB_MERCATOR]:null,[D.PLATE_CARREE]:null,[D.WGS84]:null,[D.WGS84_ECEF]:null},[D.LON_LAT]:{[D.CGCS2000]:Ot,[D.GCSMARS2000]:Ot,[D.GCSMOON2000]:Ot,[D.LON_LAT]:Ot,[D.SPHERICAL_ECEF]:bv,[D.SPHERICAL_MARS_PCPF]:hj,[D.SPHERICAL_MOON_PCPF]:dj,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:Tm,[D.PLATE_CARREE]:Mm,[D.WGS84]:Ot,[D.WGS84_ECEF]:Lm},[D.PLATE_CARREE]:{[D.CGCS2000]:Im,[D.GCSMARS2000]:null,[D.GCSMOON2000]:null,[D.LON_LAT]:Im,[D.SPHERICAL_ECEF]:K0e,[D.SPHERICAL_MARS_PCPF]:null,[D.SPHERICAL_MOON_PCPF]:null,[D.UNKNOWN]:null,[D.WEB_MERCATOR]:X0e,[D.PLATE_CARREE]:Ot,[D.WGS84]:Im,[D.WGS84_ECEF]:eve}};function AZ(e,t){var r;return(r=q0e(e,t))==null?void 0:r.projector}function q0e(e,t){if(e==null||t==null)return null;if(Aa.source.spatialReference===e&&Aa.dest.spatialReference===t)return Aa;const r=cj(e,Aa.source),i=cj(t,Aa.dest);return r===D.UNKNOWN&&i===D.UNKNOWN?Dr(e,t)?Aa.projector=Ot:Aa.projector=null:Aa.projector=G0e[r][i],Aa}function cj(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Ds(e,1)),iS(e)?t.spatialReferenceId=D.SPHERICAL_ECEF:Kh(e)?t.spatialReferenceId=D.WGS84:wa(e)?t.spatialReferenceId=D.WEB_MERCATOR:she(e)?t.spatialReferenceId=D.PLATE_CARREE:e.wkt===uhe.wkt?t.spatialReferenceId=D.WGS84_ECEF:e.wkid===Qh.CGCS2000?t.spatialReferenceId=D.CGCS2000:e.wkt===JO.wkt?t.spatialReferenceId=D.SPHERICAL_MARS_PCPF:e.wkt===YO.wkt?t.spatialReferenceId=D.SPHERICAL_MOON_PCPF:jq(e)?t.spatialReferenceId=D.GCSMARS2000:Vq(e)?t.spatialReferenceId=D.GCSMOON2000:t.spatialReferenceId=D.UNKNOWN):D.UNKNOWN}function Ot(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function wv(e,t,r,i){r[i]=yy*(e[t]/Fh),r[i+1]=yy*(kZ-2*Math.atan(Math.exp(-e[t+1]/Fh))),r[i+2]=e[t+2]}function H0e(e,t,r,i){const n=e[t]/Fh,s=kZ-2*Math.atan(Math.exp(-e[t+1]/Fh)),o=Fh+e[t+2],a=Math.cos(s)*o;r[i]=Math.cos(n)*a,r[i+1]=Math.sin(n)*a,r[i+2]=Math.sin(s)*o}function W0e(e,t,r,i){wv(e,t,r,i),Lm(r,i,r,i)}function Z0e(e,t,r,i,n){const s=.4999999*Math.PI,o=Cn(my*e[t+1],-s,s),a=Math.sin(o);r[i++]=my*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function Tm(e,t,r,i){Z0e(e,t,r,i,Xt)}function Mm(e,t,r,i){r[i]=e[t]*mj,r[i+1]=e[t+1]*mj,r[i+2]=e[t+2]}function Im(e,t,r,i){r[i]=e[t]*yj,r[i+1]=e[t+1]*yj,r[i+2]=e[t+2]}function J0e(e,t,r,i){wv(e,t,r,i),Mm(r,i,r,i)}function Y0e(e,t,r,i){Am(e,t,r,i),Mm(r,i,r,i)}function Q0e(e,t,r,i){Cm(e,t,r,i),Mm(r,i,r,i)}function K0e(e,t,r,i){Im(e,t,r,i),bv(r,i,r,i)}function X0e(e,t,r,i){Im(e,t,r,i),Tm(r,i,r,i)}function eve(e,t,r,i){Im(e,t,r,i),Lm(r,i,r,i)}function AN(e,t,r,i,n){const s=n+e[t+2],o=my*e[t+1],a=my*e[t],l=Math.cos(o)*s;r[i]=Math.cos(a)*l,r[i+1]=Math.sin(a)*l,r[i+2]=Math.sin(o)*s}function dj(e,t,r,i){AN(e,t,r,i,Tc.radius)}function hj(e,t,r,i){AN(e,t,r,i,ya.radius)}function bv(e,t,r,i){AN(e,t,r,i,Xt.radius)}function kN(e,t,r,i,n){const s=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(s*s+o*o+a*a),c=tye(a/(l===0?1:l)),h=Math.atan2(o,s);r[i++]=yy*h,r[i++]=yy*c,r[i]=l-n}function pj(e,t,r,i){kN(e,t,r,i,Tc.radius)}function fj(e,t,r,i){kN(e,t,r,i,ya.radius)}function Cm(e,t,r,i){kN(e,t,r,i,Xt.radius)}function tve(e,t,r,i){Cm(e,t,r,i),Tm(r,i,r,i)}function rve(e,t,r,i){Cm(e,t,r,i),Lm(r,i,r,i)}function ive(e,t,r,i,n){const s=my*e[t],o=my*e[t+1],a=e[t+2],l=Math.sin(o),c=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);r[i++]=(h+a)*c*Math.cos(s),r[i++]=(h+a)*c*Math.sin(s),r[i++]=(h*(1-n.eccentricitySquared)+a)*l}function Lm(e,t,r,i){ive(e,t,r,i,Xt)}function Am(e,t,r,i){const n=B0e,s=e[t],o=e[t+1],a=e[t+2];let l,c,h,f,m,y,g,v,x,b,_,S,$,M,I,C,L,V,P,z,Y;l=Math.abs(a),c=s*s+o*o,h=Math.sqrt(c),f=c+a*a,m=Math.sqrt(f),z=Math.atan2(o,s),y=a*a/f,g=c/f,M=n.a2/m,I=n.a3-n.a4/m,g>.3?(v=l/m*(1+g*(n.a1+M+y*I)/m),P=Math.asin(v),b=v*v,x=Math.sqrt(1-b)):(x=h/m*(1-y*(n.a5-M-g*I)/m),P=Math.acos(x),b=1-x*x,v=Math.sqrt(b)),_=1-Xt.eccentricitySquared*b,S=Xt.radius/Math.sqrt(_),$=n.a6*S,M=h-S*x,I=l-$*v,L=x*M+v*I,C=x*I-v*M,V=C/($/_+L),P+=V,Y=L+C*V/2,a<0&&(P=-P),r[i++]=yy*z,r[i++]=yy*P,r[i]=Y}function nve(e,t,r,i){Am(e,t,r,i),bv(r,i,r,i)}function sve(e,t,r,i){Am(e,t,r,i),Tm(r,i,r,i)}const Aa={source:{spatialReference:null,spatialReferenceId:D.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:D.UNKNOWN,metersPerUnit:1},projector:Ot},my=Z$(1),yy=gW(1),kZ=.5*Math.PI,Fh=Xt.radius,mj=Fh*Math.PI/180,yj=180/(Fh*Math.PI);function Ew(e,t,r,i,n,s,o=Math.floor(e.length/3)){const a=AZ(t,n);if(a==null)return!1;if(a===Ot){if(e===i&&r===s)return!0;const c=r+3*o;for(let h=r,f=s;h<c;h++,f++)i[f]=e[h];return!0}const l=r+3*o;for(let c=r,h=s;c<l;c+=3,h+=3)a(e,c,i,h);return!0}const x8e=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Ew},Symbol.toStringTag,{value:"Module"}));function gj(e,t,r,i,n,s){return kb[0]=e,kb[1]=t,kb[2]=r,Ew(kb,i,0,n,s,0)}const kb=Uc();let Rb=0,XT=class LC{static fromGE(t){const r=new LC;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=Rb++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Rb++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Rb++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Rb++}getInverse(){const t=new LC;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},mS=class Xg{static cacheKey(t,r){var i,n,s,o,a,l;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((n=t.wkt)==null?void 0:n.toString())??"",((s=t.wkt2)==null?void 0:s.toString())??"",((o=r.wkid)==null?void 0:o.toString())??"-1",((a=r.wkt)==null?void 0:a.toString())??"",((l=r.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(t){const r=new Xg;let i="";for(const n of t.steps){const s=XT.fromGE(n);r.steps.push(s),i+=s.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof XT?this.steps.push(r):this.steps.push(new XT({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new Xg;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[Xg.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const s of this.steps)i+=s.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const n=this._cachedProjection[Xg.cacheKey(t,r)];return n===void 0?null:n}};function RZ(e,t,r){if(t==null||r==null||r.vcsWkid||Dr(t,r)||Mc(t)||Mc(r))return null;const i=nS(t)/nS(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>ove(n,i);case"polyline":case"esriGeometryPolyline":return n=>lve(n,i);case"polygon":case"esriGeometryPolygon":return n=>ave(n,i);case"multipoint":case"esriGeometryMultipoint":return n=>uve(n,i);case"extent":case"esriGeometryEnvelope":return n=>cve(n,i);default:return null}}function ove(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function ave(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function lve(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function uve(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function cve(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let ko=null,Cc=null,_v=null,X_={};const RN=new gw;function Hc(){return!!ko&&WO()}function OZ(){return!!Hc()||(Se(RN),Lc(),!1)}function NZ(e,t){return!e||!t||Sa(e,t)||OZ()}function dve(e,t){return!Sa(e,t)&&!Hc()}function Lc(e){return _v==null&&(_v=Promise.all([kq(),B(()=>import("./geometryEngineBase-58446043.js"),["assets/geometryEngineBase-58446043.js","assets/_commonjsHelpers-2f3e7994.js"]).then(t=>t.g),B(()=>import("./hydrated-2d9f03b2.js"),[])])),_v.then(([,t,{hydratedAdapter:r}])=>{Ht(e),Cc=r,ko=t.default,ko._enableProjection(the),RN.notify()})}function Wc(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:(Ohe(e),AC(Cc,e,e[0].spatialReference,t,r,i)):(cy(e),AC(Cc,[e],e.spatialReference,t,r,i)[0])}function AC(e,t,r,i,n=null,s=null){if(r==null||i==null)return t;if(Sa(r,i,n))return t.map(o=>e2(o,r,i));if(n==null&&iS(r))return t.map(o=>e2(o,r,Ie.WGS84)).map(o=>$1(o,i));if(n==null&&iS(i))return t.map(o=>$1(o,Ie.WGS84)).map(o=>e2(o,Ie.WGS84,i));if(n==null){const o=mS.cacheKey(r,i);X_[o]!==void 0?n=X_[o]:((n=DZ(r,i,void 0))==null&&(n=new mS),X_[o]=n)}if(ko==null||e==null)throw new iE;return s!=null?ko._project(e,t,r,i,n,s):ko._project(e,t,r,i,n)}function hve(e,t){const r=PZ([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function PZ(e,t){if(!Hc()){for(const r of e)if(r!=null&&!Dr(r.spatialReference,t)&&Wn(r.spatialReference)&&Wn(t)&&!Sa(r.spatialReference,t))return Se(RN),{pending:Lc(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:Dr(r.spatialReference,t)?r:Wn(r.spatialReference)&&Wn(t)?$1(r,t):null)}}function DZ(e,t,r=null){if(e==null||t==null)return null;if(ko==null||Cc==null)throw new iE;const i=ko._getTransformation(Cc,e,t,r,r==null?void 0:r.spatialReference);return i!==null?mS.fromGE(i):null}function pve(e,t,r=null){if(ko==null||Cc==null)throw new iE;const i=ko._getTransformationBySuitability(Cc,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const n=[];for(const s of i)n.push(mS.fromGE(s));return n}return[]}let iE=class extends N{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function fve(){ko=null,Cc=null,_v=null,X_={}}const mve={get loadPromise(){return _v}};function $1(e,t){try{const r=Wc(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=RZ(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof iE))throw r;return null}}async function yve(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await ON(i,t,null,r),$1(e,t)}function Sa(e,t,r){return!r&&(!!Dr(e,t)||Wn(e)&&Wn(t)&&!!AZ(e,t))}function gve(e,t){if(Dr(e,t))return!0;if(!Wn(e)||!Wn(t))return!1;const r=Kh(e)||wa(e)||qD(e),i=Kh(t)||wa(t)||qD(t);return r&&i}async function ON(e,t,r,i){if(Hc())return xD(i);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:o}of e)if(n&&s&&!Sa(n,s,o))return Lc(i)}else if(e&&t&&!Sa(e,t,r))return Lc(i);return xD(i)}function e2(e,t,r){return e?"x"in e?FZ(e,t,new Re,r,0):"xmin"in e?UZ(e,t,new bt,r,0):"rings"in e?zZ(e,t,new Ps,r,0):"paths"in e?VZ(e,t,new To,r,0):"points"in e?jZ(e,t,new tE,r,0):null:null}function vve(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&FZ(e,e.spatialReference,t,r,i)!=null}function FZ(e,t,r,i,n){Si[0]=e.x,Si[1]=e.y;const s=e.z;return Si[2]=s!==void 0?s:n,Ew(Si,t,0,Si,i,0)?(r.x=Si[0],r.y=Si[1],r.spatialReference=i,s!==void 0||Mc(i)?(r.z=Si[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function wve(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&jZ(e,e.spatialReference,t,r,i)!=null}function jZ(e,t,r,i,n){const{points:s,hasZ:o,hasM:a}=e,l=[],c=s.length,h=[];for(const m of s)h.push(m[0],m[1],o?m[2]:n);if(!Ew(h,t,0,h,i,0,c))return null;const f=o||Mc(i);for(let m=0;m<c;++m){const y=3*m,g=h[y],v=h[y+1];f&&a?l.push([g,v,h[y+2],s[m][3]]):f?l.push([g,v,h[y+2]]):a?l.push([g,v,s[m][2]]):l.push([g,v])}return r.points=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function bve(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&VZ(e,e.spatialReference,t,r,i)!=null}function VZ(e,t,r,i,n){const{paths:s,hasZ:o,hasM:a}=e,l=[];if(!BZ(s,o??!1,a??!1,t,l,i,n))return null;const c=o||Mc(i);return r.paths=l,r.spatialReference=i,r.hasZ=c,r.hasM=a,r}function _ve(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&zZ(e,e.spatialReference,t,r,i)!=null}function zZ(e,t,r,i,n){const{rings:s,hasZ:o,hasM:a}=e,l=[];if(!BZ(s,o??!1,a??!1,t,l,i,n))return null;const c=o||Mc(i);return r.rings=l,r.spatialReference=i,r.hasZ=c,r.hasM=a,r}function xve(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&UZ(e,e.spatialReference,t,r,i)!=null}function UZ(e,t,r,i,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:h}=e,f=c?e.zmin:n;if(!gj(s,o,f,t,Si,i))return null;const m=c||Mc(i);r.xmin=Si[0],r.ymin=Si[1],m&&(r.zmin=Si[2]);const y=c?e.zmax:n;return gj(a,l,y,t,Si,i)?(r.xmax=Si[0],r.ymax=Si[1],m&&(r.zmax=Si[2]),h&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function BZ(e,t,r,i,n,s,o=0){const a=new Array;for(const h of e)for(const f of h)a.push(f[0],f[1],t?f[2]:o);if(!Ew(a,i,0,a,s,0))return!1;let l=0;n.length=0;const c=t||Mc(s);for(const h of e){const f=new Array;for(const m of h)c&&r?f.push([a[l++],a[l++],a[l++],m[3]]):c?f.push([a[l++],a[l++],a[l++]]):r?(f.push([a[l++],a[l++],m[2]]),l++):(f.push([a[l++],a[l++]]),l++);n.push(f)}return!0}const Si=Uc(),$8e=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Sa,getTransformation:DZ,getTransformations:pve,initializeProjection:ON,isEqualBaseGCS:gve,isLoaded:Hc,isLoadedOrLoad:OZ,isLoadedOrLoadFor:NZ,load:Lc,project:Wc,projectExtent:xve,projectMany:AC,projectMultipoint:wve,projectOrLoad:hve,projectOrLoadMany:PZ,projectPoint:vve,projectPolygon:_ve,projectPolyline:bve,projectWithZConversion:yve,projectWithoutEngine:e2,requiresLoad:dve,test:mve,tryProjectWithZConversion:$1,unload:fve},Symbol.toStringTag,{value:"Module"}));var kC;let Bo=kC=class extends G{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new kC({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Bo.prototype,"cols",void 0),u([d({type:Xe,json:{write:!0}})],Bo.prototype,"level",void 0),u([d({type:String,json:{write:!0}})],Bo.prototype,"levelValue",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Bo.prototype,"origin",void 0),u([d({type:Number,json:{write:!0}})],Bo.prototype,"resolution",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Bo.prototype,"rows",void 0),u([d({type:Number,json:{write:!0}})],Bo.prototype,"scale",void 0),Bo=kC=u([T("esri.layers.support.LOD")],Bo);const Vu=Bo;let Sve=class{constructor(t,r,i,n,s=void 0){this.id=t,this.level=r,this.row=i,this.col=n,this.extent=s}};var uu;const vj=new je({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let ri=uu=class extends G{static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:n=Ie.WebMercator,numLODs:s=24}=e;if(!Wn(n)){const f=[];if(r)for(let m=0;m<r.length;m++){const y=r[m];f.push(new Vu({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=s-1;y>=0;y--)f.unshift(new Vu({level:y,scale:m,resolution:m})),m*=2}return new uu({dpi:96,lods:f,origin:new Re(0,0,n),size:[i,i],spatialReference:n})}const o=Ji(n),a=e.origin?new Re({x:e.origin.x,y:e.origin.y,spatialReference:n}):new Re(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=96,c=1/(Ds(n)*39.37*l),h=[];if(r)for(let f=0;f<r.length;f++){const m=r[f],y=m*c;h.push(new Vu({level:f,scale:m,resolution:y}))}else{let f=Py(n)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const m=Math.ceil(s/t);h.push(new Vu({level:0,scale:f,resolution:f*c}));for(let y=1;y<m;y++){const g=f/2**t,v=g*c;h.push(new Vu({level:y,scale:g,resolution:v})),f=g}}return new uu({dpi:l,lods:h,origin:a,size:[i,i],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=Ji(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return Re.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[],n=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(s=>{i.push(s.scale),t=s.scale>t?s.scale:t,r=s.scale<r?s.scale:r,n[s.level]=s})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const n=t[i],s=t[i+1];if(n<=e)return i;if(s===e)return i+1;if(n>e&&s<e)return i+Math.log(n/e)/Math.log(n/s)}return i}tileAt(e,t,r,i){const n=this.lodAt(e);if(!n)return null;let s,o;if(typeof t=="number")s=t,o=r;else if(Dr(t.spatialReference,this.spatialReference))s=t.x,o=t.y,i=r;else{const c=j$(t,this.spatialReference);if(c==null)return null;s=c.x,o=c.y,i=r}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return i||(i=new Sve(null,0,0,0,Wi())),i.level=e,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=uu.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===uu.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,n=r.resolution*this.size[0]/2**i,s=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Wi()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:i}=r,n=i*this.size[0],s=i*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+n,e[3]=e[1]+s,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return uu.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const r=[],i=this.lods.length-t;for(let n=0;n<i;n++){const s=n+t,{scale:o,resolution:a}=s>=0?this.lods[s]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Vu({level:n,scale:o,resolution:a}))}return new uu({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};u([d({type:Number,json:{write:!0}})],ri.prototype,"compressionQuality",void 0),u([d({type:Number,json:{write:!0}})],ri.prototype,"dpi",void 0),u([d({type:String,json:{read:vj.read,write:vj.write,origins:{"web-scene":{read:!1,write:!1}}}})],ri.prototype,"format",void 0),u([d({readOnly:!0})],ri.prototype,"isWrappable",null),u([d({type:Re,json:{write:!0}})],ri.prototype,"origin",void 0),u([J("origin")],ri.prototype,"readOrigin",null),u([d({type:[Vu],value:null,json:{write:!0}})],ri.prototype,"lods",null),u([d({readOnly:!0})],ri.prototype,"scales",void 0),u([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],ri.prototype,"size",void 0),u([J("size",["rows","cols"])],ri.prototype,"readSize",null),u([te("size",{cols:{type:Xe},rows:{type:Xe}})],ri.prototype,"writeSize",null),u([d({type:Ie,json:{write:!0}})],ri.prototype,"spatialReference",void 0),ri=uu=u([T("esri.layers.support.TileInfo")],ri),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(ri||(ri={}));const $ve=ri,t2={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],n=this.values;return i>=r?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},eM={xsmall:544,small:768,medium:992,large:1200};function Eve(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function tM(e,t){return t?t2[e].valueToClassName[t].split(" "):[]}const Tve=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=eM}initialize(){this.addHandles(ee(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Ye))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!Eve(r)){const i=JSON.stringify(eM,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=eM}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Gi.acquire(),i=Gi.acquire();let n,s=!1;for(n in t2){const o=this[n],a=t2[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,tM(n,o).forEach(l=>i.push(l)),tM(n,a).forEach(l=>r.push(l)))}s&&(this._applyClassNameChanges(r,i),Gi.release(r),Gi.release(i))}_applyClassNameChanges(r,i){const n=this.container;n&&(i.forEach(s=>n.classList.remove(s)),r.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in t2)tM(i,this[i]).forEach(n=>r.classList.remove(n))}};return u([d()],t.prototype,"breakpoints",null),u([d()],t.prototype,"orientation",void 0),u([d()],t.prototype,"widthBreakpoint",void 0),u([d()],t.prototype,"heightBreakpoint",void 0),t=u([T("esri.views.BreakpointsOwner")],t),t};function NN(e){return typeof e=="string"?document.getElementById(e):e??null}function wj(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let jh=class extends ce{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,ee)}addWhen(t,r,i={}){return this._installWatch(t,r,i,Ln)}addOnCollectionChange(t,r,{initial:i=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([En(t,"after-changes",this._createSyncUpdatingCallback(),xa),En(t,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>r({added:[],removed:o.toArray()}):void 0})],s),et(()=>this.removeHandles(s))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(et(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(Ob)||this._set("updating",!1))}),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},n){const s=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,s);const o=n(t,r,i);return this.addHandles(o,s),et(()=>this.removeHandles(s))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),n=ee(t,i,{sync:!0,equals:()=>!1});return this.addHandles(n,r),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Ob),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(hw(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Ob))}),Ob)}}};u([d({readOnly:!0})],jh.prototype,"updating",void 0),jh=u([T("esri.core.support.UpdatingHandles")],jh);const Ob=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yS=function(){return yS=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},yS.apply(this,arguments)},RC={exports:{}},er={},OC={exports:{}},gp={};function GZ(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Mve(e,t,r){}function Ive(e,t,r){}var Cve=/javascript\s*\:/img;function Lve(e,t){return Cve.test(t)?"":t}gp.whiteList=GZ();gp.getDefaultWhiteList=GZ;gp.onAttr=Mve;gp.onIgnoreAttr=Ive;gp.safeAttrValue=Lve;var Ave={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},bg=Ave;function kve(e,t){e=bg.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,n=0,s=0,o="";function a(){if(!i){var h=bg.trim(e.slice(n,s)),f=h.indexOf(":");if(f!==-1){var m=bg.trim(h.slice(0,f)),y=bg.trim(h.slice(f+1));if(m){var g=t(n,o.length,m,y,h);g&&(o+=g+"; ")}}}n=s+1}for(;s<r;s++){var l=e[s];if(l==="/"&&e[s+1]==="*"){var c=e.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||a():l===`
`&&a()}return bg.trim(o)}var Rve=kve,Nb=gp,Ove=Rve;function bj(e){return e==null}function Nve(e){var t={};for(var r in e)t[r]=e[r];return t}function qZ(e){e=Nve(e||{}),e.whiteList=e.whiteList||Nb.whiteList,e.onAttr=e.onAttr||Nb.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Nb.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Nb.safeAttrValue,this.options=e}qZ.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,a=Ove(e,function(l,c,h,f,m){var y=i[h],g=!1;if(y===!0?g=y:typeof y=="function"?g=y(f):y instanceof RegExp&&(g=y.test(f)),g!==!0&&(g=!1),f=o(h,f),!!f){var v={position:c,sourcePosition:l,source:m,isWhite:g};if(g){var x=n(h,f,v);return bj(x)?h+":"+f:x}else{var x=s(h,f,v);if(!bj(x))return x}}});return a};var Pve=qZ;(function(e,t){var r=gp,i=Pve;function n(o,a){var l=new i(a);return l.process(o)}t=e.exports=n,t.FilterCSS=i;for(var s in r)t[s]=r[s]})(OC,OC.exports);var PN=OC.exports,DN={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},Dve=PN.FilterCSS,Fve=PN.getDefaultWhiteList,gS=DN;function HZ(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var WZ=new Dve;function jve(e,t,r){}function Vve(e,t,r){}function zve(e,t,r){}function Uve(e,t,r){}function ZZ(e){return e.replace(Gve,"&lt;").replace(qve,"&gt;")}function Bve(e,t,r,i){if(r=eJ(r),t==="href"||t==="src"){if(r=gS.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(Pb.lastIndex=0,Pb.test(r))return""}else if(t==="style"){if(_j.lastIndex=0,_j.test(r)||(xj.lastIndex=0,xj.test(r)&&(Pb.lastIndex=0,Pb.test(r))))return"";i!==!1&&(i=i||WZ,r=i.process(r))}return r=tJ(r),r}var Gve=/</g,qve=/>/g,Hve=/"/g,Wve=/&quot;/g,Zve=/&#([a-zA-Z0-9]*);?/gim,Jve=/&colon;?/gim,Yve=/&newline;?/gim,Pb=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,_j=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,xj=/u\s*r\s*l\s*\(.*/gi;function JZ(e){return e.replace(Hve,"&quot;")}function YZ(e){return e.replace(Wve,'"')}function QZ(e){return e.replace(Zve,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function KZ(e){return e.replace(Jve,":").replace(Yve," ")}function XZ(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return gS.trim(t)}function eJ(e){return e=YZ(e),e=QZ(e),e=KZ(e),e=XZ(e),e}function tJ(e){return e=JZ(e),e=ZZ(e),e}function Qve(){return""}function Kve(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:gS.indexOf(e,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(i(o))if(l.isClosing){var c="[/removed]",h=l.position+c.length;return n.push([s!==!1?s:l.position,h]),s=!1,c}else return s||(s=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return gS.forEach(n,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function Xve(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var n=e.indexOf("-->",i);if(n===-1)break;r=n+3}return t}function e1e(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}er.whiteList=HZ();er.getDefaultWhiteList=HZ;er.onTag=jve;er.onIgnoreTag=Vve;er.onTagAttr=zve;er.onIgnoreTagAttr=Uve;er.safeAttrValue=Bve;er.escapeHtml=ZZ;er.escapeQuote=JZ;er.unescapeQuote=YZ;er.escapeHtmlEntities=QZ;er.escapeDangerHtml5Entities=KZ;er.clearNonPrintableCharacter=XZ;er.friendlyAttrValue=eJ;er.escapeAttrValue=tJ;er.onIgnoreTagStripAll=Qve;er.StripTagBody=Kve;er.stripCommentTag=Xve;er.stripBlankChar=e1e;er.cssFilter=WZ;er.getDefaultCSSWhiteList=Fve;var nE={},zu=DN;function t1e(e){var t=zu.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=zu.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function r1e(e){return e.slice(0,2)==="</"}function i1e(e,t,r){var i="",n=0,s=!1,o=!1,a=0,l=e.length,c="",h="";e:for(a=0;a<l;a++){var f=e.charAt(a);if(s===!1){if(f==="<"){s=a;continue}}else if(o===!1){if(f==="<"){i+=r(e.slice(n,a)),s=a,n=a;continue}if(f===">"){i+=r(e.slice(n,s)),h=e.slice(s,a+1),c=t1e(h),i+=t(s,i.length,c,h,r1e(h)),n=a+1,s=!1;continue}if(f==='"'||f==="'")for(var m=1,y=e.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=f;continue e}y=e.charAt(a-++m)}}else if(f===o){o=!1;continue}}return n<e.length&&(i+=r(e.substr(n))),i}var n1e=/[^a-zA-Z0-9\\_:.-]/gim;function s1e(e,t){var r=0,i=0,n=[],s=!1,o=e.length;function a(m,y){if(m=zu.trim(m),m=m.replace(n1e,"").toLowerCase(),!(m.length<1)){var g=t(m,y||"");g&&n.push(g)}}for(var l=0;l<o;l++){var c=e.charAt(l),h,f;if(s===!1&&c==="="){s=e.slice(r,l),r=l+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:a1e(e,l+1);continue}if(s!==!1&&l===i){if(f=e.indexOf(c,l+1),f===-1)break;h=zu.trim(e.slice(i+1,f)),a(s,h),s=!1,l=f,r=l+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(f=o1e(e,l),f===-1){h=zu.trim(e.slice(r,l)),a(h),s=!1,r=l+1;continue}else{l=f-1;continue}else if(f=l1e(e,l-1),f===-1){h=zu.trim(e.slice(r,l)),h=Sj(h),a(s,h),s=!1,r=l+1;continue}else continue}return r<e.length&&(s===!1?a(e.slice(r)):a(s,Sj(zu.trim(e.slice(r))))),zu.trim(n.join(" "))}function o1e(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function a1e(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function l1e(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function u1e(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Sj(e){return u1e(e)?e.substr(1,e.length-2):e}nE.parseTag=i1e;nE.parseAttr=s1e;var c1e=PN.FilterCSS,mo=er,rJ=nE,d1e=rJ.parseTag,h1e=rJ.parseAttr,r2=DN;function Db(e){return e==null}function p1e(e){var t=r2.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=r2.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=r2.trim(e.slice(0,-1))),{html:e,closing:r}}function f1e(e){var t={};for(var r in e)t[r]=e[r];return t}function m1e(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function iJ(e){e=f1e(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=mo.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=m1e(e.whiteList||e.allowList):e.whiteList=mo.whiteList,e.onTag=e.onTag||mo.onTag,e.onTagAttr=e.onTagAttr||mo.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||mo.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||mo.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||mo.safeAttrValue,e.escapeHtml=e.escapeHtml||mo.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new c1e(e.css))}iJ.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,c=r.escapeHtml,h=t.cssFilter;r.stripBlankChar&&(e=mo.stripBlankChar(e)),r.allowCommentTag||(e=mo.stripCommentTag(e));var f=!1;r.stripIgnoreTagBody&&(f=mo.StripTagBody(r.stripIgnoreTagBody,s),s=f.onIgnoreTag);var m=d1e(e,function(y,g,v,x,b){var _={sourcePosition:y,position:g,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(i,v)},S=n(v,x,_);if(!Db(S))return S;if(_.isWhite){if(_.isClosing)return"</"+v+">";var $=p1e(x),M=i[v],I=h1e($.html,function(C,L){var V=r2.indexOf(M,C)!==-1,P=o(v,C,L,V);return Db(P)?V?(L=l(v,C,L,h),L?C+'="'+L+'"':C):(P=a(v,C,L,V),Db(P)?void 0:P):P});return x="<"+v,I&&(x+=" "+I),$.closing&&(x+=" /"),x+=">",x}else return S=s(v,x,_),Db(S)?c(x):S},c);return f&&(m=f.remove(m)),m};var y1e=iJ;(function(e,t){var r=er,i=nE,n=y1e;function s(a,l){var c=new n(l);return c.process(a)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n,function(){for(var a in r)t[a]=r[a];for(var l in i)t[l]=i[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(RC,RC.exports);var Ap=RC.exports,g1e=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},v1e=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=yS(yS({},Ap.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?i.sanitizeUrl(a):Ap.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;t&&!r?n=t:t&&r?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(s){if(s==="whiteList")n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(s==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return n.css.whiteList[a]=o[a]})}else n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new Ap.FilterXSS(n)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,n=i===void 0?!0:i,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?Ap.escapeAttrValue(t):!s&&!n?Ap.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,n):Ap.safeAttrValue(t,r,i,n)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,n){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(r[n])?r[n]=r[n].concat(i[n]):r[n]=i[n]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,l){var c=i.validate(l,r);return c.isValid?a.concat([l]):(n=!0,a.concat([c.sanitized]))},[]);else if(g1e(t)){var o=Object.keys(t);s=o.reduce(function(a,l){var c=t[l],h=i.validate(c,r);return h.isValid?a[l]=c:(n=!0,a[l]=h.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const sE=new Map;function nJ(){sE.clear()}function w1e(e){return sE.get(e)}function b1e(e,t){sE.set(e,t)}function rM(e){sE.delete(e)}function im(...e){const t=Gi.acquire();for(let i=0;i<e.length;i++){const n=e[i],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const o in n)n[o]&&t.push(o)}const r=t.join(" ");return Gi.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(i=>{var n;nJ();for(const s of i)(n=e.get(s.target))==null||n(s)}),r=(i,n,s)=>(e.set(i,n),t.observe(i,s),et(()=>{t.unobserve(i),e.delete(i)}));return(i,n,s)=>{let o=null;return ow([ee(()=>typeof i=="function"?i():i,a=>{o==null||o.remove(),a&&(o=r(a,n,s))},fn),et(()=>o==null?void 0:o.remove())])}})();function oE(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function M8e(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function I8e(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const _1e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],x1e=_1e.reduce((e,t)=>(e[t]=[],e),{}),S1e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],sJ=new v1e({whiteList:x1e,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(S1e.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function $1e(e){return e==="Enter"||e===" "}async function xv(e,t){await bue(cw(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}const oJ="http://www.w3.org/",aE=`${oJ}2000/svg`,aJ=`${oJ}1999/xlink`;let $j=[],FN=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},jN=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),lJ=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},E1e=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(jN(e[i],t))return i}return-1},iM=(e,t,r,i)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(jN(a,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},T1e=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},NC=[],PC=!1,uJ=e=>{(e.children||[]).forEach(uJ),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},Ej=()=>{PC=!1,NC.forEach(uJ),NC.length=0},Tj=e=>{NC.push(e),PC||(PC=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(Ej,{timeout:16}):setTimeout(Ej,16))},Mj=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),Tj(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),Tj(e))},M1e=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")FC(e,l,!0);else if(a==="classes"){let c=Object.keys(l),h=c.length;for(let f=0;f<h;f++){let m=c[f];l[m]&&e.classList.add(m)}}else if(a==="styles"){let c=Object.keys(l),h=c.length;for(let f=0;f<h;f++){let m=c[f],y=l[m];y&&(lJ(y),r.styleApplyer(e,m,y))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(i&&(l=i(a,l,e,t)),a==="oninput"&&function(){let h=l;l=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=l):r.namespace===aE?a==="href"?e.setAttributeNS(aJ,a,l):e.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?e[a]=sJ.sanitize(l):DC(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function DC(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let vS,I1e=(e,t,r)=>{if(t)for(let i of t)nm(i,e,void 0,r)},cJ=(e,t,r)=>{I1e(e,t.children,r),t.text&&(e.textContent=t.text),M1e(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},nm=(e,t,r,i)=>{let n,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")n=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let h=o.charAt(s-1),f=o.slice(s,l);h==="."?n.classList.add(f):h==="#"?n.id=f:(f==="svg"&&(i=FN(i,{namespace:aE})),i.namespace!==void 0?n=e.domNode=a.createElementNS(i.namespace,f):(n=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=l+1}}cJ(n,e,i)}},FC=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},C1e=(e,t,r,i)=>{if(!r)return;let n=!1,s=Object.keys(r),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=r[l],h=t[l];if(l==="class")h!==c&&(FC(e,h,!1),FC(e,c,!0));else if(l==="classes"){let f=e.classList,m=Object.keys(c),y=m.length;for(let g=0;g<y;g++){let v=m[g],x=!!c[v];x!==!!h[v]&&(n=!0,x?f.add(v):f.remove(v))}}else if(l==="styles"){let f=Object.keys(c),m=f.length;for(let y=0;y<m;y++){let g=f[y],v=c[g];v!==h[g]&&(n=!0,v?(lJ(v),i.styleApplyer(e,g,v)):i.styleApplyer(e,g,""))}}else if(c||typeof h!="string"||(c=""),l!=="value"||DC(e)){if(c!==h){let f=typeof c;f==="function"&&i.eventHandlerInterceptor||(i.namespace===aE?l==="href"?e.setAttributeNS(aJ,l,c):e.setAttribute(l,c):f==="string"?l==="innerHTML"?e[l]=sJ.sanitize(c):l==="role"&&c===""?e.removeAttribute(l):DC(e)&&l in e?e[l]=c:e.setAttribute(l,c):e[l]!==c&&(e[l]=c),n=!0)}}else{let f=e[l];f!==c&&(e["oninput-value"]?f===e["oninput-value"]:c!==h)&&(e[l]=c,e["oninput-value"]=void 0),c!==h&&(n=!0)}}return n},L1e=(e,t,r,i,n)=>{if(r===i)return!1;i=i||$j;let s,o=(r=r||$j).length,a=i.length,l=0,c=0,h=!1;for(;c<a;){let f=l<o?r[l]:void 0,m=i[c];if(f!==void 0&&jN(f,m))h=vS(f,m,n)||h,l++;else{let y=E1e(r,m,l+1);if(y>=0){for(s=l;s<y;s++)Mj(r[s]),iM(r,s,e,"removed");h=vS(r[y],m,n)||h,l=y+1}else nm(m,t,l<o?r[l].domNode:void 0,n),T1e(m),iM(i,c,e,"added")}c++}if(o>l)for(s=l;s<o;s++)Mj(r[s]),iM(r,s,e,"removed");return h};vS=(e,t,r)=>{let i=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,n=!0,n}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=FN(r,{namespace:aE})),e.text!==t.text&&(s=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=L1e(t,i,e.children,t.children,r)||s,s=C1e(i,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),n};let _g=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,vS(i,r,t)},domNode:e.domNode});const A1e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let tf=e=>FN(A1e,e),rc={create:(e,t)=>(t=tf(t),nm(e,document.createElement("div"),void 0,t),_g(e,t)),append:(e,t,r)=>(r=tf(r),nm(t,e,void 0,r),_g(t,r)),insertBefore:(e,t,r)=>(r=tf(r),nm(t,e.parentNode,e,r),_g(t,r)),merge:(e,t,r)=>(r=tf(r),t.domNode=e,cJ(e,t,r),_g(t,r)),replace:(e,t,r)=>(r=tf(r),nm(t,e.parentNode,e,r),e.parentNode.removeChild(e),_g(t,r))},dJ,k1e=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};dJ=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let R1e=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?dJ(r.children,n=>n.domNode===i):void 0}),r},O1e=(e,t,r)=>{let i=function(n){r("domEvent",n);let s=t(),o=k1e(n.currentTarget,s.domNode);o.reverse();let a,l=R1e(s.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",n),a};return(n,s,o,a)=>i},wS=e=>{let t,r,i=tf(e),n=i.performanceLogger,s=!0,o=!1,a=[],l=[],c=(f,m,y)=>{let g,v=()=>g;i.eventHandlerInterceptor=O1e(t,v,n),g=f(m,y(),i),a.push(g),l.push(y)},h=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let f=0;f<a.length;f++){let m=l[f]();n("rendered",void 0),a[f].update(m),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:h,scheduleRender:()=>{r||o||(r=requestAnimationFrame(h))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(f,m)=>{c(rc.append,f,m)},insertBefore:(f,m)=>{c(rc.insertBefore,f,m)},merge:(f,m)=>{c(rc.merge,f,m)},replace:(f,m)=>{c(rc.replace,f,m)},detach:f=>{for(let m=0;m<l.length;m++)if(l[m]===f)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},cu=class extends ce{constructor(){super(...arguments),this.items=new ie,this._watchUpdatingTracking=new jh,this._callbacks=new Map,this._projector=wS(),this._hiddenProjector=wS()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const n=()=>i.render();this._callbacks.set(i,n),this._projector.append(this.surface,n)}for(const i of r.removed){const n=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(n.domNode),this._callbacks.delete(i)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let n;const s=()=>(n=t.render(),n);i.append(r,s),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(i.detach(s);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const i=this.computeBoundingRect(t),n=this.computeBoundingRect(r);return Math.max(i.left,n.left)<=Math.min(i.right,n.right)&&Math.max(i.top,n.top)<=Math.min(i.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,r){const i=!!(r!=null&&r.disableDecorations);if(!this.items.some(s=>s.visible&&!(i&&s.isDecoration)))return;const n=t.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{i&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([d({readOnly:!0})],cu.prototype,"surface",void 0),u([d({readOnly:!0})],cu.prototype,"items",void 0),u([d({readOnly:!0})],cu.prototype,"needsRender",null),u([d({readOnly:!0})],cu.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],cu.prototype,"updating",null),cu=u([T("esri.views.overlay.ViewOverlay")],cu);const Ij=cu,nM=[0,0];function N1e(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return nM[0]=r.left+((t==null?void 0:t.pageXOffset)??0),nM[1]=r.top+((t==null?void 0:t.pageYOffset)??0),nM}function Cj(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function P1e(e){const t=document.createElement("div");return e.appendChild(t),t}const kp=16,xg=750,D1e=512,F1e=2,j1e=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:kp,time:xg},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ee(()=>this.cursor,i=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",i)}),ee(()=>this.navigating,i=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([ee(()=>this.ui,(r,i)=>this._handleUIChange(r,i),Ye),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){var r;this.destroyed||((r=this.ui)==null||r.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),n=NN(r);if(n||typeof r!="string"||W.getLogger(this).error("#container",`element with id '${r}' not found`),i===n)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Cj(this.root),this._set("root",null)),this.userContent&&(wj(this.userContent,i),Cj(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",wj(n,s),n.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new Ij;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(ee(()=>l.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=ny({render:()=>{var h;return(h=this.overlay)==null?void 0:h.render()}}):this._overlayRenderTaskHandle=Ft(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,i,n){const s=this.position;return r-=s?s[0]:0,i-=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}containerToPage(r,i,n){const s=this.position;return r+=s?s[0]:0,i+=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(ee(()=>this.root,n=>{r.container=n?P1e(n):null},Ye),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=kp,r.time=xg;const i=ny({prepare:o=>{const a=this._measure(),l=this._freqInfo;if(l.time+=o.deltaTime,a&&(l.freq=kp,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const c=this._position();l.freq=c||a?kp:Math.min(xg,l.freq*F1e),!a&&l.freq>=D1e&&(i.pause(),this._get("resizing")&&this._set("resizing",!1))}}),n=new ResizeObserver(o=>{r.freq=kp,r.time=xg,i.resume()});this.container!=null&&n.observe(this.container);const s=et(()=>n.disconnect());this.addHandles([uw(window,"resize",()=>{r.freq=kp,r.time=xg,i.resume()}),s,i],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,n=r?r.clientHeight:0;if(i===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return i===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:i,height:n}),!0)}_position(){const r=this.container,i=this.position,n=r&&N1e(r);return!!n&&(!i||n[0]!==i[0]||n[1]!==i[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return u([d()],t.prototype,"container",null),u([d({readOnly:!0})],t.prototype,"focused",null),u([d({readOnly:!0})],t.prototype,"height",void 0),u([d()],t.prototype,"messagesCommon",void 0),u([d({type:Ij})],t.prototype,"overlay",void 0),u([d({readOnly:!0})],t.prototype,"position",void 0),u([d({readOnly:!0})],t.prototype,"resizing",void 0),u([d({readOnly:!0})],t.prototype,"root",void 0),u([d({value:null,readOnly:!0})],t.prototype,"size",null),u([d({readOnly:!0})],t.prototype,"surface",void 0),u([d({readOnly:!0})],t.prototype,"suspended",void 0),u([d({nonNullable:!0})],t.prototype,"ui",void 0),u([d({readOnly:!0})],t.prototype,"userContent",void 0),u([d({readOnly:!0})],t.prototype,"width",void 0),u([d()],t.prototype,"widthBreakpoint",void 0),t=u([T("esri.views.DOMContainer")],t),t},V1e=F("mac")?"Meta":"Control",z1e=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),U1e=e=>z1e.has(e);let B1e=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},Fr=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let n;typeof r=="function"?(i=r,n=[]):n=r||[];const s=typeof t=="string"?new B1e(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const m=f.indexOf(h);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new G1e(s,i,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new q1e(t,{onEmit:(i,n,s,o)=>{var a;(a=this._manager)==null||a.emit(i.eventType,n,s,o)},onRemove:i=>{var n;delete this._outgoing[i.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!0)}stopCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var i;const r=this._incoming[t.type];if(r){for(const n of r)if(n.match.matches(t)&&((i=n.callback)==null||i.call(n,t),t.shouldStopPropagation()))break}}},G1e=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},q1e=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},H1e=class extends Fr{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>this._update(r.data))}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:n}=t;r===this._value&&this._x===i&&this._y===n||(this._value=r,this._x=i,this._y=n,this._onChange(r,i,n))}},W1e=class{constructor(t,r){this._observable=new gw,this._value=t,this._equalityFunction=r}get value(){return Se(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function gy(e,t=iG){return new W1e(e,t)}let Z1e=class extends Fr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=gy(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},J1e=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const n=t[i],s=new _G(n,void 0,void 0,2,2);this._properties[i]={pool:s,acquired:[]}}this._afterDispatchHandle=Rue(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)ED(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let n=i.pool.acquire();for(i.acquired.push(n);n===r;)i.acquired.push(n),n=i.pool.acquire();return n}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const n of r.acquired)ED(n)?r.acquired[i++]=n:r.pool.release(n);r.acquired.length=i}}},cs=class extends ce{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=V1e,this._latestPointerType="mouse",this._propertiesPool=new J1e({latestPointerLocation:K1e},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=vc.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const n={name:t,handlers:r.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,h,f)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,f,h)},setPointerCapture:(a,l)=>{this._setPointerCapture(n,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach(i=>{var n;i.removed=!0,(n=i.uninstallCallback)==null||n.call(i)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):W.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const n=this._handlers[i];n.priorityIndex=i,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const n=this._handlersPriority[i];n.priorityIndex=i;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(t.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)U1e(a)||r.add(a)}n.active=s}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const n=this._get("latestPointerLocation");if(n==null||n.x!==r||n.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=r,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const s=r;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,n=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,n)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const n=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=r.key;this._keyModifiers.has(a)&&s(a,t==="key-down")}const o=r.native;s("Alt",!!(o!=null&&o.altKey)),s("Control",!!(o!=null&&o.ctrlKey)),s("Ctrl",!!(o!=null&&o.ctrlKey)),s("Shift",!!(o!=null&&o.shiftKey)),s("Meta",!!(o!=null&&o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new H1e((t,r,i)=>this._setLatestPointer(t,r,i)),this._multiTouchHandler=new Z1e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],vc.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,vc.INTERNAL)}_setPointerCapture(t,r,i,n){const s=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,i,n){this._emitInputEvent(0,t,r,i,n)}_emitInputEvent(t,r,i,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,c={event:new Y1e(r,i,a,o||this._activeKeyModifiers,l),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(t){this._currentPropagation={events:new fS,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var r,i,n;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:s,priorityIndex:o}=t.events.pop(),a=(r=s.data)==null?void 0:r.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!s.shouldStopPropagation()&&((n=(i=t.currentHandler).eventCallback)==null||n.call(i,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new fS;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const n of r.handler.incomingEventMatches){if(i.eventType!==n.eventType)continue;const s=i.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===i.keyModifiers.length!=(s.length===n.keyModifiers.length))return i.keyModifiers.length>n.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let n=0;for(;n<r.length&&this._compareHandlerPriority(i,r[n])>=0;)n++;r.splice(n,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t(()=>this._onEventReceived(r,i))},disablePointerCapture:t}}};u([d({readOnly:!0})],cs.prototype,"hasPendingInputs",null),u([d({constructOnly:!0})],cs.prototype,"eventSource",void 0),u([d({constructOnly:!0})],cs.prototype,"recognizers",void 0),u([d()],cs.prototype,"_latestPointerType",void 0),u([d()],cs.prototype,"latestPointerType",null),u([d()],cs.prototype,"multiTouchActive",null),u([d({readOnly:!0})],cs.prototype,"latestPointerLocation",void 0),u([d()],cs.prototype,"_paused",void 0),u([d({readOnly:!0})],cs.prototype,"updating",null),cs=u([T("esri.views.input.InputManager")],cs);let Y1e=class{constructor(t,r,i,n,s){this.type=t,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=s,this._propagationState=Uu.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Uu.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Uu.STOPPED)}async(t){this._propagationState|=Uu.PAUSED;const r=(i,n)=>{this._propagationState&=~Uu.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&Uu.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var Uu;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Uu||(Uu={}));const vc={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let Q1e=class{};const K1e=Q1e;function ru(e){return e!=null&&"open"in e&&"declaredClass"in e}function Lj(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const X1e=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ee(()=>[this.ui,this.popup],([r,i],n)=>{const s="popup",o="manual";if(n){const[a,l]=n;a&&ru(l)&&(l.view=null,Lj(l)&&a.remove(l,s))}r&&ru(i)&&(i.view=this,Lj(i)&&r.add(i,{key:s,position:o,internal:!0}))},Ye),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(ru(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),ru(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},vc.WIDGET)]),Y$(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{B(()=>import("./Popup-975a9369.js").then(r=>r.P),["assets/Popup-975a9369.js","assets/unitFormatUtils-dc634d47.js","assets/ByteSizeUnit-d4757d40.js","assets/quantityUtils-2d9c29c7.js","assets/AttachmentInfo-a267afec.js","assets/featureUtils-be8eb6c0.js","assets/executeQueryJSON-2818c840.js","assets/query-bbf38cc9.js","assets/pbfQueryUtils-fd62a34b.js","assets/pbf-8ef4f2aa.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/shared-2d0da701.js","assets/TimeOnly-68b4478b.js","assets/NetworkElement-49428667.js","assets/ReactiveSet-c2d7f24a.js","assets/layerViewUtils-56caa9ba.js"])})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(ru(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void W.getLogger(this).error(new N("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),ru(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!ru(this.popup))return this._popupSetupTask=ww(async i=>{const{default:n}=await B(()=>import("./Popup-975a9369.js").then(o=>o.P),["assets/Popup-975a9369.js","assets/unitFormatUtils-dc634d47.js","assets/ByteSizeUnit-d4757d40.js","assets/quantityUtils-2d9c29c7.js","assets/AttachmentInfo-a267afec.js","assets/featureUtils-be8eb6c0.js","assets/executeQueryJSON-2818c840.js","assets/query-bbf38cc9.js","assets/pbfQueryUtils-fd62a34b.js","assets/pbf-8ef4f2aa.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/shared-2d0da701.js","assets/TimeOnly-68b4478b.js","assets/NetworkElement-49428667.js","assets/ReactiveSet-c2d7f24a.js","assets/layerViewUtils-56caa9ba.js"]);if(Ht(i),!this.popup||ru(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new n(s)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},n){const s=[],o=[];let a=!1;const l=cue(n,F("popup-view-fetch-timeout")??twe),c=m=>{const y=new ewe(m);return o.push(y),s.push(y.promise),y},h=m=>{const y=o.at(-1);return y&&y.layerView===m&&!a?y:c(m)};for(const m of i)"graphic"in m?(h(m.layerView).graphics.push(m.graphic),a=!1):(s.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,l)),a=!0);o.map(m=>m.resolve(l));const f=uue(s).then(m=>m.filter(y=>!!y).flat());return{pendingFeatures:s,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:n,location:s}=await this.popupHitTest(r);Ht(i);const o=[];for(const a of n)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:s}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i==null?void 0:i.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return u([d()],t.prototype,"popup",void 0),u([d()],t.prototype,"popupEnabled",void 0),t=u([T("esri.views.PopupView")],t),t};let ewe=class{constructor(t){this.layerView=t,this._resolver=es(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:n}=this;if(!r)return n.resolve(i),n.promise;let s;return r.fetchPopupFeaturesFromGraphics(i,t).catch(o=>(s=o,null)).then(o=>{o?n.resolve(o):n.reject(s)}),n.promise}};const twe=5e3;let Sv=class extends ie{constructor(t){super(t),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(ie.ofType(this.itemType.Type))(t):new ie(t)}};function Aj(e,t){return{type:e,cast:Iq,set(r){const i=Dl(r,this._get(t),e);i.owner=this,this._set(t,i)}}}u([d()],Sv.prototype,"owner",null),Sv=u([T("esri.core.support.OwningCollection")],Sv);var e0;const bS=ei()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),hJ=bS.jsonValues.slice();gle(hJ,"orthometric");const $v=ei()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Ks=e0=class extends G{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return bS.write(e,t,r)}readHeightModel(e,t,r){return bS.read(e)||(r!=null&&r.messages&&r.messages.push(rwe(e,{context:r})),null)}readHeightUnit(e,t,r){return $v.read(e)||(r!=null&&r.messages&&r.messages.push(kj(e,{context:r})),null)}readHeightUnitService(e,t,r){return QO(e)||$v.read(e)||(r!=null&&r.messages&&r.messages.push(kj(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new e0({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=Wq(t);return new e0({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new e0;return t.read(e,{origin:"web-scene"}),t}};function kj(e,t){return new Os("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function rwe(e,t){return new Os("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}u([d({type:bS.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:hJ,default:"ellipsoidal",write:{isRequired:!0}}}}})],Ks.prototype,"heightModel",void 0),u([te("web-scene","heightModel")],Ks.prototype,"writeHeightModel",null),u([J(["web-scene","service"],"heightModel")],Ks.prototype,"readHeightModel",null),u([d({type:$v.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:$v.jsonValues,write:{writer:$v.write,isRequired:!0}}}}})],Ks.prototype,"heightUnit",void 0),u([J("web-scene","heightUnit")],Ks.prototype,"readHeightUnit",null),u([J("service","heightUnit")],Ks.prototype,"readHeightUnitService",null),u([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Ks.prototype,"vertCRS",void 0),u([J("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Ks.prototype,"readVertCRS",null),Ks=e0=u([T("esri.geometry.HeightModelInfo")],Ks);const Tw=Ks;let _S=class extends Sv{constructor(t){super(t),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(W.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};_S=u([T("esri.support.AnalysesCollection")],_S);let sM;async function iwe(){return sM==null&&(sM=B(()=>import("./WhereClauseCache-0ccefe60.js"),["assets/WhereClauseCache-0ccefe60.js","assets/WhereClause-d056521f.js","assets/TimeOnly-68b4478b.js"]).then(e=>new e.WhereClauseCache(500,500))),sM}async function VN(e,t){const r=await iwe(),i=r.get(e,t);if(i==null)throw r.getError(e,t);return i}function pJ(e,t){return e||(e=null),t||(t=null),e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function nwe(e,t){return e||(e=null),t||(t=null),e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function G8e(e,t){return t.length===0?null:`${e} IN (${swe(t)})`}function swe(e){return e.map(t=>typeof t=="string"?owe(t):t).join(",")}function owe(e){return`'${e.replaceAll("'","''")}'`}function Rj(e){return typeof e=="number"}function q8e(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function H8e(e){return typeof e=="boolean"}function Mw(e){return typeof e=="string"||e instanceof String}function awe(e){return e==null||Mw(e)}function W8e(e){return Array.isArray(e)}function lwe(e){return(e==null?void 0:e.declaredClass)==="esri.Graphic"}function Z8e(e){return e instanceof Date}const uwe="HH:mm",cwe="HH:mm:ss",dwe="HH:mm:ss.SSS",hwe=[dwe,cwe,uwe,"TT"],pwe="yyyy-MM-dd";function Oj(e){if(!e||!Mw(e))return null;const t=be.fromFormat(e,pwe);return t.isValid?t:null}function Nj(e){return e&&Mw(e)?Ole(hwe,t=>{const r=be.fromFormat(e,t);return r.isValid?r:null})??null:null}function Pj(e){if(!e||!Mw(e))return null;const t=be.fromISO(e);return t.isValid?t:null}var xS;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(xS||(xS={}));const fJ=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function fwe(e){return e!=null&&fJ.has(e.type)}function mJ(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function yJ(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function gJ(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const mwe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);EO(fJ,mwe);function J8e(e,t){const r=t??(e==null?void 0:e.domain);if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,n="range"in r?r.range[1]:r.maxValue,s=fwe(e);return mJ(e)||gJ(e)||yJ(e)?{...ywe(e,n,i),isInteger:s}:{min:i!=null&&typeof i=="number"?i:null,max:n!=null&&typeof n=="number"?n:null,rawMin:i,rawMax:n,isInteger:s}}function ywe(e,t,r){var i,n,s,o,a,l;return mJ(e)?{min:(i=Oj(r))==null?void 0:i.toMillis(),max:(n=Oj(t))==null?void 0:n.toMillis(),rawMin:r,rawMax:t}:gJ(e)?{min:(s=Nj(r))==null?void 0:s.toMillis(),max:(o=Nj(t))==null?void 0:o.toMillis(),rawMin:r,rawMax:t}:yJ(e)?{min:(a=Pj(r))==null?void 0:a.toMillis(),max:(l=Pj(t))==null?void 0:l.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}function gwe(e){if(!e)return;const t=e.match(vwe);return t!=null&&t.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const vwe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function wwe(e){var t,r;return((r=(t=e.match(bwe))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const bwe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let xo=class{};function _we(e){return e instanceof yp?e===xo.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function Q8e(e){return _we(e)?xo.instance:e}xo.instance=new In("Etc/UTC");var SS;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(SS||(SS={}));const xwe={[SS.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let Swe=class vJ extends Error{constructor(t,r){super(nw(xwe[t],r)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,vJ)}};function Rp(e,t,r){return e<t?e-t:e>r?e-r:0}function Op(e,t,r){return e<t?t:e>r?r:e}let Fb=class hr{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,r=1,i=1,n=0,s=0,o=0,a=0,l){if(isNaN(t)||isNaN(r)||isNaN(i)||isNaN(n)||isNaN(s)||isNaN(o)||isNaN(a))return null;const c=be.local(t,r).daysInMonth;let h=be.fromObject({day:Op(i,1,c),year:t,month:Op(r,1,12),hour:Op(n,0,23),minute:Op(s,0,59),second:Op(o,0,59),millisecond:Op(a,0,999)},{zone:td(l)});return h=h.plus({months:Rp(r,1,12),days:Rp(i,1,c),hours:Rp(n,0,23),minutes:Rp(s,0,59),seconds:Rp(o,0,59),milliseconds:Rp(a,0,999)}),new hr(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,r){const i=td(r);return t.isUnknownTimeZone||i===xo.instance?hr.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,i):new hr(t._date.setZone(i))}static dateJSToArcadeDate(t){return new hr(be.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,r="system"){const i=td(r);return new hr(be.fromJSDate(t,{zone:i}))}static unknownEpochToArcadeDate(t){return new hr(be.fromMillis(t,{zone:xo.instance}))}static unknownDateJSToArcadeDate(t){return new hr(be.fromMillis(t.getTime(),{zone:xo.instance}))}static epochToArcadeDate(t,r="system"){const i=td(r);return new hr(be.fromMillis(t,{zone:i}))}static dateTimeToArcadeDate(t){return new hr(t)}clone(){return new hr(this._date)}changeTimeZone(t){const r=td(t);return hr.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(t,r){const i=td(r);return t.zone===xo.instance||i===xo.instance?hr.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,i):new hr(t.setZone(i))}static nowToArcadeDate(t){const r=td(t);return new hr(be.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new hr(be.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===hr.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===xo.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new hr(this._date.plus(t))}diff(t,r="milliseconds"){return this._date.diff(t._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,r){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:r&&!this.isUnknownTimeZone})}toFormat(t,r){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new hr(this._date.toUTC())}toLocal(){return new hr(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const r=be.fromISO(t,{setZone:!0});return new hr(r)}};function td(e,t=!0){if(e instanceof yp)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"UTC";if(e.toLowerCase()==="unknown")return xo.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const i=Jr.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(i)return i}const r=In.create(e);if(!r.isValid){if(t)throw new Swe(SS.TimeZoneNotRecognized);return null}return r}const $we=()=>W.getLogger("esri.support.arcadeOnDemand"),Ewe=["geometry","scale","timeProperties"];function K8e(e,t){if(t!=null)for(const r of Ewe)t.hasArcadeDependency(r)&&e.add(r);return e}let oM;function $a(){return oM||(oM=(async()=>{const e=await B(()=>import("./arcadeUtils-7c779cd8.js"),["assets/arcadeUtils-7c779cd8.js","assets/arcade-86dfda78.js","assets/unitConversion-ef35ef59.js","assets/ImmutableArray-d5cad66d.js","assets/shared-2d0da701.js","assets/TimeOnly-68b4478b.js","assets/number-bcbf97df.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/WhereClause-d056521f.js"]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),oM}const X8e=(e,t,r)=>wJ.create(e,t,r,null,["$feature","$view"],[]),Twe=(e,t,r,i)=>wJ.create(e,t,r,i,["$feature","$view"],[]);let wJ=class bJ{constructor(t,r,i,n,s,o,a){this._dependencies=new Map,this.services=null,this.script=t,this.evaluate=n;const l=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=l??[],this._syntaxTree=i,this._arcade=r,this._arcadeFeature=s,this._spatialReference=a,this._dependencies.set("geometry",r.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}static async create(t,r,i,n,s,o){const{arcade:a,Feature:l,Dictionary:c}=await $a(),h=r instanceof Ie?r:Ie.fromJSON(r);let f;try{f=a.parseScript(t,o)}catch(L){return $we().error(new N("arcade-bad-expression","Failed to parse arcade script",{script:t,error:L})),null}const m=s.reduce((L,V)=>({...L,[V]:null}),{});let y=null;n!=null&&(y=new c(n),y.immutable=!0,m.$config=null);const g=a.scriptUsesGeometryEngine(f),v=g&&a.enableGeometrySupport(),x=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),b=a.scriptIsAsync(f),_=b&&a.enableAsyncSupport(),S={vars:m,spatialReference:h,useAsync:!!_};await Promise.all([v,x,_]);const $=new Set;await a.loadDependentModules($,f,null,b,g);const M=new c;M.immutable=!1,M.setField("scale",0);const I=a.compileScript(f,S),C=(L,V)=>{var z;const P=(z=L.$view)==null?void 0:z.timeZone;if("$view"in L&&L.$view){let Y;if(M.setField("scale",typeof L.$view=="object"&&"scale"in L.$view?L.$view.scale:void 0),typeof L.$view=="object"&&"timeProperties"in L.$view&&L.$view.timeProperties!=null){const{currentStart:oe,currentEnd:ae}=L.$view.timeProperties;Y=new c({currentStart:oe!=null?P!=null?Fb.epochToArcadeDate(oe,P):Fb.unknownEpochToArcadeDate(oe):void 0,currentEnd:ae!=null?P!=null?Fb.epochToArcadeDate(ae,P):Fb.unknownEpochToArcadeDate(ae):void 0,startIncluded:!0,endIncluded:!0})}M.setField("timeProperties",Y),L.$view=M}return y&&(L.$config=y),I({vars:L,spatialReference:h,services:V,timeZone:P})};return new bJ(t,a,f,C,new l,i,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}references(t){return this._dependencies.get(t)??!1}};const Mwe=/^([0-9_])/,Iwe=/[^a-z0-9_\u0080-\uffff]+/gi;function Cwe(e){return e==null?null:e.trim().replaceAll(Iwe,"_").replace(Mwe,"F$1")||null}const Lwe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Awe=["field","normalizationField"];function $S(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(Dj(Lwe,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)Dj(Awe,i,t)}}function Dj(e,t,r){if(e)for(const i of e){const n=iw(i,t),s=n&&typeof n!="function"&&r.get(n);s&&Xr(i,s.name,t)}}function zN(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),n=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(n==null?void 0:n.name)??null}else{const i=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(n==null?void 0:n.name)??null}}const aM=new Set;function lE(e,t){return e&&t?(aM.clear(),op(aM,e,t),Array.from(aM).sort()):[]}function op(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of r)Qi(e,t,n);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const n of r)n!=null&&e.add(n)}}function Qi(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function eVe(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}function tVe(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=lE(e,t);return i.length/e.fields.length>=r?["*"]:i}async function ki(e,t,r){var s;if(!r)return;let i;const n=gwe(r);if(n)i=[n];else{const{arcadeUtils:o}=await $a();i=o.extractFieldNames(r,(s=t==null?void 0:t.fields)==null?void 0:s.map(a=>a.name))}for(const o of i)Qi(e,t,o)}async function UN(e,t,r){if(r&&r!=="1=1"){const i=await VN(r,t);if(!i.isStandardized)throw new N("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});op(e,t,i.fieldNames)}}function kwe({displayField:e,fields:t}){return e||(t!=null&&t.length?lM(t,"name-or-title")||lM(t,"unique-identifier")||lM(t,"type-or-category")||Rwe(t):null)}function Rwe(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function lM(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}async function rVe(e,t){var i;if(!t)return;const r=(i=t.elevationInfo)==null?void 0:i.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function Owe(e,t,r){r.onStatisticExpression?ki(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function iVe(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],n=r.popupTemplate;i.push(_J(e,t,n)),r.fields&&i.push(...r.fields.map(async s=>Owe(e,t.fieldsIndex,s))),await Promise.all(i)}async function nVe(e,t){var s,o,a;const{fieldsIndex:r,trackInfo:i}=t;if(!t||!i||!r)return;const n=[(s=i.latestObservations.renderer)==null?void 0:s.collectRequiredFields(e,r),(o=i.previousObservations.renderer)==null?void 0:o.collectRequiredFields(e,r),(a=i.trackLines.renderer)==null?void 0:a.collectRequiredFields(e,r)];i.popupTemplate&&n.push(_J(e,t,i.popupTemplate));for(const l of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(l)for(const c of l)n.push($J(e,r,c));await Promise.all(n)}async function _J(e,t,r){const i=[];r!=null&&r.expressionInfos&&i.push(...r.expressionInfos.map(s=>ki(e,t.fieldsIndex,s.expression)));const n=r==null?void 0:r.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&i.push(ki(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(i)}async function sVe(e,t,r){t&&(t.timeInfo&&(r!=null&&r.timeExtent)&&op(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&op(e,t.fieldsIndex,[t.floorInfo.floorField]),(r==null?void 0:r.where)!=null&&await UN(e,t.fieldsIndex,r.where))}async function oVe(e,t,r){t&&r&&await Promise.all(r.map(i=>Nwe(e,t,i)))}async function Nwe(e,t,r){t&&r&&(r.valueExpression?await ki(e,t.fieldsIndex,r.valueExpression):r.field&&Qi(e,t.fieldsIndex,r.field))}function aVe(e){return e?lE(e.fieldsIndex,xJ(e)):[]}function Pwe(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?lE(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function lVe(e,t,r){if(!t||!r)return;const i=t.fieldsIndex;await Promise.all(r.filters.map(n=>UN(e,i,n.where)))}const Dwe=new Set(["oid","global-id","guid"]),Fwe=new Set(["oid","global-id"]),jwe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function Vwe(e){const t=new Set;SJ(e).forEach(i=>t.add(i)),Pwe(e).forEach(i=>t.add(i.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>t.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>t.add(i.toLowerCase()))),Array.from(t)}function xJ(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:n,editorField:s}=t;return[r,i,n,s].filter(Boolean)}function SJ(e){return xJ(e).map(t=>t.toLowerCase())}function zwe(e,t){var r;return e.editable&&!Dwe.has(e.type)&&!SJ(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function Uwe(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||Vwe(t).includes(r)||Fwe.has(e.type)||jwe.some(n=>n.test(r)))}async function uVe(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r!=null&&r.length&&await Promise.all(r.map(n=>$J(e,i,n)))}async function $J(e,t,r){if(!r)return;const i=r.getLabelExpression(),n=r.where;if(i.type==="arcade")await ki(e,t,i.expression);else{const s=i.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Qi(e,t,o.slice(1,-1))})}await UN(e,t,n)}function Bwe(e){const t=e.defaultValue;return t!==void 0&&TJ(e,t)?t:e.nullable?null:void 0}function cVe(e){const t=typeof e=="string"?{type:e}:e;return CJ(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function EJ(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Gwe(e){return e===null||EJ(e)}function qwe(e){return e===null||Number.isInteger(e)}function Hwe(){return!0}function TJ(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?qwe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?Gwe:EJ;break;case"string":case"esriFieldTypeString":r=e.nullable?awe:Mw;break;default:r=Hwe}return arguments.length===1?r:r(t)}const Wwe=["integer","small-integer","big-integer"],Zwe=["single","double"],Jwe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],Ywe=["esriFieldTypeSingle","esriFieldTypeDouble"],MJ=new Set([...Wwe,...Jwe]),Qwe=new Set([...Zwe,...Ywe]),Kwe=EO(MJ,Qwe);function Xwe(e){return e!=null&&MJ.has(e.type)}function IJ(e){return e!=null&&Kwe.has(e.type)}function CJ(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function BN(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function ebe(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function tbe(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function LJ(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Fj(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function jj(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function dVe(e,t){return rbe(e,t)===null}var ES,TS;function hVe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function rbe(e,t){return e==null||e.nullable&&t===null?null:TJ(e,t)?IJ(e)&&!ibe(e.type,Number(t))?ES.OUT_OF_RANGE:null:TS.INVALID_TYPE}function ibe(e,t){const r=typeof e=="string"?AJ(e):e;if(!r)return!1;const i=r.min,n=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=n:t>=i&&t<=n}function AJ(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return nbe;case"esriFieldTypeInteger":case"integer":return sbe;case"esriFieldTypeBigInteger":case"big-integer":return obe;case"esriFieldTypeSingle":case"single":return abe;case"esriFieldTypeDouble":case"double":return lbe}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(ES||(ES={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(TS||(TS={}));const nbe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},sbe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},obe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},abe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},lbe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function pVe(e,t,r){switch(e){case xS.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case xS.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case TS.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case ES.OUT_OF_RANGE:{const{min:i,max:n}=AJ(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${n}`}}}function ube(e,t){return!cbe(e,t,null)}function cbe(e,t,r){if(!(t!=null&&t.attributes)||!e){if(r!=null)for(const s of e??[])r.add(s);return!0}const i=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!i.has(s)){if(n=!0,r==null)break;r.add(s)}return n}function dbe(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}async function hbe(e,t){const r=new Set;return e!=null&&e.collectRequiredFields&&await e.collectRequiredFields(r,t),Array.from(r).sort()}function GN(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let i2=class extends G{constructor(t){super(t),this.type=null}};u([d({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],i2.prototype,"type",void 0),i2=u([T("esri.popup.content.Content")],i2);const zl=i2,jb=new je({asc:"ascending",desc:"descending"});let t0=class extends Be.ClonableMixin(G){constructor(t){super(t),this.field=null,this.order="ascending"}};u([d({type:String,json:{write:!0}})],t0.prototype,"field",void 0),u([d({type:jb.apiValues,json:{type:jb.jsonValues,read:jb.read,write:jb.write}})],t0.prototype,"order",void 0),t0=u([T("esri.popup.support.AttachmentsOrderByInfo")],t0);const pbe=t0;let du=class extends Be.ClonableMixin(zl){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};u([d({type:String,json:{write:!0}})],du.prototype,"description",void 0),u([d({type:["auto","preview","list"],json:{write:!0}})],du.prototype,"displayType",void 0),u([d({type:[pbe],json:{write:!0}})],du.prototype,"orderByFields",void 0),u([d({type:String,json:{write:!0}})],du.prototype,"title",void 0),u([d({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],du.prototype,"type",void 0),du=u([T("esri.popup.content.AttachmentsContent")],du);const vy=du;var jC;let bd=jC=class extends zl{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new jC({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?O(this.outFields):null})}};u([d()],bd.prototype,"creator",void 0),u([d()],bd.prototype,"destroyer",void 0),u([d()],bd.prototype,"outFields",void 0),u([d({type:["custom"],readOnly:!0})],bd.prototype,"type",void 0),bd=jC=u([T("esri.popup.content.CustomContent")],bd);const fbe=bd;var VC;let rf=VC=class extends G{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new VC({title:this.title,expression:this.expression})}};u([d({type:String,json:{write:!0}})],rf.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],rf.prototype,"expression",void 0),u([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],rf.prototype,"returnType",void 0),rf=VC=u([T("esri.popup.ElementExpressionInfo")],rf);const mbe=rf;var zC;let r0=zC=class extends zl{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new zC({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};u([d({type:mbe,json:{write:!0}})],r0.prototype,"expressionInfo",void 0),u([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],r0.prototype,"type",void 0),r0=zC=u([T("esri.popup.content.ExpressionContent")],r0);const uE=r0;let nf=class extends Be.ClonableMixin(G){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};u([ve(Eme)],nf.prototype,"dateFormat",void 0),u([d({type:Boolean,json:{write:!0}})],nf.prototype,"digitSeparator",void 0),u([d({type:Xe,json:{write:!0}})],nf.prototype,"places",void 0),nf=u([T("esri.popup.support.FieldInfoFormat")],nf);const n2=nf;var UC;let Xs=UC=class extends G{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new UC({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([d({type:String,json:{write:!0}})],Xs.prototype,"fieldName",void 0),u([d({type:n2,json:{write:!0}})],Xs.prototype,"format",void 0),u([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Xs.prototype,"isEditable",void 0),u([d({type:String,json:{write:!0}})],Xs.prototype,"label",void 0),u([ve(new je({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Xs.prototype,"stringFieldOption",void 0),u([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Xs.prototype,"statisticType",void 0),u([d({type:String,json:{write:!0}})],Xs.prototype,"tooltip",void 0),u([d({type:Boolean,json:{write:!0}})],Xs.prototype,"visible",void 0),Xs=UC=u([T("esri.popup.FieldInfo")],Xs);const qN=Xs;var BC;let Ba=BC=class extends zl{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new BC(O({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([d({type:Object,json:{write:!0}})],Ba.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],Ba.prototype,"description",void 0),u([d({type:[qN]})],Ba.prototype,"fieldInfos",void 0),u([te("fieldInfos")],Ba.prototype,"writeFieldInfos",null),u([d({type:String,json:{write:!0}})],Ba.prototype,"title",void 0),u([d({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ba.prototype,"type",void 0),Ba=BC=u([T("esri.popup.content.FieldsContent")],Ba);const wy=Ba;let _d=class extends G{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};u([d({type:String,json:{write:!0}})],_d.prototype,"altText",void 0),u([d({type:String,json:{write:!0}})],_d.prototype,"caption",void 0),u([d({type:String,json:{write:!0}})],_d.prototype,"title",void 0),u([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],_d.prototype,"type",void 0),_d=u([T("esri.popup.content.mixins.MediaInfo")],_d);const HN=_d;var GC;let xd=GC=class extends ce{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new GC({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([d()],xd.prototype,"color",void 0),u([d()],xd.prototype,"fieldName",void 0),u([d()],xd.prototype,"tooltip",void 0),u([d()],xd.prototype,"value",void 0),xd=GC=u([T("esri.popup.content.support.ChartMediaInfoValueSeries")],xd);const ybe=xd;var qC;let hu=qC=class extends G{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new qC({colors:O(this.colors),fields:O(this.fields),normalizeField:this.normalizeField,series:O(this.series),tooltipField:this.tooltipField})}};u([d({type:[Q],json:{type:[[Xe]],write:!0}})],hu.prototype,"colors",void 0),u([d({type:[String],json:{write:{isRequired:!0}}})],hu.prototype,"fields",void 0),u([d({type:String,json:{write:!0}})],hu.prototype,"normalizeField",void 0),u([d({type:[ybe],json:{read:!1}})],hu.prototype,"series",void 0),u([d({type:String,json:{write:!0}})],hu.prototype,"tooltipField",void 0),hu=qC=u([T("esri.popup.content.support.ChartMediaInfoValue")],hu);const gbe=hu;let i0=class extends HN{constructor(t){super(t),this.type=null,this.value=void 0}};u([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],i0.prototype,"type",void 0),u([d({type:gbe,json:{write:{isRequired:!0}}})],i0.prototype,"value",void 0),i0=u([T("esri.popup.content.mixins.ChartMediaInfo")],i0);const cE=i0,dE=ei()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var HC;let s2=HC=class extends cE{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new HC({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:dE.write,isRequired:!0}}})],s2.prototype,"type",void 0),s2=HC=u([T("esri.popup.content.BarChartMediaInfo")],s2);const kJ=s2;var WC;let o2=WC=class extends cE{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new WC({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:dE.write,isRequired:!0}}})],o2.prototype,"type",void 0),o2=WC=u([T("esri.popup.content.ColumnChartMediaInfo")],o2);const RJ=o2;var ZC;let n0=ZC=class extends G{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new ZC({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([d({type:String,json:{write:!0}})],n0.prototype,"linkURL",void 0),u([d({type:String,json:{write:{isRequired:!0}}})],n0.prototype,"sourceURL",void 0),n0=ZC=u([T("esri.popup.content.support.ImageMediaInfoValue")],n0);const vbe=n0;var JC;let sf=JC=class extends HN{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new JC({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:Number,json:{write:!0}})],sf.prototype,"refreshInterval",void 0),u([d({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],sf.prototype,"type",void 0),u([d({type:vbe,json:{write:{isRequired:!0}}})],sf.prototype,"value",void 0),sf=JC=u([T("esri.popup.content.ImageMediaInfo")],sf);const OJ=sf;var YC;let a2=YC=class extends cE{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new YC({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:dE.write,isRequired:!0}}})],a2.prototype,"type",void 0),a2=YC=u([T("esri.popup.content.LineChartMediaInfo")],a2);const NJ=a2;var QC;let l2=QC=class extends cE{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new QC({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:dE.write,isRequired:!0}}})],l2.prototype,"type",void 0),l2=QC=u([T("esri.popup.content.PieChartMediaInfo")],l2);const PJ=l2,KC={base:HN,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":kJ,"column-chart":RJ,"line-chart":NJ,"pie-chart":PJ,image:OJ}};var XC;let eo=XC=class extends zl{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?OJ.fromJSON(t):t.type==="barchart"?kJ.fromJSON(t):t.type==="columnchart"?RJ.fromJSON(t):t.type==="linechart"?NJ.fromJSON(t):t.type==="piechart"?PJ.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new XC(O({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([d()],eo.prototype,"activeMediaInfoIndex",void 0),u([d({type:Object,json:{write:!0}})],eo.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],eo.prototype,"description",void 0),u([d({types:[KC]})],eo.prototype,"mediaInfos",void 0),u([J("mediaInfos")],eo.prototype,"readMediaInfos",null),u([te("mediaInfos")],eo.prototype,"writeMediaInfos",null),u([d({type:String,json:{write:!0}})],eo.prototype,"title",void 0),u([d({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],eo.prototype,"type",void 0),eo=XC=u([T("esri.popup.content.MediaContent")],eo);const E1=eo;var eL;let s0=eL=class extends G{constructor(e){super(e),this.field=null,this.order=null}clone(){return new eL({field:this.field,order:this.order})}};u([d({type:String,json:{write:!0}})],s0.prototype,"field",void 0),u([d({type:["asc","desc"],json:{write:!0}})],s0.prototype,"order",void 0),s0=eL=u([T("esri.popup.support.RelatedRecordsInfoFieldOrder")],s0);const WN=s0;let Go=class extends Be.ClonableMixin(zl){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([d({type:String,json:{write:!0}})],Go.prototype,"description",void 0),u([d({type:Number,json:{type:Xe,write:!0}})],Go.prototype,"displayCount",void 0),u([d({type:["list"],json:{write:{isRequired:!0}}})],Go.prototype,"displayType",void 0),u([d({type:[WN],json:{write:!0}})],Go.prototype,"orderByFields",void 0),u([d({type:Number,json:{type:Xe,write:{isRequired:!0}}})],Go.prototype,"relationshipId",void 0),u([d({type:String,json:{write:!0}})],Go.prototype,"title",void 0),u([d({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Go.prototype,"type",void 0),Go=u([T("esri.popup.content.RelationshipContent")],Go);const T1=Go;var tL;let o0=tL=class extends zl{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new tL({text:this.text})}};u([d({type:String,json:{write:!0}})],o0.prototype,"text",void 0),u([d({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],o0.prototype,"type",void 0),o0=tL=u([T("esri.popup.content.TextContent")],o0);const M1=o0;let Ga=class extends Be.ClonableMixin(G){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};u([d({type:String,json:{write:!0}})],Ga.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Ga.prototype,"description",void 0),u([d({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Ga.prototype,"type",void 0),u([d({type:Number,json:{type:Xe,write:!0}})],Ga.prototype,"associatedNetworkSourceId",void 0),u([d({type:Number,json:{type:Xe,write:!0}})],Ga.prototype,"associatedAssetGroup",void 0),u([d({type:Number,json:{type:Xe,write:!0}})],Ga.prototype,"associatedAssetType",void 0),Ga=u([T("esri.popup.support.UtilityNetworkAssociationType")],Ga);const DJ=Ga;let pu=class extends Be.ClonableMixin(zl){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};u([d({type:String,json:{write:!0}})],pu.prototype,"description",void 0),u([d({type:Number,json:{type:Xe,write:!0}})],pu.prototype,"displayCount",void 0),u([d({type:String,json:{write:!0}})],pu.prototype,"title",void 0),u([d({type:[DJ],json:{write:!0}})],pu.prototype,"associationTypes",void 0),u([ve({utilityNetworkAssociations:"utility-network-associations"})],pu.prototype,"type",void 0),pu=u([T("esri.popup.content.UtilityNetworkAssociationsContent")],pu);const ZN=pu,wbe={base:null,key:"type",typeMap:{attachment:vy,media:E1,text:M1,expression:uE,field:wy,relationship:T1,utilityNetworkAssociations:ZN}},bbe={base:null,key:"type",typeMap:{attachment:vy,media:E1,text:M1,expression:uE,field:wy,relationship:T1}};var rL;let Sd=rL=class extends G{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new rL({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([d({type:String,json:{write:!0}})],Sd.prototype,"name",void 0),u([d({type:String,json:{write:!0}})],Sd.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Sd.prototype,"expression",void 0),u([d({type:["string","number"],json:{write:!0}})],Sd.prototype,"returnType",void 0),Sd=rL=u([T("esri.popup.ExpressionInfo")],Sd);const _be=Sd;var iL;let a0=iL=class extends G{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new iL({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([d({type:Boolean,json:{write:!0}})],a0.prototype,"returnTopmostRaster",void 0),u([d({type:Boolean,json:{write:!0}})],a0.prototype,"showNoDataRecords",void 0),a0=iL=u([T("esri.popup.LayerOptions")],a0);const xbe=a0;var nL;let l0=nL=class extends G{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new nL({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?O(this.orderByFields):null})}};u([d({type:Boolean,json:{write:!0}})],l0.prototype,"showRelatedRecords",void 0),u([d({type:[WN],json:{write:!0}})],l0.prototype,"orderByFields",void 0),l0=nL=u([T("esri.popup.RelatedRecordsInfo")],l0);const Vj=l0;var sL;let ds=sL=class extends qc.IdentifiableMixin(ce){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new sL({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([d()],ds.prototype,"active",void 0),u([d()],ds.prototype,"className",void 0),u([d()],ds.prototype,"disabled",void 0),u([d()],ds.prototype,"icon",void 0),u([d()],ds.prototype,"id",void 0),u([d()],ds.prototype,"indicator",void 0),u([d()],ds.prototype,"title",void 0),u([d()],ds.prototype,"type",void 0),u([d()],ds.prototype,"visible",void 0),ds=sL=u([T("esri.support.actions.ActionBase")],ds);const hE=ds;var oL;let u2=oL=class extends hE{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new oL({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([d()],u2.prototype,"image",void 0),u2=oL=u([T("esri.support.actions.ActionButton")],u2);const FJ=u2;var aL;let u0=aL=class extends hE{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new aL({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([d()],u0.prototype,"image",void 0),u([d()],u0.prototype,"value",void 0),u0=aL=u([T("esri.support.actions.ActionToggle")],u0);const jJ=u0,Sg="relationships/",zj="expression/",Sbe=ie.ofType({key:"type",defaultKeyValue:"button",base:hE,typeMap:{button:FJ,toggle:jJ}}),$be={base:zl,key:"type",typeMap:{media:E1,custom:fbe,text:M1,attachments:vy,fields:wy,expression:uE,relationship:T1,utilityNetworkAssociations:ZN}},VJ=new Set(["attachments","fields","media","text","expression","relationship"]),Ebe=new Set([...VJ,"utility-network-associations"]);let vr=class extends Be.ClonableMixin(G){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>Oo($be,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Ma(t)?t:(W.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(t,r,i,n){this._writePopupTemplateContent(t,r,n)}writeWebMapContent(t,r,i,n){this._writePopupTemplateContent(t,r,n)}writeFieldInfos(t,r,i,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(t){const a=o?o.filter(c=>c.type==="fields"):[],l=a.length&&a.every(c=>{var h;return(h=c.fieldInfos)==null?void 0:h.length});r.fieldInfos=t.filter(Boolean).map(c=>{const h=c.toJSON(n);return l&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,r)}writeLayerOptions(t,r,i,n){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(n)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),op(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writePopupTemplateContent(t,r,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(n=>(i==null?void 0:i.origin)==="web-scene"?VJ.has(n.type):Ebe.has(n.type)).map(n=>n==null?void 0:n.toJSON(i)),r.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(r):n.type==="media"?this._writeMediaContent(n,r):n.type==="text"?this._writeTextContent(n,r):n.type==="relationship"&&this._writeRelationshipContent(n,r)})):r.description=t}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=O(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(n=>{const s=r.fieldInfos.find(o=>{var a,l;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((l=n.fieldName)==null?void 0:l.toLowerCase())});s?s.visible=!0:r.fieldInfos.push(n)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var s,o;const i=((s=t.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],n=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=O(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const n={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!r||n.mediaInfos||(s.mediaInfos=r,n.mediaInfos=!0),E1.fromJSON(s)):s.type==="text"?(s.text||!t||n.description||(s.text=t,n.description=!0),M1.fromJSON(s)):s.type==="attachments"?vy.fromJSON(s):s.type==="fields"?wy.fromJSON(s):s.type==="expression"?uE.fromJSON(s):s.type==="relationship"?T1.fromJSON(s):s.type==="utilityNetworkAssociations"?ZN.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(Sg)))return null;const n=r.replace(Sg,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return!Number.isNaN(s)&&o?T1.fromJSON({relationshipId:s,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:n}=t;return{field:`${Sg}${r}/${n}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];t?s.push(new M1({text:t})):s.push(new wy),Array.isArray(r)&&r.length&&s.push(E1.fromJSON({mediaInfos:r})),i&&s.push(vy.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return r==="text"?this._extractFieldNames(t.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:r,title:i,value:n}=t,s=n||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:h}=s,f=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(c),...this._extractFieldNames(h),...o??[]];return a&&f.push(a),l&&f.push(l),f}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((i,n)=>[...i,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(n=>ki(t,r,n.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(Sg)||r.startsWith(zj))).map(r=>r.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(t){const{className:r,title:i,type:n}=t,s=n==="button"||n==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(s)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return GN(t).filter(r=>!(r.indexOf(Sg)===0||r.indexOf(zj)===0))}};u([d({type:Sbe})],vr.prototype,"actions",void 0),u([d()],vr.prototype,"content",void 0),u([He("content")],vr.prototype,"castContent",null),u([J("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],vr.prototype,"readContent",null),u([te("web-scene","content",{popupElements:{type:ie.ofType(bbe)},showAttachments:{type:Boolean},mediaInfos:{type:ie.ofType(KC)},description:{type:String},relatedRecordsInfo:{type:Vj}})],vr.prototype,"writeWebSceneContent",null),u([te("content",{popupElements:{type:ie.ofType(wbe)},showAttachments:{type:Boolean},mediaInfos:{type:ie.ofType(KC)},description:{type:String},relatedRecordsInfo:{type:Vj}})],vr.prototype,"writeWebMapContent",null),u([d({type:[_be],json:{write:!0}})],vr.prototype,"expressionInfos",void 0),u([d({type:[qN]})],vr.prototype,"fieldInfos",void 0),u([te("fieldInfos")],vr.prototype,"writeFieldInfos",null),u([d({type:xbe})],vr.prototype,"layerOptions",void 0),u([te("layerOptions")],vr.prototype,"writeLayerOptions",null),u([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],vr.prototype,"lastEditInfoEnabled",void 0),u([d()],vr.prototype,"outFields",void 0),u([d()],vr.prototype,"overwriteActions",void 0),u([d()],vr.prototype,"returnGeometry",void 0),u([d({json:{type:String}})],vr.prototype,"title",void 0),u([te("title")],vr.prototype,"writeTitle",null),vr=u([T("esri.PopupTemplate")],vr);const vp=vr,Uj=new je({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Tbe=0,of=class extends G{constructor(t){super(t),this.id="sym"+Tbe++,this.type=null,this.color=new Q([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([d({type:Uj.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Uj.write,isRequired:!0}}})],of.prototype,"type",void 0),u([d({type:Q,json:{write:{allowNull:!0}}})],of.prototype,"color",void 0),u([J("color")],of.prototype,"readColor",null),of=u([T("esri.symbols.Symbol")],of);const ci=of;var lL;let fu=lL=class extends ci{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const n=i.map(s=>{const o=s.valueExpressionInfo;return o?ki(e,t,o.expression):null});await Promise.all(n)}}}clone(){return new lL({data:O(this.data)})}hash(){return oG(JSON.stringify(this.data)).toString()}};u([d({json:{write:!1}})],fu.prototype,"color",void 0),u([d({json:{write:!0}})],fu.prototype,"data",void 0),u([J("data",["symbol"])],fu.prototype,"readData",null),u([te("data",{})],fu.prototype,"writeData",null),u([ve({CIMSymbolReference:"cim"},{readOnly:!0})],fu.prototype,"type",void 0),fu=lL=u([T("esri.symbols.CIMSymbol")],fu);const Zc=fu;let af=class extends G{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};u([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],af.prototype,"enabled",void 0),u([te("enabled")],af.prototype,"writeEnabled",null),u([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],af.prototype,"type",void 0),af=u([T("esri.symbols.Symbol3DLayer")],af);const Ia=af;function Mbe(e,t){const r=t.transparency!=null?b1(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new Q([i[0]||0,i[1]||0,i[2]||0,r]):null}function Ibe(e,t){t.color=e.toJSON().slice(0,3);const r=J$(e.a);r!==0&&(t.transparency=r)}function Jc(e){return{type:Q,nonNullable:e==null?void 0:e.nonNullable,json:{type:[Xe],default:null,read:{source:["color","transparency"],reader:Mbe},write:{target:{color:{type:[Xe],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:Xe}},writer:Ibe}}}}const Ea={type:Number,cast:qe,json:{write:!0}};let $d=class extends G{constructor(t){super(t),this.color=new Q([0,0,0,1]),this.extensionLength=0,this.size=An(1)}clone(){}cloneProperties(){return{color:O(this.color),size:this.size,extensionLength:this.extensionLength}}};u([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],$d.prototype,"type",void 0),u([d(Jc({colorRequiredOnWrite:!0}))],$d.prototype,"color",void 0),u([d({...Ea,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],$d.prototype,"extensionLength",void 0),u([d(Ea)],$d.prototype,"size",void 0),$d=u([T("esri.symbols.edges.Edges3D")],$d);const JN=$d;var uL;let c2=uL=class extends JN{constructor(e){super(e),this.type="sketch"}clone(){return new uL(this.cloneProperties())}};u([ve({sketch:"sketch"},{readOnly:!0})],c2.prototype,"type",void 0),c2=uL=u([T("esri.symbols.edges.SketchEdges3D")],c2);const Cbe=c2;var cL;let d2=cL=class extends JN{constructor(e){super(e),this.type="solid"}clone(){return new cL(this.cloneProperties())}};u([ve({solid:"solid"},{readOnly:!0})],d2.prototype,"type",void 0),d2=cL=u([T("esri.symbols.edges.SolidEdges3D")],d2);const zJ=d2,UJ={types:{key:"type",base:JN,typeMap:{solid:zJ,sketch:Cbe}},json:{write:!0}};var dL;let bn=dL=class extends G{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?vN(this.emissiveFactor):null};return new dL(e)}};u([d(Jc())],bn.prototype,"color",void 0),u([d({type:[Number],json:{write:!1}})],bn.prototype,"emissiveFactor",void 0),bn=dL=u([T("esri.symbols.support.Symbol3DMaterial")],bn);var hL;let mu=hL=class extends Ia{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new hL({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};u([ve({Extrude:"extrude"},{readOnly:!0})],mu.prototype,"type",void 0),u([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],mu.prototype,"size",void 0),u([d({type:bn,json:{write:!0}})],mu.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],mu.prototype,"castShadows",void 0),u([d(UJ)],mu.prototype,"edges",void 0),mu=hL=u([T("esri.symbols.ExtrudeSymbol3DLayer")],mu);const BJ=mu;let h2=class extends G{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],h2.prototype,"type",void 0),h2=u([T("esri.symbols.patterns.LinePattern3D")],h2);const GJ=h2,Lbe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var pL;const Abe=ei()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let c0=pL=class extends GJ{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new pL(e)}};u([d({type:["style"],json:{write:{isRequired:!0}}})],c0.prototype,"type",void 0),u([ve(Abe),d({type:Lbe,json:{write:{isRequired:!0}}})],c0.prototype,"style",void 0),c0=pL=u([T("esri.symbols.patterns.LineStylePattern3D")],c0);const YN=c0;let p2=class extends G{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],p2.prototype,"type",void 0),p2=u([T("esri.symbols.patterns.Pattern3D")],p2);const qJ=p2,kbe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var fL;let d0=fL=class extends qJ{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new fL({style:this.style})}};u([d({type:["style"],json:{write:{isRequired:!0}}})],d0.prototype,"type",void 0),u([d({type:kbe,json:{read:!0,write:{isRequired:!0}}})],d0.prototype,"style",void 0),d0=fL=u([T("esri.symbols.patterns.StylePattern3D")],d0);const HJ=d0,Rbe={types:{key:"type",base:qJ,typeMap:{style:HJ}},json:{write:!0}},WJ={types:{key:"type",base:GJ,typeMap:{style:YN}},json:{write:!0}},Ev=new Q("white"),Obe=new Q([255,255,255,0]);function Nbe(e){return e.r===0&&e.g===0&&e.b===0}var mL;let Tv=mL=class extends bn{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?vN(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new mL(e)}};u([ve({multiply:"multiply",replace:"replace",tint:"tint"})],Tv.prototype,"colorMixMode",void 0),Tv=mL=u([T("esri.symbols.support.Symbol3DFillMaterial")],Tv);function Pbe(e,t=!1){return e<=KB?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function CVe(e){return(wle(e)?e.byteLength/8:e.length)<=KB?Array.from(e):new Float64Array(e)}function LVe(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function Iw(e=Vbe){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function QN(e,t,r,i,n,s,o=Iw()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function AVe(e,t=Iw()){return Dbe(e,0,e.length/3,t)}function Dbe(e,t,r,i=Iw()){return ZJ(i,yL),Fbe(i,e,t,r),i}function kVe(e,t=Pbe(24)){const[r,i,n,s,o,a]=e;return t[0]=r,t[1]=i,t[2]=n,t[3]=r,t[4]=i,t[5]=a,t[6]=r,t[7]=o,t[8]=n,t[9]=r,t[10]=o,t[11]=a,t[12]=s,t[13]=i,t[14]=n,t[15]=s,t[16]=i,t[17]=a,t[18]=s,t[19]=o,t[20]=n,t[21]=s,t[22]=o,t[23]=a,t}function RVe(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new bt(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function OVe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function NVe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function PVe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Fbe(e,t,r=0,i=t.length/3){let n=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5];for(let h=0;h<i;h++)n=Math.min(n,t[r+3*h]),s=Math.min(s,t[r+3*h+1]),o=Math.min(o,t[r+3*h+2]),a=Math.max(a,t[r+3*h]),l=Math.max(l,t[r+3*h+1]),c=Math.max(c,t[r+3*h+2]);e[0]=n,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=c}function DVe(e,t,r){const i=t.length;let n=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5];if(r)for(let h=0;h<i;h++){const f=t[h];n=Math.min(n,f[0]),s=Math.min(s,f[1]),o=Math.min(o,f[2]),a=Math.max(a,f[0]),l=Math.max(l,f[1]),c=Math.max(c,f[2])}else for(let h=0;h<i;h++){const f=t[h];n=Math.min(n,f[0]),s=Math.min(s,f[1]),a=Math.max(a,f[0]),l=Math.max(l,f[1])}e[0]=n,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=c}function FVe(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function Cw(e){return e[0]>=e[3]?0:e[3]-e[0]}function Lw(e){return e[1]>=e[4]?0:e[4]-e[1]}function Aw(e){return e[2]>=e[5]?0:e[5]-e[2]}function jVe(e){const t=Cw(e),r=Aw(e),i=Lw(e);return Math.sqrt(t*t+r*r+i*i)}function VVe(e,t=[0,0,0]){return t[0]=e[0]+Cw(e)/2,t[1]=e[1]+Lw(e)/2,t[2]=e[2]+Aw(e)/2,t}function zVe(e,t=[0,0,0]){return t[0]=Cw(e),t[1]=Lw(e),t[2]=Aw(e),t}function UVe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function jbe(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function BVe(e,t){return t==null||jbe(e,t)}function GVe(e,t,r,i,n=e){return n[0]=e[0]+t,n[1]=e[1]+r,n[2]=e[2]+i,n[3]=e[3]+t,n[4]=e[4]+r,n[5]=e[5]+i,n}function qVe(e,t,r=e){const i=e[0]+Cw(e)/2,n=e[1]+Lw(e)/2,s=e[2]+Aw(e)/2;return r[0]=i+(e[0]-i)*t,r[1]=n+(e[1]-n)*t,r[2]=s+(e[2]-s)*t,r[3]=i+(e[3]-i)*t,r[4]=n+(e[4]-n)*t,r[5]=s+(e[5]-s)*t,r}function HVe(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function WVe(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function ZVe(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function ZJ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function JVe(e){return e?ZJ(e,yL):Iw(yL)}function YVe(e,t){return t||(t=Wi()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function QVe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function KVe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function Bj(e){return e.length===6}function XVe(e){return Cw(e)===0&&Lw(e)===0&&Aw(e)===0}function e9e(e,t,r){if(e==null||t==null)return e===t;if(!Bj(e)||!Bj(t))return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const yL=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Vbe=[0,0,0,0,0,0];Iw();function t9e(e,{isPrimitive:t,width:r,depth:i,height:n}){const s=t?10:1;if(r==null&&n==null&&i==null)return[s*e[0],s*e[1],s*e[2]];const o=zy(r,i,n);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const zbe=QN(-.5,-.5,-.5,.5,.5,.5),Ube=QN(-.5,-.5,0,.5,.5,1),Bbe=QN(-.5,-.5,0,.5,.5,.5);function r9e(e){switch(e){case"sphere":case"cube":case"diamond":return zbe;case"cylinder":case"cone":case"inverted-cone":return Ube;case"tetrahedron":return Bbe;default:return}}const KN=["butt","square","round"],Gbe=[...KN,"none"],JJ=["miter","bevel","round"];var gL;let Ed=gL=class extends G{constructor(e){super(e),this.color=new Q([0,0,0,1]),this.size=An(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new gL(e)}};u([d(Jc({colorRequiredOnWrite:!0}))],Ed.prototype,"color",void 0),u([d({...Ea,json:{write:{isRequired:!0}}})],Ed.prototype,"size",void 0),u([d(WJ)],Ed.prototype,"pattern",void 0),u([d({type:KN,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Ed.prototype,"patternCap",void 0),Ed=gL=u([T("esri.symbols.support.Symbol3DOutline")],Ed);var f2;let qa=f2=class extends Ia{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new f2(e)}static fromSimpleFillSymbol(e){var i,n,s;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new YN({style:e.outline.style}):null,r={size:((i=e.outline)==null?void 0:i.width)??0,color:(((n=e.outline)==null?void 0:n.color)??Ev).clone(),pattern:t};return t&&((s=e.outline)!=null&&s.cap)&&(r.patternCap=e.outline.cap),new f2({material:new Tv({color:(e.color??Obe).clone()}),pattern:e.style&&e.style!=="solid"?new HJ({style:e.style}):null,outline:r})}};u([ve({Fill:"fill"},{readOnly:!0})],qa.prototype,"type",void 0),u([d({type:Tv,json:{write:!0}})],qa.prototype,"material",void 0),u([d(Rbe)],qa.prototype,"pattern",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],qa.prototype,"castShadows",void 0),u([d({type:Ed,json:{write:!0}})],qa.prototype,"outline",void 0),u([d(UJ)],qa.prototype,"edges",void 0),qa=f2=u([T("esri.symbols.FillSymbol3DLayer")],qa);const wp=qa;var vL;const qbe=ei()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Td=vL=class extends G{constructor(e){super(e)}readHref(e,t,r){return e?Ec(e,r):t.dataURI}writeHref(e,t,r,i){e&&(pp(e)?t.dataURI=e:(t.href=yw(e,i),Yn(t.href)&&(t.href=Co(t.href))))}clone(){return new vL({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Td.prototype,"href",void 0),u([J("href")],Td.prototype,"readHref",null),u([te("href",{href:{type:String},dataURI:{type:String}})],Td.prototype,"writeHref",null),u([ve(qbe)],Td.prototype,"primitive",void 0),Td=vL=u([T("esri.symbols.support.IconSymbol3DLayerResource")],Td);const Hbe="circle";var wL;let sm=wL=class extends ce{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new wL({x:this.x,y:this.y})}};u([d({type:Number})],sm.prototype,"x",void 0),u([d({type:Number})],sm.prototype,"y",void 0),sm=wL=u([T("esri.symbols.support.Symbol3DAnchorPosition2D")],sm);var bL;let h0=bL=class extends G{constructor(e){super(e),this.color=new Q([0,0,0,1]),this.size=An(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new bL(e)}};u([d(Jc({colorRequiredOnWrite:!0}))],h0.prototype,"color",void 0),u([d({...Ea,json:{write:{isRequired:!0}}})],h0.prototype,"size",void 0),h0=bL=u([T("esri.symbols.support.Symbol3DIconOutline")],h0);var lf;const YJ="esri.symbols.IconSymbol3DLayer";let to=lf=class extends Ia{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new lf({anchor:this.anchor,anchorPosition:O(this.anchorPosition),enabled:this.enabled,material:O(this.material),outline:O(this.outline),resource:O(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Ev,r=Gj(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Ev).clone()}:null;return new lf({size:e.size,angle:e.angle,resource:{primitive:Zbe(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||Nbe(e.color)?Ev:e.color,r=Gj(e);return new lf({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new lf({resource:{href:dq({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};u([d({type:bn,json:{write:!0}})],to.prototype,"material",void 0),u([d({type:Td,json:{write:!0}})],to.prototype,"resource",void 0),u([ve({Icon:"icon"},{readOnly:!0})],to.prototype,"type",void 0),u([d({...Ea,json:{write:{isRequired:!0}}})],to.prototype,"size",void 0),u([ve({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],to.prototype,"anchor",void 0),u([d({type:sm,json:{type:[Number],read:{reader:e=>new sm({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],to.prototype,"anchorPosition",void 0),u([d({type:h0,json:{write:!0}})],to.prototype,"outline",void 0),u([d({type:Number,json:{write:!0,default:0}})],to.prototype,"angle",void 0),to=lf=u([T(YJ)],to);const $h=to;function Gj(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=qj(e.xoffset),n=qj(e.yoffset);return(i||n)&&t&&r?{x:-i/t,y:n/r}:null}function qj(e){return isFinite(e)?e:0}const Wbe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Zbe(e){return Wbe[e]||(W.getLogger(YJ).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Jbe=["begin","end","begin-end"],QJ=["arrow","circle","square","diamond","cross","x"];let Md=class extends Be.ClonableMixin(G){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Md.prototype,"type",void 0),u([d({type:Jbe,json:{default:"begin-end",write:!0}})],Md.prototype,"placement",void 0),u([d({type:QJ,json:{default:"arrow",write:!0}})],Md.prototype,"style",void 0),u([d({type:Q,json:{type:[Xe],default:null,write:!0}})],Md.prototype,"color",void 0),Md=u([T("esri.symbols.LineStyleMarker3D")],Md);const _L=Md;var m2;let qo=m2=class extends Ia{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=An(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new m2(e)}static fromSimpleLineSymbol(e){var r;const t={enabled:!0,size:e.width??An(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new YN({style:e.style}):null,material:new bn({color:(e.color||Ev).clone()}),marker:e.marker?new _L({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new m2(t)}};u([d({type:bn,json:{write:!0}})],qo.prototype,"material",void 0),u([ve({Line:"line"},{readOnly:!0})],qo.prototype,"type",void 0),u([d({type:JJ,json:{write:!0,default:"miter"}})],qo.prototype,"join",void 0),u([d({type:KN,json:{write:!0,default:"butt"}})],qo.prototype,"cap",void 0),u([d({...Ea,json:{write:{isRequired:!0}}})],qo.prototype,"size",void 0),u([d(WJ)],qo.prototype,"pattern",void 0),u([d({types:{key:"type",base:_L,typeMap:{style:_L}},json:{write:!0}})],qo.prototype,"marker",void 0),qo=m2=u([T("esri.symbols.LineSymbol3DLayer")],qo);const Uy=qo;var xL;const Ybe=ei()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let p0=xL=class extends G{clone(){return new xL({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{read:VO,write:Yh}})],p0.prototype,"href",void 0),u([ve(Ybe)],p0.prototype,"primitive",void 0),p0=xL=u([T("esri.symbols.support.ObjectSymbol3DLayerResource")],p0);const Qbe="sphere";var SL;let ph=SL=class extends ce{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new SL({x:this.x,y:this.y,z:this.z})}};u([d({type:Number})],ph.prototype,"x",void 0),u([d({type:Number})],ph.prototype,"y",void 0),u([d({type:Number})],ph.prototype,"z",void 0),ph=SL=u([T("esri.symbols.support.Symbol3DAnchorPosition3D")],ph);var $L;let vi=$L=class extends Ia{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,r;return new $L({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};u([d({type:bn,json:{write:!0}})],vi.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],vi.prototype,"castShadows",void 0),u([d({type:p0,json:{write:!0}})],vi.prototype,"resource",void 0),u([ve({Object:"object"},{readOnly:!0})],vi.prototype,"type",void 0),u([d({type:Number,json:{write:!0}})],vi.prototype,"width",void 0),u([d({type:Number,json:{write:!0}})],vi.prototype,"height",void 0),u([d({type:Number,json:{write:!0}})],vi.prototype,"depth",void 0),u([ve({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],vi.prototype,"anchor",void 0),u([d({type:ph,json:{type:[Number],read:{reader:e=>new ph({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],vi.prototype,"anchorPosition",void 0),u([d({type:Number,json:{write:!0}})],vi.prototype,"heading",void 0),u([d({type:Number,json:{write:!0}})],vi.prototype,"tilt",void 0),u([d({type:Number,json:{write:!0}})],vi.prototype,"roll",void 0),u([d({readOnly:!0})],vi.prototype,"isPrimitive",null),vi=$L=u([T("esri.symbols.ObjectSymbol3DLayer")],vi);const XN=vi;var EL;let Fi=EL=class extends Ia{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new EL({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};u([d({type:bn,json:{write:!0}})],Fi.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Fi.prototype,"castShadows",void 0),u([ve({Path:"path"},{readOnly:!0})],Fi.prototype,"type",void 0),u([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],Fi.prototype,"profile",void 0),u([d({type:JJ,json:{write:!0,default:"miter"}})],Fi.prototype,"join",void 0),u([d({type:Gbe,json:{write:!0,default:"butt"}})],Fi.prototype,"cap",void 0),u([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Fi.prototype,"width",void 0),u([J("width",["width","size","height"])],Fi.prototype,"readWidth",null),u([d({type:Number,json:{write:!0}})],Fi.prototype,"height",void 0),u([J("height",["height","size","width"])],Fi.prototype,"readHeight",null),u([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Fi.prototype,"anchor",void 0),u([d({type:["heading","all"],json:{write:!0,default:"all"}})],Fi.prototype,"profileRotation",void 0),Fi=EL=u([T("esri.symbols.PathSymbol3DLayer")],Fi);const eP=Fi,Kbe=["none","underline","line-through"],Xbe=["normal","italic","oblique"],e_e=["normal","lighter","bold","bolder"],KJ={type:Number,cast:e=>{const t=qi(e);return t===0?1:Cn(t,.1,4)},nonNullable:!0},t_e=["left","right","center"],r_e=["baseline","top","middle","bottom"],XJ={type:t_e,nonNullable:!0},eY={type:r_e,nonNullable:!0},n9e=8;var TL;let Ha=TL=class extends G{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return qe(e)}clone(){return new TL({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([d({type:Kbe,json:{default:"none",write:!0}})],Ha.prototype,"decoration",void 0),u([d({type:String,json:{write:!0}})],Ha.prototype,"family",void 0),u([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Ha.prototype,"size",void 0),u([He("size")],Ha.prototype,"castSize",null),u([d({type:Xbe,json:{default:"normal",write:!0}})],Ha.prototype,"style",void 0),u([d({type:e_e,json:{default:"normal",write:!0}})],Ha.prototype,"weight",void 0),Ha=TL=u([T("esri.symbols.Font")],Ha);const pE=Ha;var ML;let om=ML=class extends G{constructor(){super(...arguments),this.color=new Q([0,0,0,1]),this.size=0}clone(){const e={color:O(this.color),size:this.size};return new ML(e)}};u([d(Jc())],om.prototype,"color",void 0),u([d(Ea)],om.prototype,"size",void 0),om=ML=u([T("esri.symbols.support.Symbol3DHalo")],om);let Mv=class extends Be.ClonableMixin(G){constructor(t){super(t),this.color=null}};u([d(Jc())],Mv.prototype,"color",void 0),Mv=u([T("esri.symbols.support.Symbol3DTextBackground")],Mv);var y2;let nn=y2=class extends Ia{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const n={...i,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new y2({enabled:this.enabled,font:this.font&&O(this.font),halo:this.halo&&O(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:O(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new y2({font:e.font!=null?e.font.clone():new pE,halo:i_e(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new bn({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Mv({color:e.backgroundColor.clone()}):null})}};function i_e(e,t){return e&&t!=null&&t>0?new om({color:O(e),size:t}):null}u([d({type:pE,json:{write:!0}})],nn.prototype,"font",null),u([te("font")],nn.prototype,"writeFont",null),u([d({type:om,json:{write:!0}})],nn.prototype,"halo",void 0),u([d({...XJ,json:{default:"center",write:!0}})],nn.prototype,"horizontalAlignment",void 0),u([d({...KJ,json:{default:1,write:!0}})],nn.prototype,"lineHeight",void 0),u([d({type:bn,json:{write:!0}})],nn.prototype,"material",void 0),u([d({type:Mv,json:{write:!0}})],nn.prototype,"background",void 0),u([d(Ea)],nn.prototype,"size",null),u([d({type:String,json:{write:!0}})],nn.prototype,"text",void 0),u([ve({Text:"text"},{readOnly:!0})],nn.prototype,"type",void 0),u([d({...eY,json:{default:"baseline",write:!0}})],nn.prototype,"verticalAlignment",void 0),nn=y2=u([T("esri.symbols.TextSymbol3DLayer")],nn);const By=nn;var IL;let yu=IL=class extends Ia{constructor(e){super(e),this.color=CL.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new IL({color:O(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};u([d({type:Q,nonNullable:!0,json:{type:[Xe],write:(e,t,r)=>t[r]=e.toArray(Q.AlphaMode.UNLESS_OPAQUE),default:()=>CL.clone(),defaultEquals:e=>e.toCss(!0)===CL.toCss(!0)}})],yu.prototype,"color",void 0),u([ve({Water:"water"},{readOnly:!0})],yu.prototype,"type",void 0),u([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],yu.prototype,"waterbodySize",void 0),u([d({type:Number,json:{write:!0,default:null}})],yu.prototype,"waveDirection",void 0),u([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],yu.prototype,"waveStrength",void 0),yu=IL=u([T("esri.symbols.WaterSymbol3DLayer")],yu);const tY=yu,CL=new Q([0,119,190]);var LL;let Id=LL=class extends ce{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new LL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([d({type:String})],Id.prototype,"name",void 0),u([d({type:String})],Id.prototype,"styleUrl",void 0),u([d({type:String})],Id.prototype,"styleName",void 0),u([d({type:Ai})],Id.prototype,"portal",void 0),Id=LL=u([T("esri.symbols.support.StyleOrigin")],Id);const I1=Id;var AL;let Vh=AL=class extends ce{constructor(){super(...arguments),this.url=""}clone(){return new AL({url:this.url})}};u([d({type:String})],Vh.prototype,"url",void 0),Vh=AL=u([T("esri.symbols.support.Thumbnail")],Vh);const rY={icon:$h,object:XN,line:Uy,path:eP,fill:wp,extrude:BJ,text:By,water:tY},n_e=ie.ofType({base:Ia,key:"type",typeMap:rY,errorContext:"symbol-layer"});let Ho=class extends ci{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,n=i||ie;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&W.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){Dl(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const n=Ec(t.styleUrl,i);return new I1({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new I1({portal:(i==null?void 0:i.portal)||Ai.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new Os("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,n){if(t.styleUrl&&t.name){let s=yw(t.styleUrl,n);Yn(s)&&(s=Co(s)),r.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&(n!=null&&n.portal)&&!cq(t.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new Os("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Ia||t&&rY[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};u([d({json:{read:!1,write:!1}})],Ho.prototype,"color",null),u([d({type:n_e,nonNullable:!0,json:{write:!0}}),He(Iq)],Ho.prototype,"symbolLayers",null),u([d({type:I1})],Ho.prototype,"styleOrigin",void 0),u([J("styleOrigin")],Ho.prototype,"readStyleOrigin",null),u([te("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Ho.prototype,"writeStyleOrigin",null),u([d({type:Vh,json:{read:!1}})],Ho.prototype,"thumbnail",void 0),u([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Ho.prototype,"type",void 0),Ho=u([T("esri.symbols.Symbol3D")],Ho);const kw=Ho;let f0=class extends G{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};u([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],f0.prototype,"type",void 0),u([d({readOnly:!0})],f0.prototype,"visible",void 0),f0=u([T("esri.symbols.callouts.Callout3D")],f0);const iY=f0;var kL;let g2=kL=class extends G{constructor(e){super(e),this.color=new Q("white")}clone(){return new kL({color:O(this.color)})}};u([d(Jc({colorRequiredOnWrite:!0}))],g2.prototype,"color",void 0),g2=kL=u([T("esri.symbols.callouts.LineCallout3DBorder")],g2);const s_e=g2;var RL;let gu=RL=class extends iY{constructor(e){super(e),this.type="line",this.color=new Q([0,0,0,1]),this.size=An(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new RL({color:O(this.color),size:this.size,border:O(this.border)})}};u([ve({line:"line"})],gu.prototype,"type",void 0),u([d(Jc({colorRequiredOnWrite:!0}))],gu.prototype,"color",void 0),u([d({...Ea,json:{write:{isRequired:!0}}})],gu.prototype,"size",void 0),u([d({type:s_e,json:{write:!0}})],gu.prototype,"border",void 0),u([d({readOnly:!0})],gu.prototype,"visible",null),gu=RL=u([T("esri.symbols.callouts.LineCallout3D")],gu);const nY=gu;function tP(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function sY(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!tP(e)}function l9e(e){return e.type==="point-3d"||e.type==="label-3d"}function u9e(e){return e.horizontalAlignment==="center"}const oY={types:{key:"type",base:iY,typeMap:{line:nY}},json:{write:!0}};var OL;let uf=OL=class extends G{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new OL({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([d({...Ea,json:{write:{isRequired:!0}}})],uf.prototype,"screenLength",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],uf.prototype,"minWorldLength",void 0),u([d({type:Number,json:{write:!0}})],uf.prototype,"maxWorldLength",void 0),uf=OL=u([T("esri.symbols.support.Symbol3DVerticalOffset")],uf);const rP=uf;var v2;const aY=ie.ofType({base:null,key:"type",typeMap:{text:By}});let vu=v2=class extends kw{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new aY,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return sY(this)}hasVisibleVerticalOffset(){return tP(this)}clone(){return new v2({styleOrigin:O(this.styleOrigin),symbolLayers:O(this.symbolLayers),thumbnail:O(this.thumbnail),callout:O(this.callout),verticalOffset:O(this.verticalOffset)})}static fromTextSymbol(e){return new v2({symbolLayers:new ie([By.fromTextSymbol(e)])})}};u([d({type:rP,json:{write:!0}})],vu.prototype,"verticalOffset",void 0),u([d(oY)],vu.prototype,"callout",void 0),u([d({json:{read:!1,write:!1}})],vu.prototype,"styleOrigin",void 0),u([d({type:aY})],vu.prototype,"symbolLayers",void 0),u([ve({LabelSymbol3D:"label-3d"},{readOnly:!0})],vu.prototype,"type",void 0),vu=v2=u([T("esri.symbols.LabelSymbol3D")],vu);const fE=vu;var w2;const lY=ie.ofType({base:null,key:"type",typeMap:{line:Uy,path:eP}}),o_e=ie.ofType({base:null,key:"type",typeMap:{line:Uy,path:eP}});let m0=w2=class extends kw{constructor(e){super(e),this.symbolLayers=new lY,this.type="line-3d"}clone(){return new w2({styleOrigin:O(this.styleOrigin),symbolLayers:O(this.symbolLayers),thumbnail:O(this.thumbnail)})}static fromSimpleLineSymbol(e){return new w2({symbolLayers:new ie([Uy.fromSimpleLineSymbol(e)])})}};u([d({type:lY,json:{type:o_e}})],m0.prototype,"symbolLayers",void 0),u([ve({LineSymbol3D:"line-3d"},{readOnly:!0})],m0.prototype,"type",void 0),m0=w2=u([T("esri.symbols.LineSymbol3D")],m0);const bp=m0;var b2;const uY=ie.ofType({base:null,key:"type",typeMap:{fill:wp}});let y0=b2=class extends kw{constructor(e){super(e),this.symbolLayers=new uY,this.type="mesh-3d"}clone(){return new b2({styleOrigin:O(this.styleOrigin),symbolLayers:O(this.symbolLayers),thumbnail:O(this.thumbnail)})}static fromSimpleFillSymbol(e){return new b2({symbolLayers:new ie([wp.fromSimpleFillSymbol(e)])})}};u([d({type:uY})],y0.prototype,"symbolLayers",void 0),u([ve({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],y0.prototype,"type",void 0),y0=b2=u([T("esri.symbols.MeshSymbol3D")],y0);const Rw=y0;let g0=class extends ci{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([ve({esriSLS:"simple-line"},{readOnly:!0})],g0.prototype,"type",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],g0.prototype,"width",void 0),g0=u([T("esri.symbols.LineSymbol")],g0);const a_e=g0;var NL;let Wo=NL=class extends G{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new NL({color:O(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};u([d({type:["begin","end","begin-end"],json:{write:!0}})],Wo.prototype,"placement",void 0),u([ve({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],Wo.prototype,"type",void 0),u([d({type:QJ})],Wo.prototype,"style",void 0),u([te("style")],Wo.prototype,"writeStyle",null),u([d({type:Q,value:null,json:{write:{allowNull:!0}}})],Wo.prototype,"color",null),u([J("color")],Wo.prototype,"readColor",null),u([te("color")],Wo.prototype,"writeColor",null),Wo=NL=u([T("esri.symbols.LineSymbolMarker")],Wo);const l_e=Wo;var PL;const uM=new je({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Wa=PL=class extends a_e{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,n,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=qe(r)),i!=null&&(o.cap=i),n!=null&&(o.join=n),s!=null&&(o.miterLimit=qe(s)),o}clone(){var e;return new PL({color:O(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};u([ve({esriSLS:"simple-line"},{readOnly:!0})],Wa.prototype,"type",void 0),u([d({type:uM.apiValues,json:{read:uM.read,write:uM.write}})],Wa.prototype,"style",void 0),u([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Wa.prototype,"cap",void 0),u([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Wa.prototype,"join",void 0),u([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":l_e}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wa.prototype,"marker",void 0),u([d({type:Number,json:{read:!1,write:!1}})],Wa.prototype,"miterLimit",void 0),Wa=PL=u([T("esri.symbols.SimpleLineSymbol")],Wa);const en=Wa;let v0=class extends ci{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":en}},json:{default:null,write:!0}})],v0.prototype,"outline",void 0),u([d({type:["simple-fill","picture-fill"],readOnly:!0})],v0.prototype,"type",void 0),v0=u([T("esri.symbols.FillSymbol")],v0);const cY=v0;function u_e(e,t,r){return t.imageData?dq({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):dY(t.url,r)}function dY(e,t){if(!Yn(e)){const r=d_e(t);if(r)return oy(r,"images",e)}return Ec(e,t)}function c_e(e,t,r,i){if(pp(e)){const n=ay(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,r&&r.imageData===t.imageData&&r.url&&Yh(r.url,t,"url",i)}else Yh(e,t,"url",i)}const hY={json:{read:{source:["imageData","url"],reader:u_e},write:{writer(e,t,r,i){c_e(e,t,this.source,i)}}}},pY={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=dY(t.url,r)),i}}}};function d_e(e){var n,s;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(n=r.parsedUrl)==null?void 0:n.path:i==="map-image"||i==="tile"?(s=e.url)==null?void 0:s.path:null}var DL;let hs=DL=class extends cY{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),r!=null&&(n.width=qe(r)),i!=null&&(n.height=qe(i)),n}clone(){const e=new DL({color:O(this.color),height:this.height,outline:O(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",O(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([ve({esriPFS:"picture-fill"},{readOnly:!0})],hs.prototype,"type",void 0),u([d(hY)],hs.prototype,"url",void 0),u([d({type:Number,json:{write:!0}})],hs.prototype,"xscale",void 0),u([d({type:Number,json:{write:!0}})],hs.prototype,"yscale",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],hs.prototype,"width",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],hs.prototype,"height",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],hs.prototype,"xoffset",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],hs.prototype,"yoffset",void 0),u([d(pY)],hs.prototype,"source",void 0),hs=DL=u([T("esri.symbols.PictureFillSymbol")],hs);const iP=hs;let wu=class extends ci{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],wu.prototype,"angle",void 0),u([d({type:["simple-marker","picture-marker"],readOnly:!0})],wu.prototype,"type",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],wu.prototype,"xoffset",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],wu.prototype,"yoffset",void 0),u([d({cast:e=>e==="auto"?e:qi(qe(e)),json:{write:!0}})],wu.prototype,"size",void 0),wu=u([T("esri.symbols.MarkerSymbol")],wu);const fY=wu;var FL;let ro=FL=class extends fY{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=qe(t)),r!=null&&(i.height=qe(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new FL({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",O(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([d({json:{write:!1}})],ro.prototype,"color",void 0),u([ve({esriPMS:"picture-marker"},{readOnly:!0})],ro.prototype,"type",void 0),u([d(hY)],ro.prototype,"url",void 0),u([d(pY)],ro.prototype,"source",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],ro.prototype,"height",void 0),u([J("height",["height","size"])],ro.prototype,"readHeight",null),u([d({type:Number,cast:qe,json:{write:!0}})],ro.prototype,"width",void 0),u([d({json:{write:!1}})],ro.prototype,"size",void 0),ro=FL=u([T("esri.symbols.PictureMarkerSymbol")],ro);const Ow=ro;var Cd;const mY=ie.ofType({base:null,key:"type",typeMap:{icon:$h,object:XN,text:By}});let Ld=Cd=class extends kw{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new mY,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return sY(this)}hasVisibleVerticalOffset(){return tP(this)}clone(){return new Cd({verticalOffset:O(this.verticalOffset),callout:O(this.callout),styleOrigin:O(this.styleOrigin),symbolLayers:O(this.symbolLayers),thumbnail:O(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Cd({symbolLayers:new ie([$h.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Cd({symbolLayers:new ie([$h.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,n;if(((n=(i=e.data)==null?void 0:i.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new Cd(r!=null&&r.callout?{symbolLayers:new ie([$h.fromCIMSymbol(e)]),callout:new nY({size:.5,color:new Q([0,0,0])}),verticalOffset:new rP({screenLength:40})}:{symbolLayers:new ie([$h.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Cd({symbolLayers:new ie([By.fromTextSymbol(e)])})}};u([d({type:rP,json:{write:!0}})],Ld.prototype,"verticalOffset",void 0),u([d(oY)],Ld.prototype,"callout",void 0),u([d({type:mY,json:{origins:{"web-scene":{write:!0}}}})],Ld.prototype,"symbolLayers",void 0),u([ve({PointSymbol3D:"point-3d"},{readOnly:!0})],Ld.prototype,"type",void 0),Ld=Cd=u([T("esri.symbols.PointSymbol3D")],Ld);const $l=Ld;var w0;const yY=ie.ofType({base:null,key:"type",typeMap:{extrude:BJ,fill:wp,icon:$h,line:Uy,object:XN,text:By,water:tY}});let b0=w0=class extends kw{constructor(e){super(e),this.symbolLayers=new yY,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&l1(W.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&l1(W.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(En(()=>this.symbolLayers,"after-add",({item:t})=>e(t),xa))}clone(){return new w0({styleOrigin:O(this.styleOrigin),symbolLayers:O(this.symbolLayers),thumbnail:O(this.thumbnail)})}static fromJSON(e){var r;const t=new w0;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new w0({symbolLayers:new ie([wp.fromSimpleFillSymbol(e)])})}};u([d({type:yY,json:{write:!0}})],b0.prototype,"symbolLayers",void 0),u([ve({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],b0.prototype,"type",void 0),b0=w0=u([T("esri.symbols.PolygonSymbol3D")],b0);const Yc=b0;var jL;const cM=new je({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Ad=jL=class extends cY{constructor(...e){super(...e),this.color=new Q([0,0,0,.25]),this.outline=new en,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new jL({color:O(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([d()],Ad.prototype,"color",void 0),u([d()],Ad.prototype,"outline",void 0),u([ve({esriSFS:"simple-fill"},{readOnly:!0})],Ad.prototype,"type",void 0),u([d({type:cM.apiValues,json:{read:cM.read,write:cM.write}})],Ad.prototype,"style",void 0),Ad=jL=u([T("esri.symbols.SimpleFillSymbol")],Ad);const Ul=Ad;var VL;const dM=new je({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Zo=VL=class extends fY{constructor(...e){super(...e),this.color=new Q([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new en}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=qe(t)),r&&(n.outline=r),i&&(n.color=i),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new VL({angle:this.angle,color:O(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};u([d()],Zo.prototype,"color",void 0),u([te("color")],Zo.prototype,"writeColor",null),u([ve({esriSMS:"simple-marker"},{readOnly:!0})],Zo.prototype,"type",void 0),u([d()],Zo.prototype,"size",void 0),u([d({type:dM.apiValues,json:{read:dM.read,write:dM.write}})],Zo.prototype,"style",void 0),u([d({type:String,json:{write:!0}})],Zo.prototype,"path",null),u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":en}},json:{default:null,write:!0}})],Zo.prototype,"outline",void 0),Zo=VL=u([T("esri.symbols.SimpleMarkerSymbol")],Zo);const Ci=Zo;var zL;let kt=zL=class extends ci{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new pE,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return qe(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new zL({angle:this.angle,backgroundColor:O(this.backgroundColor),borderLineColor:O(this.borderLineColor),borderLineSize:this.borderLineSize,color:O(this.color),font:this.font&&this.font.clone(),haloColor:O(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([d({type:Q,json:{write:!0}})],kt.prototype,"backgroundColor",void 0),u([d({type:Q,json:{write:!0}})],kt.prototype,"borderLineColor",void 0),u([d({type:Number,json:{write:!0},cast:qe})],kt.prototype,"borderLineSize",void 0),u([d({type:pE,json:{write:!0}})],kt.prototype,"font",void 0),u([d({...XJ,json:{write:!0}})],kt.prototype,"horizontalAlignment",void 0),u([d({type:Boolean,json:{write:!0}})],kt.prototype,"kerning",void 0),u([d({type:Q,json:{write:!0}})],kt.prototype,"haloColor",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],kt.prototype,"haloSize",void 0),u([d({type:Boolean,json:{write:!0}})],kt.prototype,"rightToLeft",void 0),u([d({type:Boolean,json:{write:!0}})],kt.prototype,"rotated",void 0),u([d({type:String,json:{write:!0}})],kt.prototype,"text",void 0),u([ve({esriTS:"text"},{readOnly:!0})],kt.prototype,"type",void 0),u([d({...eY,json:{write:!0}})],kt.prototype,"verticalAlignment",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],kt.prototype,"xoffset",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],kt.prototype,"yoffset",void 0),u([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],kt.prototype,"angle",void 0),u([d({type:Number,json:{write:!0}})],kt.prototype,"width",void 0),u([d({type:Number})],kt.prototype,"lineWidth",void 0),u([te("lineWidth")],kt.prototype,"writeLineWidth",null),u([He("lineWidth")],kt.prototype,"castLineWidth",null),u([d(KJ)],kt.prototype,"lineHeight",void 0),u([te("lineHeight")],kt.prototype,"writeLineHeight",null),kt=zL=u([T("esri.symbols.TextSymbol")],kt);const Gy=kt;var UL;let io=UL=class extends ci{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:Ai.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new UL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){const t=e&&"acceptedFormats"in e?e.acceptedFormats:["web"];return this._fetchSymbol({...e,acceptedFormats:t})}async fetchCIMSymbol(e){const t=await this.fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new N("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,r=t?this._fetchCacheKey:null;if(t!=null){const o=r&&t.get(r);if(o)return o.clone()}const{resolveWebStyleSymbol:i}=await B(()=>Promise.resolve().then(()=>A5e),void 0);Ht(e);const n=i(this,{portal:this.portal},e);n.catch(o=>{W.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const s=await n;return t!=null&&t.set(r,s.clone()),s}};u([d({json:{write:!1}})],io.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],io.prototype,"styleName",void 0),u([d({type:Ai,json:{write:!1}})],io.prototype,"portal",void 0),u([d({type:String,json:{read:VO,write:Yh}})],io.prototype,"styleUrl",void 0),u([d({type:Vh,json:{read:!1}})],io.prototype,"thumbnail",void 0),u([d({type:String,json:{write:!0}})],io.prototype,"name",void 0),u([ve({styleSymbolReference:"web-style"},{readOnly:!0})],io.prototype,"type",void 0),u([d()],io.prototype,"_fetchCacheKey",null),io=UL=u([T("esri.symbols.WebStyleSymbol")],io);const Ac=io;function mE(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Ca(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const ic={base:ci,key:"type",typeMap:{"simple-fill":Ul,"picture-fill":iP,"picture-marker":Ow,"simple-line":en,"simple-marker":Ci,text:Gy,"label-3d":fE,"line-3d":bp,"mesh-3d":Rw,"point-3d":$l,"polygon-3d":Yc,"web-style":Ac,cim:Zc},errorContext:"symbol"},p9e={base:ci,key:"type",typeMap:{"picture-marker":Ow,"simple-marker":Ci,"point-3d":$l,cim:Zc},errorContext:"symbol"},f9e={base:ci,key:"type",typeMap:{"simple-line":en,"line-3d":bp,cim:Zc},errorContext:"symbol"},m9e={base:ci,key:"type",typeMap:{"simple-fill":Ul,"picture-fill":iP,"polygon-3d":Yc,cim:Zc},errorContext:"symbol"},h_e={base:ci,key:"type",typeMap:{"picture-marker":Ow,"simple-marker":Ci,text:Gy,"web-style":Ac,cim:Zc},errorContext:"symbol"},p_e=Ry({types:ic}),gY={base:ci,key:"type",typeMap:{"simple-fill":Ul,"picture-fill":iP,"picture-marker":Ow,"simple-line":en,"simple-marker":Ci,text:Gy,"line-3d":bp,"mesh-3d":Rw,"point-3d":$l,"polygon-3d":Yc,"web-style":Ac,cim:Zc},errorContext:"symbol"},f_e={base:ci,key:"type",typeMap:{text:Gy,"label-3d":fE},errorContext:"symbol"},Hj={base:ci,key:"type",typeMap:{"line-3d":bp,"mesh-3d":Rw,"point-3d":$l,"polygon-3d":Yc,"web-style":Ac,cim:Zc},errorContext:"symbol"},m_e={base:ci,key:"type",typeMap:{"label-3d":fE},errorContext:"symbol"},vY=Oo(ic);var BL;function y_e(e){if(!e)return null;const t={};for(const r in e){const i=sp(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function g_e(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let sn=BL=class extends Be.ClonableMixin(G){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:O_(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Ale(W.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new BL({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:g_e(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:G.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(n.action=i),e==="attributes"&&(n.attributeName=i),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([Ln(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Ln(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};u([d({value:null,json:{read:y_e}})],sn.prototype,"aggregateGeometries",null),u([d({value:null})],sn.prototype,"attributes",null),u([d({value:null,types:$w,json:{read:sp}})],sn.prototype,"geometry",null),u([d({type:Boolean})],sn.prototype,"isAggregate",void 0),u([d({clonable:"reference"})],sn.prototype,"layer",void 0),u([d({clonable:"reference"})],sn.prototype,"origin",void 0),u([d({type:vp})],sn.prototype,"popupTemplate",void 0),u([d({clonable:"reference"})],sn.prototype,"sourceLayer",void 0),u([d({value:null,types:ic})],sn.prototype,"symbol",null),u([d({clonable:!1,json:{read:!1,write:!1}})],sn.prototype,"_version",void 0),u([d({type:Boolean,value:!0})],sn.prototype,"visible",null),sn=BL=u([T("esri.Graphic")],sn);const kc=sn;let Iv=class extends Sv{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};u([BO({Type:kc,ensureType:Er(kc)})],Iv.prototype,"itemType",void 0),Iv=u([T("esri.support.GraphicsCollection")],Iv);let bu=class extends ce{constructor(t){super(t),this.view=null,this.baseLayerViews=new ie,this.referenceLayerViews=new ie,this._loadingHandle=ee(()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap},r=>{r&&r.load().catch(()=>{})},Ye)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){var t;return((t=this.view)==null?void 0:t.suspended)??!0}get updating(){var r,i,n;if((r=this.view)!=null&&r.suspended)return!1;const t=(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap;return!!(t!=null&&t.loaded)&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};u([d({constructOnly:!0})],bu.prototype,"view",void 0),u([d({readOnly:!0})],bu.prototype,"baseLayerViews",void 0),u([d({readOnly:!0})],bu.prototype,"referenceLayerViews",void 0),u([d({readOnly:!0})],bu.prototype,"suspended",null),u([d({type:Boolean,readOnly:!0})],bu.prototype,"updating",null),bu=u([T("esri.views.BasemapView")],bu);const v_e=bu;function w_e(e){return"tryRecycleWith"in e}function b_e(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let __e=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=es(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ls(this._controller.signal,()=>{const n=new N("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}tryRecycle(t){if(!this.done||!this.layerView||!w_e(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let n=0;n<t.length;n++){const s=t[n];if(s.type!==r)continue;const o=this.layerView.tryRecycleWith(s,{signal:i});if(o){t.splice(n,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(Ht(this._controller.signal),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((c,h)=>Ls(this._controller.signal,()=>h(Tt())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,s;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let o,a;if(await r.load({signal:t}),r.prefetchResources&&await r.prefetchResources({signal:t}),S_e(r))o=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new N("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(r);Ht(t),o="default"in h?new h.default({layer:r,view:i}):new h({layer:r,view:i})}const l=()=>{a=Ft(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=Ls(t,l),Ht(t);try{await o.when()}catch(h){throw l(),h}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return l(),void this._deferred.reject(new N("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new N("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}},ps=class extends ce{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new jh,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const r=(i=this.view.map)==null?void 0:i.allLayers;if(r)for(const n of r)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=es(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(hw(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,c,h;if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,n=[],s=this.view.ready,o=f=>{if(f!=null){for(const m of f)if(m){i.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&s?y.start():y||this._recyclingInfoMap.has(m)||n.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const f of this._rootCollectionNames)o(Hi(this,f));for(const[f,m]of this._layerLayerViewInfoMap)if(!i.has(f)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(n);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[f,m]of this._recyclingInfoMap)i.has(f)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const f of n)this._createLayerView(f);this._refreshCollections();const a=[(l=r==null?void 0:r.ground)==null?void 0:l.layers,(c=r==null?void 0:r.basemap)==null?void 0:c.baseLayers,(h=r==null?void 0:r.basemap)==null?void 0:h.referenceLayers,r==null?void 0:r.layers].filter(f=>!!f);i.forEach(f=>"layers"in f&&a.push(f.layers)),this.addHandles(a.map(f=>this._watchUpdatingTracking.addOnCollectionChange(()=>f,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([En(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ee(()=>{const t=this.view,r=t==null?void 0:t.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,t==null?void 0:t.ready]},()=>this._reschedule(),fn)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),YT(this._recyclingInfoMap),YT(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Tt()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Vue(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(YT(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new N("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){var s;this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!(i!=null&&i.done))return!0;const n=i.layerView;return!(!n||!r||n.parent===r)||!!(i.done&&n&&"layers"in t&&((s=t.layers)!=null&&s.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,n))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(Hi(this,t),Hi(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r&&r.removeAll());let n=0;for(const s of t){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=i,r.at(n)!==a&&r.splice(n,0,a),"layers"in s&&b_e(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<r.length&&r.splice(n,r.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new __e(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),i=>{i&&(Ri(i)||i.name==="cancelled:layerview-create")||W.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([d()],ps.prototype,"_workPromise",void 0),u([d({readOnly:!0})],ps.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],ps.prototype,"_layersToLayerViews",null),u([d({readOnly:!0})],ps.prototype,"_rootCollectionNames",null),u([d()],ps.prototype,"layerViewImporter",void 0),u([d()],ps.prototype,"supportsGround",void 0),u([d({readOnly:!0})],ps.prototype,"updating",null),u([d({readOnly:!0})],ps.prototype,"updatingRemaining",null),u([d({constructOnly:!0})],ps.prototype,"view",void 0),ps=u([T("esri.views.LayerViewManager")],ps);const x_e=ps;function S_e(e){return e.createLayerView!==eE.prototype.createLayerView}let Dn=class extends ce{constructor(t){super(t),this.factor=1.5,this.offset=Yr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([d({type:Number})],Dn.prototype,"factor",void 0),u([d({nonNullable:!0})],Dn.prototype,"offset",void 0),u([d()],Dn.prototype,"position",void 0),u([d({type:Number,range:{min:0}})],Dn.prototype,"size",void 0),u([d()],Dn.prototype,"maskUrl",void 0),u([d()],Dn.prototype,"maskEnabled",void 0),u([d()],Dn.prototype,"overlayUrl",void 0),u([d()],Dn.prototype,"overlayEnabled",void 0),u([d({readOnly:!0})],Dn.prototype,"version",null),u([d({type:Boolean})],Dn.prototype,"visible",void 0),Dn=u([T("esri.views.Magnifier")],Dn);const wY=Dn;let km=class{constructor(t){this._observable=new gw,this._map=new Map(t)}get size(){return Se(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return Se(this._observable),this._map.entries()}forEach(t,r){Se(this._observable),this._map.forEach((i,n)=>t.call(r,i,n,this),r)}get(t){return Se(this._observable),this._map.get(t)}has(t){return Se(this._observable),this._map.has(t)}keys(){return Se(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return Se(this._observable),this._map.values()}[Symbol.iterator](){return Se(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var GL;let Eh=GL=class extends G{constructor(e){super(e),this.name=null,this.code=null}clone(){return new GL({name:this.name,code:this.code})}};u([d({type:String,json:{write:{isRequired:!0}}})],Eh.prototype,"name",void 0),u([d({type:[String,Number],json:{write:{isRequired:!0}}})],Eh.prototype,"code",void 0),Eh=GL=u([T("esri.layers.support.CodedValue")],Eh);const $_e=new je({inherited:"inherited",codedValue:"coded-value",range:"range"});let _0=class extends G{constructor(t){super(t),this.name=null,this.type=null}};u([d({type:String,json:{write:!0}})],_0.prototype,"name",void 0),u([ve($_e),d({json:{write:{isRequired:!0}}})],_0.prototype,"type",void 0),_0=u([T("esri.layers.support.Domain")],_0);const yE=_0;var qL;let x0=qL=class extends yE{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new qL({codedValues:O(this.codedValues),name:this.name})}};u([d({type:[Eh],json:{write:{isRequired:!0}}})],x0.prototype,"codedValues",void 0),u([ve({codedValue:"coded-value"})],x0.prototype,"type",void 0),x0=qL=u([T("esri.layers.support.CodedValueDomain")],x0);const gE=x0;var HL;let _2=HL=class extends yE{constructor(e){super(e),this.type="inherited"}clone(){return new HL}};u([ve({inherited:"inherited"})],_2.prototype,"type",void 0),_2=HL=u([T("esri.layers.support.InheritedDomain")],_2);const bY=_2;var WL;let cf=WL=class extends yE{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new WL({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};u([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]},isRequired:!0}}})],cf.prototype,"maxValue",void 0),u([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]},isRequired:!0}}})],cf.prototype,"minValue",void 0),u([ve({range:"range"})],cf.prototype,"type",void 0),cf=WL=u([T("esri.layers.support.RangeDomain")],cf);const _Y=cf,xY={key:"type",base:yE,typeMap:{range:_Y,"coded-value":gE,inherited:bY}};function vE(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return _Y.fromJSON(e);case"codedValue":return gE.fromJSON(e);case"inherited":return bY.fromJSON(e)}return null}const E_e=new je({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var ZL;const T_e=new je({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let wi=ZL=class extends G{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?T_e.fromJSON(r.fieldValueType):null}clone(){var e;return new ZL({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};u([d({type:String,json:{write:!0}})],wi.prototype,"alias",void 0),u([d({type:[String,Number],json:{write:{allowNull:!0}}})],wi.prototype,"defaultValue",void 0),u([d()],wi.prototype,"description",void 0),u([J("description")],wi.prototype,"readDescription",null),u([d({types:xY,json:{read:{reader:vE},write:!0}})],wi.prototype,"domain",void 0),u([d({type:Boolean,json:{write:!0}})],wi.prototype,"editable",void 0),u([d({type:Xe,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],wi.prototype,"length",void 0),u([d({type:String,json:{write:!0}})],wi.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0}})],wi.prototype,"nullable",void 0),u([ve(E_e)],wi.prototype,"type",void 0),u([d()],wi.prototype,"valueType",void 0),u([J("valueType",["description"])],wi.prototype,"readValueType",null),u([d({type:Boolean,json:{read:!1}})],wi.prototype,"visible",void 0),wi=ZL=u([T("esri.layers.support.Field")],wi);const wE=wi;var JL;let df=JL=class extends G{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new JL({mapLayerId:e,gdbVersion:t})}};u([ve({mapLayer:"map-layer"}),d({json:{write:{isRequired:!0}}})],df.prototype,"type",void 0),u([d({type:Xe,json:{write:{isRequired:!0}}})],df.prototype,"mapLayerId",void 0),u([d({type:String,json:{write:!0}})],df.prototype,"gdbVersion",void 0),df=JL=u([T("esri.layers.support.source.MapLayerSource")],df);var YL;let Za=YL=class extends G{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:n}=this,s={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:n};return new YL(s)}};u([ve({queryTable:"query-table"}),d({json:{write:{isRequired:!0}}})],Za.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Za.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],Za.prototype,"query",void 0),u([d({type:String,json:{write:!0}})],Za.prototype,"oidFields",void 0),u([d({type:Ie,json:{write:!0}})],Za.prototype,"spatialReference",void 0),u([ve(CN)],Za.prototype,"geometryType",void 0),Za=YL=u([T("esri.layers.support.source.QueryTableDataSource")],Za);var QL;let hf=QL=class extends G{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new QL({workspaceId:e,dataSourceName:t})}};u([ve({raster:"raster"}),d({json:{write:{isRequired:!0}}})],hf.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],hf.prototype,"dataSourceName",void 0),u([d({type:String,json:{write:!0}})],hf.prototype,"workspaceId",void 0),hf=QL=u([T("esri.layers.support.source.RasterDataSource")],hf);var KL;let kd=KL=class extends G{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new KL({workspaceId:e,gdbVersion:t,dataSourceName:r})}};u([ve({table:"table"}),d({json:{write:{isRequired:!0}}})],kd.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],kd.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],kd.prototype,"gdbVersion",void 0),u([d({type:String,json:{write:!0}})],kd.prototype,"dataSourceName",void 0),kd=KL=u([T("esri.layers.support.source.TableDataSource")],kd);var XL,eA;const M_e=ei()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Fn=XL=class extends G{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return Wj()(e,t,r)}castLeftTableSource(e){return Oo(tA(),e)}readRightTableSource(e,t,r){return Wj()(e,t,r)}castRightTableSource(e){return Oo(tA(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:n};return new XL(s)}};u([ve({joinTable:"join-table"}),d({json:{write:{isRequired:!0}}})],Fn.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Fn.prototype,"leftTableKey",void 0),u([d({type:String,json:{write:!0}})],Fn.prototype,"rightTableKey",void 0),u([d({json:{write:!0}})],Fn.prototype,"leftTableSource",void 0),u([J("leftTableSource")],Fn.prototype,"readLeftTableSource",null),u([He("leftTableSource")],Fn.prototype,"castLeftTableSource",null),u([d({json:{write:!0}})],Fn.prototype,"rightTableSource",void 0),u([J("rightTableSource")],Fn.prototype,"readRightTableSource",null),u([He("rightTableSource")],Fn.prototype,"castRightTableSource",null),u([ve(M_e)],Fn.prototype,"joinType",void 0),Fn=XL=u([T("esri.layers.support.source.JoinTableDataSource")],Fn);let hM=null;function Wj(){return hM||(hM=Ry({types:tA()})),hM}let pM=null;function tA(){return pM||(pM={key:"type",base:null,typeMap:{"data-layer":vo,"map-layer":df}}),pM}const I_e={key:"type",base:null,typeMap:{"join-table":Fn,"query-table":Za,raster:hf,table:kd}};let vo=eA=class extends G{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new eA({fields:e,dataSource:t})}};u([ve({dataLayer:"data-layer"}),d({json:{write:{isRequired:!0}}})],vo.prototype,"type",void 0),u([d({type:[wE],json:{write:!0}})],vo.prototype,"fields",void 0),u([d({types:I_e,json:{write:!0}})],vo.prototype,"dataSource",void 0),vo=eA=u([T("esri.layers.support.source.DataLayerSource")],vo),vo.from=Er(vo);let Rd=class extends Be.ClonableMixin(G){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Rd.prototype,"onFields",void 0),u([d({type:String,json:{write:!0}})],Rd.prototype,"operator",void 0),u([d({type:String,json:{write:!0}})],Rd.prototype,"searchTerm",void 0),u([d({type:String,json:{write:!0}})],Rd.prototype,"searchType",void 0),Rd=u([T("esri.rest.support.FullTextSearch")],Rd);const C_e=Rd;var rA;const Zj=new je({upperLeft:"upper-left",lowerLeft:"lower-left"});let Od=rA=class extends G{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new rA(O({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([d({type:bt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Od.prototype,"extent",void 0),u([d({type:["view","edit"],json:{write:!0}})],Od.prototype,"mode",void 0),u([d({type:String,json:{read:Zj.read,write:Zj.write}})],Od.prototype,"originPosition",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Od.prototype,"tolerance",void 0),Od=rA=u([T("esri.rest.support.QuantizationParameters")],Od);const SY=Od,L_e=new je({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var iA;const Jj=new je({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let no=iA=class extends G{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=O(e))}clone(){return new iA({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:O(this.statisticParameters)})}};u([d({type:Number,json:{write:!0}})],no.prototype,"maxPointCount",void 0),u([d({type:Number,json:{write:!0}})],no.prototype,"maxRecordCount",void 0),u([d({type:Number,json:{write:!0}})],no.prototype,"maxVertexCount",void 0),u([d({type:String,json:{write:!0}})],no.prototype,"onStatisticField",void 0),u([d({type:String,json:{write:!0}})],no.prototype,"outStatisticFieldName",void 0),u([d({type:String,json:{read:{source:"statisticType",reader:Jj.read},write:{target:"statisticType",writer:Jj.write}}})],no.prototype,"statisticType",void 0),u([d({type:Object})],no.prototype,"statisticParameters",void 0),u([te("statisticParameters")],no.prototype,"writeStatisticParameters",null),no=iA=u([T("esri.rest.support.StatisticDefinition")],no);const A_e=no;var x2;const k_e=new je({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let xe=x2=class extends G{static from(e){return mw(x2,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const n=e[i];Array.isArray(n)?r[i]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?r[i]=n.getTime():r[i]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new x2(O({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};xe.MAX_MAX_RECORD_COUNT_FACTOR=5,u([d({json:{write:!0}})],xe.prototype,"aggregateIds",void 0),u([d({type:Boolean,json:{write:!0}})],xe.prototype,"cacheHint",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"compactGeometryEnabled",void 0),u([d({json:{write:!0}})],xe.prototype,"datumTransformation",void 0),u([He("datumTransformation")],xe.prototype,"castDatumTransformation",null),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"defaultSpatialReferenceEnabled",void 0),u([d({type:Number,json:{write:!0}})],xe.prototype,"distance",void 0),u([d({type:vo,json:{write:!0}})],xe.prototype,"dynamicDataSource",void 0),u([d({type:String,json:{write:!0}})],xe.prototype,"formatOf3DObjects",void 0),u([d({type:[C_e],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],xe.prototype,"fullText",void 0),u([d({type:String,json:{write:!0}})],xe.prototype,"gdbVersion",void 0),u([d({types:$w,json:{read:sp,write:!0}})],xe.prototype,"geometry",void 0),u([d({type:Number,json:{write:!0}})],xe.prototype,"geometryPrecision",void 0),u([d({type:[String],json:{write:!0}})],xe.prototype,"groupByFieldsForStatistics",void 0),u([d({type:String,json:{write:!0}})],xe.prototype,"having",void 0),u([d({type:Date})],xe.prototype,"historicMoment",void 0),u([te("historicMoment")],xe.prototype,"writeHistoricMoment",null),u([d({type:Number,json:{write:!0}})],xe.prototype,"maxAllowableOffset",void 0),u([d({type:Number,cast:e=>e<1?1:e>xe.MAX_MAX_RECORD_COUNT_FACTOR?xe.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],xe.prototype,"maxRecordCountFactor",void 0),u([d({type:["xyFootprint"],json:{write:!0}})],xe.prototype,"multipatchOption",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],xe.prototype,"num",void 0),u([d({json:{write:!0}})],xe.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],xe.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],xe.prototype,"outFields",void 0),u([d({type:Ie,json:{name:"outSR",write:!0}})],xe.prototype,"outSpatialReference",void 0),u([d({type:[A_e],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],xe.prototype,"outStatistics",void 0),u([d({json:{write:!0}})],xe.prototype,"parameterValues",void 0),u([te("parameterValues")],xe.prototype,"writeParameterValues",null),u([d({type:Re,json:{write:!0}})],xe.prototype,"pixelSize",void 0),u([d({type:SY,json:{write:!0}})],xe.prototype,"quantizationParameters",void 0),u([d({type:[Object],json:{write:!0}})],xe.prototype,"rangeValues",void 0),u([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],xe.prototype,"relationParameter",void 0),u([d({type:String,json:{write:!0}})],xe.prototype,"resultType",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnCentroid",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnDistinctValues",void 0),u([d({type:Boolean,json:{default:!0,write:!0}})],xe.prototype,"returnExceededLimitFeatures",void 0),u([d({type:Boolean,json:{write:!0}})],xe.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnQueryGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],xe.prototype,"returnZ",void 0),u([d({type:Boolean,json:{write:!0}})],xe.prototype,"returnTrueCurves",void 0),u([d({type:Ie,json:{write:!0}})],xe.prototype,"sourceSpatialReference",void 0),u([ve(L_e,{ignoreUnknown:!1,name:"spatialRel"})],xe.prototype,"spatialRelationship",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],xe.prototype,"start",void 0),u([te("start"),te("num")],xe.prototype,"writeStart",null),u([d({type:String,json:{write:!0}})],xe.prototype,"sqlFormat",void 0),u([d({type:String,json:{write:!0}})],xe.prototype,"text",void 0),u([d({type:Fl,json:{write:!0}})],xe.prototype,"timeExtent",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"timeReferenceUnknownClient",void 0),u([ve(k_e,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],xe.prototype,"units",void 0),u([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],xe.prototype,"where",void 0),u([te("where")],xe.prototype,"writeWhere",null),xe=x2=u([T("esri.rest.support.Query")],xe);const vn=xe;function Vb(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let Jo=class extends Ns.EventedAccessor{constructor(t){super(t),this._selectionMap=new km,this._sources=new ie,this._trashCan=[],this._layerEditHandles=new ie,this._vizTaskId=0,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([ee(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),En(()=>this.sources,"change",r=>{const i=this._selectionMap;for(const n of r.removed)i.delete(n);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new ie;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(r=>"sublayers"in r&&r.sublayers?r.sublayers:null).forEach(r=>{(Vb(r)&&!jme(r)||vd(r))&&t.add(r)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(Ft)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}})}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){Dl(t,this._sources)}async getSelectedFeatures(t,r={},i="layerView"){const{view:n,selections:s}=this,o=(t!==void 0?s.filter(a=>t.includes(a.layer)):s).filter(a=>a.selection.length>0).map(async a=>{const{layer:l,selection:c}=a,h=vd(l)?l.parent:l;if(h==null||!Qj(h))return null;if(i==="layer")return Kj(h,c,r);if(Yj(h))return null;const f=await n.whenLayerView(h).catch(()=>null);return f?Kj(f,c,r):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const r=new Map;for(const[s,o]of this._selectionMap)r.set(s,[...o.selection]);let i=!1;const n=t.current.concat(t.added);for(const s of n){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Vb(o)||vd(o))&&a!==null){const l=pw(r,o,()=>[]);l.includes(a)||(l.push(a),i=!0)}}for(const s of t.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Vb(o)||vd(o))&&a!==null){const l=r.get(o),c=l==null?void 0:l.indexOf(a);c!==void 0&&c>=0&&(l==null||l.splice(c,1),i=!0)}}if(i){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[l,c]of r){const h=s.get(l);h!==void 0&&o.push(h),s.set(l,{selection:c}),a.push({layer:l,selection:c,...iD(h!==void 0?h.selection:[],c)})}this._onSelectionChange(a)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){const r=this._selectionMap.get(t);return r==null?void 0:r.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),n=i!==void 0?[...i.selection]:[];for(const s of r)n.includes(s)||n.push(s);this._setSelection(t,n)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const n=[];for(const s of i.selection)r.includes(s)||n.push(s);this._setSelection(t,n)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const n=new Set(i.selection),s=new Set(r),o=Eue(n,s);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,n]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}const{sources:t,view:r,_selectionMap:i,showHighlight:n}=this,s=this._vizTaskId;for(const a of t){const l=i.get(a),c=vd(a)?a.parent:a;if(c!=null&&Qj(c)){if(Yj(c))continue;r.whenLayerView(c).then(h=>{var f;(f=l==null?void 0:l.highlightHandle)==null||f.remove(),l!=null&&n&&s===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=h.highlight(l.selection,this.highlightName))}).catch(()=>{var h;(h=l==null?void 0:l.highlightHandle)==null||h.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Ft);for(const t of this.sources){const r=vd(t)?t.parent:t;if(r!=null&&Vb(r)){const i=r.on("edits",n=>{this._handleEditChanges(n,t)});this._layerEditHandles.push(i)}}}_handleEditChanges(t,r){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(r)){const i=t.deletedFeatures.filter(n=>n.error==null).map(n=>n.objectId).filter(Ei);this.removeFromSelection(r,i)}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!O_e(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const n={layer:t,selection:[...r],...iD(i!==void 0?i.selection:[],r)};this._onSelectionChange([n])}}};u([d({readOnly:!0,nonNullable:!0})],Jo.prototype,"selections",null),u([d({readOnly:!0,nonNullable:!0})],Jo.prototype,"count",null),u([d({constructOnly:!0,nonNullable:!0})],Jo.prototype,"view",void 0),u([d({readOnly:!0,nonNullable:!0})],Jo.prototype,"hasSelection",null),u([d()],Jo.prototype,"showHighlight",void 0),u([d()],Jo.prototype,"sources",null),u([d()],Jo.prototype,"highlightName",void 0),Jo=u([T("esri.views.SelectionManager")],Jo);const Yj=e=>{var t;return vd(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},R_e=e=>e.layer!==void 0,Qj=e=>(e==null?void 0:e.when)!==void 0,O_e=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let n=0;n<r.length;n++)if(r[n]!==i[n])return!1}return!0},Kj=async(e,t,r={})=>{let i;if(R_e(e)){const n=e;i=n===void 0?null:await n.queryFeatures(new vn({...r,objectIds:t})).then(s=>({data:s,layer:e.layer}))}else{const n=e;i=n===void 0?null:await n.queryFeatures(new vn({...r,objectIds:t})).then(s=>({data:s,layer:n}))}return i},N_e=Jo;let S0=class extends Be.ClonableMixin(ce){constructor(t){super(t),this.accentColor=new Q([255,127,0]),this.textColor=new Q([255,255,255])}};u([d({type:Q,nonNullable:!0})],S0.prototype,"accentColor",void 0),u([d({type:Q,nonNullable:!0})],S0.prototype,"textColor",void 0),S0=u([T("esri.views.Theme")],S0);const nA=S0;var Xj;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(Xj||(Xj={}));const $Y=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],EY={};function TY(e){return!!EY[e]}function P_e(e){for(const t of e)if(!TY(t))return!1;return!0}$Y.forEach(e=>{EY[e]=!0});let MY=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:r,priority:i},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[r],i)})}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(r)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,n){const s=Array.isArray(t)?t:t.split(",");if(!P_e(s))return s.some(TY)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:n=i,n=n??vc.DEFAULT;const l=this._createUniqueGroupName(),c=new D_e(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:n});for(const h of s){const f=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],n),et(()=>this._removeHandler(l,s))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const n=this._handlerCounts.get(i);n===void 0||(n===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},D_e=class extends Fr{constructor(t,r,i,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const s of r)switch(s){case"click":this.registerIncoming("click",i,o=>n(V_e(t,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>n(z_e(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>n(U_e(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>n(B_e(t,o)));break;case"hold":this.registerIncoming("hold",i,o=>n(G_e(t,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>n(q_e(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>n(H_e(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>n($g(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>n($g(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>n($g(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>n(W_e(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>n(Z_e(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>n($g(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>n($g(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{n(J_e(o))});break;case"focus":this.registerIncoming("focus",i,o=>{n(F_e(o))});break;case"blur":this.registerIncoming("blur",i,o=>{n(j_e(o))})}}_wrapDrag(t){const r=t.data,{x:i,y:n}=r.center,{action:s,pointerType:o,button:a}=r;if(s==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const l=r.pointer.native,c=r.buttons,{cancelable:h,timestamp:f}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:m,pointerType:o,button:a,buttons:c,radius:r.radius,angle:gW(r.angle),native:l,timestamp:f,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}};function F_e(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function j_e(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function V_e(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:c,timestamp:h}=t;return{type:"click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,screenPoint:Yr(s,o),mapPoint:Nw(e,s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function z_e(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:c,timestamp:h}=t;return{type:"double-click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:Nw(e,s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function U_e(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-click",pointerId:c,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:Nw(e,s,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function B_e(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-double-click",pointerId:c,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:Nw(e,s,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function G_e(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a}=t.data,{cancelable:l,timestamp:c}=t;return{type:"hold",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:Nw(e,s,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function Nw(e,t,r){return e.toMap(Yr(t,r),{exclude:[]})}function q_e(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:n,timestamp:s}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function H_e(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:n}=e;return{type:"key-up",key:t,native:r,timestamp:n,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:s=>e.async(s),preventDefault:()=>e.preventDefault()}}function $g(e,t){const{x:r,y:i,button:n,buttons:s,native:o,eventId:a}=e.data,l=o.pointerId,c=o.pointerType,{cancelable:h,timestamp:f}=e;return{type:t,x:r,y:i,pointerId:l,pointerType:c,button:n,buttons:s,native:o,timestamp:f,eventId:a,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function W_e(e){const{x:t,y:r,buttons:i,native:n,eventId:s}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,c=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:f,timestamp:m}=e;return{type:"pointer-drag",x:t,y:r,pointerId:a,pointerType:l,button:o,buttons:i,action:c,origin:h,native:n,timestamp:m,eventId:s,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}function Z_e(e){const{cancelable:t,data:r,timestamp:i}=e,{x:n,y:s,deltaY:o,native:a}=r;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:a,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function J_e(e){const{action:t,state:r,device:i}=e.data,{cancelable:n,timestamp:s}=e,{buttons:o,axes:a}=r;return{type:"gamepad",device:i,timestamp:s,action:t,buttons:o,axes:a,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}var C1,e6,t6;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(C1||(C1={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(e6||(e6={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(t6||(t6={}));function Y_e(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return W.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function sA(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(C1.USER)&&e.getEditableFlag(C1.MANAGER)}function Yo(e){return Yr(e.x,e.y)}function IY(e,t){var i;const r=(i=e instanceof HTMLElement?e:e.surface)==null?void 0:i.getBoundingClientRect();return r?Yr(t.clientX-r.left,t.clientY-r.top):Yr(0,0)}function CY(e,t){return t instanceof Event?IY(e,t):Yo(t)}function LY(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Q_e=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":i6(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!n6(t))break;const n=Yo(t),s=Np(n,t.pointerType,r.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,r),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!n6(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const a=Yo(t);a.x=Cn(a.x,0,r.view.width),a.y=Cn(a.y,0,r.view.height);const l=n.start,c=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const n=Yo(t),s=Np(n,t.pointerType,r.forEachTool);if(K_e(t)||r.forEachTool(c=>{if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,h=!0)}),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),fM(o,i);break}case"click":{const n=Yo(t),s=Np(n,t.pointerType,r.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const n=Yo(t),s=Np(n,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),fM(o,i);break}case"immediate-double-click":{const n=Yo(t),s=Np(n,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),t.pointerType==="mouse"&&fM(o,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:Yo(r)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===t&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){var n;const i=(n=this._grabbedManipulators.get(t.pointerId))==null?void 0:n.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Yo(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=r6(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=r6(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:n})=>{r.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{i.add(n)}),t(n=>{n.hasGrabbedManipulators=r.has(n),n.hasHoveredManipulators=i.has(n);const s=this._grabbedManipulators.values(),o=kle(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:i},n=!0,s){const o=(a,l)=>a===t&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Yr(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){const i=t.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!i6(t.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Yo(t),t.pointerId,t.pointerType,r))}_updateHoveredStateForPointerAtScreenPosition(t,r,i,n){var a;let s=Np(t,i,n);const o=(a=this._hoveredManipulators.get(r))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(r,s)):this._hoveredManipulators.delete(r),this._onFocusChange(n))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:r},i)=>{t===i&&(this._hoveredManipulators.delete(t),r.hovering=!1)})}};function r6(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function Np(e,t,r){let i=null;return r(n=>{if(n.manipulators==null||!sA(n))return!1;const s=n.manipulators.intersect(e,t);return s!=null&&(i={tool:n,manipulator:s},!0)}),i}function i6(e){return e==="mouse"}function n6(e){return e.pointerType!=="mouse"||e.button===0}function K_e(e){return!!e.native.shiftKey}function fM(e,t){e!=null&&e.consumesClicks&&t()}const s6="attached",mM="tools",X_e=1e3;let Qo=class extends ce{constructor(t){super(t),this._updatingHandles=new jh,this._clock=ky,this._manipulatorState=new Q_e,this.tools=new ie,this.cursor=null,this._interacting=!1,this._interactingTimeout=X_e,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on($Y,t=>{this._handleInputEvent(t)},vc.TOOL),...Y_e(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void W.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r!=null&&r.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const n=sA(i);this.activeTool!=null&&n||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Ft(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([ee(()=>{const{state:r}=this.view;return"camera"in r&&r.camera},()=>this._forEachManipulator(r=>r.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",r=>this._forEachManipulator(i=>i.onElevationChange(r)))],s6):this.addHandles(ee(()=>this.view.extent,()=>this._forEachManipulator(r=>r.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(s6),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>t(i,r))})}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(n=>{!r&&n.visible&&n.handleInputEvent(i)}),!r&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(mM),this._forEachTool(t=>{if(t instanceof ce){const r=ee(()=>[t.cursor,t.visible,t.editable],()=>{sA(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(r,mM)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],mM)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var r;(r=t.setEditableFlag)==null||r.call(t,C1.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};u([d({constructOnly:!0,nonNullable:!0})],Qo.prototype,"view",void 0),u([d({value:null})],Qo.prototype,"activeTool",null),u([d({readOnly:!0,type:ie})],Qo.prototype,"tools",void 0),u([d({readOnly:!0})],Qo.prototype,"cursor",void 0),u([d({readOnly:!0})],Qo.prototype,"updating",null),u([d()],Qo.prototype,"_interacting",void 0),u([d({readOnly:!0})],Qo.prototype,"interacting",null),Qo=u([T("esri.views.ToolViewManager")],Qo);const e2e=new Q("cyan"),t2e=1,r2e=.25,i2e=new Q("black"),n2e=.4,s2e=.2,L9e=.25,AY="default",o2e="temporary",a2e=new Q("yellow");var oA;let jn=oA=class extends ce{constructor(e){super(e),this.name=AY,this.color=e2e.clone(),this.haloColor=null,this.haloOpacity=t2e,this.fillOpacity=r2e,this.shadowColor=i2e.clone(),this.shadowOpacity=n2e,this.shadowDifference=s2e,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){var e,t;return new oA({...this,color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),shadowColor:(t=this.shadowColor)==null?void 0:t.clone()})}assignFrom(e){var t;this.color=e.color.clone(),this.haloColor=(t=e.haloColor)==null?void 0:t.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};u([d({type:String,constructOnly:!0,nonNullable:!0})],jn.prototype,"name",void 0),u([d({type:Q,nonNullable:!0})],jn.prototype,"color",void 0),u([d({type:Q})],jn.prototype,"haloColor",void 0),u([d({nonNullable:!0})],jn.prototype,"haloOpacity",void 0),u([d({nonNullable:!0})],jn.prototype,"fillOpacity",void 0),u([d({type:Q,nonNullable:!0})],jn.prototype,"shadowColor",void 0),u([d({nonNullable:!0})],jn.prototype,"shadowOpacity",void 0),u([d({nonNullable:!0})],jn.prototype,"shadowDifference",void 0),u([d({nonNullable:!0})],jn.prototype,"haloWidth",void 0),u([d({nonNullable:!0})],jn.prototype,"haloBlur",void 0),jn=oA=u([T("esri.views.support.HighlightOptions")],jn);const wc=jn;function l2e(){return new(ie.ofType(wc))([new wc({name:AY}),new wc({name:o2e,color:a2e})])}let pf=class extends ce{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":u2e.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return c2e[this.deviceType]}};u([d({nonNullable:!0,readOnly:!0})],pf.prototype,"nativeIndex",void 0),u([d({type:String,readOnly:!0})],pf.prototype,"deviceType",null),u([d({type:Number,readOnly:!0})],pf.prototype,"axisThreshold",null),pf=u([T("esri.views.input.gamepad.GamepadInputDevice")],pf);const nP=pf,u2e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),c2e={standard:.15,spacemouse:.025,unknown:0};let $0=class extends ce{constructor(...t){super(...t),this.devices=new ie,this.enabledFocusMode="document"}};u([d({type:ie.ofType(nP),readOnly:!0})],$0.prototype,"devices",void 0),u([d({type:["document","view","none"]})],$0.prototype,"enabledFocusMode",void 0),$0=u([T("esri.views.input.gamepad.GamepadSettings")],$0);const d2e=$0;let S2=class extends ce{constructor(){super(...arguments),this.gamepad=new d2e}};u([d({readOnly:!0})],S2.prototype,"gamepad",void 0),S2=u([T("esri.views.input.Input")],S2);const h2e=S2,kY=()=>Ke.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,yM=()=>d({type:["pan","rotate","zoom","none"],nonNullable:!0});let Nd=class extends ce{constructor(t){super(t),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};u([yM()],Nd.prototype,"dragPrimary",void 0),u([yM()],Nd.prototype,"dragSecondary",void 0),u([yM()],Nd.prototype,"dragTertiary",void 0),u([d({type:["zoom","none"],nonNullable:!0})],Nd.prototype,"mouseWheel",void 0),Nd=u([T("esri.views.navigation.NavigationActionMap")],Nd);const sP=Nd;let _u=class extends ce{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([d({type:Boolean,nonNullable:!0})],_u.prototype,"enabled",void 0),u([d({type:nP})],_u.prototype,"device",void 0),u([d({type:["pan","zoom"],nonNullable:!0})],_u.prototype,"mode",void 0),u([d({type:["forward-down","forward-up"],nonNullable:!0})],_u.prototype,"tiltDirection",void 0),u([d({type:Number,nonNullable:!0})],_u.prototype,"velocityFactor",void 0),_u=u([T("esri.views.navigation.gamepad.GamepadSettings")],_u);const RY=_u;let xu=class extends ce{constructor(t){super(t),this.actionMap=new sP,this.browserTouchPanEnabled=!0,this.gamepad=new RY,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!kY()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(t){Lle(W.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=t?"zoom":"none"}};u([d({type:sP,nonNullable:!0})],xu.prototype,"actionMap",void 0),u([d({type:Boolean})],xu.prototype,"browserTouchPanEnabled",void 0),u([d({type:RY,nonNullable:!0})],xu.prototype,"gamepad",void 0),u([d({type:Boolean})],xu.prototype,"momentumEnabled",void 0),u([d({type:Boolean})],xu.prototype,"mouseWheelZoomEnabled",null),xu=u([T("esri.views.navigation.Navigation")],xu);const bE=xu;function D9e(e,t,r){const i=OY(e),n=t,s=p2e(i,n,r);if(i){const o=Tw.deriveUnitFromSR(i,e.spatialReference).heightUnit;if(!r&&o!==i.heightUnit){const a=new N("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new N("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i,error:a})}}if(!f2e(e)||s===pn.Unsupported)return new N("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i});switch(s){case pn.Units:{const o=(i==null?void 0:i.heightUnit)||"unknown",a=(n==null?void 0:n.heightUnit)||"unknown",l=new N("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new N("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:n,error:l})}case pn.HeightModel:{const o=(i==null?void 0:i.heightModel)||"unknown",a=(n==null?void 0:n.heightModel)||"unknown",l=new N("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new N("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:n,error:l})}case pn.CRS:{const o=(i==null?void 0:i.vertCRS)||"unknown",a=(n==null?void 0:n.vertCRS)||"unknown",l=new N("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new N("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:n,error:l})}}return null}function p2e(e,t,r){if(!o6(e)||!o6(t))return pn.Unsupported;if(e==null||t==null)return pn.Ok;if(!r&&e.heightUnit!==t.heightUnit)return pn.Units;if(e.heightModel!==t.heightModel)return pn.HeightModel;switch(e.heightModel){case"gravity-related-height":return pn.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?pn.Ok:pn.CRS;default:return pn.Unsupported}}var pn;function o6(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function f2e(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!DY(e)}function OY(e){var i;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?Ny(e.url):void 0;return!(((i=e.spatialReference)==null?void 0:i.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&NY(e)&&e.heightModelInfo?e.heightModelInfo:DY(e)?Tw.deriveUnitFromSR(y2e,e.spatialReference):null}function NY(e){return"heightModelInfo"in e}function PY(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function DY(e){return PY(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):FY(e)}function m2e(e){return e.layers!=null||FY(e)||PY(e)||NY(e)}function FY(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(pn||(pn={}));const y2e=new Tw({heightModel:"gravity-related-height"});var MS;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(MS||(MS={}));let aA,gM=null;async function g2e(e){gM||(gM=B(()=>import("./geometryServiceUtils-c8fb8aca.js"),["assets/geometryServiceUtils-c8fb8aca.js","assets/project-56a9989e.js"]).then(t=>aA=t)),await gM,Ht(e)}async function jY(e,t,r,i){if(!e)return null;const n=e.spatialReference;return Hc()||Sa(n,t)?Wc(e,t):aA?aA.projectGeometry(e,t,r,i):(await Promise.race([g2e(i),Lc(i)]),jY(e,t,r,i))}let _t=class extends ce{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=iy(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,n,s,o;const t=(i=this.map)==null?void 0:i.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t==null?void 0:t.basemap,layers:(n=t==null?void 0:t.basemap)==null?void 0:n.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(s=t==null?void 0:t.ground)==null?void 0:s.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),r}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,i=>{const n=this._getSupportedSpatialReferences(i);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(t,n);s!=null&&(t=s)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const r=this._pickSpatialReferenceCandidate(t);return{spatialReference:(r==null?void 0:r.spatialReference)??null,viewingMode:(r==null?void 0:r.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(s=this.map)==null?void 0:s.call(this),r=this.spatialReference;if(!r)return{updating:this._spatialReferenceTask.updating};let i;const n=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{layers:t==null?void 0:t.layers}],a=>{var l;return!(!("tileInfo"in a)||!((l=a.tileInfo)!=null&&l.spatialReference.equals(r)))&&(i=a,!0)},a=>"tileInfo"in a);return i?{tileInfo:i.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var i;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const r=this._collectLayers(this.mapCollections,n=>{var o,a;const s=OY(n);return!!s&&(t={heightModelInfo:s,vcsWkid:(o=n.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=n.spatialReference)==null?void 0:a.latestVcsWkid},!0)},n=>m2e(n));return{...t,updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],r=this._collectLayers(this.mapCollections,i=>{const n="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return t.push({extent:o,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const a of n)t.push({extent:a,layer:i});return!1});return{candidates:t,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),n=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=iy(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:n.clone(),task:ww(async s=>{try{const o=await jY(i.extent,n,"portalItem"in i.layer?i.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Xn(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const n of t)for(const s of r){if(!n.spatialReference.equals(s.spatialReference))continue;const o=w2e(n.viewingMode,s.viewingMode);if(o!==!1){i.push({spatialReference:n.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some(({spatialReference:i})=>i.equals(r))&&(t=t.filter(({spatialReference:i})=>i.equals(r))),t.length>1&&t.some(({viewingMode:i})=>i!==MS.Local)&&(t=t.filter(({viewingMode:i})=>i!==MS.Local)),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const n of r){const s=this.getSpatialReferenceSupport(n,t);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||i.push({spatialReference:a,viewingMode:l})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find(({extent:i})=>r.equals(i.spatialReference))||t[0]}_collectLayers(t,r,i=()=>!0){var s;switch(this._loadMaybe((s=this.map)==null?void 0:s.call(this))){case"loading":return!0;case"failed":return!1}const n=new v2e(i,r);for(const o of t)if(this._collectCollection(o,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers)if(r.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":if(r.updating||(r.done=r.pushLayer(i)),r.done||r.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.done||r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(r=>{Ri(r)}),"loading"):t.loadStatus:"loaded"}};u([d()],_t.prototype,"required",void 0),u([d({constructOnly:!0})],_t.prototype,"map",void 0),u([d({constructOnly:!0})],_t.prototype,"getSpatialReferenceSupport",void 0),u([d()],_t.prototype,"defaultSpatialReference",void 0),u([d()],_t.prototype,"userSpatialReference",void 0),u([d()],_t.prototype,"sourcePreloadCount",void 0),u([d()],_t.prototype,"priorityCollection",void 0),u([d()],_t.prototype,"requiresExtentInSpatialReference",void 0),u([d()],_t.prototype,"suspended",void 0),u([d({readOnly:!0})],_t.prototype,"ready",null),u([d({readOnly:!0})],_t.prototype,"heightModelInfoReady",null),u([d({readOnly:!0})],_t.prototype,"spatialReference",null),u([d({readOnly:!0})],_t.prototype,"extent",null),u([d({readOnly:!0})],_t.prototype,"heightModelInfo",null),u([d({readOnly:!0})],_t.prototype,"vcsWkid",null),u([d({readOnly:!0})],_t.prototype,"latestVcsWkid",null),u([d({readOnly:!0})],_t.prototype,"viewingMode",null),u([d({readOnly:!0})],_t.prototype,"tileInfo",null),u([d({readOnly:!0})],_t.prototype,"mapCollections",null),u([d({readOnly:!0})],_t.prototype,"_spatialReferenceTask",null),u([d({readOnly:!0})],_t.prototype,"_tileInfoTask",null),u([d({readOnly:!0})],_t.prototype,"_heightModelInfoTask",null),u([d({readOnly:!0})],_t.prototype,"_extentCandidatesTask",null),u([d()],_t.prototype,"_extentTask",null),u([d()],_t.prototype,"_projectExtentTask",void 0),_t=u([T("esri.views.support.DefaultsFromMap")],_t);let v2e=class{constructor(t,r){this.layerFilter=t,this.pushLayer=r,this.preloading=-1,this.updating=!1,this.done=!1}};function w2e(e,t){return e!=null?t!=null?e===t&&e:e:t}let ff=class extends ce{constructor(t){super(t),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};u([d()],ff.prototype,"featureTitleFields",void 0),u([d()],ff.prototype,"utilityNetworkFields",void 0),u([d()],ff.prototype,"globalIdField",void 0),ff=u([T("esri.views.support.RequiredFieldsOptions")],ff);const b2e=ff;var E0;let pe=E0=class extends Ns.EventedMixin(vw.EsriPromiseMixin(ce)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Ay,this.updatingHandles=new jh,this.allLayerViews=new _1({getCollections:()=>{var t,r,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:x2e}),this.groundView=null,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new Iv,this.analyses=new _S,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ie,this.magnifier=new wY,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new h2e,this.navigation=new bE,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new MY(this),this.persistableViewModels=new ie,this.requiredFieldsOptions=new b2e,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(ee(()=>this.preconditionsReady,t=>{var i,n;const r=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,E0.views.add(this)):(this._lockedSpatialReference=null,E0.views.remove(this)),this.notifyChange("spatialReference"),!t&&r)(i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown();else if(t&&!r){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new N("startup-error",null,s)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},xa))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Y$(()=>this.ready)))),this.basemapView=new v_e({view:this}),this.layerViewManager=new x_e({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Qo({view:this}),this.selectionManager=new N_e({view:this}),this.addHandles([Ln(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{W.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),ee(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},fn),ee(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},xa),ee(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},fn)])}destroy(){var e,t;this.destroyed||(E0.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Et(this.graphics),this.analyses=Et(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Et(this.analysisViewManager),this.toolViewManager=Et(this.toolViewManager),this.layerViewManager=Et(this.layerViewManager),this.selectionManager=Et(this.selectionManager),this.basemapView=Et(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(r=>r.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Et(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return W.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new _t({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??l2e()}set highlights(e){this._set("highlights",Dl(e,this._get("highlights"),ie.ofType(wc)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||va.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(W.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),va.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,t,r,i;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const n=!("loaded"in this.map)||this.map.loaded,s=this.map.ground.loaded,o=((t=this.map.basemap)==null?void 0:t.loaded)??!0;return n&&o&&s&&!((r=this.map)!=null&&r.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=ww(a=>EG(F("view-readyState-waiting-delay"),null,a)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(i=this._readyStateWaitingTask)!=null&&i.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=iy(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var t,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&r.heightModelInfo)){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const t=!Dr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??ba}set timeZone(e){this._userTimeZone=e,xme(e)||W.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new nA}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new N("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&W.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Ln(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};pe.views=new ie,u([d()],pe.prototype,"_userSpatialReference",void 0),u([d()],pe.prototype,"activeTool",null),u([d({readOnly:!0})],pe.prototype,"allLayerViews",void 0),u([d()],pe.prototype,"groundView",void 0),u([d()],pe.prototype,"animation",null),u([d()],pe.prototype,"basemapView",void 0),u([d()],pe.prototype,"center",null),u([d()],pe.prototype,"defaultsFromMapSettings",null),u([d()],pe.prototype,"defaultsFromMap",null),u([d()],pe.prototype,"displayFilterEnabled",void 0),u([d()],pe.prototype,"fatalError",void 0),u([d({type:bt})],pe.prototype,"extent",null),u([d(Aj(Iv,"graphics"))],pe.prototype,"graphics",void 0),u([d(Aj(_S,"analyses"))],pe.prototype,"analyses",void 0),u([d({readOnly:!0,type:Tw})],pe.prototype,"heightModelInfo",null),u([d({type:ie.ofType(wc)})],pe.prototype,"highlights",null),u([d({readOnly:!0})],pe.prototype,"interacting",null),u([d({readOnly:!0})],pe.prototype,"navigating",null),u([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],pe.prototype,"preconditionsReady",null),u([d({readOnly:!0})],pe.prototype,"typeSpecificPreconditionsReady",void 0),u([d({type:ie,readOnly:!0})],pe.prototype,"layerViews",void 0),u([d()],pe.prototype,"resolution",null),u([d({type:wY})],pe.prototype,"magnifier",void 0),u([d({value:null,type:XW})],pe.prototype,"map",null),u([d()],pe.prototype,"padding",void 0),u([d({readOnly:!0})],pe.prototype,"ready",void 0),u([d()],pe.prototype,"_readyStateWaitingTask",void 0),u([d({readOnly:!0})],pe.prototype,"readyState",null),u([d({type:Ie})],pe.prototype,"spatialReference",null),u([d()],pe.prototype,"stationary",null),u([d({readOnly:!0})],pe.prototype,"supportsGround",void 0),u([d({type:Fl})],pe.prototype,"timeExtent",null),u([d({type:String,nonNullable:!0})],pe.prototype,"timeZone",null),u([d()],pe.prototype,"tools",null),u([d()],pe.prototype,"toolViewManager",void 0),u([d({readOnly:!0})],pe.prototype,"type",void 0),u([d({type:Number})],pe.prototype,"scale",void 0),u([d({readOnly:!0})],pe.prototype,"updating",void 0),u([d({readOnly:!0})],pe.prototype,"initialExtentRequired",void 0),u([d({readOnly:!0})],pe.prototype,"initialExtent",null),u([d()],pe.prototype,"cursor",null),u([d({readOnly:!0})],pe.prototype,"input",void 0),u([d({type:bE,nonNullable:!0})],pe.prototype,"navigation",void 0),u([d()],pe.prototype,"layerViewManager",void 0),u([d()],pe.prototype,"analysisViewManager",void 0),u([d()],pe.prototype,"selectionManager",void 0),u([d()],pe.prototype,"width",void 0),u([d()],pe.prototype,"height",void 0),u([d({readOnly:!0})],pe.prototype,"resizing",void 0),u([d({value:null,readOnly:!0})],pe.prototype,"size",null),u([d({readOnly:!0})],pe.prototype,"suspended",void 0),u([d({readOnly:!0})],pe.prototype,"viewEvents",void 0),u([d({readOnly:!0})],pe.prototype,"persistableViewModels",void 0),u([d()],pe.prototype,"_isValid",void 0),u([d()],pe.prototype,"_readyCycleForced",void 0),u([d()],pe.prototype,"_lockedSpatialReference",void 0),u([d()],pe.prototype,"_userTimeZone",void 0),u([d()],pe.prototype,"_lockedTimeZone",void 0),u([d()],pe.prototype,"_userTimeExtent",void 0),u([d()],pe.prototype,"_lockedTimeExtent",void 0),u([d({type:nA})],pe.prototype,"theme",void 0),u([d({readOnly:!0,type:nA})],pe.prototype,"effectiveTheme",null),pe=E0=u([T("esri.views.View")],pe);const vM=globalThis.$arcgis;vM&&!vM.views&&Object.defineProperty(vM,"views",{configurable:!1,enumerable:!0,writable:!1,value:pe.views});const _2e=pe;function x2e(e){return e.layerViews}function Rm(e,t){return e[0]=t[0],e[1]=t[1],e}function Hr(e,t,r){return e[0]=t,e[1]=r,e}function VY(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function L1(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function zY(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function UY(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function S2e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function $2e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function E2e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function T2e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function M2e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Pw(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function I2e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function _E(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function IS(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function CS(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function BY(e){const t=e[0],r=e[1];return t*t+r*r}function GY(e,t){return e[0]=-t[0],e[1]=-t[1],e}function C2e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function lA(e,t){const r=t[0],i=t[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function qY(e,t){return e[0]*t[0]+e[1]*t[1]}function HY(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function L2e(e,t,r,i){const n=t[0],s=t[1];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e}function A2e(e,t=1){const r=2*K$()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function k2e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e}function da(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function R2e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e}function O2e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}function N2e(e,t,r,i){const n=t[0]-r[0],s=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=n*a-s*o+r[0],e[1]=n*o+s*a+r[1],e}function P2e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(r*n+i*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function D2e(e){return"vec2("+e[0]+", "+e[1]+")"}function F2e(e,t){return e[0]===t[0]&&e[1]===t[1]}function j2e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1],o=Yi();return Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))}function V2e(e,t,r,i,n){let s=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*s+i[1]*o)*(n-1);return s=i[0]*a,o=i[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const z2e=CS,oP=L1,U2e=zY,B2e=UY,G2e=_E,q2e=IS,H2e=BY;Object.freeze(Object.defineProperty({__proto__:null,add:VY,angle:P2e,ceil:S2e,copy:Rm,cross:HY,dist:G2e,distance:_E,div:B2e,divide:UY,dot:qY,equals:j2e,exactEquals:F2e,floor:$2e,inverse:C2e,len:z2e,length:CS,lerp:L2e,max:T2e,min:E2e,mul:U2e,multiply:zY,negate:GY,normalize:lA,projectAndScale:V2e,random:A2e,rotate:N2e,round:M2e,scale:Pw,scaleAndAdd:I2e,set:Hr,sqrDist:q2e,sqrLen:H2e,squaredDistance:IS,squaredLength:BY,str:D2e,sub:oP,subtract:L1,transformMat2:k2e,transformMat2d:da,transformMat3:R2e,transformMat4:O2e},Symbol.toStringTag,{value:"Module"}));function Qt(){return[0,0]}function W2e(e){return[e[0],e[1]]}function Dw(e,t){return[e,t]}function Z2e(e,t){return[e,t]}function J2e(e,t=Qt()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Y2e(e,t){return new Float64Array(e,t,2)}function WY(){return Qt()}function ZY(){return Dw(1,1)}function JY(){return Dw(1,0)}function YY(){return Dw(0,1)}const Q2e=WY(),K2e=ZY(),X2e=JY(),exe=YY();Object.freeze(Object.defineProperty({__proto__:null,ONES:K2e,UNIT_X:X2e,UNIT_Y:exe,ZEROS:Q2e,clone:W2e,create:Qt,createView:Y2e,freeze:Z2e,fromArray:J2e,fromValues:Dw,ones:ZY,unitX:JY,unitY:YY,zeros:WY},Symbol.toStringTag,{value:"Module"}));function txe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function xE(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function rxe(e,t,r,i,n,s,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e}function aP(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let l=r*s-i*n;return l?(l=1/l,e[0]=s*l,e[1]=-i*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*a-s*o)*l,e[5]=(i*o-r*a)*l,e):null}function ixe(e){return e[0]*e[3]-e[1]*e[2]}function fh(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1],f=r[2],m=r[3],y=r[4],g=r[5];return e[0]=i*c+s*h,e[1]=n*c+o*h,e[2]=i*f+s*m,e[3]=n*f+o*m,e[4]=i*y+s*g+a,e[5]=n*y+o*g+l,e}function Fw(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=Math.sin(r),h=Math.cos(r);return e[0]=i*h+s*c,e[1]=n*h+o*c,e[2]=i*-c+s*h,e[3]=n*-c+o*h,e[4]=a,e[5]=l,e}function SE(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1];return e[0]=i*c,e[1]=n*c,e[2]=s*h,e[3]=o*h,e[4]=a,e[5]=l,e}function by(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=i*c+s*h+a,e[5]=n*c+o*h+l,e}function QY(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function KY(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function lP(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function nxe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function sxe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function oxe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function XY(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function axe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function lxe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function uxe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function cxe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=t[0],c=t[1],h=t[2],f=t[3],m=t[4],y=t[5],g=Yi();return Math.abs(r-l)<=g*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-c)<=g*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-h)<=g*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-f)<=g*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-m)<=g*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=g*Math.max(1,Math.abs(a),Math.abs(y))}const dxe=fh,hxe=XY;Object.freeze(Object.defineProperty({__proto__:null,add:oxe,copy:txe,determinant:ixe,equals:cxe,exactEquals:uxe,frob:sxe,fromRotation:QY,fromScaling:KY,fromTranslation:lP,identity:xE,invert:aP,mul:dxe,multiply:fh,multiplyScalar:axe,multiplyScalarAndAdd:lxe,rotate:Fw,scale:SE,set:rxe,str:nxe,sub:hxe,subtract:XY,translate:by},Symbol.toStringTag,{value:"Module"}));function Il(){return[1,0,0,1,0,0]}function pxe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function fxe(e,t,r,i,n,s){return[e,t,r,i,n,s]}function mxe(e,t){return new Float64Array(e,t,6)}const yxe=Il();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:yxe,clone:pxe,create:Il,createView:mxe,fromValues:fxe},Symbol.toStringTag,{value:"Module"}));const zb={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new To({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ie.WebMercator}),minus180Line:new To({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ie.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new To({paths:[[[180,-180],[180,180]]],spatialReference:Ie.WGS84}),minus180Line:new To({paths:[[[-180,-180],[-180,180]]],spatialReference:Ie.WGS84})}};function Th(e,t){return Math.ceil((e-t)/(2*t))}function eQ(e,t){const r=Cv(e);for(const i of r)for(const n of i)n[0]+=t;return e}function Cv(e){return Dh(e)?e.rings:e.paths}function z9e(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function gxe(e){return typeof e=="string"?mr(e):O(e)}function vxe(e,t,r){const i={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))i[n]=s.map(o=>vxe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r==null?void 0:r[n]);i[n]=t?o:JSON.stringify(o)}else i[n]=t?s:JSON.stringify(s);else i[n]=s}return i}async function wxe(e,t,r,i){const n=gxe(e),s=t[0].spatialReference,o={...i,responseType:"json",query:{...n.query,f:"json",sr:Fq(s),target:JSON.stringify({geometryType:IN(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await ft(n.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(h=>{const f=sp(h);return f.spatialReference=s,f})}}function bxe(e){return{geometryType:IN(e[0]),geometries:e.map(t=>t.toJSON())}}function _xe(e,t,r){const i=v0e(t);return e.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}async function xxe(e,t,r){const i=typeof e=="string"?mr(e):e,n=t[0].spatialReference,s=IN(t[0]),o={...r,query:{...i.query,f:"json",sr:Fq(n),geometries:JSON.stringify(bxe(t))}},{data:a}=await ft(i.path+"/simplify",o);return _xe(a.geometries,s,n)}const tQ=()=>W.getLogger("esri.geometry.support.normalizeUtils");function Sxe(e){return e.type==="polygon"}function $xe(e){return e[0].type==="polygon"}function Exe(e){return e[0].type==="polyline"}function a6(e){const t=[];let r=0,i=0;for(let n=0;n<e.length;n++){const s=e[n];let o=null;for(let a=0;a<s.length;a++)o=s[a],t.push(o),a===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function Txe(e,t){if(!(e instanceof To||e instanceof Ps)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw tQ().error(n),new N(n)}const r=Cv(e),i=[];for(const n of r){const s=[];i.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],c=n[o+1][0],h=n[o+1][1],f=Math.sqrt((c-a)*(c-a)+(h-l)*(h-l)),m=(h-l)/f,y=(c-a)/f,g=f/t;if(g>1){for(let _=1;_<=g-1;_++){const S=_*t,$=y*S+a,M=m*S+l;s.push([$,M])}const v=(f+Math.floor(g-1)*t)/2,x=y*v+a,b=m*v+l;s.push([x,b])}s.push([c,h])}}return Sxe(e)?new Ps({rings:i,spatialReference:e.spatialReference}):new To({paths:i,spatialReference:e.spatialReference})}function l6(e,t,r){if(t){const i=Txe(e,1e6);e=tm(i,!0)}return r&&(e=eQ(e,r)),e}function u6(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const n=Th(i,t);e[0]=i+n*(-2*t)}else if(i<r){const n=Th(i,r);e[0]=i+n*(-2*r)}}else{const i=e.x;if(i>t){const n=Th(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){const n=Th(i,r);e=e.clone().offset(n*(-2*r),0)}}return e}function Mxe(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],s=t.geometries[i],o=Cv(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let h=0;for(let m=0;m<l.length;m++){const y=l[m][0];h=y>h?y:h}h=Number(h.toFixed(9));const f=-360*Th(h,180);for(let m=0;m<l.length;m++){const y=s.getPoint(a,m);s.setPoint(a,m,y.clone().offset(f,0))}return!0}})}if(n===r){if($xe(e))for(const a of Cv(s))e[n]=e[n].addRing(a);else if(Exe(e))for(const a of Cv(s))e[n]=e[n].addPath(a)}else r=n,e[n]=s}return e}async function Ixe(e,t,r){if(!Array.isArray(e))return Ixe([e],t);t&&typeof t!="string"&&tQ().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(t==null?void 0:t.url)??Ke.geometryServiceUrl;let n,s,o,a,l,c,h,f,m=0;const y=[],g=[];for(const $ of e)if($!=null)if(n||(n=$.spatialReference,s=Ji(n),o=n.isWebMercator,c=o?102100:4326,a=zb[c].maxX,l=zb[c].minX,h=zb[c].plus180Line,f=zb[c].minus180Line),s)if($.type==="mesh")g.push($);else if($.type==="point")g.push(u6($.clone(),a,l));else if($.type==="multipoint"){const M=$.clone();M.points=M.points.map(I=>u6(I,a,l)),g.push(M)}else if($.type==="extent"){const M=$.clone()._normalize(!1,!1,s);g.push(M.rings?new Ps(M):M)}else if($.extent){const M=$.extent,I=Th(M.xmin,l)*(2*a);let C=I===0?$.clone():eQ($.clone(),I);M.offset(I,0);let{xmin:L,xmax:V}=M;L=Number(L.toFixed(9)),V=Number(V.toFixed(9)),M.intersects(h)&&V!==a?(m=V>m?V:m,C=l6(C,o),y.push(C),g.push("cut")):M.intersects(f)&&L!==l?(m=V*(2*a)>m?V*(2*a):m,C=l6(C,o,360),y.push(C),g.push("cut")):g.push(C)}else g.push($.clone());else g.push($);else g.push($);let v=Th(m,a),x=-90;const b=v,_=new To;for(;v>0;){const $=360*v-180;_.addPath([[$,x],[$,-1*x]]),x*=-1,v--}if(y.length>0&&b>0){const $=Mxe(y,await wxe(i,y,_,r)),M=[],I=[];for(let V=0;V<g.length;V++){const P=g[V];if(P!=="cut")I.push(P);else{const z=$.shift(),Y=e[V];Y!=null&&Y.type==="polygon"&&Y.rings&&Y.rings.length>1&&z.rings.length>=Y.rings.length?(M.push(z),I.push("simplify")):I.push(o?Ph(z):z)}}if(!M.length)return I;const C=await xxe(i,M,r),L=[];for(let V=0;V<I.length;V++){const P=I[V];P!=="simplify"?L.push(P):L.push(o?Ph(C.shift()):C.shift())}return L}const S=[];for(let $=0;$<g.length;$++){const M=g[$];if(M!=="cut")S.push(M);else{const I=y.shift();S.push(o===!0?Ph(I):I)}}return S}function Cxe(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&Ji(e.spatialReference);if(!r)return t;const[i,n]=r.valid,s=2*n,{width:o}=t;let a,{xmin:l,xmax:c}=t;if([l,c]=[c,l],e.type==="extent"||o===0||o<=n||o>s||l<i||c>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=a6(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=a6(e.paths);break;case"multipoint":a=e.points}const h=t.clone();for(let f=0;f<a.length;f++){let m=a[f][0];m<0?(m+=n,c=Math.max(m,c)):(m-=n,l=Math.min(m,l))}return h.xmin=l,h.xmax=c,h.width<o?(h.xmin-=n,h.xmax-=n,h):t}function uP(e,t,r){const i=Ji(r);if(i==null)return e;const[n,s]=i.valid,o=2*s;let a=0,l=0;t>s?a=Math.ceil(Math.abs(t-s)/o):t<n&&(a=-Math.ceil(Math.abs(t-n)/o)),e>s?l=Math.ceil(Math.abs(e-s)/o):e<n&&(l=-Math.ceil(Math.abs(e-n)/o));let c=e+(a-l)*o;const h=c-t;return h>s?c-=o:h<n&&(c+=o),c}function U9e(e,t){const r=Ji(t);if(r){const[i,n]=r.valid,s=n-i;if(e<i)for(;e<i;)e+=s;if(e>n)for(;e>n;)e-=s}return e}const rQ=96,iQ=39.37,Lxe=180/Math.PI;function nQ(e){return e.wkid?e:e.spatialReference||Ie.WGS84}function cP(e,t){return t.type?Hr(e,t.x,t.y):Rm(e,t)}function sQ(e){return Ds(e)}function $E(e,t,r=0){let i=e.width,n=e.height;if(r!==0){const a=Z$(r),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));i=e.width*l+e.height*c,n=e.width*c+e.height*l}const s=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(i/s,n/o)*Fxe(e.spatialReference)}async function T0(e,t,r,i){var a,l,c;let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(ie.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const h=e.every(y=>"attributes"in y),f=e.some(y=>!y.geometry);let m=e;if(h&&f&&t&&t.allLayerViews){const y=new Map;for(const b of e){const _=b.layer,S=y.get(_)||[],$=b.attributes[_.objectIdField];$!=null&&S.push($),y.set(_,S)}const g=[];y.forEach((b,_)=>{var $;const S=($=t.allLayerViews)==null?void 0:$.find(M=>M.layer.id===_.id);if(S&&"queryFeatures"in S){const M=_.createQuery();M.objectIds=b,M.returnGeometry=!0,g.push(S.queryFeatures(M))}});const v=await Promise.all(g),x=[];for(const b of v)if(b&&b.features&&b.features.length)for(const _ of b.features)_.geometry!=null&&x.push(_.geometry);m=x}for(const y of m)i=await T0(y,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new Re(e);else if(e instanceof Vl)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const h=e.layer,f=(a=t.allLayerViews)==null?void 0:a.find(m=>m.layer.id===h.id);if(f&&"queryFeatures"in f){const m=h.createQuery();m.objectIds=[e.attributes[h.objectIdField]],m.returnGeometry=!0;const y=await f.queryFeatures(m);n=(c=(l=y==null?void 0:y.features)==null?void 0:l[0])==null?void 0:c.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new bt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=Cxe(n);break;default:s=n.extent}if(!s)return null;Hc()||Sa(s.spatialReference,r)||await Lc();const o=Wc(s,r);if(!o)return null;if(i){const h=o.center,f=h.clone();f.x=uP(h.x,i.center.x,r),f.x!==h.x&&o.centerAt(f),i=i.union(o)}else i=o;return i}function Axe(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const r=e.layer;return{min:r.minScale,max:r.maxScale}}if(Array.isArray(e)&&e.length&&e.every(r=>"layer"in r)){let r=0,i=0;for(const n of e){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(r=s.minScale<r?s.minScale:r,i=s.maxScale>i?s.maxScale:i)}return r&&i?{min:r,max:i}:null}}}function c6(e,t){const r=nQ(e);return Dr(r,t)||r.imageCoordinateSystem||t.imageCoordinateSystem?e:Wc(e,t)}async function kxe(e,t){var x;if(!e||!t)return new As({targetGeometry:new Re,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:n,viewpoint:s,size:o}=t,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;e instanceof As?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let c=null;l!=null&&l.targetGeometry?c=l.targetGeometry:e instanceof bt?c=e:e instanceof Vl?c=await T0(e,t,r):e&&(c=await T0(e.center,t,r)||await T0(e.target,t,r)||await T0(e,t,r)),!c&&(s!=null&&s.targetGeometry)?c=s.targetGeometry:!c&&t.extent&&(c=t.extent),r||(r=nQ(t.spatialReference||t.extent||c)),Hc()||Dr(c.spatialReference,r)||Sa(c.spatialReference,r)||await Lc();const h=c6(c,r),f="center"in h?h.center:h;t.pickClosestTarget!==!1&&f.type==="point"&&((x=s.targetGeometry)==null?void 0:x.type)==="point"&&(f.x=uP(f.x,s.targetGeometry.x,f.spatialReference));let m=0;l?m=l.rotation:e.hasOwnProperty("rotation")?m=e.rotation:s&&(m=s.rotation);let y=0;y=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:$E(c6(c.extent,r),a,m);const g=Axe(e.target??e);g&&(g.min&&g.min<y?y=g.min:g.max&&g.max>y&&(y=g.max));let v=new As({targetGeometry:f,scale:y,rotation:m});return i&&(v=i.fit(v),i.constrainByGeometry(v),i.rotationEnabled||(v.rotation=s.rotation)),v}function Ii(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function Rxe(e,t,r){return r?Hr(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):Pw(e,t,.5)}const Oxe=function(){const e=Qt();return function(t,r,i){const n=r.targetGeometry;cP(e,n);const s=.5*qy(r);return t.xmin=e[0]-s*i[0],t.ymin=e[1]-s*i[1],t.xmax=e[0]+s*i[0],t.ymax=e[1]+s*i[1],t.spatialReference=n.spatialReference,t}}();function Nxe(e,t,r,i,n){var s;return uA(e,t,r.center),e.scale=$E(r,i),(s=n==null?void 0:n.constraints)==null||s.constrain(e),e}function Pxe(e,t,r,i){return pP(e,t,r,i),aP(e,e)}const oQ=function(){const e=Qt();return function(t,r,i){return oP(t,jxe(t,r),Rxe(e,r,i))}}(),Dxe=function(){const e=Il(),t=Qt();return function(r,i,n,s){const o=qy(i),a=dP(i);return Hr(t,o,o),KY(e,t),Fw(e,e,a),by(e,e,oQ(t,n,s)),by(e,e,[0,s.top-s.bottom]),Hr(r,e[4],e[5])}}();function qy(e){var t;return e.scale*aQ((t=e.targetGeometry)==null?void 0:t.spatialReference)}function aQ(e){return Wn(e)?1/(sQ(e)*iQ*rQ):1}function dP(e){return bN(e.rotation)||0}function Fxe(e){return Wn(e)?sQ(e)*iQ*rQ:1}function jxe(e,t){return Pw(e,t,.5)}const hP=function(){const e=Qt(),t=Qt(),r=Qt();return function(i,n,s,o,a,l){return GY(e,n),Pw(t,s,.5*l),Hr(r,1/o*l,-1/o*l),lP(i,t),a&&Fw(i,i,a),SE(i,i,r),by(i,i,e),i}}(),pP=function(){const e=Qt();return function(t,r,i,n){const s=qy(r),o=dP(r);return cP(e,r.targetGeometry),hP(t,e,i,s,o,n)}}(),Vxe=function(){const e=Qt();return function(t,r,i,n){const s=qy(r);return cP(e,r.targetGeometry),hP(t,e,i,s,0,n)}}();function lQ(e){const t=Ji(e);return t?t.valid[1]-t.valid[0]:0}function zxe(e,t){return Math.round(lQ(e)/t)}const Uxe=function(){const e=Qt(),t=Qt(),r=[0,0,0];return function(i,n,s){L1(e,i,n),lA(e,e),L1(t,i,s),lA(t,t),HY(r,e,t);let o=Math.acos(qY(e,t)/(CS(e)*CS(t)))*Lxe;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),Bxe=function(){const e=Qt();return function(t,r,i,n){const s=t.targetGeometry;return Ii(t,r),Dxe(e,r,i,n),s.x+=e[0],s.y+=e[1],t}}(),uA=function(e,t,r){Ii(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},Gxe=function(){const e=Qt();return function(t,r,i,n,s){s||(s="center"),oP(e,i,n),Pw(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":Hr(e,0,0);break;case"left":Hr(e,-o,0);break;case"top":Hr(e,0,a);break;case"right":Hr(e,o,0);break;case"bottom":Hr(e,0,-a);break;case"top-left":Hr(e,-o,a);break;case"bottom-left":Hr(e,-o,-a);break;case"top-right":Hr(e,o,a);break;case"bottom-right":Hr(e,o,-a)}return EE(t,r,e),t}}();function B9e(e,t,r){return Ii(e,t),e.rotation+=r,e}function qxe(e,t,r){return Ii(e,t),e.rotation=r,e}const Hxe=function(){const e=Qt();return function(t,r,i,n,s){return Ii(t,r),isNaN(i)||i===0||(cQ(e,n,r,s),t.scale=r.scale*i,dQ(e,e,t,s),EE(t,t,Hr(e,e[0]-n[0],n[1]-e[1]))),t}}();function d6(e,t,r){return Ii(e,t),e.scale=r,e}const uQ=function(){const e=Qt();return function(t,r,i,n,s,o){return Ii(t,r),isNaN(i)||i===0||(cQ(e,s,r,o),t.scale=r.scale*i,t.rotation+=n,dQ(e,e,t,o),EE(t,t,Hr(e,e[0]-s[0],s[1]-e[1]))),t}}(),G9e=function(){const e=Qt(),t=Qt();return function(r,i,n,s,o,a,l){return oQ(t,a,l),VY(e,o,t),s?uQ(r,i,n,s,e,a):Hxe(r,i,n,e,a)}}(),cQ=function(){const e=Il();return function(t,r,i,n){return da(t,r,Pxe(e,i,n,1))}}(),dQ=function(){const e=Il();return function(t,r,i,n){return da(t,r,pP(e,i,n,1))}}(),EE=function(){const e=Qt(),t=Il();return function(r,i,n){Ii(r,i);const s=qy(i),o=r.targetGeometry;return QY(t,dP(i)),SE(t,t,Dw(s,s)),da(e,n,t),o.x+=e[0],o.y+=e[1],r}}();function LS(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function Wxe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Zxe(e,t,r,i,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function Jxe(e,t){return new Float32Array(e,t,6)}function hQ(e,t,r,i){const n=t[i],s=t[i+1];e[i]=r[0]*n+r[2]*s+r[4],e[i+1]=r[1]*n+r[3]*s+r[5]}function Yxe(e,t,r,i=0,n=0,s=2){const o=n||t.length/s;for(let a=i;a<o;a++)hQ(e,t,r,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:Wxe,create:LS,createView:Jxe,fromValues:Zxe,transform:hQ,transformMany:Yxe},Symbol.toStringTag,{value:"Module"}));function Qxe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Kxe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function pQ(e,t,r,i,n,s,o,a,l,c){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e}function fQ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Xxe(e,t){if(e===t){const r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function eSe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=h*o-a*c,m=-h*s+a*l,y=c*s-o*l;let g=r*f+i*m+n*y;return g?(g=1/g,e[0]=f*g,e[1]=(-h*i+n*c)*g,e[2]=(a*i-n*o)*g,e[3]=m*g,e[4]=(h*r-n*l)*g,e[5]=(-a*r+n*s)*g,e[6]=y*g,e[7]=(-c*r+i*l)*g,e[8]=(o*r-i*s)*g,e):null}function tSe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return e[0]=o*h-a*c,e[1]=n*c-i*h,e[2]=i*a-n*o,e[3]=a*l-s*h,e[4]=r*h-n*l,e[5]=n*s-r*a,e[6]=s*c-o*l,e[7]=i*l-r*c,e[8]=r*o-i*s,e}function rSe(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*(c*s-o*l)+r*(-c*n+o*a)+i*(l*n-s*a)}function fP(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=r[0],y=r[1],g=r[2],v=r[3],x=r[4],b=r[5],_=r[6],S=r[7],$=r[8];return e[0]=m*i+y*o+g*c,e[1]=m*n+y*a+g*h,e[2]=m*s+y*l+g*f,e[3]=v*i+x*o+b*c,e[4]=v*n+x*a+b*h,e[5]=v*s+x*l+b*f,e[6]=_*i+S*o+$*c,e[7]=_*n+S*a+$*h,e[8]=_*s+S*l+$*f,e}function cA(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=r[0],y=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=m*i+y*o+c,e[7]=m*n+y*a+h,e[8]=m*s+y*l+f,e}function mQ(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=Math.sin(r),y=Math.cos(r);return e[0]=y*i+m*o,e[1]=y*n+m*a,e[2]=y*s+m*l,e[3]=y*o-m*i,e[4]=y*a-m*n,e[5]=y*l-m*s,e[6]=c,e[7]=h,e[8]=f,e}function iSe(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function nSe(e,t,r){const i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function sSe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function oSe(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function aSe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function lSe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function uSe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,c=r*o,h=i*o,f=i*a,m=n*o,y=n*a,g=n*l,v=s*o,x=s*a,b=s*l;return e[0]=1-f-g,e[3]=h-b,e[6]=m+x,e[1]=h+b,e[4]=1-c-g,e[7]=y-v,e[2]=m-x,e[5]=y+v,e[8]=1-c-f,e}function cSe(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10],f=h*o-a*c,m=-h*s+a*l,y=c*s-o*l,g=r*f+i*m+n*y;if(!g)return null;const v=1/g;return e[0]=f*v,e[1]=(-h*i+n*c)*v,e[2]=(a*i-n*o)*v,e[3]=m*v,e[4]=(h*r-n*l)*v,e[5]=(-a*r+n*s)*v,e[6]=y*v,e[7]=(-c*r+i*l)*v,e[8]=(o*r-i*s)*v,e}function dSe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],x=t[14],b=t[15],_=r*a-i*o,S=r*l-n*o,$=r*c-s*o,M=i*l-n*a,I=i*c-s*a,C=n*c-s*l,L=h*v-f*g,V=h*x-m*g,P=h*b-y*g,z=f*x-m*v,Y=f*b-y*v,oe=m*b-y*x;let ae=_*oe-S*Y+$*z+M*P-I*V+C*L;return ae?(ae=1/ae,e[0]=(a*oe-l*Y+c*z)*ae,e[1]=(l*P-o*oe-c*V)*ae,e[2]=(o*Y-a*P+c*L)*ae,e[3]=(n*Y-i*oe-s*z)*ae,e[4]=(r*oe-n*P+s*V)*ae,e[5]=(i*P-r*Y-s*L)*ae,e[6]=(v*C-x*I+b*M)*ae,e[7]=(x*$-g*C-b*S)*ae,e[8]=(g*I-v*$+b*_)*ae,e):null}function hSe(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function pSe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function fSe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function mSe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function yQ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function ySe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function gSe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function vSe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function wSe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=t[0],m=t[1],y=t[2],g=t[3],v=t[4],x=t[5],b=t[6],_=t[7],S=t[8],$=Yi();return Math.abs(r-f)<=$*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-m)<=$*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(n-y)<=$*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(s-g)<=$*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=$*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-x)<=$*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-b)<=$*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-_)<=$*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(h-S)<=$*Math.max(1,Math.abs(h),Math.abs(S))}function bSe(e){const t=Yi(),r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(i*i+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const _Se=fP,xSe=yQ;Object.freeze(Object.defineProperty({__proto__:null,add:mSe,adjoint:tSe,copy:Kxe,determinant:rSe,equals:wSe,exactEquals:vSe,frob:fSe,fromMat2d:lSe,fromMat4:Qxe,fromQuat:uSe,fromRotation:oSe,fromScaling:aSe,fromTranslation:sSe,identity:fQ,invert:eSe,isOrthoNormal:bSe,mul:_Se,multiply:fP,multiplyScalar:ySe,multiplyScalarAndAdd:gSe,normalFromMat4:dSe,normalFromMat4Legacy:cSe,projection:hSe,rotate:mQ,scale:iSe,scaleByVec2:nSe,set:pQ,str:pSe,sub:xSe,subtract:yQ,translate:cA,transpose:Xxe},Symbol.toStringTag,{value:"Module"}));function $2(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function SSe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function $Se(e,t,r,i,n,s,o,a,l){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=i,c[4]=n,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}function ESe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:SSe,create:$2,createView:ESe,fromValues:$Se},Symbol.toStringTag,{value:"Module"}));function gQ(){return new Float32Array(2)}function TSe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function _y(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function MSe(e,t){return new Float32Array(e,t,2)}function vQ(){return gQ()}function wQ(){return _y(1,1)}function bQ(){return _y(1,0)}function _Q(){return _y(0,1)}const ISe=vQ(),CSe=wQ(),LSe=bQ(),ASe=_Q();Object.freeze(Object.defineProperty({__proto__:null,ONES:CSe,UNIT_X:LSe,UNIT_Y:ASe,ZEROS:ISe,clone:TSe,create:gQ,createView:MSe,fromValues:_y,ones:wQ,unitX:bQ,unitY:_Q,zeros:vQ},Symbol.toStringTag,{value:"Module"}));function kSe(e){return e instanceof Float32Array&&e.length>=2}function RSe(e){return Array.isArray(e)&&e.length>=2}function wM(e){return kSe(e)||RSe(e)}var dA;const ka=[0,0];let Ja=dA=class extends G{constructor(e){super(e),this._viewpoint2D={center:Qt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new bt,this.id=0,this.inverseTransform=Il(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Il(),this.transformNoRotation=Il(),this.displayMat3=$2(),this.displayViewMat3=$2(),this.viewMat3=$2(),this.viewMat2d=LS(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=Ii(r,e.viewpoint),this._set("size",Rm(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new dA({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return wM(t)?da(e,t,this.inverseTransform):(ka[0]=t,ka[1]=r,da(e,ka,this.inverseTransform))}toScreen(e,t,r){return wM(t)?da(e,t,this.transform):(ka[0]=t,ka[1]=r,da(e,ka,this.transform))}toScreenNoRotation(e,t,r){return wM(t)?da(e,t,this.transformNoRotation):(ka[0]=t,ka[1]=r,da(e,ka,this.transformNoRotation))}wrapMapCoordinate(e,t){Rm(e,t);const[r]=t,[i]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:a}=n;if(s.isWrappable){const l=lQ(s)/2;o=Math.max(o,i-l),a=Math.min(a,i+l)}return(r<o||r>a)&&(e[0]=uP(r,i,s)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,n=this._get("size");return hP(e,r,n,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new As({targetGeometry:new Re(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!s||!t||!r)return;this.resolution=qy(o),this.rotation=i,this.scale=r,this.spatialReference=t,Rm(this.center,e);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;pQ(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=fQ(this.viewMat3),h=_y(s[0]/2,s[1]/2),f=_y(-s[0]/2,-s[1]/2),m=bN(i);cA(c,c,h),mQ(c,c,m),cA(c,c,f),fP(this.displayViewMat3,this.displayMat3,c);const y=lP(this.viewMat2d,h);return Fw(y,y,m),by(y,y,f),Oxe(this.extent,o,s),pP(this.transform,o,s,n),aP(this.inverseTransform,this.transform),Vxe(this.transformNoRotation,o,s,n),this.worldScreenWidth=zxe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};u([d({readOnly:!0})],Ja.prototype,"id",void 0),u([d({value:1,json:{write:!0}})],Ja.prototype,"pixelRatio",null),u([d({json:{write:!0}})],Ja.prototype,"size",null),u([d()],Ja.prototype,"spatialReference",void 0),u([d({type:As,json:{write:!0}})],Ja.prototype,"viewpoint",null),u([d({readOnly:!0})],Ja.prototype,"visibleArea",null),Ja=dA=u([T("esri.views.2d.ViewState")],Ja);const h6=Ja;var hA,pA;let ml=hA=class extends ce{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new hA({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([d()],ml.prototype,"left",void 0),u([d()],ml.prototype,"top",void 0),u([d()],ml.prototype,"right",void 0),u([d()],ml.prototype,"bottom",void 0),ml=hA=u([T("esri.views.2d.PaddedViewState.Padding")],ml);let mf=pA=class extends h6{constructor(...e){super(...e),this.paddedViewState=new h6,this._updateContent=(()=>{const t=Qt();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const n=this.paddedViewState;Hr(t,i.left+i.right,i.top+i.bottom),L1(t,r,t),Rm(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(ee(()=>[this.size,this.padding],()=>this._updateContent(),xa)),this.padding=new ml,this.size=[0,0]}set padding(e){this._set("padding",e||new ml)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const r=this._get("padding");r&&(t=Bxe(e.clone(),e,this._get("size"),r));const{targetGeometry:i,rotation:n,scale:s}=t,{x:o,y:a,spatialReference:l}=i,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=n,c.scale=s,c.spatialReference=l,this._update()}}clone(){return new pA({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([d()],mf.prototype,"paddedViewState",void 0),u([d({type:ml})],mf.prototype,"padding",null),u([d()],mf.prototype,"viewpoint",null),mf=pA=u([T("esri.views.2d.PaddedViewState")],mf);const mP=mf;var oi;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(oi||(oi={}));const xQ=Symbol("Yield");let OSe=class{constructor(){this._tasks=new Array,this._runningTasks=gy(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return xQ;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,r,i){return++this._runningTasks.value,new Promise((n,s)=>this._tasks.push(new p6(n,s,t,r,i))).finally(()=>--this._runningTasks.value)}unshift(t,r,i){return++this._runningTasks.value,new Promise((n,s)=>this._tasks.unshift(new p6(n,s,t,r,i))).finally(()=>--this._runningTasks.value)}_process(t){var i;if(this._tasks.length===0)return!1;const r=this._tasks.shift();try{const n=Xn(r.signal);if(n&&!r.abortCallback)r.reject(Tt());else{const s=n?(i=r.abortCallback)==null?void 0:i.call(r,Tt()):r.callback(t);Ma(s)?s.then(r.resolve,r.reject):r.resolve(s)}}catch(n){r.reject(n)}return!0}cancelAll(){const t=Tt();for(const r of this._tasks)if(r.abortCallback){const i=r.abortCallback(t);r.resolve(i)}else r.reject(t);this._tasks.length=0}},p6=class{constructor(t,r,i,n=void 0,s=void 0){this.resolve=t,this.reject=r,this.callback=i,this.signal=n,this.abortCallback=s}},M0=class extends ce{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([d()],M0.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([d()],M0.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),M0=u([T("esri.views.support.debugFlags")],M0);const NSe=new M0;function PSe(){return new AS.Scheduler}var Pe;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(Pe||(Pe={}));const ws=0,f6=new Map([[Pe.RESOURCE_CONTROLLER_IMMEDIATE,ws],[Pe.RESOURCE_CONTROLLER,4],[Pe.SLIDE,ws],[Pe.STREAM_DATA_LOADER,ws],[Pe.ELEVATION_QUERY,ws],[Pe.TERRAIN_SURFACE,1],[Pe.SURFACE_GEOMETRY_UPDATES,1],[Pe.LOD_RENDERER,2],[Pe.GRAPHICS_CORE,2],[Pe.I3S_CONTROLLER,2],[Pe.POINT_CLOUD_LAYER,2],[Pe.FEATURE_TILE_FETCHER,2],[Pe.CLOUDS_GENERATOR,2],[Pe.OVERLAY,4],[Pe.STAGE,4],[Pe.GRAPHICS_DECONFLICTOR,4],[Pe.FILTER_VISIBILITY,4],[Pe.SCALE_VISIBILITY,4],[Pe.FRUSTUM_VISIBILITY,4],[Pe.POINT_OF_INTEREST_FREQUENT,6],[Pe.POINT_OF_INTEREST_INFREQUENT,30],[Pe.LABELER,8],[Pe.FEATURE_QUERY_ENGINE,8],[Pe.FEATURE_TILE_TREE,16],[Pe.FEATURE_TILE_TREE_ACTIVE,ws],[Pe.ELEVATION_ALIGNMENT,12],[Pe.ELEVATION_ALIGNMENT_SCENE,14],[Pe.TEXT_TEXTURE_ATLAS,12],[Pe.TEXTURE_UNLOAD,12],[Pe.LINE_OF_SIGHT_TOOL,16],[Pe.LINE_OF_SIGHT_TOOL_INTERACTIVE,ws],[Pe.SNAPPING,ws],[Pe.SHADOW_ACCUMULATOR,30],[Pe.MAPVIEW_FETCH_QUEUE,ws],[Pe.MAPVIEW_LAYERVIEW_UPDATE,2],[Pe.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,ws]]);function m6(e){return f6.has(e)?f6.get(e):typeof e=="number"?e:1}const DSe=6.5,y6=1,FSe=30,jSe=1e3/30,VSe=100,g6=.9;var AS,rd;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=gy(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new dv("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=oi.INTERACTING,this._tasks=new Oh,this._runQueue=new Oh,this._load=0,this._idleStateCallbacks=new Oh,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=ee(()=>NSe.SCHEDULER_LOG_SLOW_TASKS,s=>this._debug=s,Ye);for(const s of Object.keys(Pe))this.performanceInfo.tasks.set(Pe[s],new dv(Pe[s]))}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),Ft(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(s,o){const a=new r(this,s,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new dv(s)),a}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===oi.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(c){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===oi.IDLE&&c()),a.idleBegin=c},set idleEnd(c){a.idleEnd=c}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==oi.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}frame(s){this._startFrameTaskTimes();const o=this._updateBudget(s);if(o){const a=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-a)}else this._recordFrameTaskTimes(0);return o}_updateBudget(s){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=DSe,a=s.frameDuration,l=y6;switch(this.state){case oi.IDLE:o=0,a=Math.max(VSe,s.frameDuration),l=FSe;break;case oi.INTERACTING:a=Math.max(jSe,s.frameDuration);case oi.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==oi.IDLE&&a<y6&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case oi.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case oi.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return rd.SCHEDULED;let o=rd.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=rd.READY:o!==rd.READY&&(o=rd.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*g6+s*(1-g6)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===ws&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==ws&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const s=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===xQ&&(o.blockFrame=this._frameNumber)}catch(l){W.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,l),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,Pe.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const a=this._budget.now()-s;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const s of Object.keys(Pe))this._frameTaskTimes.set(Pe[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(s)}get test(){return this._test}}e.Scheduler=t;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a){this._scheduler=s,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new OSe,this._handles=new Ay,this._basePriority=m6(o),this.schedulePriority=this._basePriority,this._task=gy(a??this._queue),this._handles.add(Ln(()=>this.task.running,l=>s.taskRunningChanged(l)))}remove(){this.processQueue(SQ),this._scheduler.removeTask(this),this.schedule=v6.schedule,this.reschedule=v6.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){if(this.name===s)return;this.name=s;const o=m6(s);this._basePriority!==ws&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){return this._queue.runTask(s)}}class i{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=oi.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=i})(AS||(AS={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(rd||(rd={}));const SQ=(()=>{const e=new AS.Budget;return e.enabled=!1,e})();let zSe=class{remove(){}processQueue(){}schedule(t,r,i){try{if(Xn(r)){const n=Tt();return i?Promise.resolve(i(n)):Promise.reject(n)}return S3(t(SQ))}catch(n){return Promise.reject(n)}}reschedule(t,r,i){return this.schedule(t,r,i)}};const v6=new zSe;let USe=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=PSe(),this._schedulerHandle=Ln(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var r;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((r=this.view.animation)==null?void 0:r.target)==null||Ma(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=r=>{var a,l,c;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:i,graphicsView:n,labelManager:s,state:{id:o}}=this.view;i==null||i.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),(l=this.view.graphicsTileStore)==null||l.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=oi.ANIMATING:this.view.interacting?this._scheduler.state=oi.INTERACTING:this._scheduler.state=oi.IDLE,this._scheduler.frame(r)||this._updateRequested||this._scheduler.state!==oi.IDLE||((c=this._frameTaskHandle)==null||c.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new mP,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=ee(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=ny(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var n;if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((n=t.layerViews)==null||n.forEach(this._updateLayerView,this))}},Su=class extends vw{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=es(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new N("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,r){r||(r=Ma(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};u([d({readOnly:!0})],Su.prototype,"done",null),u([d({readOnly:!0,type:String})],Su.prototype,"state",void 0),u([d()],Su.prototype,"target",void 0),Su=u([T("esri.views.ViewAnimation")],Su),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Su||(Su={}));const fA=Su;let E2=class extends ce{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void W.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new fA;this.view.animation=i,await Y$(()=>this.view.ready,r);const n={...r,animate:(r==null?void 0:r.animate)??!kY(),animationMode:(r==null?void 0:r.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:h,allLayerViews:f}=this.view,m=kxe(t,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:h,allLayerViews:f,pickClosestTarget:(r==null?void 0:r.pickClosestTarget)??!0});return i==null||i.update(m),this._gotoTask={},n.animate?this._gotoAnimated(m,n):this._gotoImmediate(m,n)}_gotoImmediate(t,r){const i=this._gotoTask,n=this.view.animation,s=t.then(o=>{if(Ht(r),i!==this._gotoTask)throw new N("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(i,n,s,r)}_gotoAnimated(t,r){const i=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=t.then(o=>{if(Ht(r),i!==this._gotoTask)throw new N("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,r),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,n,s,r)}_cancellableGoTo(t,r,i,n){const s=()=>t===this._gotoTask;return $G(i,n).finally(()=>{s()&&(r.done||r.stop())})}};u([d({constructOnly:!0})],E2.prototype,"view",void 0),E2=u([T("esri.views.2d.GoToManager")],E2);function BSe(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let n,s,o,a;const l=[0,0],c=GSe(e);for(let m=0;m<c.length;m++){const y=c[m];for(let g=0;g<y.length-1;g++){Vge(l,i,y,g);const v=_E(i,l);(n==null||v<n)&&(n=v,s=[...l],o=m,a=g)}}if(n==null||!s||o==null||a==null)throw new N("nearest-coordinate:failed","Failed to find the nearest coordinate");const[h,f]=s;return{coordinate:new Re({x:h,y:f,spatialReference:r}),distance:n}}function GSe(e){switch(e.type){case"extent":return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case"polygon":return e.rings;case"polyline":return e.paths}}var mA;let mh=mA=class extends qc.NumericIdentifiableMixin(ce){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Wc(this.geometry,this.spatialReference)}catch(e){return W.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?bw(this.normalizedGeometry,r):KO(this.normalizedGeometry,r))return e;const{coordinate:i}=BSe(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new mA({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};u([d({constructOnly:!0})],mh.prototype,"geometry",void 0),u([d({readOnly:!0})],mh.prototype,"normalizedGeometry",null),u([d({constructOnly:!0})],mh.prototype,"spatialReference",void 0),mh=mA=u([T("esri.views.2d.constraints.GeometryConstraint")],mh);var yA;let I0=yA=class extends qc.NumericIdentifiableMixin(ce){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new yA({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([d()],I0.prototype,"enabled",void 0),u([d()],I0.prototype,"rotationEnabled",void 0),I0=yA=u([T("esri.views.2d.constraints.RotationConstraint")],I0);const $Q=I0;var gA;let on=gA=class extends qc.NumericIdentifiableMixin(ce){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!(t!=null&&t.length))return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(h=>h.clone()),t.sort((h,f)=>f.scale-h.scale),t.forEach((h,f)=>h.level=f);for(const h of t)!l&&r>0&&r>=h.scale&&(o=h.level,l=!0),!c&&i>0&&i>=h.scale&&(a=e?e.level:-1,c=!0),e=h;n===-1&&(n=r===0?0:o),s===-1&&(s=i===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),r=t[n].scale,i=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const l=a?r:i;if(t&&s){const c=(l-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],i===e)return n+this.effectiveMinZoom+1;if(r>e&&i<e)return n+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new gA({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};u([d({readOnly:!0})],on.prototype,"effectiveLODs",void 0),u([d({readOnly:!0})],on.prototype,"effectiveMinZoom",void 0),u([d({readOnly:!0})],on.prototype,"effectiveMaxZoom",void 0),u([d({readOnly:!0})],on.prototype,"effectiveMinScale",void 0),u([d({readOnly:!0})],on.prototype,"effectiveMaxScale",void 0),u([d()],on.prototype,"lods",void 0),u([d()],on.prototype,"minZoom",void 0),u([d()],on.prototype,"maxZoom",void 0),u([d()],on.prototype,"minScale",void 0),u([d()],on.prototype,"maxScale",void 0),u([d()],on.prototype,"snapToZoom",void 0),on=gA=u([T("esri.views.2d.constraints.ZoomConstraint")],on);const EQ=on,qSe={base:null,key:"type",typeMap:{extent:bt,polygon:Ps}};let ir=class extends ce{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new ie}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,r,i;return`${(t=this._zoom)==null?void 0:t.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var r,i;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((r=this.view)==null?void 0:r.constraintsInfo.spatialReference)===t.spatialReference?t:new mh({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new $Q({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const t=this._get("_zoom"),r=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),i=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===n&&t.minScale===s&&t.maxScale===o&&t.snapToZoom===a?t:new EQ({lods:r,minZoom:i,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach(i=>i.constrain(t,r)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(r=>{var i;return(i=r.applyPanConstraint)==null?void 0:i.call(r,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};u([d({readOnly:!0})],ir.prototype,"effectiveLODs",null),u([d({readOnly:!0})],ir.prototype,"effectiveMinScale",null),u([d({readOnly:!0})],ir.prototype,"effectiveMaxScale",null),u([d({readOnly:!0})],ir.prototype,"effectiveMinZoom",null),u([d({readOnly:!0})],ir.prototype,"effectiveMaxZoom",null),u([d({types:qSe,value:null})],ir.prototype,"geometry",null),u([d({type:[Vu]})],ir.prototype,"lods",void 0),u([d()],ir.prototype,"minScale",void 0),u([d()],ir.prototype,"maxScale",void 0),u([d()],ir.prototype,"minZoom",void 0),u([d()],ir.prototype,"maxZoom",void 0),u([d()],ir.prototype,"rotationEnabled",void 0),u([d()],ir.prototype,"snapToZoom",void 0),u([d({type:ie})],ir.prototype,"customConstraints",void 0),u([d()],ir.prototype,"view",void 0),u([d({readOnly:!0})],ir.prototype,"version",null),u([d({type:mh,readOnly:!0})],ir.prototype,"_geometry",null),u([d({type:$Q})],ir.prototype,"_rotation",null),u([d({readOnly:!0,type:EQ})],ir.prototype,"_zoom",null),ir=u([T("esri.views.2d.MapViewConstraints")],ir);const w6=ir;let bi=class extends ce{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ee(()=>{var r;return(r=this.constraints)==null?void 0:r.version},r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},xa)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new Re({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void W.getLogger(this).error(new N("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:n}))}const i=this.viewpoint;uA(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void W.getLogger(this).error(new N("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void W.getLogger(this).error(new N("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const i=this.viewpoint;Nxe(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;qxe(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;d6(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var s;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new N("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new N("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new N("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void W.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const n=new As({targetGeometry:new Re,scale:0,rotation:0});Ii(n,r),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var n,s;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const r=((n=this.constraints)==null?void 0:n.zoomToScale(t))??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;d6(i,i,r),this.viewpoint=i,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),h=c!=null&&i!=null&&i.zoomToScale(c)||void 0;let f,m,y;const g=l==null?void 0:l.rotation,v=l==null?void 0:l.targetGeometry;(v==null?void 0:v.type)==="extent"?f=v:(v==null?void 0:v.type)==="point"&&(m=v,y=l==null?void 0:l.scale);const x=s??f;return{center:n??m??(x==null?void 0:x.center),rotation:a??g,scale:(o??h??y??(x&&$E(x,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,n){var o;const s=t.targetGeometry;try{this._project(t,i)}catch(a){W.getLogger(this).warn(new Os("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:i,error:a})),t.targetGeometry=n||new Re({x:0,y:0,spatialReference:i})}(o=this.constraints)==null||o.fit(t),this._set("state",new mP({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:n,scale:s}=this.state.paddedViewState,o=new Re({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(t){var l;const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const c=r.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=c}const i=r.clone(),[n,s]=r.center;let o=null;try{o=this._project(new Re({x:n,y:s,spatialReference:r.spatialReference}),t)}catch(c){WO()||W.getLogger(this).warn(new Os("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:c}))}o||(o=new Re({x:0,y:0,spatialReference:t}));const a=uA(new As({targetGeometry:new Re,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=a;try{const h=[r.size[0]/2,r.size[1]/2],f=[h[0]+20,h[1]],m=r.toMap([0,0],f),{x:y,y:g}=this._project(new Re({x:m[0],y:m[1],spatialReference:r.spatialReference}),t);m[0]=y,m[1]=g,i.toScreen(m,m);const v=Uxe(h,m,f),x=Math.hypot(m[0]-h[0],m[1]-h[1])/20;!Number.isFinite(x)||Math.abs(x)>4?(a.rotation=0,a.targetGeometry=new Re({x:0,y:0,spatialReference:t})):(a.scale*=x,a.scale>F("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,r){var o;if(!this.ready)return;const i=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();i.size=[t,r],Gxe(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(t){if(!this.ready)return null;const r=[0,0],[i,n]=this.state.toMap(r,[t.x,t.y]),s=this.state.spatialReference;return new Re({x:i,y:n,spatialReference:s})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),n=[i.x,i.y];return(r==null?void 0:r.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),Yr(n[0],n[1])}_project(t,r){var s;const i=(t==null?void 0:t.targetGeometry)||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||(s=i.spatialReference)!=null&&s.imageCoordinateSystem||Dr(r,i.spatialReference))return t;const n=Wc(i,r);if(!n)throw new N("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return HSe(t)?(t.targetGeometry=n,t):n}};function HSe(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}u([d({type:Re})],bi.prototype,"center",null),u([d()],bi.prototype,"constraints",void 0),u([d({type:bt})],bi.prototype,"extent",null),u([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],bi.prototype,"padding",null),u([d()],bi.prototype,"ready",void 0),u([d()],bi.prototype,"resizeAlign",void 0),u([d({readOnly:!0})],bi.prototype,"resolution",null),u([d({type:Number})],bi.prototype,"rotation",null),u([d({type:Number})],bi.prototype,"scale",null),u([d({readOnly:!0})],bi.prototype,"state",void 0),u([d({type:As})],bi.prototype,"viewpoint",null),u([d({readOnly:!0})],bi.prototype,"visibleArea",null),u([d()],bi.prototype,"zoom",null),bi=u([T("esri.views.2d.ViewStateManager")],bi);function TQ(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}function MQ(e,t){return t.some(r=>TQ(e,r))}function b6(e,{dragPrimary:t,dragSecondary:r,dragTertiary:i}){return[{key:"primary",value:t},{key:"secondary",value:r},{key:"tertiary",value:i}].filter(n=>n.value===e).map(n=>n.key)}let _6=class extends Fr{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){TQ(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},WSe=class extends Fr{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:h}=l;if(!h||!c)return void a.end();const f=l.snapScale(this._currentScale),m=(s.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}},TE=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var r,i;this._startEvent=t,(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},ZSe=class extends Fr{constructor(t,r,i){super(!0),this.view=t,this.pointerActions=r,this.registerIncoming("drag",i,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new TE({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&MQ(i.data,this.pointerActions)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},JSe=class extends Fr{constructor(t,r,i){super(!0),this._view=t,this.pointerActions=r;const n=this._view.mapViewNavigation;this._dragEventSeparator=new TE({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&MQ(o.data,this.pointerActions)}),this.registerIncoming("drag",i,s=>this._dragEventSeparator.handle(s))}};function IQ(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function YSe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function QSe(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function KSe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function CQ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function LQ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function AQ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function XSe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function e$e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function t$e(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function r$e(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function i$e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function n$e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function s$e(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function o$e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function kQ(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function a$e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function RQ(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function OQ(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function NQ(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function l$e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function u$e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function vA(e,t){const r=t[0],i=t[1],n=t[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function PQ(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function c$e(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2];return e[0]=n*l-s*a,e[1]=s*o-i*l,e[2]=i*a-n*o,e}function d$e(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2],c=n*l-s*a,h=s*o-i*l,f=i*a-n*o,m=Math.sqrt(c*c+h*h+f*f);return e[0]=c/m,e[1]=h/m,e[2]=f/m,e}function h$e(e,t,r,i){const n=t[0],s=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e}function p$e(e,t,r,i,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return e[0]=t[0]*a+r[0]*l+i[0]*c+n[0]*h,e[1]=t[1]*a+r[1]*l+i[1]*c+n[1]*h,e[2]=t[2]*a+r[2]*l+i[2]*c+n[2]*h,e}function f$e(e,t,r,i,n,s){const o=1-s,a=o*o,l=s*s,c=a*o,h=3*s*a,f=3*l*o,m=l*s;return e[0]=t[0]*c+r[0]*h+i[0]*f+n[0]*m,e[1]=t[1]*c+r[1]*h+i[1]*f+n[1]*m,e[2]=t[2]*c+r[2]*h+i[2]*f+n[2]*m,e}function m$e(e,t=1){const r=K$,i=2*r()*Math.PI,n=2*r()-1,s=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=n*t,e}function y$e(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12],e[1]=r[1]*i+r[5]*n+r[9]*s+r[13],e[2]=r[2]*i+r[6]*n+r[10]*s+r[14],e}function g$e(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=i*r[0]+n*r[3]+s*r[6],e[1]=i*r[1]+n*r[4]+s*r[7],e[2]=i*r[2]+n*r[5]+s*r[8],e}function v$e(e,t,r){const i=r[0],n=r[1],s=r[2],o=r[3],a=t[0],l=t[1],c=t[2],h=n*c-s*l,f=s*a-i*c,m=i*l-n*a,y=n*m-s*f,g=s*h-i*m,v=i*f-n*h,x=2*o;return e[0]=a+h*x+2*y,e[1]=l+f*x+2*g,e[2]=c+m*x+2*v,e}function w$e(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function b$e(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function _$e(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function x$e(e,t){vA(x6,e),vA(S6,t);const r=PQ(x6,S6);return r>1?0:r<-1?Math.PI:Math.acos(r)}const x6=Uc(),S6=Uc();function S$e(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function $$e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function E$e(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=t[0],o=t[1],a=t[2],l=Yi();return Math.abs(r-s)<=l*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=l*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))}function T$e(e,t,r){const i=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2];let o=i*i+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const M$e=CQ,I$e=LQ,C$e=AQ,L$e=RQ,A$e=OQ,k$e=IQ,R$e=NQ;Object.freeze(Object.defineProperty({__proto__:null,abs:t$e,add:KSe,angle:x$e,bezier:f$e,ceil:XSe,clamp:s$e,copy:YSe,cross:c$e,crossAndNormalize:d$e,direction:T$e,dist:L$e,distance:RQ,div:C$e,divide:AQ,dot:PQ,equals:E$e,exactEquals:$$e,floor:e$e,hermite:p$e,inverse:u$e,len:k$e,length:IQ,lerp:h$e,max:n$e,min:i$e,mul:I$e,multiply:LQ,negate:l$e,normalize:vA,random:m$e,rotateX:w$e,rotateY:b$e,rotateZ:_$e,round:o$e,scale:kQ,scaleAndAdd:a$e,set:QSe,sign:r$e,sqrDist:A$e,sqrLen:R$e,squaredDistance:OQ,squaredLength:NQ,str:S$e,sub:M$e,subtract:CQ,transformMat3:g$e,transformMat4:y$e,transformQuat:v$e},Symbol.toStringTag,{value:"Module"}));function Ws(e){let t=e*e;return e<0&&(t*=-1),t}function O$e(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function N$e(e,t,r){const i=r,n=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(i.translation[0]=Ws(n.axes[0]),i.translation[1]=Ws(n.axes[1]),i.translation[2]=Ws(n.buttons[7])-Ws(n.buttons[6]),i.heading=Ws(n.axes[2]),i.tilt=Ws(n.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*Ws(n.axes[0]),i.translation[1]=1.2*Ws(n.axes[1]),i.translation[2]=2*-Ws(n.axes[2]),i.heading=1.2*Ws(n.axes[5]),i.tilt=1.2*Ws(n.axes[3])),i.tilt*=o,kQ(i.translation,i.translation,a),i}function P$e(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let D$e=class extends Fr{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Ay,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([ee(()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=ny({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Ye)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){var i;const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,O$e(this._transformation)):(this._currentDevice=t.data.device,N$e(t.data,this._view.navigation.gamepad,this._transformation)),(i=this._frameTask)==null||i.resume())}_frameUpdate(t){var f;const r=this._transformation;if(P$e(r))return void((f=this._frameTask)==null?void 0:f.pause());const i=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=j$e*n*t;EE(i,i,[r.translation[0]*s,-r.translation[1]*s]);const o=1+r.translation[2]*V$e*t,a=this._view.constraints.rotationEnabled?-r.heading*F$e*t:0,l=this._view.size,c=[l[0]/2,l[1]];uQ(i,i,o,a,c,l);const h=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=h}};const F$e=.06,j$e=.7,V$e=6e-4;function DQ(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),et(()=>document.removeEventListener("visibilitychange",t))}let z$e=class extends Fr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=DQ(n=>n?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},U$e=class extends Fr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(r),this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=DQ(n=>n?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,r){for(const i of t)this._keyToDirection.set(i,r)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(t.data.key);if(this._pressed=n!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var am;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(am||(am={}));let B$e=class extends Fr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),r.zoomIn.forEach(n=>this._keysToZoomAction[n]=am.IN),r.zoomOut.forEach(n=>this._keysToZoomAction[n]=am.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let o=null;switch(n){case am.IN:o=s.zoomIn();break;case am.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}};const G$e=.6;let q$e=class extends Fr{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:n,deltaY:s}=t.data,o=1/G$e**(1/60*s),a=r.zoom(o,[i,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}},H$e=class extends Fr{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new TE({start:(i,n)=>{r.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{r.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{r.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function $6(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>J$e(r,e.axisThreshold))}:{buttons:[],axes:[]}}function W$e(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function Z$e(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function J$e(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let Y$e=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,$6(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(E6(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new nP(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=ny({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;E6(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=$6(s),l=i||Z$e(a);o&&(o.timestamp===n.timestamp||!o.active&&l||W$e(o.state,a))||this._emitGamepadEvent(n,a,!l)})}_emitGamepadEvent(t,r,i){const n=this._latestUpdate[t.index],s=n&&n.active;if(!s&&!i)return;const o=!s&&i?"start":s&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}};function Q$e(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function E6(e){for(const t of navigator.getGamepads())Q$e(t)&&e(t)}const T6=F("edge"),K$e=F("chrome"),X$e=F("ff"),eEe=F("safari"),M6="esri-view-surface",Pp={touchNone:`${M6}--touch-none`,touchPan:`${M6}--touch-pan`};let FQ=class jQ{constructor(t,r){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Y$e(t,r),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>this._releasePointerCaptureSafe(t)),this._activePointerCaptures.clear(),this._gamepadSource=Et(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(bM[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&bM[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(bM[r],i),this._active[r]=i}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1)}setPointerCapture(t,r){r?this._setPointerCaptureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Pp.touchNone:Pp.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Pp.touchPan:Pp.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Pp.touchNone),this._element.classList.remove(Pp.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=IY(this._element,t);return jQ.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const n={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&F("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,r){let i=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:T6&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}T6?i*=.7:K$e||eEe?i*=.6:X$e&&(i*=1.375);const n=100,s=Math.abs(i);s>n&&(i=i/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};FQ.test={disableSubpixelCoordinates:!1};const bM={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let tEe=class extends Fr{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const ai={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function kS(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function rEe(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function iEe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Yr()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[S,$]=e,[M,I]=[$.x-S.x,$.y-S.y];return t.radius=Math.sqrt(M*M+I*I)/2,t.center.x=(S.x+$.x)/2,t.center.y=(S.y+$.y)/2,t}let r=0,i=0;for(let S=0;S<e.length;S++)r+=e[S].x,i+=e[S].y;r/=e.length,i/=e.length;const n=e.map(S=>S.x-r),s=e.map(S=>S.y-i);let o=0,a=0,l=0,c=0,h=0,f=0,m=0;for(let S=0;S<n.length;S++){const $=n[S],M=s[S],I=$*$,C=M*M;o+=I,a+=C,l+=$*M,c+=I*$,h+=C*M,f+=$*C,m+=M*I}const y=.5*(c+f),g=.5*(h+m),v=o*a-l*l,x=(y*a-g*l)/v,b=(o*g-l*y)/v,_=Yr(x+r,b+i);return{radius:Math.sqrt(x*x+b*b+(o+a)/e.length),center:_}}function zh(e){const{native:t}=e,{pointerId:r,button:i,pointerType:n}=t;return n==="mouse"?`${r}:${i}`:`${n}`}let nEe=class extends Fr{constructor(t=ai.maximumDoubleClickDelay,r=ai.maximumDoubleClickDistance,i=ai.maximumDoubleTouchDelay,n=ai.maximumDoubleTouchDistance,s=ky){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Yr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new TE({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Ft(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=Ft(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=r,{center:s}=i;this._dragStartCenter=s;const o=_M("begin",Yr(0,0),i);this._doubleTapDrag.emit(o,void 0,n),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=_M("update",Yr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=_M("end",Yr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=zh(r),n=this._pointerState.get(i),{pointerType:s}=r.native;if(n){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),kS(n.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,n=zh(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function _M(e,t,r){const{button:i,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}=r;return{action:e,delta:t,button:i,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}}let sEe=class extends Fr{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:n,pointers:oEe(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=Ub(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,n);const s=T2(n,VQ(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=Ub(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=Ub(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=T2(i,r)-t,i.lastAngle=T2(i,r)-t})}_emitEvent(t,r,i){const n=Ub(this._activePointerMap);this._drag.emit(this._createPayload(t,r,n,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,n=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function VQ(e){const t=[];return e.forEach(r=>{t.push(Yr(r.event.x,r.event.y))}),iEe(t)}function Ub(e){const t=VQ(e);let r=0;return e.forEach(i=>{let n=T2(i,t),s=n-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=i.lastAngle+s,i.lastAngle=n;const o=n-i.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function oEe(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function T2(e,t){const r=e.event,i=r.x-t.center.x,n=r.y-t.center.y;return Math.atan2(n,i)}var I6;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(I6||(I6={}));let aEe=class extends Fr{constructor(t=ai.maximumDoubleClickDelay,r=ai.maximumDoubleClickDistance,i=ai.maximumDoubleTouchDelay,n=ai.maximumDoubleTouchDistance,s=ky){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=zh(r);if(!this._pointerState.has(i)){const n={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=zh(r),n=this._pointerState.get(i);if(n&&n.downButton===r.native.button){const s=n.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),kS(s,t.data)>o?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(r))):kS(n,t.data)>o?this._removeState(r):this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){const r=zh(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},lEe=class extends Fr{constructor(t=ai.maximumClickDelay,r=ai.movementUntilMouseDrag,i=ai.movementUntilPenDrag,n=ai.movementUntilTouchDrag,s=ai.holdDelay,o=ky){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=n,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",a=>this._handlePointerDown(a)),this.registerIncoming("pointer-up",a=>this._handlePointerLoss(a,"pointer-up")),this.registerIncoming("pointer-capture-lost",a=>this._handlePointerLoss(a,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",a=>this._handlePointerLoss(a,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",a=>this._handlePointerMove(a)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Ft(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(Bb("update",n,r),void 0,n.modifiers):rEe(r,n.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),n.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(Bb("start",n,r)):this._pointerDrag.emit(Bb("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(Bb("end",s,r==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Bb(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let uEe=class extends Fr{constructor(t=ai.maximumDoubleClickDelay,r=ai.maximumDoubleClickDistance,i=ai.maximumDoubleTouchDelay,n=ai.maximumDoubleTouchDistance,s=ky){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Ft(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=Ft(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,n=cEe(r);if(!this._pointerState.has(n))return void this._startClick(t);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,l=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;kS(o,r)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const r=zh(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,n=zh(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s),a=1;this._pointerState.set(n,{event:t,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}};function cEe(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const Gb={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},C6=Symbol("handles");let Pd=class extends ce{initialize(){const t=()=>{var r;return(r=this.view)==null?void 0:r.ready};this.addHandles([Ln(()=>!t(),()=>this._disconnect()),Ln(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var r;return((r=this._inputManager)==null?void 0:r.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(C6),this._inputManager=Et(this._inputManager)}_connect(){const t=this.view.surface,r=new FQ(t,this.view.input),i=[new aEe,new lEe,new uEe,new sEe(this.view.navigation),new nEe],n=new cs({eventSource:r,recognizers:i}),s=new ZSe(this.view,["primary"]),o=new JSe(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new tEe],vc.INTERNAL),n.installHandlers("navigation",[new H$e(this.view),new D$e(this.view),new q$e(this.view),new _6(this.view),new _6(this.view,[Gb.counter]),s,new z$e(this.view,Gb.pan),new B$e(this.view,Gb.zoom),new U$e(this.view,Gb.rotate),o,new WSe(this.view,"touch")],vc.INTERNAL),this.view.viewEvents.connect(n),this._source=r,this._inputManager=n,this.addHandles([ee(()=>{var a,l;return(l=(a=this.view)==null?void 0:a.navigation)==null?void 0:l.browserTouchPanEnabled},a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},Ye),ee(()=>{const{actionMap:a}=this.view.navigation;return{panActions:b6("pan",a),rotateActions:b6("rotate",a)}},({panActions:a,rotateActions:l})=>{s.pointerActions=a,o.pointerActions=l},fn)],C6)}get test(){}};u([d()],Pd.prototype,"view",void 0),u([d()],Pd.prototype,"latestPointerType",null),u([d()],Pd.prototype,"latestPointerLocation",null),u([d()],Pd.prototype,"multiTouchActive",null),Pd=u([T("esri.views.2d.input.MapViewInputManager")],Pd);const dEe=Pd,L6=160;let C0=class extends ce{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=L6&&this.clear()},L6))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};u([d()],C0.prototype,"_timer",void 0),u([d()],C0.prototype,"stationary",null),C0=u([T("esri.views.2d.support.StationaryManager")],C0);const hEe=e=>{let t=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new bi({constraints:new w6({view:this})}),this.goToManager=new E2({view:this}),this.stationaryManager=new C0,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new USe(this),this.inputManager=new dEe({view:this}),this.viewEvents=new MY(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ee(()=>this.viewpoint,()=>this.stationaryManager.flip(),xa),this.on("resize",i=>this.stateManager.resize(i.width,i.height))])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var r;return((r=this.stateManager)==null?void 0:r.extent)??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}set animation(r){const i=this._get("animation");if(r===i)return;if(i&&i.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const n=()=>{var s;this.destroyed||r===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame())};r.when(n,n)}get constraints(){var r;return(r=this.stateManager)==null?void 0:r.constraints}set constraints(r){r.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=r,i==null||i.destroy()}get padding(){var r;return(r=this.stateManager)==null?void 0:r.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}on(r,i,n,s){return this.inputManager&&this.viewEvents.on(r,i,n,s)||super.on(r,i)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,i){return this.goToManager.goTo(r,i)}};return u([d({readOnly:!0})],t.prototype,"animationManager",void 0),u([d({readOnly:!0})],t.prototype,"fullOpacity",void 0),u([d()],t.prototype,"stateManager",void 0),u([d()],t.prototype,"constraintsInfo",null),u([d()],t.prototype,"extent",null),u([d()],t.prototype,"goToManager",void 0),u([d({readOnly:!0})],t.prototype,"state",null),u([d({readOnly:!0})],t.prototype,"mapViewNavigation",void 0),u([d()],t.prototype,"renderingOptions",void 0),u([d({readOnly:!0})],t.prototype,"interacting",null),u([d()],t.prototype,"stationary",null),u([d()],t.prototype,"animation",null),u([d({type:w6})],t.prototype,"constraints",null),u([d({readOnly:!0})],t.prototype,"inputManager",void 0),u([d()],t.prototype,"padding",null),u([d()],t.prototype,"resizeAlign",null),u([d()],t.prototype,"rotation",null),u([d({readOnly:!0})],t.prototype,"viewEvents",void 0),u([d({type:As})],t.prototype,"viewpoint",null),t=u([T("esri.views.Viewport2DMixin")],t),t};let A6=class{constructor(t){this._view=t,this.viewpoint=new As({targetGeometry:new Re,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return aQ(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,r){r.pan=Qq(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=Z$(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:n,rotate:s,zoom:o,zoomOffset:a}=i,{center:l}=this;l.spatialReference=t.center.spatialReference,l.x=Yg(t.center.x,r.center.x,n),l.y=Yg(t.center.y,r.center.y,n),this.viewpoint.scale=Yg(t.scale,r.scale+a,o);let c=t.rotation;const h=r.rotation;Math.abs(h-c)>=180&&(c+=360*(c<h?1:-1)),this.viewpoint.rotation=Yg(c,h,s)}copyFrom(t){Ii(this.viewpoint,t.viewpoint),this._view=t.view}};function Eg(e,t,r,i){const n=3*e,s=3*(r-e)-n,o=1-n-s,a=3*t,l=3*(i-t)-a,c=1-a-l;function h(g){return((o*g+s)*g+n)*g}function f(g){return((c*g+l)*g+a)*g}function m(g){return(3*o*g+2*s)*g+n}function y(g,v){let x,b,_,S,$,M;for(_=g,M=0;M<8;M++){if(S=h(_)-g,Math.abs(S)<v)return _;if($=m(_),Math.abs($)<1e-6)break;_-=S/$}if(x=0,b=1,_=g,_<x)return x;if(_>b)return b;for(;x<b;){if(S=h(_),Math.abs(S-g)<v)return _;g>S?x=_:b=_,_=.5*(b-x)+x}return _}return function(g,v=1e-6){return f(y(g,v))}}const bs={};bs.ease=Eg(.25,.1,.25,1),bs.linear=Eg(0,0,1,1),bs.easeIn=bs["ease-in"]=Eg(.42,0,1,1),bs.easeOut=bs["ease-out"]=Eg(0,0,.58,1),bs.easeInOut=bs["ease-in-out"]=Eg(.42,0,.58,1);const pEe=e=>e,ME=e=>e*e,yP=e=>1-ME(1-e),fEe=e=>e<.5?ME(2*e)/2:(yP(2*(e-.5))+1)/2,gP=e=>e*e*e,zQ=e=>1-gP(1-e),mEe=e=>e<.5?gP(2*e)/2:(zQ(2*(e-.5))+1)/2,vP=e=>e*e*e*e,UQ=e=>1-vP(1-e),yEe=e=>e<.5?vP(2*e)/2:(UQ(2*(e-.5))+1)/2,wP=e=>e*e*e*e*e,BQ=e=>1-wP(1-e),gEe=e=>e<.5?wP(2*e)/2:(BQ(2*(e-.5))+1)/2,bP=e=>1-Math.cos(e*Math.PI/2),GQ=e=>1-bP(1-e),vEe=e=>e<.5?bP(2*e)/2:(GQ(2*(e-.5))+1)/2,_P=e=>2**(10*(e-1)),xP=e=>1-_P(1-e),wEe=e=>e<.5?_P(2*e)/2:(xP(2*(e-.5))+1)/2,SP=e=>-(Math.sqrt(1-e*e)-1),qQ=e=>1-SP(1-e),bEe=e=>e<.5?SP(2*e)/2:(qQ(2*(e-.5))+1)/2;function Fs(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function js(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const _Ee=js(Fs(1),1),xEe=js(Fs(1),0),wA=js(Fs(1),.5),SEe=js(Fs(2),1),$Ee=js(Fs(2),0),EEe=js(Fs(2),.5),TEe=js(Fs(3),1),MEe=js(Fs(3),0),IEe=js(Fs(3),.5),CEe=js(Fs(4),1),LEe=js(Fs(4),0),AEe=js(Fs(4),.5),k6={linear:pEe,"in-quad":ME,"out-quad":yP,"in-out-quad":fEe,"in-coast-quad":_Ee,"out-coast-quad":xEe,"in-out-coast-quad":wA,"in-cubic":gP,"out-cubic":zQ,"in-out-cubic":mEe,"in-coast-cubic":SEe,"out-coast-cubic":$Ee,"in-out-coast-cubic":EEe,"in-quart":vP,"out-quart":UQ,"in-out-quart":yEe,"in-coast-quart":TEe,"out-coast-quart":MEe,"in-out-coast-quart":IEe,"in-quint":wP,"out-quint":BQ,"in-out-quint":gEe,"in-coast-quint":CEe,"out-coast-quint":LEe,"in-out-coast-quint":AEe,"in-sine":bP,"out-sine":GQ,"in-out-sine":vEe,"in-expo":_P,"out-expo":xP,"in-out-expo":wEe,"in-circ":SP,"out-circ":qQ,"in-out-circ":bEe,ease:e=>bs.ease(e),"ease-in":e=>bs.easeIn(e),"ease-out":e=>bs.easeOut(e),"ease-in-out":e=>bs.easeInOut(e)};let kEe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const A1={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},HQ={...A1,maxDuration:4e3};let REe=class WQ{constructor(t){this._createCamera=t,this.compared=new kEe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:A1.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new WQ(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow??A1.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Yi()}get hasFov(){return Math.abs(this.compared.fov)>Yi()}get hasRotate(){return this.compared.rotate>Yi()}},OEe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},NEe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,r)=>t+r.time,0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,n=0;const s=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(t<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:t/l.time,r),s.hasPan&&!isNaN(r.pan)&&isFinite(s.compared.pan)?r.pan=(i+c.compared.pan*r.pan)/s.compared.pan:r.pan=1,s.hasRotate&&!isNaN(r.rotate)&&isFinite(s.compared.rotate)?r.rotate=(n+c.compared.rotate*r.rotate)/s.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:h,targetZoom:f}=c.compared,m=r.zoom*(f-h)+h,y=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,v=Math.abs(f-y)>Math.abs(h-y)?f:h;r.zoomOffset=v-g,r.zoom=(m-y)/(v-y)}else r.zoom=1;return r}t-=l.time,i+=c.compared.pan,n+=c.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},xM=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,n=r.targetZoom;this._zoomSign=i>n?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const s=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=r.rotate*s}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:n,hasRotate:s}=this.definition;let o=0,a=0;i&&(n&&(o=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(i&&n&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(i&&n){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(i&&s){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(n&&s){const c=this._panPixelsAtSource/this._rotatePixels,h=1+c;this._panPixelFlow=c/h*l,this._rotatePixelFlow=1/h*l}else n?this._panPixelFlow=l:i?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/PEe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const PEe=Z$(45);function DEe(e,t,r){const i=t-e.compared.sourceZoom,n=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+n)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*n)}function FEe(e,t,r){const i=1/t,n=Math.log(e.compared.sourceZoom*i),s=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,l=1/a,c=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*s*o*l*c-e.halfWindowSize*n*s*o*l+e.halfWindowSize*n*s*o*c/(a*a)}function jEe(e,t,r){const i=t-e.compared.sourceZoom,n=1/i,s=1/t,o=Math.log(e.compared.sourceZoom*s),a=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*a+2*n*o+2*s-2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function VEe(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function zEe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function UEe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function BEe(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function GEe(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function qEe(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function HEe(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function WEe(e,t,r){const i=Math.log(t/e.compared.targetZoom),n=1/e.desiredPixelFlow,s=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,l=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*n*s*a+e.halfWindowSize*i*n*s*l/(o*o)+e.halfWindowSize*n*s*a*l/t}function ZEe(e,t,r){const i=t-e.compared.targetZoom,n=1/i,s=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*a-2*n*o+2*s+2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function JEe(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function YEe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function QEe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function KEe(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,n=e.halfWindowPanAtZoom(i),s=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*n);return e.compared.sourceZoom<=e.compared.targetZoom?s*(r-n):s*(r+n)}function XEe(e,t){let r=eTe(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},n=i.ascensionFactor===0,s=i.descensionFactor===0,o=n?VEe:DEe,a=n?zEe:FEe,l=n?UEe:jEe,c=s?JEe:HEe,h=s?YEe:WEe,f=s?QEe:ZEe,m=$=>o(e,$,i)+BEe(e,$,i)+c(e,$,i),y=$=>a(e,$,i)+GEe(e,$,i)+h(e,$,i),g=$=>l(e,$,i)+qEe(e,$,i)+f(e,$,i);let v=m(r);const x=KEe(e);let b;const _=t.maximumIterations||20,S=t.maximumDistance!=null?t.maximumDistance:1/0;for(b=0;b<_;b++){const $=t.desiredSlope??1e-6;let M=y(r);Math.abs(M)>$&&(M+=$);const I=M/g(r);if(isNaN(I)||r>=S&&I<0){if(!isFinite(S))return null;r=S,v=m(r);break}if(r-=I,r<e.compared.sourceZoom||r<e.compared.targetZoom)return null;const C=m(r);if(Math.abs(C-v)/v<=.005)break;v=C}return v>x*(1-.3)||r<e.compared.sourceZoom||r<e.compared.targetZoom?null:r}function eTe(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let tTe=class extends NEe{constructor(t,r){super(),this._preallocSegments=[new xM,new xM,new xM],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r!=null&&r.apex?XEe(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r==null?void 0:r.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=yP(i.zoom):t===this._descensionSegment&&(i.zoom=ME(i.zoom))}_updateWithApex(t,r){const[i,n,s]=this._preallocSegments,o=(r==null?void 0:r.ascensionFactor)??.5,a=Math.min(1-o,(r==null?void 0:r.ascensionFactor)!=null&&r.descensionFactor!=null?r.descensionFactor:.5),l=1-o-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),l>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=t,n.definition.compared.targetZoom=t,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=i.definition.segmentEnd,n.definition.segmentEnd=i.definition.segmentEnd+l,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=t,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const rTe=new OEe;let iTe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=wA,this.definition=new REe(t),this.path=new tTe}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(due(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?wA:xP)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,rTe);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,n=r.minDuration??A1.minDuration/i,s=r.maxDuration??A1.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,n),s)}};const nTe=2e3,sTe=64;let oTe=class{constructor(t){this._view=t,this._animation=new iTe(()=>new A6(this._view)),this._current=new A6(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){Ii(this._current.viewpoint,t),Ii(this._source.viewpoint,t),Ii(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),Ii(t,this._current.viewpoint)}},yf=class extends ce{constructor(t){super(t),this._animation=null,this._destinationViewState=new mP,this.updateFunction=null,this.easing=k6.ease,this.viewpoint=new As({targetGeometry:new Re,scale:0,rotation:0}),this._updateTask=ny({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new oTe(t.view)}destroy(){this._updateTask=Ft(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const n=this.viewpoint;Ii(n,r);const s=t.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(r.scale,s.scale)*sTe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i==null?void 0:i.duration,maxDuration:(i==null?void 0:i.animationMode)==="auto"?1/0:(i==null?void 0:i.maxDuration)??HQ.maxDuration,speedFactor:i==null?void 0:i.speedFactor,easing:(typeof(i==null?void 0:i.easing)=="string"?k6[i.easing]:i==null?void 0:i.easing)||this.easing}),(i==null?void 0:i.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,aTe(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new fA({target:t.clone()}),n=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var i,n;const r=this.animation;if(r&&r.state!==fA.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(i=this.animation)==null||i.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,l=a>=1;this._transition.applyRatio(this.viewpoint,a),l&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function aTe(e,t,r,i){if((t==null?void 0:t.duration)!=null)return!0;const{time:n,isLinear:s}=e,o=(t==null?void 0:t.speedFactor)||1;if(n>((t==null?void 0:t.maxDuration)??HQ.maxDuration/o))return!1;if(s){const l=Qt(),c=Yr(...i.toScreen(l,...r.center)),h=Yr(...r.toScreen(l,...i.center)),f=h!=null&&h.x>-1*r.size[0]&&h.x<(1.5+.5)*r.size[0]&&h.y>-1*r.size[1]&&h.y<(1.5+.5)*r.size[1],m=c!=null&&c.x>-1*i.size[0]&&c.x<(1.5+.5)*i.size[0]&&c.y>-1*i.size[1]&&c.y<(1.5+.5)*i.size[1];if(n>nTe/o&&!f&&!m)return!1}return!0}u([d()],yf.prototype,"easing",void 0),u([d()],yf.prototype,"view",void 0),u([d()],yf.prototype,"viewpoint",void 0),yf=u([T("esri.views.2d.AnimationManager")],yf);const lTe=yf;function Mt(){return Promise.all([B(()=>import("./webglDeps-71c46ead.js"),["assets/webglDeps-71c46ead.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/FramebufferObject-a125841d.js","assets/ProgramTemplate-94f4a844.js","assets/programUtils-de64fc7d.js","assets/NestedMap-b667f687.js"]),B(()=>import("./mapViewDeps-8be20aef.js"),["assets/mapViewDeps-8be20aef.js","assets/fontUtils-169c9d42.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/OptimizedGeometry-4a66a431.js","assets/memoryEstimations-e8cfae6e.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/BoundingBox-dc5b3050.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/ProgramTemplate-94f4a844.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/UpdateTracking2D-48735ec0.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/vec3f32-ad1dc57f.js","assets/Container-18064324.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/SDFHelper-05ff1354.js","assets/PieChartMeshWriter-e447f001.js","assets/TurboLine-3f229dee.js","assets/utils-552ee4cb.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/enums-fb086c25.js","assets/programUtils-de64fc7d.js","assets/NestedMap-b667f687.js","assets/GridShader-f63e89ba.js","assets/CircularArray-50add9d1.js","assets/testSVGPremultipliedAlpha-c074bc87.js","assets/AttributeStore-9129c901.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/RenderingContext-ccdc24ca.js","assets/renderState-dc27abc6.js","assets/basicInterfaces-cbf2757f.js","assets/glsl-d181cb51.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/CIMResourceManager-7067ff29.js","assets/pbf-8ef4f2aa.js","assets/utils-c91da54f.js","assets/grouping-7d0d2896.js","assets/VertexStream-3750063f.js","assets/utils-e050a342.js","assets/MeshWriterRegistry-9f18b11c.js","assets/GraphicsView2D-79e59377.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js","assets/GraphicContainer-1acbdf06.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/TileContainer-e1929e71.js","assets/requestImageUtils-5ec618eb.js","assets/gridUtils-0b9651b3.js","assets/geodesicUtils-17f6ad92.js"])])}const Tg=()=>Mt().then(()=>B(()=>import("./TileLayerView2D-1f6e98d7.js"),["assets/TileLayerView2D-1f6e98d7.js","assets/floatRGBA-d388c598.js","assets/UpdateTracking2D-48735ec0.js","assets/GeometryUtils-e2c839d5.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/OptimizedGeometry-4a66a431.js","assets/memoryEstimations-e8cfae6e.js","assets/rasterizingUtils-04255511.js","assets/Rect-ea14f53a.js","assets/BoundingBox-dc5b3050.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/Container-18064324.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/VertexElementDescriptor-2925c6af.js","assets/ProgramTemplate-94f4a844.js","assets/VertexArrayObject-95d73b2d.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-fb086c25.js","assets/GridShader-f63e89ba.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/FeatureCommandQueue-c3e353de.js","assets/TechniqueType-75b634fe.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/CircularArray-50add9d1.js","assets/testSVGPremultipliedAlpha-c074bc87.js","assets/AttributeStore-9129c901.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/pbf-8ef4f2aa.js","assets/PieChartMeshWriter-e447f001.js","assets/TurboLine-3f229dee.js","assets/utils-552ee4cb.js","assets/renderState-dc27abc6.js","assets/basicInterfaces-cbf2757f.js","assets/glsl-d181cb51.js","assets/GraphicsView2D-79e59377.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js","assets/imageUtils-83f2a34a.js","assets/BitmapTechnique-dc185df0.js","assets/TileContainer-e1929e71.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/HighlightGraphicContainer-7c642270.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/RefreshableLayerView-ad997cdf.js","assets/MapServiceLayerViewHelper-1baf0dd8.js","assets/drapedUtils-0bb2ead6.js","assets/popupUtils-284072a8.js"])),id=()=>Mt().then(()=>B(()=>import("./FeatureLayerView2D-2fb8d326.js").then(e=>e.F),["assets/FeatureLayerView2D-2fb8d326.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/timeSupport-5dfb8a2f.js","assets/AttributeBinsFeatureSet-8e96a3d9.js","assets/AttributeBinsQuery-766a2411.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/FixedIntervalBinParameters-16f91595.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js","assets/TechniqueInstance-0840be2c.js","assets/UpdateTracking2D-48735ec0.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/TileContainer-e1929e71.js","assets/WGLContainer-81d2cb88.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/CircularArray-50add9d1.js","assets/SDFHelper-05ff1354.js","assets/constants-304feb1c.js","assets/parquet-6bc9e364.js","assets/popupUtils-284072a8.js","assets/RefreshableLayerView-ad997cdf.js"])),R6={"base-dynamic":()=>Mt().then(()=>B(()=>import("./BaseDynamicLayerView2D-c004978c.js"),["assets/BaseDynamicLayerView2D-c004978c.js","assets/BitmapContainer-5c135781.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/ProgramTemplate-94f4a844.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/vec3f32-ad1dc57f.js","assets/Container-18064324.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/BitmapTechnique-dc185df0.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/TechniqueType-75b634fe.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/ExportStrategy-51ae02e3.js","assets/RefreshableLayerView-ad997cdf.js"])),"base-tile":Tg,"bing-maps":Tg,catalog:()=>Mt().then(()=>B(()=>import("./CatalogLayerView2D-329434e8.js"),["assets/CatalogLayerView2D-329434e8.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js"])),"catalog-dynamic-group":()=>Mt().then(()=>B(()=>import("./CatalogDynamicGroupLayerView2D-34df5c75.js"),["assets/CatalogDynamicGroupLayerView2D-34df5c75.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js"])),"catalog-footprint":()=>Mt().then(()=>B(()=>import("./CatalogFootprintLayerView2D-7ca7a720.js"),["assets/CatalogFootprintLayerView2D-7ca7a720.js","assets/FeatureLayerView2D-2fb8d326.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/timeSupport-5dfb8a2f.js","assets/AttributeBinsFeatureSet-8e96a3d9.js","assets/AttributeBinsQuery-766a2411.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/FixedIntervalBinParameters-16f91595.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js","assets/TechniqueInstance-0840be2c.js","assets/UpdateTracking2D-48735ec0.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/TileContainer-e1929e71.js","assets/WGLContainer-81d2cb88.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/CircularArray-50add9d1.js","assets/SDFHelper-05ff1354.js","assets/constants-304feb1c.js","assets/parquet-6bc9e364.js","assets/popupUtils-284072a8.js","assets/RefreshableLayerView-ad997cdf.js"])),csv:id,"geo-rss":()=>Mt().then(()=>B(()=>import("./GeoRSSLayerView2D-9d92fd03.js"),["assets/GeoRSSLayerView2D-9d92fd03.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js","assets/GraphicContainer-1acbdf06.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/UpdateTracking2D-48735ec0.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/TileContainer-e1929e71.js","assets/WGLContainer-81d2cb88.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/GraphicsView2D-79e59377.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/AttributeStore-9129c901.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js"])),feature:id,geojson:id,parquet:id,graphics:()=>Mt().then(()=>B(()=>import("./GraphicsLayerView2D-8545eaca.js"),["assets/GraphicsLayerView2D-8545eaca.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js","assets/GraphicContainer-1acbdf06.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/UpdateTracking2D-48735ec0.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/TileContainer-e1929e71.js","assets/WGLContainer-81d2cb88.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/GraphicsView2D-79e59377.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/AttributeStore-9129c901.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js"])),group:()=>Mt().then(()=>B(()=>import("./GroupLayerView2D-147fc5da.js"),["assets/GroupLayerView2D-147fc5da.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js"])),imagery:()=>Mt().then(()=>B(()=>import("./ImageryLayerView2D-1688f244.js"),["assets/ImageryLayerView2D-1688f244.js","assets/RasterVFDisplayObject-481e1226.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-3ad6dce9.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/Container-18064324.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/GraphicsView2D-79e59377.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/AttributeStore-9129c901.js","assets/UpdateTracking2D-48735ec0.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/FeatureCommandQueue-c3e353de.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js","assets/HighlightGraphicContainer-7c642270.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/TileContainer-e1929e71.js","assets/BitmapContainer-5c135781.js","assets/BitmapTechnique-dc185df0.js","assets/ExportStrategy-51ae02e3.js","assets/rasterProjectionHelper-09063703.js","assets/timeSupport-5dfb8a2f.js","assets/popupUtils-284072a8.js","assets/RefreshableLayerView-ad997cdf.js"])),"imagery-tile":()=>Mt().then(()=>B(()=>import("./ImageryTileLayerView2D-28282c09.js"),["assets/ImageryTileLayerView2D-28282c09.js","assets/rasterFieldUtils-1ed492c9.js","assets/RasterVFDisplayObject-481e1226.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-3ad6dce9.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/Container-18064324.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/rasterUtils-459b75ec.js","assets/VertexStream-3750063f.js","assets/utils-552ee4cb.js","assets/FramebufferObject-a125841d.js","assets/TileContainer-e1929e71.js","assets/RawBlockCache-a03008a5.js","assets/rasterProjectionHelper-09063703.js","assets/timeSupport-5dfb8a2f.js","assets/popupUtils-284072a8.js","assets/RefreshableLayerView-ad997cdf.js"])),kml:()=>Mt().then(()=>B(()=>import("./KMLLayerView2D-4e7b3e22.js"),["assets/KMLLayerView2D-4e7b3e22.js","assets/kmlUtils-cafc4a62.js","assets/BitmapTechnique-dc185df0.js","assets/Container-18064324.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/ProgramTemplate-94f4a844.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/TechniqueType-75b634fe.js","assets/BitmapContainer-5c135781.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/GraphicContainer-1acbdf06.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/UpdateTracking2D-48735ec0.js","assets/TileContainer-e1929e71.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/GraphicsView2D-79e59377.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/AttributeStore-9129c901.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js","assets/rasterProjectionHelper-09063703.js","assets/VertexStream-3750063f.js","assets/utils-552ee4cb.js","assets/RenderingContext-ccdc24ca.js","assets/programUtils-de64fc7d.js","assets/NestedMap-b667f687.js","assets/renderState-dc27abc6.js","assets/basicInterfaces-cbf2757f.js","assets/glsl-d181cb51.js","assets/testSVGPremultipliedAlpha-c074bc87.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/rasterUtils-459b75ec.js"])),"knowledge-graph":()=>Mt().then(()=>B(()=>import("./KnowledgeGraphLayerView2D-ddfe610a.js"),["assets/KnowledgeGraphLayerView2D-ddfe610a.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js"])),"link-chart":()=>Mt().then(()=>B(()=>import("./KnowledgeGraphLayerView2D-ddfe610a.js"),["assets/KnowledgeGraphLayerView2D-ddfe610a.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js"])),"knowledge-graph-sublayer":id,"map-image":()=>Mt().then(()=>B(()=>import("./MapImageLayerView2D-2179ad85.js"),["assets/MapImageLayerView2D-2179ad85.js","assets/BitmapContainer-5c135781.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/ProgramTemplate-94f4a844.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/vec3f32-ad1dc57f.js","assets/Container-18064324.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/BitmapTechnique-dc185df0.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/TechniqueType-75b634fe.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/GraphicsView2D-79e59377.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/AttributeStore-9129c901.js","assets/UpdateTracking2D-48735ec0.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/FeatureCommandQueue-c3e353de.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js","assets/HighlightGraphicContainer-7c642270.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/TileContainer-e1929e71.js","assets/ExportStrategy-51ae02e3.js","assets/timeSupport-5dfb8a2f.js","assets/RefreshableLayerView-ad997cdf.js","assets/MapServiceLayerViewHelper-1baf0dd8.js","assets/drapedUtils-0bb2ead6.js","assets/popupUtils-284072a8.js"])),"map-notes":()=>Mt().then(()=>B(()=>import("./MapNotesLayerView2D-5026c2b1.js"),["assets/MapNotesLayerView2D-5026c2b1.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js","assets/GraphicContainer-1acbdf06.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/UpdateTracking2D-48735ec0.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/TileContainer-e1929e71.js","assets/WGLContainer-81d2cb88.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/GraphicsView2D-79e59377.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/AttributeStore-9129c901.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js"])),media:()=>Mt().then(()=>B(()=>import("./MediaLayerView2D-a823744b.js"),["assets/MediaLayerView2D-a823744b.js","assets/mediaLayerUtils-a806e090.js","assets/normalizeUtilsSync-6f653769.js","assets/mat3f64-e19cdcb8.js","assets/floatRGBA-d388c598.js","assets/UpdateTracking2D-48735ec0.js","assets/GeometryUtils-e2c839d5.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/OptimizedGeometry-4a66a431.js","assets/memoryEstimations-e8cfae6e.js","assets/rasterizingUtils-04255511.js","assets/Rect-ea14f53a.js","assets/BoundingBox-dc5b3050.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/Container-18064324.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/VertexElementDescriptor-2925c6af.js","assets/ProgramTemplate-94f4a844.js","assets/VertexArrayObject-95d73b2d.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-fb086c25.js","assets/GridShader-f63e89ba.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/FeatureCommandQueue-c3e353de.js","assets/TechniqueType-75b634fe.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/CircularArray-50add9d1.js","assets/testSVGPremultipliedAlpha-c074bc87.js","assets/AttributeStore-9129c901.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/pbf-8ef4f2aa.js","assets/PieChartMeshWriter-e447f001.js","assets/TurboLine-3f229dee.js","assets/utils-552ee4cb.js","assets/renderState-dc27abc6.js","assets/basicInterfaces-cbf2757f.js","assets/glsl-d181cb51.js","assets/GraphicsView2D-79e59377.js","assets/dehydratedFeatures-e02325c0.js","assets/utils-c91da54f.js","assets/grouping-7d0d2896.js","assets/OverlayContainer-9cc325dc.js","assets/utils-e050a342.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js"])),"ogc-feature":()=>Mt().then(()=>B(()=>import("./OGCFeatureLayerView2D-7e639edb.js"),["assets/OGCFeatureLayerView2D-7e639edb.js","assets/FeatureLayerView2D-2fb8d326.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/timeSupport-5dfb8a2f.js","assets/AttributeBinsFeatureSet-8e96a3d9.js","assets/AttributeBinsQuery-766a2411.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/FixedIntervalBinParameters-16f91595.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js","assets/TechniqueInstance-0840be2c.js","assets/UpdateTracking2D-48735ec0.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/TileContainer-e1929e71.js","assets/WGLContainer-81d2cb88.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/CircularArray-50add9d1.js","assets/SDFHelper-05ff1354.js","assets/constants-304feb1c.js","assets/parquet-6bc9e364.js","assets/popupUtils-284072a8.js","assets/RefreshableLayerView-ad997cdf.js"])),"open-street-map":Tg,"oriented-imagery":id,route:()=>Mt().then(()=>B(()=>import("./RouteLayerView2D-ce1b3243.js"),["assets/RouteLayerView2D-ce1b3243.js","assets/Stop-6d46ef0a.js","assets/networkEnums-cf4f8920.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js","assets/GraphicContainer-1acbdf06.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/UpdateTracking2D-48735ec0.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/TileContainer-e1929e71.js","assets/WGLContainer-81d2cb88.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/GraphicsView2D-79e59377.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/AttributeStore-9129c901.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js"])),stream:()=>Mt().then(()=>B(()=>import("./StreamLayerView2D-04e13fef.js"),["assets/StreamLayerView2D-04e13fef.js","assets/FeatureLayerView2D-2fb8d326.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/timeSupport-5dfb8a2f.js","assets/AttributeBinsFeatureSet-8e96a3d9.js","assets/AttributeBinsQuery-766a2411.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/FixedIntervalBinParameters-16f91595.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js","assets/TechniqueInstance-0840be2c.js","assets/UpdateTracking2D-48735ec0.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/TileContainer-e1929e71.js","assets/WGLContainer-81d2cb88.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/CircularArray-50add9d1.js","assets/SDFHelper-05ff1354.js","assets/constants-304feb1c.js","assets/parquet-6bc9e364.js","assets/popupUtils-284072a8.js","assets/RefreshableLayerView-ad997cdf.js"])),"subtype-group":()=>Mt().then(()=>B(()=>import("./SubtypeGroupLayerView2D-55d92863.js"),["assets/SubtypeGroupLayerView2D-55d92863.js","assets/FeatureLayerView2D-2fb8d326.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/timeSupport-5dfb8a2f.js","assets/AttributeBinsFeatureSet-8e96a3d9.js","assets/AttributeBinsQuery-766a2411.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/FixedIntervalBinParameters-16f91595.js","assets/LayerView-ebae4ed5.js","assets/Container-18064324.js","assets/layerViewUtils-56caa9ba.js","assets/TechniqueInstance-0840be2c.js","assets/UpdateTracking2D-48735ec0.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/TileContainer-e1929e71.js","assets/WGLContainer-81d2cb88.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/CircularArray-50add9d1.js","assets/SDFHelper-05ff1354.js","assets/constants-304feb1c.js","assets/parquet-6bc9e364.js","assets/popupUtils-284072a8.js","assets/RefreshableLayerView-ad997cdf.js"])),tile:Tg,"vector-tile":()=>Mt().then(()=>B(()=>import("./VectorTileLayerView2D-40790514.js"),["assets/VectorTileLayerView2D-40790514.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/pbf-8ef4f2aa.js","assets/memoryEstimations-e8cfae6e.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/GeometryUtils-e2c839d5.js","assets/VertexArrayObject-95d73b2d.js","assets/config-1337d16e.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/Container-18064324.js","assets/StyleDefinition-d2ee7f7c.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/TileContainer-e1929e71.js","assets/PooledRBush-682067e3.js","assets/SourceLayerData-01372888.js","assets/StyleRepository-3f4aa23d.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/RefreshableLayerView-ad997cdf.js"])),video:()=>Mt().then(()=>B(()=>import("./VideoLayerView2D-a0ef8197.js"),["assets/VideoLayerView2D-a0ef8197.js","assets/GraphicsLayer-a2b5d09b.js","assets/TelemetryDisplay-4c6d6e1a.js","assets/OverlayContainer-9cc325dc.js","assets/vec3f32-ad1dc57f.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/ProgramTemplate-94f4a844.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/Container-18064324.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/UpdateTracking2D-48735ec0.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/utils-e050a342.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/GraphicContainer-1acbdf06.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/TileContainer-e1929e71.js","assets/GraphicsView2D-79e59377.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/AttributeStore-9129c901.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js"])),wcs:()=>Mt().then(()=>B(()=>import("./ImageryTileLayerView2D-28282c09.js"),["assets/ImageryTileLayerView2D-28282c09.js","assets/rasterFieldUtils-1ed492c9.js","assets/RasterVFDisplayObject-481e1226.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-3ad6dce9.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/ProgramTemplate-94f4a844.js","assets/vec3f32-ad1dc57f.js","assets/Container-18064324.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/rasterUtils-459b75ec.js","assets/VertexStream-3750063f.js","assets/utils-552ee4cb.js","assets/FramebufferObject-a125841d.js","assets/TileContainer-e1929e71.js","assets/RawBlockCache-a03008a5.js","assets/rasterProjectionHelper-09063703.js","assets/timeSupport-5dfb8a2f.js","assets/popupUtils-284072a8.js","assets/RefreshableLayerView-ad997cdf.js"])),"web-tile":Tg,wfs:id,wms:()=>Mt().then(()=>B(()=>import("./WMSLayerView2D-8ef1d8a5.js"),["assets/WMSLayerView2D-8ef1d8a5.js","assets/BitmapContainer-5c135781.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/ProgramTemplate-94f4a844.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/vec3f32-ad1dc57f.js","assets/Container-18064324.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/BitmapTechnique-dc185df0.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/TechniqueType-75b634fe.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/ExportStrategy-51ae02e3.js","assets/RefreshableLayerView-ad997cdf.js","assets/ExportWMSImageParameters-c5262266.js","assets/timeSupport-5dfb8a2f.js"])),wmts:()=>Mt().then(()=>B(()=>import("./WMTSLayerView2D-c56807a3.js"),["assets/WMTSLayerView2D-c56807a3.js","assets/imageUtils-83f2a34a.js","assets/BitmapTechnique-dc185df0.js","assets/Container-18064324.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/ProgramTemplate-94f4a844.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/TechniqueType-75b634fe.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/BoundingBox-dc5b3050.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec3f32-ad1dc57f.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/TileContainer-e1929e71.js","assets/LayerView-ebae4ed5.js","assets/layerViewUtils-56caa9ba.js","assets/RefreshableLayerView-ad997cdf.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function uTe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new N(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const O6={hasLayerViewModule:e=>R6[e.type]!=null,importLayerView:e=>{const t=R6[e.type];if(t==null)throw uTe(e);return t(e)}};let Rc=class Dd{static getId(t,r,i,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${n}`}constructor(t,r,i,n){this.set(t,r,i,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,n){this.set(t,r,i,n)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Dd(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,l]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+i,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Dd(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,r,i){const n=this.clone();return n.col+=t,n.row+=r,i.normalizeKey(n),n}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[new Dd(t,r,i,n),new Dd(t,r,i+1,n),new Dd(t,r+1,i,n),new Dd(t,r+1,i+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};Rc.pool=new hp(Rc,null,null,25,50);function Dp(e,t){return[e,t]}function nd(e,t,r){return e[0]=t,e[1]=r,e}function cTe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}const Zs=new Rc("0/0/0/0");let dTe=class ZQ{static create(t,r,i=null){const n=Ji(t.spatialReference),s=r.origin||Dp(t.origin.x,t.origin.y),o=Dp(t.size[0]*r.resolution,t.size[1]*r.resolution),a=Dp(-1/0,-1/0),l=Dp(1/0,1/0),c=Dp(1/0,1/0);i!=null&&(nd(a,Math.max(0,Math.floor((i.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymax)/o[1]))),nd(l,Math.max(0,Math.floor((i.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymin)/o[1]))),nd(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:f}=r;let m,y,g,v;return!i&&h&&f&&(nd(a,h[0],f[0]),nd(l,h[1],f[1]),nd(c,h[1]-h[0]+1,f[1]-f[0]+1)),t.isWrappable?(m=Dp(Math.ceil(Math.round((n.valid[1]-n.valid[0])/r.resolution)/t.size[0]),c[1]),y=!0,g=n.origin,v=n.valid):(m=c,y=!1),new ZQ(r.level,r.resolution,r.scale,s,a,l,c,o,m,y,g,v)}constructor(t,r,i,n,s,o,a,l,c,h,f,m){this.level=t,this.resolution=r,this.scale=i,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldSize=c,this.wrap=h,this._spatialReferenceOrigin=f,this._spatialReferenceValid=m}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}normalizeKey(t){if(!this.wrap)return;const r=this.worldSize[0],i=t.col;i<0?(t.col=i+r,t.world-=1):i>=r&&(t.col=i-r,t.world+=1)}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const r=this.origin[0]+t*this.norm[0],i=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&i&&n?r===i[0]?n[0]:this.origin[0]===i[0]&&t===this.worldSize[0]?n[1]:r:r}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){Zs.set(r);const n=i?Zs.col:this.denormalizeCol(Zs.col,Zs.world),s=Zs.row;return cTe(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,r,i=!1){Zs.set(r);const n=i?Zs.col:this.denormalizeCol(Zs.col,Zs.world);return Array.isArray(t)?nd(t,this.getXForColumn(n),this.getYForRow(Zs.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(Zs.row)),t}},k1=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:n}of this.spans)for(let s=i;s<=n;s++){const o=t.getWorldForColumn(s);yield new Rc(t.level,r,t.normalizeCol(s),o)}}forEach(t,r){const{spans:i,lodInfo:n}=this,{level:s}=n;if(i.length!==0)for(const{row:o,colFrom:a,colTo:l}of i)for(let c=a;c<=l;c++)t.call(r,s,o,n.normalizeCol(c),n.getWorldForColumn(c))}};k1.pool=new hp(k1);let SM=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const Lt=new Rc("0/0/0/0");let hTe=class JQ{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,n]=t,[s,o]=r,a=s-i,l=o-n,c=l!==0?a/l:0,h=(Math.ceil(n)-n)*c,f=(Math.floor(n)-n)*c;return new JQ(i,Math.floor(n),Math.ceil(o),c,a<0?h:f,a<0?f:h,a<0?s:i,a<0?i:s)}constructor(t,r,i,n,s,o,a,l){this.x=t,this.ymin=r,this.ymax=i,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Rn=[[0,0],[0,0],[0,0],[0,0]],pTe=1e-6;let fTe=class{constructor(t,r=null,i=t.lods[0].level,n=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=t.lods.filter(a=>a.level>=i&&a.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>dTe.create(t,a,r));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){Lt.set(r);const n=this._infoByLevel[Lt.level];return n?n.getTileBounds(t,Lt,i):t}getTileCoords(t,r,i=!1){Lt.set(r);const n=this._infoByLevel[Lt.level];return n?n.getTileCoords(t,Lt,i):t}getTileCoverage(t,r=192,i=!0,n="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=k1.pool.acquire(s),a=this._wrap;let l,c,h,f=1/0,m=-1/0;const y=o.spans;Rn[0][0]=Rn[0][1]=Rn[1][1]=Rn[3][0]=-r,Rn[1][0]=Rn[2][0]=t.size[0]+r,Rn[2][1]=Rn[3][1]=t.size[1]+r;for(const b of Rn)t.toMap(b,b),b[0]=s.getColumnForX(b[0]),b[1]=s.getRowForY(b[1]);const g=[];let v=3;for(let b=0;b<4;b++){if(Rn[b][1]===Rn[v][1]){v=b;continue}const _=hTe.create(Rn[b],Rn[v]);f=Math.min(_.ymin,f),m=Math.max(_.ymax,m),g[_.ymin]===void 0&&(g[_.ymin]=[]),g[_.ymin].push(_),v=b}if(f==null||m==null||m-f>100)return null;let x=[];for(l=f;l<m;){g[l]!=null&&(x=x.concat(g[l])),c=1/0,h=-1/0;for(let b=x.length-1;b>=0;b--){const _=x[b];c=Math.min(c,_.getLeftCol()),h=Math.max(h,_.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const b=Math.floor(h/s.worldSize[0]);for(let _=Math.floor(c/s.worldSize[0]);_<=b;_++)y.push(new SM(l,Math.max(s.getFirstColumnForWorld(_),c),Math.min(s.getLastColumnForWorld(_),h)))}else y.push(new SM(l,c,h));else c>s.last[0]||h<s.first[0]||(c=Math.max(c,s.first[0]),h=Math.min(h,s.last[0]),y.push(new SM(l,c,h)));l+=1;for(let b=x.length-1;b>=0;b--){const _=x[b];_.ymax>=l?_.incrRow():x.splice(b,1)}}return o}getTileParentId(t){Lt.set(t);const r=this._infoByLevel[Lt.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(Lt,this._lodInfos[i],Lt),Lt.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){Lt.set(r);const i=this._infoByLevel[Lt.level],n=t.lodInfo;if(n.resolution>i.resolution){this._getTileIdAtLOD(Lt,n,Lt);const o=n.denormalizeCol(Lt.col,Lt.world);for(const a of t.spans)if(a.row===Lt.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<i.resolution){const[o,a,l,c]=t.spans.reduce((v,x)=>(v[0]=Math.min(v[0],x.row),v[1]=Math.max(v[1],x.row),v[2]=Math.min(v[2],x.colFrom),v[3]=Math.max(v[3],x.colTo),v),[1/0,-1/0,1/0,-1/0]),h=i.denormalizeCol(Lt.col,Lt.world),f=n.getColumnForX(i.getXForColumn(h)),m=n.getRowForY(i.getYForRow(Lt.row)),y=n.getColumnForX(i.getXForColumn(h+1))-1,g=n.getRowForY(i.getYForRow(Lt.row+1))-1;return!(f>c||y<l||m>a||g<o)}const s=n.denormalizeCol(Lt.col,Lt.world);return t.spans.some(o=>o.row===Lt.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const n=Ji(this.tileInfo.spatialReference),s=-i*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+pTe)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,n)=>Math.abs(n-t)<Math.abs(i-t)?n:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const n=this._infoByLevel[i.level];return t.set(i),r.resolution<n.resolution?null:(r.resolution===n.resolution||(t.level=r.level,t.col=Math.floor(i.col*n.resolution/r.resolution+.01),t.row=Math.floor(i.row*n.resolution/r.resolution+.01)),t)}},mTe=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},yTe=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new km,this._controllers=new km,this._processingItems=new km,this._pausedSignal=gy(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new fS(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=Ft(this._schedule),this._task=Ft(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const n=new AbortController;let s=null;r&&(s=Ls(r,()=>n.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),c.reject(Tt())},a=()=>{l.remove(),s!=null&&s.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},l=xO(n.signal,o),c=es();return this._deferreds.set(t,c),this._controllers.set(t,n),c.promise.then(a,a),this._queue.push(t),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var r;const t=this._queue.popLast();return t&&((r=this._deferreds.get(t))==null||r.reject(Tt()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=hw(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,n=new mTe(t,i);this._processingItems.set(t,n);try{r=this.process(t,i.signal)}catch(s){this._processError(n,s)}Ma(r)?(n.promise=r,r.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,r)}get test(){}};const N6=[0,0];let Ya=class extends ce{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:r,scheduler:i,priority:n}=this;this._queue=new yTe({concurrency:t,scheduler:i,priority:n,process:(s,o)=>{const a=this._keyToItem.get(s);return r(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=Et(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),n=this.tileInfoView.getTileScale(t.key),s=pw(this._tilesByScale,n,()=>new Set),o=()=>{s.delete(t.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(r)};return s.add(t.key),this._keyToItem.set(r,t),i.then(o,o),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const r=new Set;for(const o of t)r.add(this._keyToItem.get(o).key);const i=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(CG(a,l=>r.has(l))){const l=Math.abs(o-i);l<s&&(n=a,s=l)}return this._getClosestTileKey(n,t).id}_getClosestTileKey(t,r){const i=this.tileInfoView,n=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of t)if(r.has(a.id)){i.getTileCoords(N6,a);const l=_E(N6,n);l<o&&(o=l,s=a)}return s}};u([d({constructOnly:!0})],Ya.prototype,"concurrency",void 0),u([d({constructOnly:!0})],Ya.prototype,"priority",void 0),u([d({constructOnly:!0})],Ya.prototype,"process",void 0),u([d({constructOnly:!0})],Ya.prototype,"scheduler",void 0),u([d()],Ya.prototype,"state",void 0),u([d({constructOnly:!0})],Ya.prototype,"tileInfoView",void 0),Ya=u([T("esri.views.2d.tiling.TileQueue")],Ya);const Nze=Ya;let gTe=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,n=this._tileKeysPerLevel[i];P6(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const n=r.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(r)}prune(t,r,i){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,r,i,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,r,i,t))}_pruneAroundCenterTile(t,r,i,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=i*o[0],c=i*o[1],h=[0,0],f=[0,0];for(s.sort((m,y)=>(h[0]=a.x+l*(m.col+.5),h[1]=a.y-c*(m.row+.5),f[0]=a.x+l*(y.col+.5),f[1]=a.y-c*(y.row+.5),IS(h,r)-IS(f,r)));s.length>0;){const m=s.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),P6(this._tilePerId,t)}};function P6(e,t){e.delete(t)}const sd=new Rc(0,0,0,0),Ra=new Map,Mg=[],$M=[];let Dze=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new gTe(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){var b,_;const{resampling:r,tileIndex:i}=this,{scale:n,center:s,resolution:o}=t.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!t.stationary&&n>this._previousScale;if(this._previousScale=n,!r&&(n>a||n<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:m}=h,{level:y}=m;this.tiles.length=0,i.forEach(S=>S.visible=!0);let g=0,v=0;if(f.length>0)for(const{row:S,colFrom:$,colTo:M}of f)for(let I=$;I<=M;I++){g++;const C=sd.set(y,S,m.normalizeCol(I),m.getWorldForColumn(I)).id;let L=i.get(C);if(L)L.isReady?(Ra.set(C,L),v++):c||this._addParentTile(C,Ra);else{if((b=this._tileCache)!=null&&b.has(C)){if(L=this._tileCache.pop(C),this.tileIndex.set(C,L),L.isReady){Ra.set(C,L),v++;continue}}else L=this.acquireTile(sd),this.tileIndex.set(C,L);c||this._addParentTile(C,Ra)}}const x=v===g;for(const[S,$]of i){if(Ra.has(S))continue;sd.set(S);const M=this.tileInfoView.intersects(h,sd),I=this.cachePolicy==="purge"?sd.level!==y:sd.level>y;!M||!c&&x?!I&&M||Mg.push($):$.isReady?I&&this.cachePolicy==="purge"&&this._hasReadyAncestor(sd,y)?Mg.push($):$M.push($):I&&Mg.push($)}for(const S of $M)S.isReady&&Ra.set(S.key.id,S);for(const S of Mg)this._tileCache?this._tileCache.add(S):this.releaseTile(S),i.delete(S.key.id);for(const S of Ra.values())this.tiles.push(S);for(const S of i.values())Ra.has(S.key.id)||(S.visible=!1);(_=this._tileCache)==null||_.prune(y,s,o),k1.pool.release(h),$M.length=0,Mg.length=0,Ra.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){var r;for(const i of this.tileIndex.values())t(i);(r=this._tileCache)==null||r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){var s;let i=t,n=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(n=this.tileIndex.get(i),n==null?void 0:n.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n==null?void 0:n.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}_hasReadyAncestor(t,r){const i=Wi();this.tileInfoView.getTileBounds(i,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=r&&n.key.level<t.level){const s=Wi();if(this.tileInfoView.getTileBounds(s,n.key,!0),r0e(s,i))return!0}return!1}};function vTe(e,t,r,i,n){YQ(e,t,r||0,i||e.length-1,n||wTe)}function YQ(e,t,r,i,n){for(;i>r;){if(i-r>600){var s=i-r+1,o=t-r+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);YQ(e,t,Math.max(r,Math.floor(t-o*l/s+c)),Math.min(i,Math.floor(t+(s-o)*l/s+c)),n)}var h=e[t],f=r,m=i;for(Ig(e,r,t),n(e[i],h)>0&&Ig(e,r,i);f<m;){for(Ig(e,f,m),f++,m--;n(e[f],h)<0;)f++;for(;n(e[m],h)>0;)m--}n(e[r],h)===0?Ig(e,r,m):Ig(e,++m,i),m<=t&&(r=m+1),t<=m&&(i=m-1)}}function Ig(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function wTe(e,t){return e<t?-1:e>t?1:0}function RS(e,t){if(!(this instanceof RS))return new RS(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function bTe(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function Fp(e,t){L0(e,0,e.children.length,t,e)}function L0(e,t,r,i,n){n||(n=gf(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<r;o++)s=e.children[o],A0(n,e.leaf?i(s):s);return n}function A0(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function D6(e,t){return e.minX-t.minX}function F6(e,t){return e.minY-t.minY}function EM(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function qb(e){return e.maxX-e.minX+(e.maxY-e.minY)}function _Te(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function xTe(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,s-i)}function TM(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Hb(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function gf(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function j6(e,t,r,i,n){for(var s,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(s=t+Math.ceil((r-t)/i/2)*i,vTe(e,s,t,r,n),o.push(t,s,s,r))}RS.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!Hb(e,t))return r;for(var n,s,o,a,l=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],Hb(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):TM(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!Hb(e,t))return!1;for(var i,n,s,o,a=[];t;){for(i=0,n=t.children.length;i<n;i++)if(s=t.children[i],Hb(e,o=t.leaf?r(s):s)){if(t.leaf||TM(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=gf([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,n,s,o=this.data,a=this.toBBox(e),l=[],c=[];o||l.length;){if(o||(o=l.pop(),i=l[l.length-1],r=c.pop(),s=!0),o.leaf&&(n=bTe(e,o.children,t))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!TM(o,a)?i?(r++,o=i.children[r],s=!1):o=null:(l.push(o),c.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:D6,compareMinY:F6,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var n,s=r-t+1,o=this._maxEntries;if(s<=o)return Fp(n=gf(e.slice(t,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),(n=gf([])).leaf=!1,n.height=i;var a,l,c,h,f=Math.ceil(s/o),m=f*Math.ceil(Math.sqrt(o));for(j6(e,t,r,m,this.compareMinX),a=t;a<=r;a+=m)for(j6(e,a,c=Math.min(a+m-1,r),f,this.compareMinY),l=a;l<=c;l+=f)h=Math.min(l+f-1,c),n.children.push(this._build(e,l,h,i-1));return Fp(n,this.toBBox),n},_chooseSubtree:function(e,t,r,i){for(var n,s,o,a,l,c,h,f;i.push(t),!t.leaf&&i.length-1!==r;){for(h=f=1/0,n=0,s=t.children.length;n<s;n++)l=EM(o=t.children[n]),(c=_Te(e,o)-l)<f?(f=c,h=l<h?l:h,a=o):c===f&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,n=r?e:i(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),A0(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var s=this._chooseSplitIndex(r,n,i),o=gf(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,Fp(r,this.toBBox),Fp(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=gf([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Fp(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,n,s,o,a,l,c,h;for(l=c=1/0,i=t;i<=r-t;i++)o=xTe(n=L0(e,0,i,this.toBBox),s=L0(e,i,r,this.toBBox)),a=EM(n)+EM(s),o<l?(l=o,h=i,c=a<c?a:c):o===l&&a<c&&(c=a,h=i);return h},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:D6,n=e.leaf?this.compareMinY:F6;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,n)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var n,s,o=this.toBBox,a=L0(e,0,t,o),l=L0(e,r-t,r,o),c=qb(a)+qb(l);for(n=t;n<r-t;n++)s=e.children[n],A0(a,e.leaf?o(s):s),c+=qb(a);for(n=r-t-1;n>=t;n--)s=e.children[n],A0(l,e.leaf?o(s):s),c+=qb(l);return c},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)A0(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():Fp(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function STe(e,{timeZone:t,timeExtent:r}){return{$view:{scale:e,timeZone:t,timeProperties:{currentStart:r==null?void 0:r.start,currentEnd:r==null?void 0:r.end}}}}let V6=class QQ{constructor(t,r){this.key=new Rc(0,0,0,0),this.bounds=Wi(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return e0e(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return STe(this.scale,t)}createChildTiles(){const t=this.key.getChildKeys(),r=Gi.acquire();for(let i=0;i<t.length;i++)r[i]=new QQ(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return SY.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const od={added:[],removed:[]},MM=new Set,$Te=new Rc(0,0,0,0);function ETe(e,t){const r=Ji(t);if(!r)return null;const[i,n]=r.valid;return e[2]>n?[Wi([e[0],e[1],n,e[3]]),Wi([i,e[1],i+e[2]-n,e[3]])]:e[0]<i?[Wi([i,e[1],e[2],e[3]]),Wi([n-(i-e[0]),e[1],n,e[3]])]:null}let TTe=class extends Ns{constructor(t){super(),this._tiles=new Map,this._index=RS(9,F("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||xN(t)===0||SN(t)===0)return[];const r=ETe(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const n=new V6(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),r.added.push(n)}for(const i of t.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),r.removed.push(n)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:n}=r,{level:s}=n;if(i.length>0)for(const{row:o,colFrom:a,colTo:l}of i)for(let c=a;c<=l;c++){const h=$Te.set(s,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(MM.add(h),!this.has(h)){const f=new V6(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),od.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];MM.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),od.removed.push(a))}(od.added.length||od.removed.length)&&this.emit("update",od),k1.pool.release(r),MM.clear(),od.added.length=0,od.removed.length=0}};const Vze=1e-30,z6=512,Wb=16777216,zze=8,Uze=29,Bze=24,Gze=4,qze=0,Hze=0,Wze=0,Zze=1,Jze=2,Yze=3,Qze=4,Kze=5,Xze=6,eUe=12,tUe=13,rUe=5,MTe=6,iUe=5,nUe=6;var U6;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(U6||(U6={}));const KQ=6,ITe=1<<KQ,sUe=ITe<<1,oUe=1.05,aUe=3,lUe=1,uUe=3,cUe=3,dUe=5,hUe=6,pUe=1.15,CTe=4,fUe=128,LTe=256,mUe=LTe-2*CTe,yUe=2,gUe=128,vUe=1,wUe=10,bUe=1024,_Ue=128,xUe=4,SUe=1,$Ue=1<<20,EUe=.75,TUe=10,MUe=.75,IUe=256,CUe=32,LUe=512,AUe=0,kUe=1,ATe=1,RUe=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],OUe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Cg=256;var B6,G6,q6,H6,bA,W6,Z6,sa,_A,Lv,Rr,OS,Es,It,me,R1,ul,J6,Y6,Q6;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(B6||(B6={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(G6||(G6={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(q6||(q6={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(H6||(H6={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(bA||(bA={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(W6||(W6={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(Z6||(Z6={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(sa||(sa={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(_A||(_A={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(Lv||(Lv={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(Rr||(Rr={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(OS||(OS={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(Es||(Es={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(It||(It={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(me||(me={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(R1||(R1={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(ul||(ul={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(J6||(J6={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(Y6||(Y6={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(Q6||(Q6={}));const NUe=33984;var NS,K6,X6;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(NS||(NS={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(K6||(K6={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(X6||(X6={}));const PUe=33306;var qr,e8,t8,r8,i8,n8,s8;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(qr||(qr={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(e8||(e8={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(t8||(t8={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(r8||(r8={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(i8||(i8={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(n8||(n8={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(s8||(s8={}));const kTe=()=>W.getLogger("esri.views.webgl.checkWebGLError");function RTe(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const XQ=!!F("enable-feature:webgl-debug");function eK(){return XQ}function DUe(){return XQ}function jp(e){if(eK()){const t=e.getError();if(t){const r=RTe(e,t),i=new Error().stack;kTe().error(new N("webgl-error","WebGL error occurred",{message:r,stack:i}))}}}var xA;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(xA||(xA={}));function OTe(e){switch(e){case sa.BYTE:case sa.UNSIGNED_BYTE:return 1;case sa.SHORT:case sa.UNSIGNED_SHORT:case sa.HALF_FLOAT:return 2;case sa.FLOAT:case sa.INT:case sa.UNSIGNED_INT:return 4}}function NTe(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function FUe(e,t,r,i,n=0){var o;const s=e.gl;e.bindBuffer(r);for(const a of i){const l=t.get(a.name);if(l==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const c=n*a.stride;if(a.count<=4)s.vertexAttribPointer(l,a.count,a.type,a.normalized,a.stride,a.offset+c),s.enableVertexAttribArray(l),a.divisor>0&&e.gl.vertexAttribDivisor(l,a.divisor);else if(a.count===9)for(let h=0;h<3;h++)s.vertexAttribPointer(l+h,3,a.type,a.normalized,a.stride,a.offset+12*h+c),s.enableVertexAttribArray(l+h),a.divisor>0&&e.gl.vertexAttribDivisor(l+h,a.divisor);else if(a.count===16)for(let h=0;h<4;h++)s.vertexAttribPointer(l+h,4,a.type,a.normalized,a.stride,a.offset+16*h+c),s.enableVertexAttribArray(l+h),a.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(l+h,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(eK()){const h=NTe(e),f=OTe(a.type),m=a.offset,y=Math.round(f/m)!==f/m?`. Offset not a multiple of stride. DataType requires ${f} bytes, but descriptor has an offset of ${m}`:"";h&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${c}${y}:`,h,a)}}}function jUe(e,t,r,i){var s,o,a;const n=e.gl;e.bindBuffer(r);for(const l of i){const c=t.get(l.name);if(l.count<=4)n.disableVertexAttribArray(c),l.divisor&&l.divisor>0&&((s=e.gl)==null||s.vertexAttribDivisor(c,0));else if(l.count===9)for(let h=0;h<3;h++)n.disableVertexAttribArray(c+h),l.divisor&&l.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(c+h,0));else if(l.count===16)for(let h=0;h<4;h++)n.disableVertexAttribArray(c+h),l.divisor&&l.divisor>0&&((a=e.gl)==null||a.vertexAttribDivisor(c+h,0));else console.error("Unsupported vertex attribute element count: "+l.count)}e.unbindBuffer(bA.ARRAY_BUFFER)}function PTe(e){switch(e){case It.ALPHA:case It.LUMINANCE:case It.RED:case It.RED_INTEGER:case me.R8:case me.R8I:case me.R8UI:case me.R8_SNORM:case ul.STENCIL_INDEX8:return 1;case It.LUMINANCE_ALPHA:case It.RG:case It.RG_INTEGER:case me.RGBA4:case me.R16F:case me.R16I:case me.R16UI:case me.RG8:case me.RG8I:case me.RG8UI:case me.RG8_SNORM:case me.RGB565:case me.RGB5_A1:case ul.DEPTH_COMPONENT16:return 2;case It.DEPTH_COMPONENT:case It.RGB:case It.RGB_INTEGER:case me.RGB8:case me.RGB8I:case me.RGB8UI:case me.RGB8_SNORM:case me.SRGB8:case ul.DEPTH_COMPONENT24:return 3;case It.DEPTH_STENCIL:case It.DEPTH24_STENCIL8:case It.RGBA:case It.RGBA_INTEGER:case me.RGBA8:case me.R32F:case me.R11F_G11F_B10F:case me.RG16F:case me.R32I:case me.R32UI:case me.RG16I:case me.RG16UI:case me.RGBA8I:case me.RGBA8UI:case me.RGBA8_SNORM:case me.SRGB8_ALPHA8:case me.RGB9_E5:case me.RGB10_A2UI:case me.RGB10_A2:case ul.DEPTH_STENCIL:case ul.DEPTH_COMPONENT32F:case ul.DEPTH24_STENCIL8:return 4;case ul.DEPTH32F_STENCIL8:return 5;case me.RGB16F:case me.RGB16I:case me.RGB16UI:return 6;case me.RG32F:case me.RG32I:case me.RG32UI:case me.RGBA16F:case me.RGBA16I:case me.RGBA16UI:return 8;case me.RGB32F:case me.RGB32I:case me.RGB32UI:return 12;case me.RGBA32F:case me.RGBA32I:case me.RGBA32UI:return 16;case qr.COMPRESSED_RGB_S3TC_DXT1_EXT:case qr.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case qr.COMPRESSED_RGBA_S3TC_DXT3_EXT:case qr.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case qr.COMPRESSED_R11_EAC:case qr.COMPRESSED_SIGNED_R11_EAC:case qr.COMPRESSED_RGB8_ETC2:case qr.COMPRESSED_SRGB8_ETC2:case qr.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case qr.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case qr.COMPRESSED_RG11_EAC:case qr.COMPRESSED_SIGNED_RG11_EAC:case qr.COMPRESSED_RGBA8_ETC2_EAC:case qr.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let tK=class{constructor(t=0,r=t){this.width=t,this.height=r,this.target=Es.TEXTURE_2D,this.pixelFormat=It.RGBA,this.dataType=R1.UNSIGNED_BYTE,this.samplingMode=Rr.LINEAR,this.wrapMode=OS.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.shouldCompress=!1,this.depth=1,this.isImmutable=!1}};function DTe(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*e.depth*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:PTe(e.internalFormat))*(e.target===Es.TEXTURE_CUBE_MAP?6:1))}const FTe=()=>W.getLogger("esri/views/webgl/textureUtils");function Zb(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&FTe().error("Negative dimension parameters are not allowed!")}function jTe(e){return e in me}function VTe(e){return e in qr}function vf(e){return e!=null&&"type"in e&&e.type==="compressed"}function zTe(e){return e!=null&&"byteLength"in e}function o8(e){return e!=null&&!vf(e)&&!zTe(e)}function Vp(e){return e===Es.TEXTURE_3D||e===Es.TEXTURE_2D_ARRAY}function a8(e,t,r,i=1){let n=Math.max(t,r);return e===Es.TEXTURE_3D&&(n=Math.max(n,i)),Math.floor(Math.log2(n))+1}function Jb(e){if(e.internalFormat!=null)return e.internalFormat===It.DEPTH_STENCIL?It.DEPTH24_STENCIL8:e.internalFormat;switch(e.dataType){case R1.FLOAT:switch(e.pixelFormat){case It.RGBA:return me.RGBA32F;case It.RGB:return me.RGB32F;default:throw new N("Unable to derive format")}case R1.UNSIGNED_BYTE:switch(e.pixelFormat){case It.RGBA:return me.RGBA8;case It.RGB:return me.RGB8}}return e.internalFormat=e.pixelFormat===It.DEPTH_STENCIL?It.DEPTH24_STENCIL8:e.pixelFormat}function UTe(e){let t="width"in e?e.width:e.codedWidth,r="height"in e?e.height:e.codedHeight;const i=1;return e instanceof HTMLVideoElement&&(t=e.videoWidth,r=e.videoHeight),{width:t,height:r,depth:i}}let BTe=class rK extends tK{constructor(t,r){switch(super(),this.context=t,Object.assign(this,r),this.internalFormat){case me.R16F:case me.R16I:case me.R16UI:case me.R32F:case me.R32I:case me.R32UI:case me.R8_SNORM:case me.R8:case me.R8I:case me.R8UI:this.pixelFormat=It.RED}}static validate(t,r){return new rK(t,r)}};const iu=()=>W.getLogger("esri/views/webgl/Texture");let SA=class ji{constructor(t,r=null,i=null){if(this.type=xA.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,this._compressionAbortController=gy(null),"context"in t)this._descriptor=t,i=r;else{const n=BTe.validate(t,r);if(!n)throw new N("Texture descriptor invalid");this._descriptor=n}this._descriptor.target===Es.TEXTURE_CUBE_MAP?this._setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return DTe(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}get isCompressing(){return this._compressionAbortController.value!==null}dispose(){this.abortCompression(),this._glName&&this._descriptor.context.instanceCounter.decrement(NS.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,r){const i=this._descriptor;if(i.width!==t||i.height!==r){if(this._wasImmutablyAllocated)throw new N("Immutable textures can't be resized!");i.width=t,i.height=r,this._descriptor.target===Es.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.shouldCompress=t}setData(t){this.abortCompression(),!vf(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in qr&&(this._descriptor.internalFormat=void 0),this._setData(t),!vf(t)&&this._descriptor.shouldCompress&&this._compressOnWorker(t)}updateData(t,r,i,n,s,o,a=0){o||iu().error("An attempt to use uninitialized data!"),this._glName||iu().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=Jb(l);const{context:c,pixelFormat:h,dataType:f,target:m,isImmutable:y}=l;if(y&&!this._wasImmutablyAllocated)throw new N("Cannot update immutable texture before allocation!");const g=c.bindTexture(this,ji.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||i<0||r+n>l.width||i+s>l.height)&&iu().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:v}=c;a&&(n&&s||iu().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),v.pixelStorei(v.UNPACK_SKIP_ROWS,a)),o8(o)?v.texSubImage2D(m,t,r,i,n,s,h,f,o):vf(o)?v.compressedTexSubImage2D(m,t,r,i,n,s,l.internalFormat,o.levels[t]):v.texSubImage2D(m,t,r,i,n,s,h,f,o),a&&v.pixelStorei(v.UNPACK_SKIP_ROWS,0),c.bindTexture(g,ji.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,r,i,n,s,o,a,l){l||iu().error("An attempt to use uninitialized data!"),this._glName||iu().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=Jb(c);const{context:h,pixelFormat:f,dataType:m,isImmutable:y,target:g}=c;if(y&&!this._wasImmutablyAllocated)throw new N("Cannot update immutable texture before allocation!");Vp(g)||iu().warn("Attempting to set 3D texture data on a non-3D texture");const v=h.bindTexture(this,ji.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(ji.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||n<0||r+s>c.width||i+o>c.height||n+a>c.depth)&&iu().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:x}=h;if(vf(l))l=l.levels[t],x.compressedTexSubImage3D(g,t,r,i,n,s,o,a,c.internalFormat,l);else{const b=l;x.texSubImage3D(g,t,r,i,n,s,o,a,f,m,b)}h.bindTexture(v,ji.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(t.width===0||t.height===0)return;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new N("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,Zb(t)}t.samplingMode===Rr.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=Rr.LINEAR_MIPMAP_NEAREST):t.samplingMode===Rr.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=Rr.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,ji.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(ji.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(r,ji.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new N("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,Zb(t)}t.samplingMode===Rr.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=Rr.LINEAR):t.samplingMode===Rr.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=Rr.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,Zb(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1)}abortCompression(){this.isCompressing&&(this._compressionAbortController.value=iy(this._compressionAbortController.value))}_setData(t,r){var l;const i=this._descriptor,n=(l=i.context)==null?void 0:l.gl;if(!n)return;jp(n),this._glName||(this._glName=n.createTexture(),this._glName&&i.context.instanceCounter.increment(NS.Texture,this)),Zb(i);const s=i.context.bindTexture(this,ji.TEXTURE_UNIT_FOR_UPDATES);i.context.setActiveTexture(ji.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),jp(n);const o=r??i.target,a=Vp(o);if(o8(t))this._setDataFromTexImageSource(t,o);else{const{width:c,height:h,depth:f}=i;if(c==null||h==null)throw new N("Width and height must be specified!");if(a&&f==null)throw new N("Depth must be specified!");if(i.internalFormat=Jb(i),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,i.internalFormat,i.hasMipmap,c,h,f),vf(t)){if(!VTe(i.internalFormat))throw new N("Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(t,i.internalFormat,o)}else this._texImage(o,0,i.internalFormat,c,h,f,t),jp(n),i.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),jp(n),i.context.bindTexture(s,ji.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let r=Es.TEXTURE_CUBE_MAP_POSITIVE_X;r<=Es.TEXTURE_CUBE_MAP_NEGATIVE_Z;r++)this._setData(t,r)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:r,flipped:i,preMultiplyAlpha:n}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(t,r){const{gl:i}=this._descriptor.context,n=this._descriptor;n.internalFormat=Jb(n);const s=Vp(r),{width:o,height:a,depth:l}=UTe(t);n.width&&n.height,n.width||(n.width=o),n.height||(n.height=a),s&&n.depth,s&&(n.depth=l),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,n.internalFormat,n.hasMipmap,o,a,l),this._texImage(r,0,n.internalFormat,o,a,l,t),jp(i),n.hasMipmap&&(this.generateMipmap(),jp(i))}_setDataFromCompressedSource(t,r,i){const n=this._descriptor,{width:s,height:o,depth:a}=n,l=t.levels,c=a8(i,s,o,a),h=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(n.target,n.context.gl.TEXTURE_MAX_LEVEL,h),this._forEachMipmapLevel((f,m,y,g)=>{const v=l[Math.min(f,l.length-1)];this._compressedTexImage(i,f,r,m,y,g,v)},h)}_texStorage(t,r,i,n,s,o){const{gl:a}=this._descriptor.context;if(!jTe(r))throw new N("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=i?a8(t,n,s,o):1;if(Vp(t)){if(o==null)throw new N("Missing depth dimension for 3D texture upload");a.texStorage3D(t,l,r,n,s,o)}else a.texStorage2D(t,l,r,n,s);this._wasImmutablyAllocated=!0}_texImage(t,r,i,n,s,o,a){const l=this._descriptor.context.gl,c=Vp(t),{isImmutable:h,pixelFormat:f,dataType:m}=this._descriptor;if(h){if(a!=null){const y=a;if(c){if(o==null)throw new N("Missing depth dimension for 3D texture upload");l.texSubImage3D(t,r,0,0,0,n,s,o,f,m,y)}else l.texSubImage2D(t,r,0,0,n,s,f,m,y)}}else{const y=a;if(c){if(o==null)throw new N("Missing depth dimension for 3D texture upload");l.texImage3D(t,r,i,n,s,o,0,f,m,y)}else l.texImage2D(t,r,i,n,s,0,f,m,y)}}_compressedTexImage(t,r,i,n,s,o,a){const l=this._descriptor.context.gl,c=Vp(t);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new N("Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(t,r,0,0,0,n,s,o,i,a)}else l.compressedTexSubImage2D(t,r,0,0,n,s,i,a)}else if(c){if(o==null)throw new N("Missing depth dimension for 3D texture upload");l.compressedTexImage3D(t,r,i,n,s,o,0,a)}else l.compressedTexImage2D(t,r,i,n,s,0,a)}async _compressOnWorker(t){var n,s;if(!ji.compressionWorkerHandle||!ji.compressionWorkerHandle.isCompressible(t))return;const r=(n=this._descriptor.context)==null?void 0:n.gl.getExtension("WEBGL_compressed_texture_etc"),i=(s=this._descriptor.context)==null?void 0:s.gl.getExtension("WEBGL_compressed_texture_s3tc");if(r||i){const o=new AbortController;this._compressionAbortController.value=o;const a={data:await createImageBitmap(t),flipped:this.descriptor.flipped,width:t.width,height:t.height,hasMipmap:this._descriptor.hasMipmap,hasETC:!!r,hasS3TC:!!i};ji.compressionWorkerHandle.invoke(a,this._compressionAbortController.value.signal).then(l=>{l&&this.isCompressing&&this.glName&&(this._descriptor.internalFormat=l.internalFormat,this._setData(l.compressedTexture)),o===this._compressionAbortController.value&&(this._compressionAbortController.value=null)}).catch(l=>{Ri(l)||o!==this._compressionAbortController.value||(this._compressionAbortController.value=null)})}}_forEachMipmapLevel(t,r=1/0){let{width:i,height:n,depth:s,hasMipmap:o,target:a}=this._descriptor;const l=a===Es.TEXTURE_3D;if(i==null||n==null||l&&s==null)throw new N("Missing texture dimensions for mipmap calculation");for(let c=0;t(c,i,n,s),o&&(i!==1||n!==1||l&&s!==1)&&!(c>=r);++c)i=Math.max(1,i>>1),n=Math.max(1,n>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){var s;const t=this._descriptor,r=(s=t.context)==null?void 0:s.gl;let i=t.samplingMode,n=t.samplingMode;i===Rr.LINEAR_MIPMAP_NEAREST||i===Rr.LINEAR_MIPMAP_LINEAR?(i=Rr.LINEAR,t.hasMipmap||(n=Rr.LINEAR)):i!==Rr.NEAREST_MIPMAP_NEAREST&&i!==Rr.NEAREST_MIPMAP_LINEAR||(i=Rr.NEAREST,t.hasMipmap||(n=Rr.NEAREST)),r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,i),r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){var i;const t=this._descriptor,r=(i=t.context)==null?void 0:i.gl;typeof t.wrapMode=="number"?(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode)):(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode.s),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode.t))}_applyAnisotropicFilteringParameters(){const t=this._descriptor,r=t.context.capabilities.textureFilterAnisotropic;r&&t.context.gl.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}};SA.TEXTURE_UNIT_FOR_UPDATES=0,SA.compressionWorkerHandle=null;const IM=()=>W.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function GTe(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const qTe=[0,0,0,0];let iK=class{constructor(){this.type="single",this._highlightOptions=new wc,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*Cg),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,r){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,MTe),r.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<KQ)-1,activeGradient:this}]}_updateGradientTexture(t){const r=HTe(this._highlightOptions);if(r===this._optionsShadeTexKey)return;this._optionsShadeTexKey=r,GTe(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,n=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,s=i.outlinePosition-i.outlineWidth/2,o=i.outlinePosition+i.outlineWidth/2,a=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,l=Math.sqrt(Math.PI/2)*ATe,c=Math.abs(n)>l?Math.round(10*(Math.abs(n)-l))/10:0,h=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let f;c&&!h?IM().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&h?IM().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&h&&IM().error("The highlight is "+Math.max(c,h)+"px away from the edge of the feature; consider reducing some width values.");const m=[void 0,void 0,void 0,void 0];function y(v,x,b){m[0]=(1-b)*v[0]+b*x[0],m[1]=(1-b)*v[1]+b*x[1],m[2]=(1-b)*v[2]+b*x[2],m[3]=(1-b)*v[3]+b*x[3]}const{_texelData:g}=this;for(let v=0;v<Cg;++v)f=n+v/(Cg-1)*(a-n),f<n?(m[0]=0,m[1]=0,m[2]=0,m[3]=0):f<s?y(qTe,i.outlineColor,(f-n)/(s-n)):f<o?[m[0],m[1],m[2],m[3]]=i.outlineColor:f<a?y(i.outlineColor,i.fillColor,(f-o)/(a-o)):[m[0],m[1],m[2],m[3]]=i.fillColor,g[4*v]=255*m[0],g[4*v+1]=255*m[1],g[4*v+2]=255*m[2],g[4*v+3]=255*m[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=a,!this._shadeTex){const v=new tK;v.wrapMode=OS.CLAMP_TO_EDGE,v.width=Cg,v.height=1,this._shadeTex=new SA(t,v)}this._shadeTex.updateData(0,0,0,Cg,1,this._texelData)}};function HTe(e){return`${e.color};${e.haloColor};${e.haloOpacity};${e.fillOpacity};${e.haloWidth};${e.haloBlur}`}let WTe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let r=0;r<t.length;r++)this.gradients[r]||(this.gradients[r]=new iK),this.gradients[r].setHighlightOptions(t[r]);for(let r=t.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const r=[];for(let i=0;i<this.gradients.length;i++){const n=this.gradients[i];r.push({activeReasons:t,activeGradient:n}),t<<=1}return r}};var l8,u8,c8,d8,h8,p8,PS,f8,m8;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(l8||(l8={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(u8||(u8={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(c8||(c8={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(d8||(d8={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(h8||(h8={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(p8||(p8={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(PS||(PS={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(f8||(f8={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(m8||(m8={}));const nK={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:_A.EQUAL,mask:255,op:{fail:Lv.KEEP,zFail:Lv.KEEP,zPass:Lv.REPLACE}}}},ZTe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},JTe={...nK,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function YTe({pixelRatio:e,state:t,displayLevel:r,requiredLevel:i},n){const s=1/2**(r-n.key.level),o=1/2**(i-n.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[n.x,n.y],currentScale:t.scale,currentZoom:r,metersPerSRUnit:Ds(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function sK(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function oK(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function QTe(e){if(!oK(e))return null;const{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:n}=e.passOptions;return{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:n}}function KTe(e){if(!sK(e))return null;const{activeReasons:t,highlightAll:r}=e.passOptions;return{activeReasons:t,highlightAll:r?1:0}}function BUe(e,t,r){const i={};for(const n in r)r[n]instanceof Function?i[n]=r[n](e,t):i[n]=r[n];return i}function GUe(e,t){const{attributeView:r,context:i}=e;return{storage:r.getUniforms(i),view:YTe(e,t),hittestRequest:QTe(e),highlight:KTe(e)}}function qUe(e){return{inside:e.selection===PS.InsideEffect,outside:e.selection===PS.OutsideEffect}}function XTe(e){return oK(e)?ZTe:sK(e)&&e.passOptions.stepType==="clear"?JTe:nK}function HUe(e){const{row:t,col:r}=e.key,i=r*z6,n=t*z6;return{tileOffsetFromLocalOrigin:[i%Wb,n%Wb],maxIntsToLocalOrigin:[Math.floor(i/Wb),Math.floor(n/Wb)]}}const eMe=new je({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function WUe(e){return eMe.toJSON(e)}function ZUe(e){const{bandCount:t,attributeTable:r,colormap:i,pixelType:n}=e.raster.rasterInfo;return t===1&&(r!=null||i!=null||n==="u8"||n==="s8")}function tMe(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new WTe:new iK),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function JUe(e,t,r,i){const{painter:n,highlightGradient:s}=e,{highlight:o}=n.effects;if(!s)return;const a=e.passOptions,l=s.getReasonsWithGradients();for(let c=0;c<l.length;c++){const h={...e,passOptions:{type:"highlight",activeGradient:i!=null?l[i].activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(h),r(h),c<l.length-1){let m=0;for(let y=c+1;y<l.length;y++)m|=l[y].activeReasons;r({...e,passOptions:{type:"highlight",activeGradient:i!=null?l[i].activeGradient:l[c].activeGradient,activeReasons:m,stepType:"clear",highlightAll:t}})}const f={...e,passOptions:{type:"highlight",activeGradient:i!=null?l[i].activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:t}};n.setPipelineState(XTe(e)),n.updatePipelineState(e.context),o.draw(f),o.unbind()}e.passOptions=a}function YUe(e){if(!e)return[];let t=lwe(e)?[e]:ie.isCollection(e)?e.toArray():Array.isArray(e)?e:[];return t=t==null?void 0:t.filter(Ei),((t==null?void 0:t.length)??0)===0?[]:t}const Yb=e=>parseFloat(e)/100;function rMe(e,t,r){const i=typeof e.left=="string"?Yb(e.left)*t:e.left,n=typeof e.right=="string"?Yb(e.right)*t:e.right,s=typeof e.top=="string"?Yb(e.top)*r:e.top,o=typeof e.bottom=="string"?Yb(e.bottom)*r:e.bottom,a=s;return{xmin:i,xmax:Math.max(t-n,i),ymin:a,ymax:Math.max(r-o,s)}}function aK(e,t,r,i){switch(t.type){case"rect":{const{width:n,height:s}=e,{xmin:o,xmax:a,ymin:l,ymax:c}=rMe(t,n,s),{x:h,y:f}=r;return h>o&&h<a&&f>l&&f<c}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||XO(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?KO(t.geometry,i):bw(t.geometry,i))}}function iMe(e){if(!e.highlights)return null;const t=e.highlights.findIndex(r=>r.name==="default");return t===-1?null:e.highlights.items[t]}function nMe(e,t){if(!e.highlights){if(!t)return;e.highlights=new ie([new wc])}const r=e.highlights.findIndex(i=>i.name==="default");t?e.highlights.items[r].assignFrom(t):(e.highlights.removeAt(r),e.highlights.length===0&&(e.highlights=null))}async function sMe(e,t,r){const i=LY(t)?CY(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,l=null;r!=null&&r.include?g8(r.include,y8(e,m=>{n.add(m),CM(m,y=>s.add(y))},(m,y)=>{s.add(m),n.add(y)},m=>{a||(a=new Set),a.add(m)},m=>n.add(m),()=>o=!0)):(o=!0,n=new Set(e.allLayerViews),n.forEach(m=>{CM(m,y=>s.add(y))})),r!=null&&r.exclude&&g8(r.exclude,y8(e,m=>{n.delete(m),CM(m,y=>s.delete(y))},m=>s.delete(m),m=>{l||(l=new Set),l.add(m)}));const c=e.toMap(i),h=e.allLayerViews.filter(m=>!m.suspended&&n.has(m)&&m.clips.every(y=>aK(e,y,i,c))).reverse();let f=[...o?e.graphicsView.hitTest(c).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:c})):[],...await Promise.all(h.map(m=>m.hitTest(c,i)).toArray())].filter(Ei).flat().filter(Ei);return f=f.filter(m=>{var y;return m.type!=="graphic"||((y=m.layer)==null?void 0:y.type)!=="subtype-group"||s.has(m.graphic.layer)}),a&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has($A(m.graphic))))),l&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||!(l!=null&&l.has($A(m.graphic))))),{screenPoint:i,results:f}}function y8(e,t,r,i,n,s){return o=>{if(o instanceof kc){if(o.layer===e)s==null||s();else{const a=e.allLayerViews.find(l=>l.layer===o.layer);a&&(n==null||n(a))}i($A(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(l=>l.layer===o.parent);a&&r(o,a)}else{const a=e.allLayerViews.find(l=>l.layer===o);a&&t(a)}}}function g8(e,t){if(e)if(Rx(e))for(const r of e)if(Rx(r))for(const i of r)t(i);else t(r);else t(e)}function $A(e){var r,i;const t=e.getObjectId();return t?`${((r=e.layer)==null?void 0:r.uid)??((i=e.sourceLayer)==null?void 0:i.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function CM({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(r=>{t(r)})}let Lg=null,DS=!0;function oMe(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(DS)try{return new ImageData(e,t)}catch{DS=!1}return lK(e,t,r)}function QUe(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(DS)try{return new ImageData(e,t,r)}catch{DS=!1}const n=lK(t,r,i);return n.data.set(e,0),n}function aMe(){return Lg||(Lg=document.createElement("canvas"),Lg.width=1,Lg.height=1),Lg}function lK(e,t,r){return r||(r=aMe()),r.getContext("2d").createImageData(e,t)}async function lMe(e,t){const r=window.URL.createObjectURL(e);try{const{data:i}=await ft(r,{...t,responseType:"image"});return i}catch(i){throw Ri(i)?i:new N("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function KUe(e,t){const{arrayBuffer:r,mediaType:i}=await uMe(e,t),n=i==="image/png";if(i==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await B(()=>import("./gif-56814698.js"),[]);if(s(r))return o(r,t)}if(n){const{isAnimatedPNG:s,parseApng:o}=await B(()=>import("./apng-087d1f86.js"),["assets/apng-087d1f86.js","assets/_commonjsHelpers-2f3e7994.js"]);if(s(r))return o(r,t)}return lMe(new Blob([r],{type:i}),t)}async function uMe(e,t){var n;const r=ay(e);if(r!=null&&r.isBase64)return{arrayBuffer:sq(r.data),mediaType:r.mediaType};const i=await ft(e,{responseType:"array-buffer",...t});return{arrayBuffer:i.data,mediaType:((n=i.getHeader)==null?void 0:n.call(i,"Content-Type"))??""}}const v8=2048,cMe=1.5,dMe=8;function uK(e,t){const{format:r,quality:i,rotation:n,disableDecorations:s}=e||{},o=$P(e,t.padding),a=gMe(e,{width:t.width-o.left-o.right,height:t.height-o.top-o.bottom}),{width:l,height:c}=yMe(e,a),h=gK(r),f=vK[h];return{format:h,quality:Cn(i??f,0,100),area:a,width:l,height:c,rotation:n,disableDecorations:!!s,ignoreBackground:!!(e!=null&&e.ignoreBackground),ignorePadding:!!(e!=null&&e.ignorePadding)}}function hMe(e,t){const r=uK(e,t),i=r.area,n=r.width/i.width,s=$P(r,t.padding),o=s.left+s.right,a=s.top+s.bottom,l=t.width-o,c=t.height-a,h=Math.floor(l*n+o),f=Math.floor(c*n+a),m=(e==null?void 0:e.layers)??[],y=r.ignoreBackground,g=r.ignorePadding;return{framebufferWidth:h,framebufferHeight:f,region:{x:Math.floor(i.x*n)+s.left,y:Math.floor(i.y*n)+s.top,width:r.width,height:r.height},format:r.format,quality:r.quality,rotation:r.rotation,pixelRatio:n,layers:m,disableDecorations:r.disableDecorations,ignoreBackground:y,ignorePadding:g,objectAndLayerIdColor:!1}}function cK(e,t,r){const{ctx:i,canvas:n}=hK(e,r),s=i.getImageData(0,0,e.width,e.height),o=fK(n,t);return pK(n),{dataUrl:o,data:s}}function dK(e,t){const{ctx:r,canvas:i}=hK(e,t),n=r.getImageData(0,0,e.width,e.height);return pK(i),n}function hK(e,t){const r=pMe();t.premultipliedAlpha&&_Me(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&bMe(i),{ctx:i,canvas:r}}function pK(e){e.width=0,e.height=0}function pMe(){return LM==null&&(LM=document.createElement("canvas")),LM}let LM=null;function fK(e,t){const r=xMe[t.format],i=t.quality/100;return e.toDataURL(r,i)}function mK(e,t){const r=gK(e),i=vK[r];return{format:r,quality:Cn(t??i,0,100)}}function yK(e,t){return t/Math.max(e[0],e[1])}function fMe(e,t,r,i=0,n=0,s=e.width-i,o=e.height-n,a=!1){const{data:l}=e,{width:c,height:h,data:f}=t,m=s/c,y=o/h,g=Math.ceil(m/2),v=Math.ceil(y/2),x=e.width;for(let b=0;b<h;b++)for(let _=0;_<c;_++){const S=4*(_+(a?h-b-1:b)*c);let $=0,M=0,I=0,C=0,L=0,V=0;const P=(b+.5)*y;for(let z=Math.floor(b*y);z<(b+1)*y;z++){const Y=Math.abs(P-(z+.5))/v,oe=(_+.5)*m,ae=Y*Y;for(let Ge=Math.floor(_*m);Ge<(_+1)*m;Ge++){const dt=Math.abs(oe-(Ge+.5))/g,Ve=Math.sqrt(ae+dt*dt);if(Ve>=1)continue;let Z=2*Ve*Ve*Ve-3*Ve*Ve+1;const j=4*(i+Ge+(n+z)*x);V+=Z*l[j+3],M+=Z,!r&&l[j+3]<255&&(Z=Z*l[j+3]/255),I+=Z*l[j],C+=Z*l[j+1],L+=Z*l[j+2],$+=Z}}f[S]=I/$,f[S+1]=C/$,f[S+2]=L/$,f[S+3]=V/M}return t}function mMe(e,t,r){if(!t)return e;const{framebufferWidth:i,framebufferHeight:n,pixelRatio:s,region:o}=e,a=$P(e,r),l=a.left+a.right,c=a.top+a.bottom,h=i-l,f=n-c,m=Math.min(dMe,Math.min((v8-l)/h,(v8-c)/f));return m<cMe?e:{...e,framebufferWidth:Math.round(h*m)+l,framebufferHeight:Math.round(f*m)+c,pixelRatio:s*m,resample:{region:{x:Math.round((o.x-a.left)*m)+a.left,y:Math.round((o.y-a.top)*m)+a.top,width:Math.round(o.width*m),height:Math.round(o.height*m)},width:i,height:n}}}function yMe(e,t){if(!e)return t;const r=e.width,i=e.height;if(r!=null&&i!=null)return{width:Math.floor(r),height:Math.floor(i)};if(r==null&&i==null)return t;const n=t.width/t.height;return i==null?{width:Math.floor(r),height:Math.floor(r/n)}:{width:Math.floor(i*n),height:Math.floor(i)}}function gMe(e,t){const r={x:0,y:0,width:t.width,height:t.height};if(e!=null&&e.area){e.area.x!=null&&(r.x=Math.floor(e.area.x)),e.area.y!=null&&(r.y=Math.floor(e.area.y));const i=e.area.width!=null?Math.floor(e.area.width):null,n=e.area.height!=null?Math.floor(e.area.height):null;if(r.width=t.width-r.x,r.height=t.height-r.y,i!=null&&n!=null)r.width=Math.min(r.width,i),r.height=Math.min(r.height,n);else if(i==null&&n!=null){const s=Math.min(r.width,i);r.height=s/r.width*r.height,r.width=s}else if(i!=null&&n==null){const s=Math.min(r.height,n);r.width=s/r.height*r.width,r.height=s}}return vMe(wMe(r,e),t)}function vMe(e,t){const r=Math.floor(Math.max(e.x,0)),i=Math.floor(Math.max(e.y,0)),n={x:r,y:i,width:Math.floor(Math.min(e.width,t.width-r)),height:Math.floor(Math.min(e.height,t.height-i))},s=n.width/n.height,o=e.width/e.height;if(o===s)return n;if(o>s){const c=Math.floor(n.width/o),h=n.height-c;return{x:n.x,y:Math.floor(n.y+h/2),width:n.width,height:c}}const a=Math.floor(n.height*o),l=n.width-a;return{x:Math.floor(n.x+l/2),y:n.y,width:a,height:n.height}}function wMe(e,t){if((t==null?void 0:t.width)==null||t.height==null)return e;const r=t.width/t.height,i=e.width/e.height;if(i===r)return e;if(i<r){const s=Math.floor(e.height*r);return e.x-=(s-e.width)/2,e.width=s,e}const n=Math.floor(e.width/r);return e.y-=(n-e.height)/2,e.height=n,e}function $P(e,t){return!t||e!=null&&e.ignorePadding?$Me:t}function gK(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return SMe}}function bMe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function _Me(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const n=t[i+3];if(n!==255&&n>0){const s=255/n;t[i]=t[i]*s,t[i+1]=t[i+1]*s,t[i+2]=t[i+2]*s}}}const xMe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},w8=98,SMe="png",vK={png:100,jpg:w8,jpeg:w8},$Me={top:0,right:0,bottom:0,left:0},XUe=Object.freeze(Object.defineProperty({__proto__:null,completeUserSettings:uK,createEmptyImageData:oMe,encode:cK,encodeData:dK,getFormatAndQuality:mK,getMaximumResolutionScale:yK,resampleHermite:fMe,screenshotSuperSampleSettings:mMe,toDataUrl:fK,toRenderSettings:hMe},Symbol.toStringTag,{value:"Module"})),wK={flipY:!0,premultipliedAlpha:!0};async function EMe(e,t){const r=await bK(e,t),{format:i,quality:n}=mK(t==null?void 0:t.format,t==null?void 0:t.quality);return cK(r,{format:i,quality:n},wK)}async function TMe(e,t){const r=await bK(e,t);return dK(r,wK)}function bK(e,t){const r=CMe(t||{},IMe(e.stage,e.size),e.size,e.padding),i=MMe(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t==null?void 0:t.rotation)}function MMe(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach(i=>{const n=t.find(s=>s.layer.id===i.id);n!=null&&n.container&&r.push(n.container)}),r}function IMe(e,t){return Math.min(4,yK(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function CMe(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let n=null;e.width!=null&&e.height!=null?n=[e.width,e.height]:e.width==null&&e.height!=null?n=[e.height,e.height]:e.width!=null&&e.height==null?n=[e.width,e.width]:e.width==null&&e.height==null&&(n=null);const s=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let a,l,c=e.area||{x:0,y:0,width:s,height:o};if(n){const h=s/o,f=n[0]/n[1];if(f>h){const m=c.width/f;c={x:c.x,y:Math.round(c.y+(c.height-m)/2),width:c.width,height:Math.round(m)}}else{const m=c.height*f;c={x:Math.round(c.x+(c.width-m)/2),y:c.y,width:Math.round(m),height:c.height}}}else n=[c.width,c.height];return n[0]>c.width?(a=Math.min(n[0]/c.width,t),l=n[0]/c.width/a):(a=1,l=n[0]/c.width),{cropArea:{x:Math.round((c.x+i.left)*a),y:Math.round((c.y+i.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const LMe=e=>e.includes("Brush");let _K=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),LMe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function AMe(e,t){const r=t.debugRendererInfo&&e.getExtension("WEBGL_debug_renderer_info");return r?{getUnmaskedRendererWebGL:()=>e.getParameter(r.UNMASKED_RENDERER_WEBGL)}:null}let b8;function kMe(){return b8??(b8=NMe()),b8}let RMe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function OMe(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=t.getContext("webgl2"),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function NMe(){var r;const e=new RMe,t=OMe(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null,e.unmaskedRenderer=((r=AMe(t,{debugRendererInfo:!0}))==null?void 0:r.getUnmaskedRendererWebGL())??"unknown"),e}function PMe(e){const t=kMe();return t.available?e==="3d"&&t.majorPerformanceCaveat?new N("webgl:major-performance-caveat-detected",`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new N("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new N("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new N("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function DMe(e){return e&&"nodeType"in e}function FMe(e){return e&&typeof e.render=="function"}const _8={component:"esri-component"};let Fd=class extends ce{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,r;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((r=this.node)==null?void 0:r.id)}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(_8.component),r&&r.classList.remove(_8.component),this._set("node",t))}castNode(t){var r;return(r=this.widget)==null||r.destroy(),t?typeof t=="string"||DMe(t)?(this._set("widget",null),NN(t)):(FMe(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};u([d()],Fd.prototype,"id",null),u([d()],Fd.prototype,"node",null),u([He("node")],Fd.prototype,"castNode",null),u([d({readOnly:!0})],Fd.prototype,"widget",void 0),Fd=u([T("esri.views.ui.Component")],Fd);const M2=Fd,xK="calcite-mode-";function jMe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function SK(){return jMe().startsWith("dark")}function VMe(){return`${xK}${SK()?"dark":"light"}`}function zMe(e){UMe(e),e.classList.add(VMe())}function UMe(e){Array.from(e.classList).forEach(t=>{t.startsWith(xK)&&e.classList.remove(t)})}const BMe={left:0,top:0,bottom:0,right:0},$K={bottom:30,top:15,right:15,left:15},Oa="esri-ui",rn={ui:Oa,corner:`${Oa}-corner`,innerContainer:`${Oa}-inner-container`,manualContainer:`${Oa}-manual-container`,cornerContainer:`${Oa}-corner-container`,topLeft:`${Oa}-top-left`,topRight:`${Oa}-top-right`,bottomLeft:`${Oa}-bottom-left`,bottomRight:`${Oa}-bottom-right`};function GMe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function Qb(e){return e===0?"0":`${e}px`}function AM(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function kM(e,{top:t,bottom:r,left:i,right:n}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=n}let Ko=class extends Ns.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=$n(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&kM(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&kM(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ee(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,Ye),ee(()=>this.padding,this._applyUIPadding,Ye),ee(()=>[this.container,this._locale],([t,r])=>{t&&t.setAttribute("lang",r)},Ye),eN(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(rn.ui),zMe(t),this._attachContainers(t)),r&&(r.classList.remove(rn.ui),kM(r,{top:"",bottom:"",left:"",right:""}),r.textContent=""),this._set("container",t))}get height(){var s;const t=((s=this.view)==null?void 0:s.height)??0;if(t===0)return t;const r=this._getViewPadding(),{top:i,bottom:n}=r;return Math.max(t-i-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...$K,...t}}get width(){var s;const t=((s=this.view)==null?void 0:s.width)??0;if(t===0)return t;const r=this._getViewPadding(),{left:i,right:n}=r;return Math.max(t-i-n,0)}add(t,r){let i,n,s;if(Array.isArray(t))return void t.forEach(a=>this.add(a,r));const o=AM(t);o&&({index:i,position:r,component:t,key:n}=o),r&&typeof r=="object"&&({index:i,key:n,position:r,internal:s}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,i,n,s)}remove(t,r){var n,s;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,r));const i=this._find(t);if(i){if(this._componentMap.has(i)&&((n=this._componentMap.get(i))==null?void 0:n.key)!==r)return;const o=this._components.indexOf(i),a=i.node.parentNode;return a==null||a.removeChild(i.node),this._componentMap.delete(i),(s=i.widget)==null||s.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const s of t)this.empty(s,r);return}const i=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||r.removeInternal});for(const s of n)this.remove(s)}move(t,r){if(Array.isArray(t)&&t.forEach(o=>this.move(o,r)),!t)return;let i;const n=AM(t)||AM(r);if(n&&(i=n.index,r=n.position,t=n.component||t),r&&!this._isValidPosition(r))return;const s=this.remove(t);s&&this.add(s,{position:r,index:i})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(i=>this._getComponentsAtPosition(i,r)):this._getComponentsAtPosition(t,r):this._components.filter(i=>{var n;return r.includeInternal||!((n=this._componentMap.get(i))!=null&&n.internal)}).map(({widget:i,node:n})=>i??n)}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,n,s){t instanceof M2||(t=new M2({node:t}));const{widget:o}=t;o!=null&&o instanceof ce&&o.addHandles(et(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:r,index:i}),this._components.push(t),this._componentMap.set(t,{key:n,internal:s})}_find(t){return t?t instanceof M2?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??BMe}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(rn.innerContainer,rn.cornerContainer);const r=document.createElement("div");r.classList.add(rn.innerContainer,rn.manualContainer);const i=document.createElement("div");i.classList.add(rn.topLeft,rn.corner),t.appendChild(i);const n=document.createElement("div");n.classList.add(rn.topRight,rn.corner),t.appendChild(n);const s=document.createElement("div");s.classList.add(rn.bottomLeft,rn.corner),t.appendChild(s);const o=document.createElement("div");o.classList.add(rn.bottomRight,rn.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;const a=oE();this._cornerNameToContainerLookup={"top-left":i,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:i,"top-trailing":a?i:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var c,h;const r=t.position??"manual",{component:i,index:n}=t,s=this._positionNameToContainerLookup[r],o=n!=null&&n>-1;if(GMe(i.widget)&&i.widget.startup(),!o)return void s.appendChild(i.node);const a=Array.from(s.children);if(n===0){const{firstChild:f}=s;return void(f?(c=f.parentNode)==null?void 0:c.insertBefore(i.node,f):s.appendChild(i.node))}if(n>=a.length)return void s.appendChild(i.node);const l=a[n];(h=l.parentNode)==null||h.insertBefore(i.node,l)}_toPixelPosition(t){return{top:Qb(t.top),left:Qb(t.left),right:Qb(t.right),bottom:Qb(t.bottom)}}_findByComponent(t){return this._components.find(r=>r===t)??null}_findById(t){return this._components.find(({id:r})=>r===t)??null}_findByNode(t){return this._components.find(({node:r})=>r===t)??null}_getComponentsAtPosition(t,r){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(Ei).filter(n=>{var s;return r.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}};u([d()],Ko.prototype,"_locale",void 0),u([d()],Ko.prototype,"container",null),u([d()],Ko.prototype,"height",null),u([d({value:$K})],Ko.prototype,"padding",null),u([He("padding")],Ko.prototype,"castPadding",null),u([d()],Ko.prototype,"view",void 0),u([d()],Ko.prototype,"width",null),Ko=u([T("esri.views.ui.UI")],Ko);const qMe=Ko,HMe="randomUUID"in crypto;function IE(){if(HMe)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function n7e(){return`{${IE().toUpperCase()}}`}function WMe(){return`{${IE()}}`}function ZMe(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const JMe={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},YMe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},QMe=e=>({...YMe,...e}),KMe=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},XMe=(e,t)=>e.find(t),x8=(e,t,r=!1)=>{let i=e;return t.forEach((n,s)=>{const o=i!=null&&i.children?XMe(i.children,a=>a.domNode===n):void 0;r&&!o&&s!==t.length-1||(i=o)}),i},eIe=e=>{let t;const r={...JMe,...e},i=QMe(r),n=i.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],h=(m,y,g)=>{var b;let v;i.eventHandlerInterceptor=(_,S,$,M)=>function(I){let C;n("domEvent",I);const L=KMe(I.currentTarget,v.domNode),V=L.some(z=>{var Y;return customElements.get((Y=z==null?void 0:z.tagName)==null?void 0:Y.toLowerCase())});if(I.eventPhase===Event.CAPTURING_PHASE||!V)L.reverse(),C=x8(v.getLastRender(),L);else{const z=I.composedPath(),Y=z.slice(z.indexOf(I.currentTarget),z.indexOf(v.domNode)).reverse();C=x8(v.getLastRender(),Y,!0)}let P;return C&&(P=r.handleInterceptedEvent(t,C,this,I)),n("domEventProcessed",I),P},(b=r.postProcessProjectionOptions)==null||b.call(r,i);const x=g();v=m(y,x,i),i.eventHandlerInterceptor=void 0,l.push(v),c.push(g),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,x)};let f=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let m=0;m<l.length;m++){const y=c[m]();n("rendered",void 0);try{l[m].update(y)}catch(g){console.error(g)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,l,c)),t={renderNow:f,scheduleRender:()=>{s||a||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,y)=>{h(rc.append,m,y)},insertBefore:(m,y)=>{h(rc.insertBefore,m,y)},merge:(m,y)=>{h(rc.merge,m,y)},replace:(m,y)=>{h(rc.replace,m,y)},detach:m=>{for(let y=0;y<c.length;y++)if(c[y]===m)return c.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},t};class O1{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}const tIe=(e,t)=>{let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r.parentNode instanceof ShadowRoot?r=r.parentNode.host:r=r.parentNode}return!1},rIe=(e,t,r)=>{const i=iIe(t).subscribe;return i(n=>{n.some(o=>tIe(e,o.target))&&r()})},RM={},iIe=e=>{const t=e.join(","),r=RM[t];if(r!==void 0)return r;const i=new Set,n=new MutationObserver(o=>i.forEach(a=>a(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const s={subscribe:o=>(i.add(o),()=>{i.delete(o),i.size===0&&(n.disconnect(),RM[t]=void 0)})};return RM[t]=s,s},nIe=(e,t)=>{var i,n;let r=e;for(;r;){const s=(i=r.closest)==null?void 0:i.call(r,t);if(s)return s;const o=(n=r.getRootNode)==null?void 0:n.call(r);if(o===globalThis.document)return null;r=o.host}return null},sIe=(e,t,r)=>{const i=nIe(e,`[${t}]`);return(i==null?void 0:i.getAttribute(t))??r},Zt=(e,t,...r)=>{try{return e==null?void 0:e.call(t,...r)}catch(i){console.error(i,e)}},EA=async(e,t,...r)=>{try{return await(e==null?void 0:e.call(t,...r))}catch(i){console.error(i,e)}},oIe="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),aIe=new Set(oIe),FS="en",lIe={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},uIe=async(e,t,r="")=>{const i=`${t}/${r}`,n=`${i}${e}.json`;return OM[n]??(OM[n]=EK(e,i)),await OM[n]},OM={},EK=async(e,t)=>{const r=`${t}${e}.json`;try{const i=await fetch(r);if(i.ok)return await i.json()}catch(i){return console.error(i),{}}return e===FS?{}:await EK(FS,t)},cIe=e=>{var r;const t=sIe(e,"lang",((r=globalThis.navigator)==null?void 0:r.language)||FS);return{lang:t,t9nLocale:TK(t)}},TK=e=>{const[t,r]=e.split("-"),i=t.toLowerCase();let n=i;return r&&(n=`${i}-${r.toUpperCase()}`),n=lIe[n]??n,aIe.has(n)?n:r?TK(i):FS},s7e=(e,t,r,i)=>{let n;const s=()=>dIe(e,t(),i).then(o=>{((n==null?void 0:n.lang)!==o.lang||n.t9nLocale!==o.t9nLocale||n.t9nStrings!==o.t9nStrings)&&r(o),n=o}).catch(console.error);return queueMicrotask(s),rIe(e,["lang"],s)},dIe=async(e,t,r=e.localName.split("-").slice(1).join("-"))=>{const{lang:i,t9nLocale:n}=cIe(e),s=`${t}/${r}/t9n`,a=r===null?{}:await uIe(n,s,"messages.");return{lang:i,t9nLocale:n,t9nStrings:a}},hIe=e=>e.replace(pIe,(t,r)=>`${r===0?"":"-"}${t.toLowerCase()}`),pIe=/[A-Z]+(?![a-z])|[A-Z]/gu,fIe=(e,t)=>{const r=t>mIe?yIe:t/gIe;let i=0;const n=setInterval(()=>{i+=r,i>=t&&(clearInterval(n),e())},r);return n},mIe=4e3,yIe=2e3,gIe=4;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const I2=globalThis,EP=I2.ShadowRoot&&(I2.ShadyCSS===void 0||I2.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,TP=Symbol(),S8=new WeakMap;let MK=class{constructor(t,r,i){if(this._$cssResult$=!0,i!==TP)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=r}get styleSheet(){let t=this.o;const r=this.t;if(EP&&t===void 0){const i=r!==void 0&&r.length===1;i&&(t=S8.get(r)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&S8.set(r,t))}return t}toString(){return this.cssText}};const vIe=e=>new MK(typeof e=="string"?e:e+"",void 0,TP),a7e=(e,...t)=>{const r=e.length===1?e[0]:t.reduce((i,n,s)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[s+1],e[0]);return new MK(r,e,TP)},wIe=(e,t)=>{if(EP)e.adoptedStyleSheets=t.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of t){const i=document.createElement("style"),n=I2.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=r.cssText,e.appendChild(i)}},$8=EP?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let r="";for(const i of t.cssRules)r+=i.cssText;return vIe(r)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:bIe,defineProperty:_Ie,getOwnPropertyDescriptor:xIe,getOwnPropertyNames:SIe,getOwnPropertySymbols:$Ie,getPrototypeOf:EIe}=Object,bc=globalThis,E8=bc.trustedTypes,TIe=E8?E8.emptyScript:"",NM=bc.reactiveElementPolyfillSupport,Av=(e,t)=>e,TA={toAttribute(e,t){switch(t){case Boolean:e=e?TIe:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=e!==null;break;case Number:r=e===null?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch{r=null}}return r}},MP=(e,t)=>!bIe(e,t),T8={attribute:!0,type:String,converter:TA,reflect:!1,useDefault:!1,hasChanged:MP};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),bc.litPropertyMetadata??(bc.litPropertyMetadata=new WeakMap);let wf=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,r=T8){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(t,r),!r.noAccessor){const i=Symbol(),n=this.getPropertyDescriptor(t,i,r);n!==void 0&&_Ie(this.prototype,t,n)}}static getPropertyDescriptor(t,r,i){const{get:n,set:s}=xIe(this.prototype,t)??{get(){return this[r]},set(o){this[r]=o}};return{get:n,set(o){const a=n==null?void 0:n.call(this);s==null||s.call(this,o),this.requestUpdate(t,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??T8}static _$Ei(){if(this.hasOwnProperty(Av("elementProperties")))return;const t=EIe(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(Av("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Av("properties"))){const r=this.properties,i=[...SIe(r),...$Ie(r)];for(const n of i)this.createProperty(n,r[n])}const t=this[Symbol.metadata];if(t!==null){const r=litPropertyMetadata.get(t);if(r!==void 0)for(const[i,n]of r)this.elementProperties.set(i,n)}this._$Eh=new Map;for(const[r,i]of this.elementProperties){const n=this._$Eu(r,i);n!==void 0&&this._$Eh.set(n,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const r=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const n of i)r.unshift($8(n))}else t!==void 0&&r.push($8(t));return r}static _$Eu(t,r){const i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(r=>r(this))}addController(t){var r;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((r=t.hostConnected)==null||r.call(t))}removeController(t){var r;(r=this._$EO)==null||r.delete(t)}_$E_(){const t=new Map,r=this.constructor.elementProperties;for(const i of r.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return wIe(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostConnected)==null?void 0:i.call(r)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostDisconnected)==null?void 0:i.call(r)})}attributeChangedCallback(t,r,i){this._$AK(t,i)}_$ET(t,r){var s;const i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(n!==void 0&&i.reflect===!0){const o=(((s=i.converter)==null?void 0:s.toAttribute)!==void 0?i.converter:TA).toAttribute(r,i.type);this._$Em=t,o==null?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(t,r){var s,o;const i=this.constructor,n=i._$Eh.get(t);if(n!==void 0&&this._$Em!==n){const a=i.getPropertyOptions(n),l=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:TA;this._$Em=n,this[n]=l.fromAttribute(r,a.type)??((o=this._$Ej)==null?void 0:o.get(n))??null,this._$Em=null}}requestUpdate(t,r,i){var n;if(t!==void 0){const s=this.constructor,o=this[t];if(i??(i=s.getPropertyOptions(t)),!((i.hasChanged??MP)(o,r)||i.useDefault&&i.reflect&&o===((n=this._$Ej)==null?void 0:n.get(t))&&!this.hasAttribute(s._$Eu(t,i))))return;this.C(t,r,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(t,r,{useDefault:i,reflect:n,wrapped:s},o){i&&!(this._$Ej??(this._$Ej=new Map)).has(t)&&(this._$Ej.set(t,o??r??this[t]),s!==!0||o!==void 0)||(this._$AL.has(t)||(this.hasUpdated||i||(r=void 0),this._$AL.set(t,r)),n===!0&&this._$Em!==t&&(this._$Eq??(this._$Eq=new Set)).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,o]of n){const{wrapped:a}=o,l=this[s];a!==!0||this._$AL.has(s)||l===void 0||this.C(s,void 0,o,l)}}let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),(i=this._$EO)==null||i.forEach(n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)}),this.update(r)):this._$EM()}catch(n){throw t=!1,this._$EM(),n}t&&this._$AE(r)}willUpdate(t){}_$AE(t){var r;(r=this._$EO)==null||r.forEach(i=>{var n;return(n=i.hostUpdated)==null?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(t){}firstUpdated(t){}};wf.elementStyles=[],wf.shadowRootOptions={mode:"open"},wf[Av("elementProperties")]=new Map,wf[Av("finalized")]=new Map,NM==null||NM({ReactiveElement:wf}),(bc.reactiveElementVersions??(bc.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const kv=globalThis,jS=kv.trustedTypes,M8=jS?jS.createPolicy("lit-html",{createHTML:e=>e}):void 0,IP="$lit$",_l=`lit$${Math.random().toFixed(9).slice(2)}$`,CP="?"+_l,MIe=`<${CP}>`,ap=document,N1=()=>ap.createComment(""),P1=e=>e===null||typeof e!="object"&&typeof e!="function",LP=Array.isArray,IK=e=>LP(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",PM=`[ 	
\f\r]`,Ag=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,I8=/-->/g,C8=/>/g,ad=RegExp(`>|${PM}(?:([^\\s"'>=/]+)(${PM}*=${PM}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),L8=/'/g,A8=/"/g,CK=/^(?:script|style|textarea|title)$/i,LK=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),u7e=LK(1),c7e=LK(2),Oc=Symbol.for("lit-noChange"),ur=Symbol.for("lit-nothing"),k8=new WeakMap,Mh=ap.createTreeWalker(ap,129);function AK(e,t){if(!LP(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return M8!==void 0?M8.createHTML(t):t}const kK=(e,t)=>{const r=e.length-1,i=[];let n,s=t===2?"<svg>":t===3?"<math>":"",o=Ag;for(let a=0;a<r;a++){const l=e[a];let c,h,f=-1,m=0;for(;m<l.length&&(o.lastIndex=m,h=o.exec(l),h!==null);)m=o.lastIndex,o===Ag?h[1]==="!--"?o=I8:h[1]!==void 0?o=C8:h[2]!==void 0?(CK.test(h[2])&&(n=RegExp("</"+h[2],"g")),o=ad):h[3]!==void 0&&(o=ad):o===ad?h[0]===">"?(o=n??Ag,f=-1):h[1]===void 0?f=-2:(f=o.lastIndex-h[2].length,c=h[1],o=h[3]===void 0?ad:h[3]==='"'?A8:L8):o===A8||o===L8?o=ad:o===I8||o===C8?o=Ag:(o=ad,n=void 0);const y=o===ad&&e[a+1].startsWith("/>")?" ":"";s+=o===Ag?l+MIe:f>=0?(i.push(c),l.slice(0,f)+IP+l.slice(f)+_l+y):l+_l+(f===-2?a:y)}return[AK(e,s+(e[r]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),i]};let MA=class RK{constructor({strings:t,_$litType$:r},i){let n;this.parts=[];let s=0,o=0;const a=t.length-1,l=this.parts,[c,h]=kK(t,r);if(this.el=RK.createElement(c,i),Mh.currentNode=this.el.content,r===2||r===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(n=Mh.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const f of n.getAttributeNames())if(f.endsWith(IP)){const m=h[o++],y=n.getAttribute(f).split(_l),g=/([.?@])?(.*)/.exec(m);l.push({type:1,index:s,name:g[2],strings:y,ctor:g[1]==="."?PK:g[1]==="?"?DK:g[1]==="@"?FK:jw}),n.removeAttribute(f)}else f.startsWith(_l)&&(l.push({type:6,index:s}),n.removeAttribute(f));if(CK.test(n.tagName)){const f=n.textContent.split(_l),m=f.length-1;if(m>0){n.textContent=jS?jS.emptyScript:"";for(let y=0;y<m;y++)n.append(f[y],N1()),Mh.nextNode(),l.push({type:2,index:++s});n.append(f[m],N1())}}}else if(n.nodeType===8)if(n.data===CP)l.push({type:2,index:s});else{let f=-1;for(;(f=n.data.indexOf(_l,f+1))!==-1;)l.push({type:7,index:s}),f+=_l.length-1}s++}}static createElement(t,r){const i=ap.createElement("template");return i.innerHTML=t,i}};function lp(e,t,r=e,i){var o,a;if(t===Oc)return t;let n=i!==void 0?(o=r._$Co)==null?void 0:o[i]:r._$Cl;const s=P1(t)?void 0:t._$litDirective$;return(n==null?void 0:n.constructor)!==s&&((a=n==null?void 0:n._$AO)==null||a.call(n,!1),s===void 0?n=void 0:(n=new s(e),n._$AT(e,r,i)),i!==void 0?(r._$Co??(r._$Co=[]))[i]=n:r._$Cl=n),n!==void 0&&(t=lp(e,n._$AS(e,t.values),n,i)),t}let OK=class{constructor(t,r){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:r},parts:i}=this._$AD,n=((t==null?void 0:t.creationScope)??ap).importNode(r,!0);Mh.currentNode=n;let s=Mh.nextNode(),o=0,a=0,l=i[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new CE(s,s.nextSibling,this,t):l.type===1?c=new l.ctor(s,l.name,l.strings,this,t):l.type===6&&(c=new jK(s,this,t)),this._$AV.push(c),l=i[++a]}o!==(l==null?void 0:l.index)&&(s=Mh.nextNode(),o++)}return Mh.currentNode=ap,n}p(t){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,r),r+=i.strings.length-2):i._$AI(t[r])),r++}},CE=class NK{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,r,i,n){this.type=2,this._$AH=ur,this._$AN=void 0,this._$AA=t,this._$AB=r,this._$AM=i,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=r.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,r=this){t=lp(this,t,r),P1(t)?t===ur||t==null||t===""?(this._$AH!==ur&&this._$AR(),this._$AH=ur):t!==this._$AH&&t!==Oc&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):IK(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==ur&&P1(this._$AH)?this._$AA.nextSibling.data=t:this.T(ap.createTextNode(t)),this._$AH=t}$(t){var s;const{values:r,_$litType$:i}=t,n=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=MA.createElement(AK(i.h,i.h[0]),this.options)),i);if(((s=this._$AH)==null?void 0:s._$AD)===n)this._$AH.p(r);else{const o=new OK(n,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(t){let r=k8.get(t.strings);return r===void 0&&k8.set(t.strings,r=new MA(t)),r}k(t){LP(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,n=0;for(const s of t)n===r.length?r.push(i=new NK(this.O(N1()),this.O(N1()),this,this.options)):i=r[n],i._$AI(s),n++;n<r.length&&(this._$AR(i&&i._$AB.nextSibling,n),r.length=n)}_$AR(t=this._$AA.nextSibling,r){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,r);t&&t!==this._$AB;){const n=t.nextSibling;t.remove(),t=n}}setConnected(t){var r;this._$AM===void 0&&(this._$Cv=t,(r=this._$AP)==null||r.call(this,t))}},jw=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,r,i,n,s){this.type=1,this._$AH=ur,this._$AN=void 0,this.element=t,this.name=r,this._$AM=n,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=ur}_$AI(t,r=this,i,n){const s=this.strings;let o=!1;if(s===void 0)t=lp(this,t,r,0),o=!P1(t)||t!==this._$AH&&t!==Oc,o&&(this._$AH=t);else{const a=t;let l,c;for(t=s[0],l=0;l<s.length-1;l++)c=lp(this,a[i+l],r,l),c===Oc&&(c=this._$AH[l]),o||(o=!P1(c)||c!==this._$AH[l]),c===ur?t=ur:t!==ur&&(t+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!n&&this.j(t)}j(t){t===ur?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},PK=class extends jw{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===ur?void 0:t}},DK=class extends jw{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==ur)}},FK=class extends jw{constructor(t,r,i,n,s){super(t,r,i,n,s),this.type=5}_$AI(t,r=this){if((t=lp(this,t,r,0)??ur)===Oc)return;const i=this._$AH,n=t===ur&&i!==ur||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==ur&&(i===ur||n);n&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,t):this._$AH.handleEvent(t)}},jK=class{constructor(t,r,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){lp(this,t)}};const g7e={M:IP,P:_l,A:CP,C:1,L:kK,R:OK,D:IK,V:lp,I:CE,H:jw,N:DK,U:FK,B:PK,F:jK},DM=kv.litHtmlPolyfillSupport;DM==null||DM(MA,CE),(kv.litHtmlVersions??(kv.litHtmlVersions=[])).push("3.3.0");const IIe=(e,t,r)=>{const i=(r==null?void 0:r.renderBefore)??t;let n=i._$litPart$;if(n===void 0){const s=(r==null?void 0:r.renderBefore)??null;i._$litPart$=n=new CE(t.insertBefore(N1(),s),s,void 0,r??{})}return n._$AI(e),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Uh=globalThis;let Bh=class extends wf{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const t=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=t.firstChild),t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=IIe(r,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return Oc}};var gU;Bh._$litElement$=!0,Bh.finalized=!0,(gU=Uh.litElementHydrateSupport)==null||gU.call(Uh,{LitElement:Bh});const FM=Uh.litElementPolyfillSupport;FM==null||FM({LitElement:Bh});(Uh.litElementVersions??(Uh.litElementVersions=[])).push("4.2.0");const AP=Symbol.for("controller"),CIe=e=>typeof e=="object"&&e!==null&&(AP in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),w7e=e=>typeof(e==null?void 0:e.then)=="function";let k0;const R0=e=>{k0!==e&&(k0=e,queueMicrotask(()=>k0===e?k0=void 0:0))},LE=e=>k0;let jd=[];const LIe=e=>{if(e===void 0){jd=[];return}const t=jd.indexOf(e);jd=t===-1?[...jd,e]:jd.slice(0,t+1),queueMicrotask(()=>jd=[])},AIe=()=>jd;let lm;const b7e=e=>{lm!==e&&(lm=e,queueMicrotask(()=>lm===e?lm=void 0:0))},kIe=()=>{const e=lm;return lm=void 0,e},RIe=async(e,t)=>{const r=kP(e);if(r===void 0)return e;if(await r.ready,typeof t=="function"){const i=r.watchExports(n=>t(n,i))}return r.exports},OIe=async e=>{const t=kP(e);return await t.ready,t},kP=e=>{const r=LE().manager.X(e);if(r!==void 0)return r;if(CIe(e))return e;const i=kIe();if(i!==void 0)return i};let IA=!1;const _7e=e=>{IA=!0;try{return e()}finally{IA=!1}},NIe=(e,t,r)=>{const i=Object.keys(e),n=i.length;nc===void 0&&queueMicrotask(RP),nc??(nc=new Map);let s=nc.get(e);return s===void 0&&(s={callbacks:[],keyCount:n},nc.set(e,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(i)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=c=>Zt(t,null,c),l=o[n];l===void 0?a(void 0):e[l]===r?a(l):a(void 0)}),r};let nc;const RP=()=>{nc==null||nc.forEach(({callbacks:e},t)=>{const r=Object.keys(t);e.forEach(i=>i(r))}),nc=void 0},PIe=(e,t,r)=>{const i=e.manager;return i.V!==ur&&i.V!==r&&i.S(void 0,void 0),i.T.length===0&&queueMicrotask(()=>i.S(void 0,void 0)),i.V=r,i.T.push((n,s)=>Zt(t,void 0,r===s?n:void 0)),r},DIe=(e=[LE(),...AIe()],t,r)=>{const i=Array.isArray(e)?e:[e];let n=i.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&t(o)};i.forEach(o=>NIe(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),r));for(const o of i)if("manager"in o&&o.manager.component===o){PIe(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),r);break}return r},FIe=(e="",t={},r=LE())=>{const i={emit:n=>{e===""&&RP();const s=new CustomEvent(e,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...t});return r.el.dispatchEvent(s),s}};return e===""&&DIe(void 0,n=>e=n.key,i),i},x7e=FIe.bind(null,"");var VK;VK=AP;var Fm,jm,Ih,Vm,zm,Um,Bm,Gm,Zu,Ch,dn,ua,vl,qm,C2;class jIe{constructor(t){vt(this,qm);vt(this,Fm,void 0);vt(this,jm,void 0);vt(this,Ih,void 0);vt(this,Vm,void 0);vt(this,zm,void 0);vt(this,Um,void 0);vt(this,Bm,void 0);vt(this,Gm,void 0);vt(this,Zu,void 0);vt(this,Ch,void 0);vt(this,dn,void 0);vt(this,ua,void 0);vt(this,vl,void 0);st(this,Fm,[]),st(this,jm,[]),st(this,Ih,[]),st(this,Vm,[]),st(this,zm,[]),st(this,Um,[]),st(this,Bm,[]),st(this,Gm,[]),st(this,Zu,[]),st(this,Ch,!1),this.P=new O1,this.connectedCalled=!1,this.loadedCalled=!1,this[VK]=!0,st(this,vl,[]);const r=this,i=t??LE();st(r,dn,i),r.ready=r.P.promise,st(r,ua,O8(r)),r.component=i,se(r,dn).addController(r),se(r,dn).manager===void 0||(LIe(r),queueMicrotask(()=>r.catchUpLifecycle()))}catchUpLifecycle(){const{manager:t}=se(this,dn);t.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),se(t,Ch)&&this.triggerLoad().then(()=>t.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return se(this,ua)}set exports(t){const r=se(this,ua);r!==t&&(st(this,ua,t),se(this,vl).forEach(Zt),this.connectedCalled&&this.O!==!1&&se(this,dn).requestUpdate(this.O,r)),this.P.resolve(t)}setProvisionalExports(t,r=!0){st(this,ua,r?O8(t):t),se(this,vl).forEach(Zt)}watchExports(t){const r=()=>t(se(this,ua));return se(this,vl).push(r),()=>void se(this,vl).splice(se(this,vl).indexOf(r),1)}get use(){return R0(se(this,dn)),RIe}get useRef(){return R0(se(this,dn)),OIe}get useRefSync(){return R0(se(this,dn)),kP}controllerRemoved(){se(this,dn).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(t){se(this,Fm).push(t)}onDisconnected(t){se(this,jm).push(t)}onLoad(t){se(this,Ih).push(t)}onLoaded(t){se(this,Vm).push(t)}onUpdate(t){se(this,zm).push(t)}onUpdated(t){se(this,Um).push(t)}onDestroy(t){se(this,Bm).push(t)}onLifecycle(t){se(this,Gm).push(t),this.connectedCalled&&se(this,dn).el.isConnected&&Hl(this,qm,C2).call(this,t)}triggerConnected(){const t=this;t.hostConnected&&Zt(t.hostConnected,t),se(t,Fm).forEach(Zt),t.triggerLifecycle(),t.connectedCalled=!0}triggerDisconnected(){const t=this;t.hostDisconnected&&Zt(t.hostDisconnected,t),se(t,jm).forEach(Zt),se(t,Zu).forEach(Zt),st(t,Zu,[])}async triggerLoad(){if(se(this,Ch))return;st(this,Ch,!0);const t=this;t.hostLoad&&await EA(t.hostLoad,t),se(this,Ih).length>0&&await Promise.allSettled(se(this,Ih).map(EA)),this.P.resolve(se(this,ua))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Zt(this.hostLoaded,this),se(this,Vm).forEach(Zt),this.loadedCalled=!0)}triggerUpdate(t){this.hostUpdate&&Zt(this.hostUpdate,this,t),se(this,zm).forEach(R8,t)}triggerUpdated(t){this.hostUpdated&&Zt(this.hostUpdated,this,t),se(this,Um).forEach(R8,t)}triggerDestroy(){this.hostDestroy&&Zt(this.hostDestroy,this),se(this,Bm).forEach(Zt)}triggerLifecycle(){this.hostLifecycle&&Hl(this,qm,C2).call(this,()=>this.hostLifecycle()),se(this,Gm).forEach(Hl(this,qm,C2),this)}}Fm=new WeakMap,jm=new WeakMap,Ih=new WeakMap,Vm=new WeakMap,zm=new WeakMap,Um=new WeakMap,Bm=new WeakMap,Gm=new WeakMap,Zu=new WeakMap,Ch=new WeakMap,dn=new WeakMap,ua=new WeakMap,vl=new WeakMap,qm=new WeakSet,C2=function(t){R0(se(this,dn));const r=Zt(t);(Array.isArray(r)?r:[r]).forEach(n=>{typeof n=="function"?se(this,Zu).push(n):typeof n=="object"&&typeof n.remove=="function"&&se(this,Zu).push(n.remove)})};function R8(e){Zt(e,void 0,this)}const VIe=jIe,O8=e=>{if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t={get(i,n,s){if(!((n==="exports"||n==="_exports")&&n in i&&i[n]===r)&&(n in i||n in Promise.prototype||typeof n=="symbol"))return typeof i=="function"?i[n]:Reflect.get(i,n,s)}},r=new Proxy(e,t);return r},zIe=1,UIe=2,BIe=4,GIe=8,qIe=16,HIe=32,WIe=64,zK=e=>{var r,i;let t=e;for(;t=t.parentNode??t.host;)if((r=t==null?void 0:t.constructor)!=null&&r.lumina){const n=t;return(i=n.manager)!=null&&i.loadedCalled||(n.J??n._offspring).push(e),(n.I??n._postLoad).promise}return!1},N8={};function UK(){}const L2=Object.defineProperty,ZIe=globalThis.HTMLElement??UK;var hn,wl,Hm,W1,CA;const A5=class A5 extends ZIe{constructor(){var n,s;super();vt(this,W1);vt(this,hn,void 0);vt(this,wl,void 0);vt(this,Hm,void 0);st(this,wl,{}),st(this,Hm,[]),this.I=new O1,this.H=new O1,this.J=[];const r=this,i=r.constructor;r._offspring=r.J,r._postLoad=r.I,(n=i.C)==null||n.forEach(o=>{Object.hasOwn(r,o)&&(se(r,wl)[o]=r[o],delete r[o])}),i.A?Hl(s=r,W1,CA).call(s,{a:i.A}):i.B.then(async o=>{var a,l;await i.K.p,Hl(l=r,W1,CA).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{r.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const r of this.C??[])L2(this.prototype,r,{configurable:!0,enumerable:!0,get(){return se(this,wl)[r]},set(i){se(this,wl)[r]=i}});for(const r of this.E??[])L2(this.prototype,r,{async value(...i){return se(this,hn)||await this.H.promise,await se(this,hn)[r](...i)},configurable:!0});for(const r of this.D??[])L2(this.prototype,r,{value(...i){return se(this,hn)[r](...i)},configurable:!0})}get manager(){var r;return(r=se(this,hn))==null?void 0:r.manager}attributeChangedCallback(r,i,n){var s;(s=se(this,hn))==null||s.attributeChangedCallback(r,i,n),se(this,hn)||se(this,Hm).push(r)}connectedCallback(){var r,i;se(this,hn)?(i=(r=se(this,hn)).connectedCallback)==null||i.call(r):queueMicrotask(()=>this.G=zK(this))}disconnectedCallback(){var r,i;(i=(r=se(this,hn))==null?void 0:r.disconnectedCallback)==null||i.call(r)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var r;(r=se(this,hn))==null||r.requestUpdate()}};hn=new WeakMap,wl=new WeakMap,Hm=new WeakMap,W1=new WeakSet,CA=function(r){var m;const i=this.constructor,n=i.L,s=se(this,wl),o=Object.values(r).find(y=>y.L===n),a=`${n}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);YIe(l),!i.A&&(i.A=o,customElements.define(a,o)),o.N=this;const h=document.createElement(a);o.N=void 0,st(this,hn,h),st(this,wl,h),se(this,Hm).forEach(y=>h.attributeChangedCallback(y,null,this.getAttribute(y))),Object.entries(s).forEach(JIe,h);const f=this.isConnected;(f||this.G)&&((m=h.connectedCallback)==null||m.call(h),f||h.disconnectedCallback())},A5.lumina=!0;let P8=A5;function JIe([e,t]){this[e]=t}const YIe=e=>{const t=e.prototype,r=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(n,s){r.setAttribute.call(this.el,n,s)},t.removeAttribute=function(n){r.removeAttribute.call(this.el,n)},L2(t,"isConnected",{get(){return Reflect.get(r,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const BK={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},GK=e=>(...t)=>({_$litDirective$:e,values:t});let qK=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,r,i){this._$Ct=t,this._$AM=r,this._$Ci=i}_$AS(t,r){return this.update(t,r)}update(t,r){return this.render(...r)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const QIe=GK(class extends qK{constructor(e){var t;if(super(e),e.type!==BK.ATTRIBUTE||e.name!=="class"||((t=e.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var i,n;if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in t)t[s]&&!((i=this.nt)!=null&&i.has(s))&&this.st.add(s);return this.render(t)}const r=e.element.classList;for(const s of this.st)s in t||(r.remove(s),this.st.delete(s));for(const s in t){const o=!!t[s];o===this.st.has(s)||(n=this.nt)!=null&&n.has(s)||(o?(r.add(s),this.st.add(s)):(r.remove(s),this.st.delete(s)))}return Oc}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const HK="important",KIe=" !"+HK,XIe=GK(class extends qK{constructor(e){var t;if(super(e),e.type!==BK.ATTRIBUTE||e.name!=="style"||((t=e.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,r)=>{const i=e[r];return i==null?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`},"")}update(e,[t]){const{style:r}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const i of this.ft)t[i]==null&&(this.ft.delete(i),i.includes("-")?r.removeProperty(i):r[i]=null);for(const i in t){const n=t[i];if(n!=null){this.ft.add(i);const s=typeof n=="string"&&n.endsWith(KIe);i.includes("-")||s?r.setProperty(i,s?n.slice(0,-11):n,s?HK:""):r[i]=n}}return Oc}});var bl,yo,Wm;class e3e extends VIe{constructor(r){super(r);vt(this,bl,void 0);vt(this,yo,void 0);vt(this,Wm,void 0);this.destroyed=!1,this.R=!1,this.V=ur,this.T=[],st(this,Wm,new WeakMap),st(this,yo,r),this.exports=void 0,this.hasDestroy=LA in r&&typeof r.destroy=="function",Bh.prototype.addController.call(r,{hostConnected:()=>{if(this.destroyed){const i=r.el.localName;throw r.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${LA} prop.`)}se(this,bl)!==void 0&&clearTimeout(se(this,bl)),RP();for(const i of r.M)"triggerConnected"in i?i.triggerConnected():Zt(i.hostConnected,i)},hostDisconnected:()=>{for(const i of r.M)"triggerDisconnected"in i?i.triggerDisconnected():Zt(i.hostDisconnected,i);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const i of r.M)"triggerUpdate"in i?i.triggerUpdate(this.Q):Zt(i.hostUpdate,i,this.Q)},hostUpdated:()=>{for(const i of r.M)"triggerUpdated"in i?i.triggerUpdated(this.Q):Zt(i.hostUpdated,i,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),R0(r)}async destroy(){if(!this.destroyed){se(this,yo).el.isConnected&&(this.hasDestroy=!1,se(this,yo).el.remove()),st(this,bl,void 0),this.destroyed=!0;for(const r of se(this,yo).M)"triggerDestroy"in r?r.triggerDestroy():Zt(r.hostDestroy,r);se(this,yo).M.splice(0)}}U(){se(this,bl)!==void 0&&clearTimeout(se(this,bl)),!se(this,yo).el.isConnected&&!se(this,yo).autoDestroyDisabled&&st(this,bl,fIe(()=>void se(this,yo).destroy(),t3e))}S(r,i){const n=this.T;this.V=ur,this.T=[],n.forEach(s=>s(r,i))}W(r,i){(typeof i=="object"&&i!==null||typeof i=="function")&&se(this,Wm).set(i,r)}X(r){if(typeof r=="object"&&r!==null||typeof r=="function")return se(this,Wm).get(r)}}bl=new WeakMap,yo=new WeakMap,Wm=new WeakMap;let t3e=1e3;const LA="autoDestroyDisabled";var Lh,Z1,J1,Ah,ca,r$,WK,i$,ZK;const Vv=class Vv extends Bh{constructor(){super();vt(this,r$);vt(this,i$);vt(this,Lh,void 0);vt(this,Z1,void 0);vt(this,J1,void 0);vt(this,Ah,void 0);vt(this,ca,void 0);this.M=[],this.manager=new e3e(this);const r=this,i=r.constructor,n=i.N,s=i.K.o,o=Vv.prototype.shouldUpdate;st(r,Ah,(n==null?void 0:n.H)??new O1),r.I=(n==null?void 0:n.I)??new O1,r.J=(n==null?void 0:n.J)??[],r._offspring=r.J,r._postLoad=r.I,r.el=n??r,st(r,J1,r.enableUpdating),r.enableUpdating=UK,r.shouldUpdate!==o&&(st(r,Z1,r.shouldUpdate),r.shouldUpdate=o),s&&(st(r,Lh,new Map),i.elementProperties.forEach((a,l)=>se(r,Lh).set(l,s())))}static finalizeStyles(r){var s;const i=super.finalizeStyles(r),n=this.shadowRootOptions===N8;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?i:[this.K.commonStyles,...i]}static createProperty(r,i){const n=typeof i=="number"?i:Array.isArray(i)?i[0]:0,s=Array.isArray(i)?i[1]:void 0,o=(s==null?void 0:s.hasChanged)??MP,a={attribute:n&zIe&&typeof r=="string"?hIe(r):!1,reflect:!!(n&UIe),type:n&BIe?Boolean:n&GIe?Number:void 0,state:!!(n&qIe),readOnly:!!(n&HIe),noAccessor:!!(n&WIe),c:!1,...s,hasChanged(l,c){const h=o(l,c);return a.c=h,h}};super.createProperty(r,a)}static getPropertyDescriptor(r,i,n){const s=this.K,o=super.getPropertyDescriptor(r,i,n);return n.d=o,{...o,get(){var a,l;return(a=s.t)==null||a.call(s,se(this,Lh).get(r)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,h;const l=this.manager;if(n.readOnly&&!IA&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${r}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((h=(c=se(this,Lh))==null?void 0:c.get(r))==null||h.notify()),l.T.length>0&&(l==null||l.S(r,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const r=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());st(this,ca,r);const i=!this.manager.connectedCalled;super.connectedCallback(),i?queueMicrotask(()=>Hl(this,i$,ZK).call(this).catch(o=>{se(this,Ah).reject(o),setTimeout(()=>{throw o})})):r&&this.requestUpdate()}disconnectedCallback(){var r;super.disconnectedCallback(),(r=se(this,ca))==null||r.destroy(),st(this,ca,void 0)}createRenderRoot(){const r=this.el.shadowRoot,i=this.constructor,n=i.shadowRootOptions,o=r??(n===N8?this.el:this.el.attachShadow(n));if(r)return Bh.prototype.createRenderRoot.call(this),r;if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...i.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(r){var i;return this.manager.Q=r,((i=se(this,Z1))==null?void 0:i.call(this,r))??!0}update(r){se(this,ca)?Hl(this,r$,WK).call(this,r):super.update(r)}listen(r,i,n){const s=(i==null?void 0:i.bind(this))??i;this.manager.onLifecycle(()=>(this.el.addEventListener(r,s,n),()=>this.el.removeEventListener(r,s,n)))}listenOn(r,i,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(r.addEventListener(i,o,s),()=>r.removeEventListener(i,o,s)))}async componentOnReady(){return await se(this,Ah).promise,this}addController(r){var i;this.M.push(r),!(AP in r)&&this.renderRoot&&this.el.isConnected&&((i=r.hostConnected)==null||i.call(r))}removeController(r){var i;this.M.splice(this.M.indexOf(r),1),(i=r.controllerRemoved)==null||i.call(r)}};Lh=new WeakMap,Z1=new WeakMap,J1=new WeakMap,Ah=new WeakMap,ca=new WeakMap,r$=new WeakSet,WK=function(r){try{se(this,ca).clear(),this.constructor.K.r(se(this,ca),()=>F5(Vv.prototype,this,"update").call(this,r))}catch(i){throw se(this,ca).clear(),i}},i$=new WeakSet,ZK=async function(){var s,o;const r=this.el.G??zK(this.el);r&&await r;const i=[];for(const a of this.M)"triggerLoad"in a?i.push(a.triggerLoad()):i.push(EA(a.hostLoad,a));await Promise.all(i),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(LA)&&this.manager.U()),se(this,J1).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():Zt(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),se(this,Ah).resolve()},Vv.lumina=!0;let D8=Vv;const r3e=e=>{let t;const r=n=>{var s;t=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},i={...e,getAssetPath(n){var o;const s=new URL(n,t);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:r,customElement(n,s){s.K=i,s.L=n,customElements.get(n)||customElements.define(n,s)}};return r(e.defaultAssetPath),i},$7e=e=>typeof e=="object"&&e!=null?QIe(e):e,E7e=e=>typeof e=="object"&&e!=null?XIe(e):e,T7e=ur;function M7e(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}const I7e={toAttribute:e=>e===!0?"":e===!1?null:e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const JK="calcite-mode-auto",YK="calcite-mode-dark",i3e="calcite-mode-light",C7e={autoMode:JK,darkMode:YK,lightMode:i3e,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left"},L7e={filter:250,nextTick:0,resize:150,reposition:100},A7e=25;function F8(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(YK)||e.contains(JK)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&i(o),s=o};let s=r();i(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const Cl=globalThis.calciteConfig,k7e=(Cl==null?void 0:Cl.focusTrapStack)||[],R7e=(Cl==null?void 0:Cl.logLevel)||"info",j8="3.2.1",n3e="2025-05-29",s3e="618973fec";function o3e(){if(Cl&&Cl.version)return;console.info(`Using Calcite Components ${j8} [Date: ${n3e}, Revision: ${s3e}]`);const e=Cl||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:j8,writable:!1}),globalThis.calciteConfig=e}function a3e(){document.readyState==="interactive"?F8():document.addEventListener("DOMContentLoaded",()=>F8(),{once:!0}),o3e()}a3e();const l3e=r3e({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.2.1/",hydratedAttribute:"calcite-hydrated"}),{customElement:O7e,getAssetPath:N7e,setAssetPath:u3e}=l3e;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */let QK=!1;const c3e=e=>{QK=!0,u3e(e)};let KK;function d3e(){QK||c3e($s(Nt(KK)))}function Hy(e){var r;const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push((r=e[i])==null?void 0:r.call(e));return t.length>0?Promise.all(t):null}KK="components/assets";const XK=Symbol("widget"),eX=Symbol("widget-test-data"),h3e=[],p3e={},VS=new WeakMap;function tX(e,t){let r=t.children;if(r!=null&&r.length)for(let n=0;n<r.length;++n)r[n]=tX(e,r[n]);else r=h3e;const i=t.vnodeSelector;if(zS(i)){const n=t.properties||p3e,s=n.key||i,o={key:s,afterCreate:f3e,afterUpdate:m3e,afterRemoved:rX,parentWidget:e,widgetConstructor:i,widgetProperties:{...n,key:s,children:r}};return{vnodeSelector:i.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function f3e(e,t,r,{parentWidget:i,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=e,VS.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),i.addHandles(et(()=>rX(e))),queueMicrotask(()=>{o[eX].projector.renderNow()})}function m3e(e,t,r,{widgetProperties:i}){var s;const n=VS.get(e);n&&(n.set(i),(s=n.afterUpdate)==null||s.call(n,n,e))}function rX(e){var r;const t=VS.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),VS.delete(e))}function zS(e){return typeof e=="function"&&e[XK]}const V8=new Set;function y3e(e){V8.add(e),e.finally(()=>V8.delete(e))}var iX;const g3e="esri.widgets.Widget";let v3e=0;function nX(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?nX(e[i],t[i]):e[i]=t[i]);return e}const w3e=eIe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,n,s,o)=>{const a=t==null?void 0:t(i,n,s,o),l=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in s)||l){const c=i[2].toLowerCase()+i.slice(3),h=y=>a==null?void 0:a.call(s,y);s.addEventListener(c,h,l);const f=()=>s.removeEventListener(c,h,l),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),f()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:n,type:s}=i,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(nJ(),e.scheduleRender(),l[a].call(l.bind||r,i))}});let jM=!1,wr=class extends vw.EsriPromiseMixin(Ns.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._projector=w3e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=dw(async()=>{var l;if((l=this._messageBundleProps)!=null&&l.length){const c=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:f})=>{if(this.destroyed)return;let m=await iN(h);this.uiStrings&&Object.keys(this.uiStrings)&&(m=nX(O(m),this.uiStrings)),this[f]=m}));if(this.destroyed)return;for(const h of c)h.status==="rejected"&&W.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),d3e();const i="esri-widget-uid-"+IE(),n=this.render.bind(this);this._trackingTarget=new L$(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var f,m;if(!this._readyForTrueRender||this.destroyed)return null;const l=n()??s(),c=l.properties??(l.properties={});if(c.key??(c.key=i),zS(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),(f=c.styles).display??(f.display="");let h=0;return(m=l.children)==null||m.forEach(y=>{var g;zS(y.vnodeSelector)||(y.properties??(y.properties={}),(g=y.properties).key??(g.key=`${this.id}--${h++}`))}),tX(this,l)};this.render=()=>{if(jM)return o();let l=w1e(this)??null;if(l)return l;this._trackingTarget.clear(),jM=!0;try{l=Pl(this._trackingTarget,o)}catch(c){throw W.getLogger(this).error(c),c}finally{jM=!1}return l&&b1e(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),y3e(this._resourcesFetch)}normalizeCtorArgs(t,r){const i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){var r;const t=this.loadDependencies();return(r=this._messageBundleProps)!=null&&r.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(_D):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Et(this._trackingTarget),Et(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,rM(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return NN(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+v3e++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(iX=XK,eX)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(rM(this),this._projector.scheduleRender())}classes(...t){return im.apply(this,t)}renderNow(){rM(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this.addHandles(ee(()=>this.viewModel,(i,n)=>{n&&this.removeHandles("delegated-events"),i&&C$(i)&&this.addHandles(this._delegatedEventNames.map(s=>uw(i,s,o=>{this.emit(s,o)})),"delegated-events")},fn)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(_D),this.scheduleRender()};this.addHandles([eN(t),ee(()=>this.uiStrings,t),Ln(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=t==null?void 0:t.parentNode)==null||r.removeChild(t)}};wr[iX]=!0,wr.vnodeSelector="div",u([d()],wr.prototype,"_readyForTrueRender",void 0),u([d({value:null})],wr.prototype,"container",null),u([He("container")],wr.prototype,"castContainer",null),u([d()],wr.prototype,"icon",null),u([d()],wr.prototype,"id",null),u([d()],wr.prototype,"label",null),u([d()],wr.prototype,"renderable",null),u([d()],wr.prototype,"uiStrings",void 0),u([d()],wr.prototype,"viewModel",void 0),u([d({value:!0})],wr.prototype,"visible",null),u([d()],wr.prototype,"key",void 0),u([d()],wr.prototype,"children",void 0),u([d()],wr.prototype,"afterCreate",void 0),u([d()],wr.prototype,"afterUpdate",void 0),u([d()],wr.prototype,"afterRemoved",void 0),wr=u([T(g3e)],wr);const Mr=wr,b3e=new Map;function _3e(e){return b3e.get(e)}function z8(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function x3e(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function kg(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function S3e(e){return e.type==="bing-maps"}const Na=[];let bf=class extends ce{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ie,this.view=null,this._allLayerViewsChange=r=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=(n=this.view)==null?void 0:n.allLayerViews;i&&(this.addHandles(i.map(s=>ee(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),i.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),r!=null&&r.removed&&r.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([En(()=>{var r;return(r=this.view)==null?void 0:r.allLayerViews},"change",r=>this._allLayerViewsChange(r),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Ln(()=>{var r;return((r=this.view)==null?void 0:r.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,r=t==null?void 0:t.allLayerViews;if(Na.length=0,!t||!r)return void this._clear();r.forEach(n=>{var a,l;if(n.suspended||!((a=n.layer)!=null&&a.attributionVisible))return;const s=n.layer;if(z8(s,"user"))return void kg(Na,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const c=this._fetchedAttributionData.get(n);return void(c?kg(Na,n,this._getDynamicAttribution(c,t,s)):z8(s)&&kg(Na,n,s.copyright))}return void this._fetchAttributionData(n)}const o="portalItem"in s?(l=s.portalItem)==null?void 0:l.accessInformation:void 0;kg(Na,n,o||s.copyright)});const i=r.find(n=>{var s;return((s=n.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"});if(this.view&&i){const n=_3e(this.view);if(n){const s=n.getAttributionText();for(let o=0;o<s.length;++o)kg(Na,i,s[o])}}x3e(this.items,Na)&&(this.items.removeAll(),this.items.addMany(Na)),Na.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const r=await P$(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=r.ok?this._createContributionIndex(r.value,S3e(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,r){const i=t.contributors,n={};if(!i)return n;for(let s=0;s<i.length;s++){const o=i[s],a=o.coverageAreas;if(!a)return;for(const l of a){const c=l.bbox,h=l.zoomMin-(r&&l.zoomMin?1:0),f=l.zoomMax-(r&&l.zoomMax?1:0),m=new bt({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:Ie.WGS84}),y={extent:Ph(m),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let g=h;g<=f;g++)n[g]??(n[g]=[]),n[g].push(y)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,r,i){var h;const{extent:n,scale:s}=r;let o=((h=i.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=t[o],l=j$(n.center.clone().normalize(),Ie.WebMercator),c=new Set;return a?a.filter(f=>{const m=f.id,y=!c.has(m)&&l&&f.extent&&bw(f.extent,l);return y&&c.add(m),y}).sort((f,m)=>m.score-f.score||f.objectId-m.objectId).map(f=>f.attribution).join(", "):""}};u([d({readOnly:!0,type:ie})],bf.prototype,"items",void 0),u([d({readOnly:!0})],bf.prototype,"state",null),u([d()],bf.prototype,"view",void 0),bf=u([T("esri.widgets.Attribution.AttributionViewModel")],bf);const sX=bf,Qr={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function $3e(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:T3e(e[t])}}}function E3e(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function T3e(e){return function(t,...r){E3e(t)?$1e(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function Ta(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var M3e=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},oX=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];Array.isArray(n)?oX(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=M3e(n)),t.push(n))}},I3e=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return oX(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function k(e,t,...r){return typeof e!="function"||zS(e)?I3e(e,t??null,...r):e(t,...r)}function F7e(...e){return e}const zp="esri-attribution",Up={base:zp,poweredBy:`${zp}__powered-by`,sources:`${zp}__sources`,open:`${zp}--open`,sourcesOpen:`${zp}__sources--open`,link:`${zp}__link`};let Vi=class extends Mr{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new sX}initialize(){this.addHandles(En(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Up.open]:this._isOpen};return k("div",{bind:this,class:this.classes(Up.base,Qr.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return k("div",{class:Up.poweredBy},"Powered by"," ",k("a",{class:Up.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:n}=this,s={[Up.sourcesOpen]:t,[Qr.interactive]:r};return k("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Up.sources,s),innerHTML:n,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:n,scrollWidth:s}=t,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){const l=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,l&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([d()],Vi.prototype,"_isOpen",void 0),u([d()],Vi.prototype,"_isInteractive",null),u([d()],Vi.prototype,"_attributionTextOverflowed",void 0),u([d()],Vi.prototype,"_prevSourceNodeHeight",void 0),u([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Vi.prototype,"attributionText",null),u([d()],Vi.prototype,"icon",null),u([d()],Vi.prototype,"itemDelimiter",void 0),u([d()],Vi.prototype,"label",null),u([d(),Ta("esri/widgets/Attribution/t9n/Attribution")],Vi.prototype,"messages",void 0),u([d()],Vi.prototype,"view",null),u([d({type:sX})],Vi.prototype,"viewModel",void 0),u([$3e()],Vi.prototype,"_toggleState",null),Vi=u([T("esri.widgets.Attribution")],Vi);const C3e=Vi;function L3e(){const e=F("mapview-essential-goto-duration");return e==null?e:e}function A3e(e){var t,r;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((r=e==null?void 0:e.spatialReference)==null?void 0:r.isGeographic)||!1}const k3e=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return sw(i),this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return u([d()],t.prototype,"goToOverride",void 0),u([d()],t.prototype,"view",void 0),t=u([T("esri.widgets.support.GoTo")],t),t};let Vd=class extends k3e(ce){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Ye)}destroy(){this.view=null}get canShowNorth(){return A3e(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,r;(t=this.view)!=null&&t.ready&&(((r=this.view)==null?void 0:r.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:L3e()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?ee(()=>t==null?void 0:t.rotation,this._updateForRotation,Ye):ee(()=>t==null?void 0:t.camera,this._updateForCamera,Ye))}_watchForView(t){this.addHandles(ee(()=>this.view,this._updateRotationWatcher,t))}};u([d({readOnly:!0})],Vd.prototype,"canShowNorth",null),u([d({readOnly:!0})],Vd.prototype,"orientation",void 0),u([d({readOnly:!0})],Vd.prototype,"state",null),u([d()],Vd.prototype,"view",void 0),Vd=u([T("esri.widgets.Compass.CompassViewModel")],Vd);const aX=Vd,U8="esri-compass",B8={base:U8,iconContainer:`${U8}__icon-container`};let Qa=class extends Mr{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new aX,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return Hy({button:()=>B(()=>import("./index-09d80d8f.js"),["assets/index-09d80d8f.js","assets/customElement-a1bb8d2e.js","assets/guid-40009d79.js","assets/useT9n-c901282b.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/ref-f1080d6c.js","assets/static-858e9a5a.js","assets/form-f1517cda.js","assets/interactive-3f3b7038.js","assets/label-5bdbe44a.js","assets/component-b5b15c2e.js"]),icon:()=>B(()=>import("./index-2f2bfab7.js"),["assets/index-2f2bfab7.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js"])})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return k("div",{class:this.classes(B8.base,Qr.widget)},k("calcite-button",{class:Qr.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},k("div",{"aria-hidden":"true",class:B8.iconContainer,title:i.reset},k("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};u([d()],Qa.prototype,"goToOverride",null),u([d()],Qa.prototype,"icon",null),u([d()],Qa.prototype,"label",null),u([d(),Ta("esri/widgets/Compass/t9n/Compass")],Qa.prototype,"messages",void 0),u([d()],Qa.prototype,"view",null),u([d({type:aX})],Qa.prototype,"viewModel",void 0),Qa=u([T("esri.widgets.Compass")],Qa);const R3e=Qa,G8="esri-navigation-toggle",q8={base:G8,isLayoutHorizontal:`${G8}--horizontal`};let _f=class extends ce{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(Ln(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.navigation)==null?void 0:r.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var t,r;return(t=this.view)!=null&&t.ready&&((r=this.view)==null?void 0:r.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var i,n;const t=(n=(i=this.view)==null?void 0:i.navigation)==null?void 0:n.actionMap;if(!t)return;const r=this._navigationMode==="pan";t.dragPrimary=r?"pan":"rotate",t.dragSecondary=r?"rotate":"pan"}};u([d({readOnly:!0})],_f.prototype,"state",null),u([d()],_f.prototype,"_navigationMode",void 0),u([d()],_f.prototype,"view",void 0),_f=u([T("esri.widgets.NavigationToggle.NavigationToggleViewModel")],_f);const lX=_f;let Ka=class extends Mr{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new lX,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const i=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;xv(i),this.toggle()}}loadDependencies(){return Hy({button:()=>B(()=>import("./index-09d80d8f.js"),["assets/index-09d80d8f.js","assets/customElement-a1bb8d2e.js","assets/guid-40009d79.js","assets/useT9n-c901282b.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/ref-f1080d6c.js","assets/static-858e9a5a.js","assets/form-f1517cda.js","assets/interactive-3f3b7038.js","assets/label-5bdbe44a.js","assets/component-b5b15c2e.js"])})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var n,s;const t=((n=this.viewModel)==null?void 0:n.state)==="disabled",r=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",i=this.messages.toggle;return k("div",{class:this.classes(q8.base,Qr.widget,{[q8.isLayoutHorizontal]:this.layout==="horizontal"})},k("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:r?"outline-fill":"solid",class:Qr.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),k("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:r?"solid":"outline-fill",class:Qr.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};u([d()],Ka.prototype,"icon",null),u([d()],Ka.prototype,"label",null),u([d({value:"vertical"})],Ka.prototype,"layout",null),u([d(),Ta("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ka.prototype,"messages",void 0),u([d()],Ka.prototype,"view",null),u([d({type:lX})],Ka.prototype,"viewModel",void 0),Ka=u([T("esri.widgets.NavigationToggle")],Ka);const O3e=Ka;let zd=class extends ce{get canZoomIn(){var i,n,s;if(!((i=this.view)==null?void 0:i.ready))return!1;const r=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){var n;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const i=(n=t.constraints)==null?void 0:n.effectiveMinScale;return i===0||this._scale<i}get _scale(){var r,i,n;const t=(i=(r=this.view)==null?void 0:r.animation)==null?void 0:i.target;return(t&&"then"in t||t==null?void 0:t.scale)??((n=this.view)==null?void 0:n.scale)??0}};u([d({readOnly:!0})],zd.prototype,"canZoomIn",null),u([d({readOnly:!0})],zd.prototype,"canZoomOut",null),u([d()],zd.prototype,"view",void 0),u([d()],zd.prototype,"_scale",null),zd=u([T("esri.widgets.Zoom.ZoomConditions2D")],zd);const N3e=zd;let xf=class extends ce{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([d({readOnly:!0})],xf.prototype,"canZoomIn",null),u([d({readOnly:!0})],xf.prototype,"canZoomOut",null),u([d()],xf.prototype,"view",void 0),xf=u([T("esri.widgets.Zoom.ZoomConditions3D")],xf);const P3e=xf;let $u=class extends ce{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new N3e({view:t}):t.type==="3d"&&(this._zoomConditions=new P3e({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){const t=this.view;this.canZoomIn&&t&&(t.type==="2d"?t.mapViewNavigation.zoomIn():u1(t.goTo({zoomFactor:2})))}zoomOut(){const t=this.view;this.canZoomOut&&t&&(t.type==="2d"?t.mapViewNavigation.zoomOut():u1(t.goTo({zoomFactor:.5})))}};u([d()],$u.prototype,"_zoomConditions",void 0),u([d()],$u.prototype,"canZoomIn",null),u([d()],$u.prototype,"canZoomOut",null),u([d({readOnly:!0})],$u.prototype,"state",null),u([d()],$u.prototype,"view",null),$u=u([T("esri.widgets.Zoom.ZoomViewModel")],$u);const uX=$u,H8={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Xa=class extends Mr{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new uX,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Hy({button:()=>B(()=>import("./index-09d80d8f.js"),["assets/index-09d80d8f.js","assets/customElement-a1bb8d2e.js","assets/guid-40009d79.js","assets/useT9n-c901282b.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/ref-f1080d6c.js","assets/static-858e9a5a.js","assets/form-f1517cda.js","assets/interactive-3f3b7038.js","assets/label-5bdbe44a.js","assets/component-b5b15c2e.js"])})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[H8.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return k("div",{class:this.classes(H8.base,Qr.widget,t)},k("calcite-button",{class:Qr.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),k("calcite-button",{class:Qr.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};u([d()],Xa.prototype,"icon",null),u([d()],Xa.prototype,"label",null),u([d({value:"vertical"})],Xa.prototype,"layout",null),u([d(),Ta("esri/widgets/Zoom/t9n/Zoom")],Xa.prototype,"messages",void 0),u([d()],Xa.prototype,"view",null),u([d({type:uX})],Xa.prototype,"viewModel",void 0),Xa=u([T("esri.widgets.Zoom")],Xa);const D3e=Xa;function F3e(e){return(e==null?void 0:e.view)!==void 0}let A2=class extends qMe{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach(i=>{const n=this._find(i),s=n==null?void 0:n.widget;F3e(s)&&(s.view=r)})},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([ee(()=>this.components,this._componentsWatcher,Ye),ee(()=>this.view,this._updateViewAwareWidgets,Ye)])}_add(t,r,i,n,s){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,r,i,n,s)}_removeComponents(t){t.forEach(r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(t){this.constructed&&t.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(t){const r=this._createWidget(t);return new M2({id:t,node:r})}_createWidget(t){const r=this.view;switch(t){case"attribution":return new C3e({view:r});case"compass":return new R3e({view:r});case"navigation-toggle":return new O3e({view:r});case"zoom":return new D3e({view:r})}}};u([d()],A2.prototype,"components",void 0),A2=u([T("esri.views.ui.DefaultUI")],A2);const cX=A2;let k2=class extends cX{constructor(t){super(t),this.components=["attribution","zoom"]}};u([d()],k2.prototype,"components",void 0),k2=u([T("esri.views.ui.2d.DefaultUI2D")],k2);const dX=k2;let hX=class AA{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new N(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new AA(this.major,this.minor,this._context)}static parse(t,r=""){const[i,n]=t.split("."),s=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!s.test(i))throw new N((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(n!=null&&n.match)||!s.test(n))throw new N((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),a=parseInt(n,10);return new AA(o,a,r)}},j3e=class extends hX{constructor(t,r){super(t,r,"webmap")}};function VM(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}new j3e(2,33);var kA;let R2=kA=class extends G{constructor(e){super(e),this.color=new Q([0,0,0,1])}clone(){return new kA(O({color:this.color}))}};u([d({type:Q,json:{write:!0}})],R2.prototype,"color",void 0),R2=kA=u([T("esri.webmap.background.ColorBackground")],R2);const V3e=R2;let pX,fX,mX,yX,gX,vX,wX;async function z3e(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:n,GridView2D:s,Stage:o}]=await Promise.all([B(()=>import("./webglDeps-71c46ead.js"),["assets/webglDeps-71c46ead.js","assets/VertexArrayObject-95d73b2d.js","assets/memoryEstimations-e8cfae6e.js","assets/FramebufferObject-a125841d.js","assets/ProgramTemplate-94f4a844.js","assets/programUtils-de64fc7d.js","assets/NestedMap-b667f687.js"]),B(()=>import("./mapViewDeps-8be20aef.js"),["assets/mapViewDeps-8be20aef.js","assets/fontUtils-169c9d42.js","assets/FeatureCommandQueue-c3e353de.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/OptimizedGeometry-4a66a431.js","assets/memoryEstimations-e8cfae6e.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/BoundingBox-dc5b3050.js","assets/TechniqueType-75b634fe.js","assets/GraphShaderModule-7229a56f.js","assets/FramebufferObject-a125841d.js","assets/VertexArrayObject-95d73b2d.js","assets/ProgramTemplate-94f4a844.js","assets/ShaderBuilder-7a2c64b1.js","assets/BindType-0376b293.js","assets/UpdateTracking2D-48735ec0.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-81d2cb88.js","assets/Utils-db5b9715.js","assets/vec3f32-ad1dc57f.js","assets/Container-18064324.js","assets/StyleDefinition-d2ee7f7c.js","assets/config-1337d16e.js","assets/earcut-5a6c70eb.js","assets/featureConversionUtils-c3e620ab.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/streamLayerUtils-649b6193.js","assets/QueueProcessor-faf2f495.js","assets/SDFHelper-05ff1354.js","assets/PieChartMeshWriter-e447f001.js","assets/TurboLine-3f229dee.js","assets/utils-552ee4cb.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js","assets/enums-fb086c25.js","assets/programUtils-de64fc7d.js","assets/NestedMap-b667f687.js","assets/GridShader-f63e89ba.js","assets/CircularArray-50add9d1.js","assets/testSVGPremultipliedAlpha-c074bc87.js","assets/AttributeStore-9129c901.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/timeSupport-074410ca.js","assets/TimeOnly-68b4478b.js","assets/RenderingContext-ccdc24ca.js","assets/renderState-dc27abc6.js","assets/basicInterfaces-cbf2757f.js","assets/glsl-d181cb51.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/CIMResourceManager-7067ff29.js","assets/pbf-8ef4f2aa.js","assets/utils-c91da54f.js","assets/grouping-7d0d2896.js","assets/VertexStream-3750063f.js","assets/utils-e050a342.js","assets/MeshWriterRegistry-9f18b11c.js","assets/GraphicsView2D-79e59377.js","assets/mat3f64-e19cdcb8.js","assets/normalizeUtilsSync-6f653769.js","assets/dehydratedFeatures-e02325c0.js","assets/GraphicContainer-1acbdf06.js","assets/AGraphicContainer-8af9b886.js","assets/TechniqueInstance-0840be2c.js","assets/TileContainer-e1929e71.js","assets/requestImageUtils-5ec618eb.js","assets/gridUtils-0b9651b3.js","assets/geodesicUtils-17f6ad92.js"])]);fX=e,mX=t,yX=r,gX=i,vX=n,wX=s,pX=o}let ze=class extends hEe(Tve(X1e(j1e(_2e)))){constructor(t){super(t),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new _1({getCollections:()=>{var r,i;return[(r=this.basemapView)==null?void 0:r.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new bE({actionMap:new sP({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new ie,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new _K,this.type="2d",this.view2dType=null,this.ui=new dX,this.test={takeScreenshot:async r=>TMe(this._getScreenshotView(r),r)},this.padding={top:0,right:0,bottom:0,left:0},U0e()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Et(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new TTe(this.featuresTilingScheme)}get constraintsInfo(){var i,n;const t=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,r=this.spatialReference;return{lods:(n=t==null?void 0:t.spatialReference)!=null&&n.equals(r)?t.lods:null,spatialReference:r}}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:t,constraints:r,center:i,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(r!=null&&r.effectiveLODs||(o=-1),(!i||t===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const r=t.targetGeometry,i=this.spatialReference;return NZ(r.spatialReference,i)}get background(){return VM(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get highlightOptions(){return iMe(this)}set highlightOptions(t){nMe(this,t)}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var i,n,s,o;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((i=this._magnifierView)!=null&&i.updatingHandles.updating)),r=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0)||t);if(F("esri-2d-log-updating")){const a=this.allLayerViews.reduce((l,c)=>({...l,[`${c.layer.id}(${c.layer.type})`]:!c.destroyed&&!("layerViews"in c)&&c.updating}),{});console.log(`Updating MapView: ${r}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${t}
`)}return r}get visibleArea(){const t=this.stateManager.visibleArea;return t&&new Ps({rings:[t.map(r=>[r[0],r[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}async hitTest(t,r){return sMe(this,t,r)}async takeScreenshot(t){return EMe(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const r=LY(t)?CY(this,t):t;return this.stateManager.toMap(r)}toScreen(t,r){return this.stateManager.toScreen(t,r)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}getDefaultTimeZone(){return VM(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return VM(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(t){return O6.hasLayerViewModule(t)}importLayerView(t){return O6.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(W.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var c;const r=this.toMap(t),i=await this.hitTest(t),n=this.allLayerViews.toArray().filter(h=>h.clips.every(f=>aK(this,f,t,r))).reverse(),s=new globalThis.Map(n.map(h=>[h.layer.uid,h])),o=[];let a=0,l=0;for(;a<i.results.length||l<n.length;){const h=i.results.at(a);if(h&&h.type!=="graphic"){++a;continue}const f=s.get((c=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:c.uid);if((!h||f)&&l<n.length&&n.at(l)!==f){const m=n.at(l);"fetchPopupFeaturesAtLocation"in m&&o.push({mapPoint:r,layerView:m}),++l}else h&&(o.push({graphic:h.graphic,layerView:f}),++a)}return{hits:o,location:r}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=PMe(this.type);if(F("safari")&&F("safari")<9&&(t=new N("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:F("safari")})),t!=null)throw W.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return z3e()}_getDefaultViewpoint(){var x;const{constraints:t,initialExtent:r,map:i,padding:n,size:s}=this;if(!t)return null;const o=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o==null?void 0:o.viewpoint,c=((x=l==null?void 0:l.targetGeometry)==null?void 0:x.extent)??r,h=c==null?void 0:c.center,f=(l==null?void 0:l.rotation)??0,m=(l==null?void 0:l.scale)||c&&$E(c,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),y=a.center??h,g=a.rotation??f,v=a.scale??m;return y&&v?new As({targetGeometry:y,scale:v,rotation:g}):null}_startup(){var a;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(a=this.defaultsFromMap.extent)==null?void 0:a.center),this.graphics.owner=this;const r=new pX(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=r,this._magnifierView=new vX,this._magnifierView.magnifier=this.magnifier,this._gridView=new wX;const i=new yX({view:this});this._set("labelManager",i);const n=new lTe({view:this});this._set("animationManager",n);const s=new gX({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",l=>this.fatalError=l.error),ee(()=>this.stationary,l=>r.stationary=l,fn),ee(()=>this.background,l=>{r.backgroundColor=l==null?void 0:l.color,this._magnifierView.backgroundColor=l==null?void 0:l.color},fn),ee(()=>this.magnifier,l=>this._magnifierView.magnifier=l,fn),ee(()=>this.grid,l=>this._gridView.grid=l,fn),ee(()=>this.renderingOptions,l=>r.renderingOptions=l,fn),ee(()=>this.highlights.items.map(l=>({name:l.name,options:{fillColor:l.color,haloColor:l.haloColor,fillOpacity:l.fillOpacity,haloOpacity:l.haloOpacity,haloWidth:l.haloWidth,haloBlur:l.haloBlur}})),()=>{r.highlightGradient=tMe(r.highlightGradient,this.highlights.items)},fn),ee(()=>this.state.id,()=>r.state=this.state,fn)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(r=>{this.stage.addChild(r.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const t=new fTe($ve.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const r=new fX({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new mX(t)});this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var o;const{allLayerViews:r,padding:i,size:n,stage:s}=this;return{allLayerViews:r,backgroundColor:t!=null&&t.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:i,size:n,stage:s}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const r of this.allLayerViews)r.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const r of this.allLayerViews)r.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};ze.type="2d",u([d({constructOnly:!0})],ze.prototype,"deactivatedWebGLExtensions",void 0),u([d({constructOnly:!0})],ze.prototype,"debugWebGLExtensions",void 0),u([d({readOnly:!0})],ze.prototype,"featuresTilingScheme",void 0),u([d({readOnly:!0})],ze.prototype,"graphicsTileStore",null),u([d()],ze.prototype,"graphicsView",void 0),u([d()],ze.prototype,"constraintsInfo",null),u([d()],ze.prototype,"initialExtentRequired",null),u([d()],ze.prototype,"labelManager",void 0),u([d({type:bE,nonNullable:!0})],ze.prototype,"navigation",void 0),u([d({constructOnly:!0})],ze.prototype,"renderCanvas",void 0),u([d()],ze.prototype,"renderingOptions",void 0),u([d({constructOnly:!0})],ze.prototype,"supersampleScreenshotsEnabled",void 0),u([d({readOnly:!0})],ze.prototype,"supportsGround",void 0),u([d()],ze.prototype,"defaultsFromMapSettings",null),u([d({readOnly:!0})],ze.prototype,"typeSpecificPreconditionsReady",null),u([d({type:V3e})],ze.prototype,"background",null),u([d()],ze.prototype,"center",null),u([d({type:ie})],ze.prototype,"floors",void 0),u([d()],ze.prototype,"grid",void 0),u([d({type:wc})],ze.prototype,"highlightOptions",null),u([d()],ze.prototype,"map",void 0),u([d()],ze.prototype,"padding",null),u([d({readOnly:!0})],ze.prototype,"rendering",null),u([d({readOnly:!0})],ze.prototype,"resolution",null),u([d()],ze.prototype,"scale",null),u([d({constructOnly:!0})],ze.prototype,"spatialReferenceLocked",void 0),u([d({readOnly:!0})],ze.prototype,"tileInfo",null),u([d({type:_K,readOnly:!0})],ze.prototype,"timeline",void 0),u([d({readOnly:!0})],ze.prototype,"type",void 0),u([d({readOnly:!0})],ze.prototype,"updating",null),u([d({readOnly:!0})],ze.prototype,"view2dType",void 0),u([d({readOnly:!0})],ze.prototype,"visibleArea",null),u([d()],ze.prototype,"zoom",null),u([d({readOnly:!0})],ze.prototype,"navigating",null),u([d(),He(e=>e instanceof cX?e:mw(dX,e))],ze.prototype,"ui",void 0),ze=u([T("esri.views.View2D")],ze);const U3e=ze;let O2=class extends U3e{constructor(t){super(t),this.view2dType="map"}};u([d({readOnly:!0})],O2.prototype,"view2dType",void 0),O2=u([T("esri.views.MapView")],O2);const B3e=O2;let G3e=class bX{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(_3),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new bX,i=this._originStores[Te.DEFAULTS];i&&i.forEach((n,s)=>{r.set(s,O(n),Te.DEFAULTS)});for(let n=Te.SERVICE;n<_3;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{t&&t.has(a)||r.set(a,O(o),n)})}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=Te.USER){let n=this._originStores[i];if(n||(n=new Map,this._originStores[i]=n),n.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),s!==r}return!1}delete(t,r=Te.USER){const i=this._originStores[r];if(!i)return;const n=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],n=i==null?void 0:i.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}originOf(t){return this._propertyOriginMap.get(t)||Te.DEFAULTS}forEach(t){this._values.forEach(t)}};const _X=e=>{let t=class extends e{constructor(...r){super(...r);const i=Mn(this),n=i.store,s=new G3e;i.store=s,KG(i,n,s)}read(r,i){eq(this,r,i)}getAtOrigin(r,i){const n=zM(this),s=Xu(i);if(typeof r=="string")return n.get(r,s);const o={};return r.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(r){return Nx(this.originIdOf(r))}originIdOf(r){return zM(this).originOf(r)}revert(r,i){const n=zM(this),s=Xu(i),o=Mn(this);let a;a=typeof r=="string"?r==="*"?n.keys(s):[r]:r,a.forEach(l=>{o.invalidate(l),n.revert(l,s),o.commit(l)})}};return t=u([T("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function zM(e){return Mn(e).store}let W8=class extends _X(ce){};W8=u([T("esri.core.ReadOnlyMultiOriginJSONSupport")],W8);const q3e=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){return UM(this).delete(r,Xu(i))}write(r,i){return rq(this,r=r||{},i),r}setAtOrigin(r,i,n){Mn(this).setAtOrigin(r,i,Xu(n))}removeOrigin(r){const i=UM(this),n=Xu(r),s=i.keys(n);for(const o of s)i.originOf(o)===n&&i.set(o,i.get(o,n),Te.USER)}updateOrigin(r,i){const n=UM(this),s=Xu(i),o=Hi(this,r);for(let a=s+1;a<_3;++a)n.delete(r,a);n.set(r,o,s)}toJSON(r){return this.write({},r)}};return t=u([T("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function UM(e){return Mn(e).store}const OP=e=>{let t=class extends q3e(_X(e)){constructor(...r){super(...r)}};return t=u([T("esri.core.MultiOriginJSONSupport")],t),t};let Z8=class extends OP(ce){};Z8=u([T("esri.core.MultiOriginJSONSupport")],Z8);const jt=(e=>e)(["operational-layers","basemap","ground"]);var RA;let Ud=RA=class extends G{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new RA({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([d({type:String,json:{write:!0}})],Ud.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],Ud.prototype,"name",void 0),u([d({type:["boolean","date","number","string"],json:{write:!0}})],Ud.prototype,"returnType",void 0),u([d({type:String,json:{write:!0}})],Ud.prototype,"title",void 0),Ud=RA=u([T("esri.form.ExpressionInfo")],Ud);const H3e=Ud;let Bd=class extends G{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([d({type:String,json:{write:!0}})],Bd.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Bd.prototype,"label",void 0),u([d()],Bd.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Bd.prototype,"visibilityExpression",void 0),Bd=u([T("esri.form.elements.Element")],Bd);const Nc=Bd;let N2=class extends Be.ClonableMixin(G){constructor(t){super(t),this.type=null}};u([d()],N2.prototype,"type",void 0),N2=u([T("esri.form.elements.inputs.attachments.Input")],N2);const Pc=N2,AE=["any","capture","upload"];let Sf=class extends Pc{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};u([d({type:["audio"],readOnly:!0,json:{write:!0}})],Sf.prototype,"type",void 0),u([d({type:AE,json:{write:!0}})],Sf.prototype,"inputMethod",void 0),u([d({type:Number,json:{write:!0}})],Sf.prototype,"maxDuration",void 0),Sf=u([T("esri.form.elements.inputs.attachments.AudioInput")],Sf);const J8=Sf;let O0=class extends Pc{constructor(t){super(t),this.type="document",this.maxFileSize=null}};u([d({type:["document"],readOnly:!0,json:{write:!0}})],O0.prototype,"type",void 0),u([d({type:Number,json:{write:!0}})],O0.prototype,"maxFileSize",void 0),O0=u([T("esri.form.elements.inputs.attachments.DocumentInput")],O0);const Y8=O0;let $f=class extends Pc{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};u([d({type:["image"],readOnly:!0,json:{write:!0}})],$f.prototype,"type",void 0),u([d({type:AE,json:{write:!0}})],$f.prototype,"inputMethod",void 0),u([d({type:Number,json:{write:!0}})],$f.prototype,"maxImageSize",void 0),$f=u([T("esri.form.elements.inputs.attachments.ImageInput")],$f);const Q8=$f;let N0=class extends Pc{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};u([d({type:["signature"],readOnly:!0,json:{write:!0}})],N0.prototype,"type",void 0),u([d({type:AE,json:{write:!0}})],N0.prototype,"inputMethod",void 0),N0=u([T("esri.form.elements.inputs.attachments.SignatureInput")],N0);const K8=N0;let Ef=class extends Pc{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};u([d({type:["video"],readOnly:!0,json:{write:!0}})],Ef.prototype,"type",void 0),u([d({type:AE,json:{write:!0}})],Ef.prototype,"inputMethod",void 0),u([d({type:Number,json:{write:!0}})],Ef.prototype,"maxDuration",void 0),Ef=u([T("esri.form.elements.inputs.attachments.VideoInput")],Ef);const X8=Ef;function xX(e){return{nestableTypes:{base:Pc,key:"type",typeMap:{audio:J8,document:Y8,image:Q8,signature:K8,video:X8}},allTypes:{base:Pc,key:"type",typeMap:{attachment:e,audio:J8,document:Y8,image:Q8,signature:K8,video:X8}}}}function W3e(e,t,r){return e?e.map(i=>Oo(r?t.nestableTypes:t.allTypes,i)):null}function Z3e(e,t,r){if(!e)return null;const i=r?t.nestableTypes.typeMap:t.allTypes.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function J3e(e,t,r){if(!e)return null;const i=r?t.nestableTypes.typeMap:t.allTypes.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}let oa=class extends Pc{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return W3e(t,BM,!0)}readInputs(t,r){return Z3e(r.inputTypes,BM,!0)}writeInputs(t,r){r.inputTypes=J3e(t,BM,!0)}};u([d({type:["attachment"],readOnly:!0,json:{write:!0}})],oa.prototype,"type",void 0),u([d({type:["any","exact","exactOrNone"],json:{write:!0}})],oa.prototype,"attachmentAssociationType",void 0),u([d({json:{write:{isRequired:!0}}})],oa.prototype,"inputTypes",void 0),u([He("inputTypes")],oa.prototype,"castInputs",null),u([J("inputTypes")],oa.prototype,"readInputs",null),u([te("inputTypes")],oa.prototype,"writeInputs",null),oa=u([T("esri.form.elements.inputs.attachments.AttachmentInput")],oa);const BM=xX(oa),Y3e=oa;var OA;const Q3e=xX(Y3e);let Vn=OA=class extends Nc{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new OA({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};u([d({type:Boolean,json:{write:!0}})],Vn.prototype,"allowUserRename",void 0),u([d({type:String,json:{write:{isRequired:!0}}})],Vn.prototype,"attachmentKeyword",void 0),u([d({type:Boolean,json:{write:!0}})],Vn.prototype,"displayFilename",void 0),u([d({type:String,json:{write:!0}})],Vn.prototype,"editableExpression",void 0),u([d({type:String,json:{write:!0}})],Vn.prototype,"filenameExpression",void 0),u([d({types:Q3e.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Vn.prototype,"input",void 0),u([d({type:Number,json:{write:!0}})],Vn.prototype,"maxAttachmentCount",void 0),u([d({type:Number,json:{write:!0}})],Vn.prototype,"minAttachmentCount",void 0),u([d({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Vn.prototype,"type",void 0),u([d({type:Boolean,json:{write:!0}})],Vn.prototype,"useOriginalFilename",void 0),Vn=OA=u([T("esri.form.elements.AttachmentElement")],Vn);const eV=Vn;let P2=class extends G{constructor(t){super(t),this.type=null}};u([d()],P2.prototype,"type",void 0),P2=u([T("esri.form.elements.inputs.Input")],P2);const Bl=P2;let P0=class extends Bl{constructor(t){super(t),this.maxLength=null,this.minLength=0}};u([d({type:Number,json:{write:!0}})],P0.prototype,"maxLength",void 0),u([d({type:Number,json:{write:!0}})],P0.prototype,"minLength",void 0),P0=u([T("esri.form.elements.inputs.TextInput")],P0);const NP=P0;var NA;let D2=NA=class extends NP{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new NA({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],D2.prototype,"type",void 0),D2=NA=u([T("esri.form.elements.inputs.BarcodeScannerInput")],D2);const K3e=D2;var PA;let Tf=PA=class extends Bl{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new PA({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([d({type:String,json:{write:!0}})],Tf.prototype,"noValueOptionLabel",void 0),u([d({type:Boolean,json:{write:!0}})],Tf.prototype,"showNoValueOption",void 0),u([d({type:["combo-box"],json:{read:!1,write:!0}})],Tf.prototype,"type",void 0),Tf=PA=u([T("esri.form.elements.inputs.ComboBoxInput")],Tf);const X3e=Tf;var DA;function tV(e){return e??null}function rV(e){return e??null}let Xo=DA=class extends Bl{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return tV(t.max)}writeMax(e,t){t.max=rV(e)}readMin(e,t){return tV(t.min)}writeMin(e,t){t.min=rV(e)}clone(){return new DA({max:this.max,min:this.min})}};u([d({type:String,json:{type:String,write:!0}})],Xo.prototype,"max",void 0),u([J("max")],Xo.prototype,"readMax",null),u([te("max")],Xo.prototype,"writeMax",null),u([d({type:String,json:{type:String,write:!0}})],Xo.prototype,"min",void 0),u([J("min")],Xo.prototype,"readMin",null),u([te("min")],Xo.prototype,"writeMin",null),u([d({type:["date-picker"],json:{read:!1,write:!0}})],Xo.prototype,"type",void 0),Xo=DA=u([T("esri.form.elements.inputs.DatePickerInput")],Xo);const eCe=Xo;var FA;function GM(e){return e??null}function qM(e){return e??null}let an=FA=class extends Bl{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return GM(t.max)}writeMax(e,t){t.max=qM(e)}readMin(e,t){return GM(t.min)}writeMin(e,t){t.min=qM(e)}readTimeResolution(e,t){return GM(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=qM(e)}clone(){return new FA({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([d({type:Boolean,json:{write:!0}})],an.prototype,"includeTimeOffset",void 0),u([d({type:String,json:{type:String,write:!0}})],an.prototype,"max",void 0),u([J("max")],an.prototype,"readMax",null),u([te("max")],an.prototype,"writeMax",null),u([d({type:String,json:{type:String,write:!0}})],an.prototype,"min",void 0),u([J("min")],an.prototype,"readMin",null),u([te("min")],an.prototype,"writeMin",null),u([d({type:String,json:{type:String,write:!0}})],an.prototype,"timeResolution",void 0),u([J("timeResolution")],an.prototype,"readTimeResolution",null),u([te("timeResolution")],an.prototype,"writeTimeResolution",null),u([d({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],an.prototype,"type",void 0),an=FA=u([T("esri.form.elements.inputs.DateTimeOffsetPickerInput")],an);const tCe=an;var jA;function iV(e){return e!=null?new Date(e):null}function nV(e){return e?e.getTime():null}let so=jA=class extends Bl{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return iV(t.max)}writeMax(e,t){t.max=nV(e)}readMin(e,t){return iV(t.min)}writeMin(e,t){t.min=nV(e)}clone(){return new jA({includeTime:this.includeTime,max:this.max,min:this.min})}};u([d({type:Boolean,json:{write:!0}})],so.prototype,"includeTime",void 0),u([d({type:Date,json:{type:Number,write:!0}})],so.prototype,"max",void 0),u([J("max")],so.prototype,"readMax",null),u([te("max")],so.prototype,"writeMax",null),u([d({type:Date,json:{type:Number,write:!0}})],so.prototype,"min",void 0),u([J("min")],so.prototype,"readMin",null),u([te("min")],so.prototype,"writeMin",null),u([d({type:["datetime-picker"],json:{read:!1,write:!0}})],so.prototype,"type",void 0),so=jA=u([T("esri.form.elements.inputs.DateTimePickerInput")],so);const rCe=so;var VA;let Mf=VA=class extends Bl{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new VA({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([d({type:String,json:{write:!0}})],Mf.prototype,"noValueOptionLabel",void 0),u([d({type:Boolean,json:{write:!0}})],Mf.prototype,"showNoValueOption",void 0),u([d({type:["radio-buttons"],json:{read:!1,write:!0}})],Mf.prototype,"type",void 0),Mf=VA=u([T("esri.form.elements.inputs.RadioButtonsInput")],Mf);const iCe=Mf;var zA;let If=zA=class extends Bl{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new zA({offValue:this.offValue,onValue:this.onValue})}};u([d({type:[String,Number],json:{write:!0}})],If.prototype,"offValue",void 0),u([d({type:[String,Number],json:{write:!0}})],If.prototype,"onValue",void 0),u([d({type:["switch"],json:{read:!1,write:!0}})],If.prototype,"type",void 0),If=zA=u([T("esri.form.elements.inputs.SwitchInput")],If);const nCe=If;var UA;let F2=UA=class extends NP{constructor(e){super(e),this.type="text-area"}clone(){return new UA({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["text-area"],json:{read:!1,write:!0}})],F2.prototype,"type",void 0),F2=UA=u([T("esri.form.elements.inputs.TextAreaInput")],F2);const sCe=F2;var BA;let j2=BA=class extends NP{constructor(e){super(e),this.type="text-box"}clone(){return new BA({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["text-box"],json:{read:!1,write:!0}})],j2.prototype,"type",void 0),j2=BA=u([T("esri.form.elements.inputs.TextBoxInput")],j2);const oCe=j2;var GA;function HM(e){return e??null}function WM(e){return e??null}let zn=GA=class extends Bl{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return HM(t.max)}writeMax(e,t){t.max=WM(e)}readMin(e,t){return HM(t.min)}writeMin(e,t){t.min=WM(e)}readTimeResolution(e,t){return HM(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=WM(e)}clone(){return new GA({max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([d({type:String,json:{type:String,write:!0}})],zn.prototype,"max",void 0),u([J("max")],zn.prototype,"readMax",null),u([te("max")],zn.prototype,"writeMax",null),u([d({type:String,json:{type:String,write:!0}})],zn.prototype,"min",void 0),u([J("min")],zn.prototype,"readMin",null),u([te("min")],zn.prototype,"writeMin",null),u([d({type:String,json:{type:String,write:!0}})],zn.prototype,"timeResolution",void 0),u([J("timeResolution")],zn.prototype,"readTimeResolution",null),u([te("timeResolution")],zn.prototype,"writeTimeResolution",null),u([d({type:["time-picker"],json:{read:!1,write:!0}})],zn.prototype,"type",void 0),zn=GA=u([T("esri.form.elements.inputs.TimePickerInput")],zn);const aCe=zn,lCe={base:Bl,key:"type",typeMap:{"barcode-scanner":K3e,"combo-box":X3e,"date-picker":eCe,"datetime-picker":rCe,"datetimeoffset-picker":tCe,"radio-buttons":iCe,switch:nCe,"text-area":sCe,"text-box":oCe,"time-picker":aCe}};var qA;let fs=qA=class extends Nc{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new qA({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([d({types:xY,json:{read:{reader:vE},write:!0}})],fs.prototype,"domain",void 0),u([d({type:Boolean,json:{write:!0}})],fs.prototype,"editable",void 0),u([d({type:String,json:{write:!0}})],fs.prototype,"editableExpression",void 0),u([d({type:String,json:{write:!0}})],fs.prototype,"fieldName",void 0),u([d({type:String,json:{write:!0}})],fs.prototype,"hint",void 0),u([d({types:lCe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],fs.prototype,"input",void 0),u([d({type:String,json:{write:!0}})],fs.prototype,"requiredExpression",void 0),u([d({type:String,json:{read:!1,write:!0}})],fs.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],fs.prototype,"valueExpression",void 0),fs=qA=u([T("esri.form.elements.FieldElement")],fs);const sV=fs;var HA;let el=HA=class extends Nc{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new HA({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:O(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([d({type:Number,json:{write:!0}})],el.prototype,"displayCount",void 0),u([d({type:["list"],json:{write:!0}})],el.prototype,"displayType",void 0),u([d({type:String,json:{write:!0}})],el.prototype,"editableExpression",void 0),u([d({type:[WN],json:{write:!0}})],el.prototype,"orderByFields",void 0),u([d({type:Number,json:{write:!0}})],el.prototype,"relationshipId",void 0),u([d({type:["relationship"],json:{read:!1,write:!0}})],el.prototype,"type",void 0),el=HA=u([T("esri.form.elements.RelationshipElement")],el);const oV=el;var WA;let Cf=WA=class extends Nc{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new WA({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};u([d({type:String,json:{write:!0}})],Cf.prototype,"text",void 0),u([d({type:String,json:{write:!0}})],Cf.prototype,"textFormat",void 0),u([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Cf.prototype,"type",void 0),Cf=WA=u([T("esri.form.elements.TextElement")],Cf);const aV=Cf;let Lf=class extends Be.ClonableMixin(Nc){constructor(t){super(t),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};u([d({type:[DJ],json:{write:{isRequired:!0}}})],Lf.prototype,"associationTypes",void 0),u([d({type:String,json:{write:!0}})],Lf.prototype,"editableExpression",void 0),u([d({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],Lf.prototype,"type",void 0),Lf=u([T("esri.form.elements.UtilityNetworkAssociationsElement")],Lf);const lV=Lf,uCe=e=>e.type==="field",cCe=e=>e.type==="group",dCe=e=>e.type==="text";function SX(e){return{typesWithGroup:{base:Nc,key:"type",typeMap:{attachment:eV,field:sV,group:e,relationship:oV,text:aV,utilityNetworkAssociations:lV}},typesWithoutGroup:{base:Nc,key:"type",typeMap:{attachment:eV,field:sV,relationship:oV,text:aV,utilityNetworkAssociations:lV}}}}function $X(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function EX(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function TX(e,t,r=!0){return e?e.map(i=>Oo(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var ZA;let aa=ZA=class extends Nc{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return TX(e,ZM,!1)}readElements(e,t){return $X(t.formElements,ZM,!1)}writeElements(e,t){t.formElements=EX(e,ZM,!1)}clone(){return new ZA({description:this.description,elements:O(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([d({json:{write:!0}})],aa.prototype,"elements",void 0),u([He("elements")],aa.prototype,"castElements",null),u([J("elements",["formElements"])],aa.prototype,"readElements",null),u([te("elements")],aa.prototype,"writeElements",null),u([d({type:["collapsed","expanded"],json:{write:!0}})],aa.prototype,"initialState",void 0),u([d({type:String,json:{read:!1,write:!0}})],aa.prototype,"type",void 0),aa=ZA=u([T("esri.form.elements.GroupElement")],aa);const ZM=SX(aa),hCe=aa;var JA;const JM=SX(hCe);let oo=JA=class extends G{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return TX(e,JM)}readElements(e,t){return $X(t.formElements,JM)}writeElements(e,t){t.formElements=EX(e,JM)}clone(){return new JA({description:this.description,expressionInfos:O(this.expressionInfos),elements:O(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:i,elements:n,expressionInfos:s,title:o}=this;if(Rv(r,e,i),Rv(r,e,o),!n)return[];const a=pCe(n,s).map(l=>ki(r,e,l));await Promise.all(a);for(const l of n)MX(r,{fieldsIndex:e,relationships:t},l);return Array.from(r).sort()}};function MX(e,t,r){var n;const{fieldsIndex:i}=t;if(!i||i.fields.length!==e.size)switch(Rv(e,i,r.label),Rv(e,i,r.description),r.type){case"field":Qi(e,i,r.fieldName);break;case"group":r.elements.forEach(s=>MX(e,t,s));break;case"relationship":if(t.relationships){const s=t.relationships.find(o=>o.id===r.relationshipId);s&&Qi(e,i,s.keyField)}op(e,i,(n=r.orderByFields)==null?void 0:n.map(s=>s.field));break;case"text":Rv(e,i,r.text)}}function pCe(e,t){if(!t||t.length===0)return[];const r=IX(e),i=[];for(const n of t)r.has(n.name)&&i.push(n.expression);return i}function IX(e){const t=new Set;for(const r of e)if(SD(t,r.visibilityExpression),!dCe(r)){if(cCe(r))Vx(t,IX(r.elements));else if(SD(t,r.editableExpression),uCe(r)){const{requiredExpression:i,valueExpression:n}=r;Vx(t,[i,n])}}return t}function Rv(e,t,r){op(e,t,GN(r))}u([d({type:String,json:{write:!0}})],oo.prototype,"description",void 0),u([d({json:{write:!0}})],oo.prototype,"elements",void 0),u([He("elements")],oo.prototype,"castElements",null),u([J("elements",["formElements"])],oo.prototype,"readElements",null),u([te("elements")],oo.prototype,"writeElements",null),u([d({type:[H3e],json:{write:!0}})],oo.prototype,"expressionInfos",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],oo.prototype,"preserveFieldValuesWhenHidden",void 0),u([d({type:String,json:{write:!0}})],oo.prototype,"title",void 0),oo=JA=u([T("esri.form.FormTemplate")],oo);const fCe=oo;function uV(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const n of i)n.length>2&&(n[2]*=r)}function mCe(e,t,r){if(!e&&!t||!r)return;const i=nS(r);cV(e,r,i),cV(t,r,i)}function cV(e,t,r){if(e)for(const i of e)yCe(i.geometry,t,r)}function yCe(e,t,r){if(!(e!=null&&e.spatialReference)||Dr(e.spatialReference,t))return;const i=nS(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)uV(e,e.rings,i);else if("paths"in e)uV(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=i)}}function dV(e,t,r){if(!(r!=null&&r.features)||!r.hasZ)return;const i=RZ(r.geometryType,t,e.outSpatialReference);if(i!=null)for(const n of r.features)i(n.geometry)}var YA;const QA=new je({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ur=YA=class extends G{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,kc)}writeGeometryType(e,t,r,i){if(e)return void QA.write(e,t,r,i);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void QA.write(s.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=sp(e);return i&&!r&&t.spatialReference&&(i.spatialReference=Ie.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new YA(this.cloneProperties())}cloneProperties(){return O({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const n=e==null?void 0:e[r];i.geometry=(n==null?void 0:n.toJSON())||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,n]}=e,s=c=>Math.round((c-i)/t),o=c=>Math.round((n-c)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,h=a.length;c<h;c++)l!=null&&l(a[c].geometry)||(a.splice(c,1),c--,h--);return this.transform=e,this}unquantize(){var m,y;const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,n],scale:[s,o]}=r,a=g=>g*s+i,l=g=>n-g*o;let c=null,h=null;if(this.hasZ&&((m=r==null?void 0:r.scale)==null?void 0:m[2])!=null){const{translate:[,,g],scale:[,,v]}=r;c=x=>x*v+g}if(this.hasM&&((y=r==null?void 0:r.scale)==null?void 0:y[3])!=null){const{translate:[,,,g],scale:[,,,v]}=r;h=x=>x==null?x:x*v+g}const f=this._getHydrationFunction(e,a,l,c,h);for(const{geometry:g}of t)g!=null&&f&&f(g);return this.transform=null,this}readFeaturesWithClass(e,t,r){var s;const i=Ie.fromJSON(t.spatialReference),n=[];for(let o=0;o<e.length;o++){const a=e[o],l=r.fromJSON(a),c=(s=a.geometry)==null?void 0:s.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=i);const h=a.aggregateGeometries,f=l.aggregateGeometries;if(h&&f!=null)for(const m in f){const y=f[m],g=h[m],v=g==null?void 0:g.spatialReference;y==null||v||(y.spatialReference=i)}n.push(l)}return n}_quantizePoints(e,t,r){let i,n;const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const c=t(l[0]),h=r(l[1]);c===i&&h===n||(s.push([c-i,h-n]),i=c,n=h)}else i=t(l[0]),n=r(l[1]),s.push([i,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const n=Dh(i)?i.rings:i.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],c=this._quantizePoints(l,t,r);c&&s.push(c)}return s.length>0?(Dh(i)?i.rings=s:i.paths=s,i):null}:e==="multipoint"?i=>{const n=this._quantizePoints(i.points,t,r);return n&&n.length>0?(i.points=n,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r,i,n){return e==="point"?s=>{s.x=t(s.x),s.y=r(s.y),i&&(s.z=i(s.z))}:e==="polyline"||e==="polygon"?s=>{const o=Dh(s)?s.rings:s.paths;let a,l;for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];m>0?(a+=g[0],l+=g[1]):(a=g[0],l=g[1]),g[0]=t(a),g[1]=r(l)}}if(i&&n)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=i(g[2]),g[3]=n(g[3])}}else if(i)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=i(g[2])}}else if(n)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=n(g[2])}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=r(s.ymin),s.xmax=t(s.xmax),s.ymax=r(s.ymax),i&&s.zmax!=null&&s.zmin!=null&&(s.zmax=i(s.zmax),s.zmin=i(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:e==="multipoint"?s=>{const o=s.points;let a,l;for(let c=0,h=o.length;c<h;c++){const f=o[c];c>0?(a+=f[0],l+=f[1]):(a=f[0],l=f[1]),f[0]=t(a),f[1]=r(l)}if(i&&n)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=i(f[2]),f[3]=n(f[3])}else if(i)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=i(f[2])}else if(n)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=n(f[2])}}:null}};u([d({type:String,json:{write:!0}})],Ur.prototype,"displayFieldName",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ur.prototype,"exceededTransferLimit",void 0),u([d({type:[kc],json:{write:!0}})],Ur.prototype,"features",void 0),u([J("features")],Ur.prototype,"readFeatures",null),u([d({type:[wE],json:{write:!0}})],Ur.prototype,"fields",void 0),u([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:QA.read}}})],Ur.prototype,"geometryType",void 0),u([te("geometryType")],Ur.prototype,"writeGeometryType",null),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ur.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ur.prototype,"hasZ",void 0),u([d({types:$w,json:{write:!0}})],Ur.prototype,"queryGeometry",void 0),u([J("queryGeometry")],Ur.prototype,"readQueryGeometry",null),u([d({type:Ie,json:{write:!0}})],Ur.prototype,"spatialReference",void 0),u([te("spatialReference")],Ur.prototype,"writeSpatialReference",null),u([d({json:{write:!0}})],Ur.prototype,"transform",void 0),Ur=YA=u([T("esri.rest.support.FeatureSet")],Ur),Ur.prototype.toJSON.isDefaultToJSON=!0;const PP=Ur;let gCe=0,cl=class extends va.LoadableMixin(vw.EsriPromiseMixin(ie)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var r;const t=(r=this.layer)==null?void 0:r.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);dV(t,this.layer.spatialReference,i);const n=PP.fromJSON(i);if(!this._requiresClientGraphicMapping())return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],l=this._idToClientGraphic.get(a);l&&(o.geometry=l.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new N("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return dV(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r))}queryObjectIds(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r))}queryExtent(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r)).then(i=>({count:i.count,extent:bt.fromJSON(i.extent)}))}querySnapping(t,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",t,r))}async queryAttributeBins(t,r={}){return await this.load(),this._connection.invoke("queryAttributeBins",t==null?void 0:t.toJSON(),r)}async _applyEdits(t){if(!this._connection)throw new N("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[r]!=null?h.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const h of t.deleteFeatures){const f=o(h);f!=null&&n.push(f)}const a=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const h of t.updateFeatures)if(s.push(this._serializeFeature(h)),a){const f=o(h);f!=null&&a.set(f,h)}}mCe(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:n});return this.fullExtent=l,i&&i.finish(c.uidToObjectId),this._updateClientGraphicIds(a,c),this._createEditsResult(c)}async _prepareClientMapping(t,r){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const i=[];for(const{geometry:n}of t)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||i.push(n.load({signal:r}));i.length&&await Promise.all(i)}_updateClientGraphicIds(t,r){if(this._idToClientGraphic){if(t)for(const i of r.updateResults){if(!i.success)continue;const n=t.get(i.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const i of r.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new N("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){const r=new Map,i=new Array(t.length);let n=null;for(let o=0;o<t.length;o++){const a=t[o],l=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),i[o]=l,r.set(`${l.uid}`,a)}const s=this;return{features:i,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const l in o){const c=o[l],h=r.get(l);h&&(h.attributes||(h.attributes={}),c===-1?delete h.attributes[a]:h.attributes[a]=c,s._addIdToClientGraphic(h))}}}}_addIdToClientGraphic(t){var n;if(!this._idToClientGraphic)return;const r=this.sourceJSON.objectIdField,i=(n=t.attributes)==null?void 0:n[r];i!=null&&this._idToClientGraphic.set(i,t)}get _layerOrSourceGeometryType(){var t,r;return((t=this.layer)==null?void 0:t.geometryType)??((r=this.sourceJSON)==null?void 0:r.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t),n=(gCe++).toString();return i?{uid:n,geometry:i.toJSON(),attributes:r}:{uid:n,attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?Ps.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await CZ("MemorySourceWorker",{strategy:F("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:n,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{W.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const f={features:h.features,fields:r==null?void 0:r.map(g=>g.toJSON()),geometryType:KF.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:c?null:i&&i.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:l},m=await this._connection.invoke("load",f,{signal:t});for(const g of m.warnings)W.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});m.featureErrors.length&&W.getLogger(this.layer).warn("#load()",`Encountered ${m.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:m.featureErrors});const y=m.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(y.geometryType=KF.toJSON(h.inferredGeometryType)),this.sourceJSON=y,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),h.finish(m.assignedObjectIds)}};u([BO({Type:kc,ensureType:Er(kc)})],cl.prototype,"itemType",void 0),u([d()],cl.prototype,"type",void 0),u([d({constructOnly:!0})],cl.prototype,"layer",void 0),u([d({readOnly:!0})],cl.prototype,"_workerGeometryType",null),u([d()],cl.prototype,"sourceJSON",void 0),cl=u([T("esri.layers.graphics.sources.MemorySource")],cl);function vCe(e){return"portalItem"in e}const wCe=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):vCe(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([d({type:String})],t.prototype,"apiKey",null),t=u([T("esri.layers.mixins.APIKeyMixin")],t),t},bCe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Ny(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",mde(r,W.getLogger(this)))}};return u([d()],t.prototype,"title",null),u([d({type:String})],t.prototype,"url",null),t=u([T("esri.layers.mixins.ArcGISService")],t),t};function _Ce(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function Om(e,t,r,i){var n=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(n,Om.prototype),n.expected=t,n.found=r,n.location=i,n.name="SyntaxError",n}function YM(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}function xCe(e,t){var r,i={},n=(t=t!==void 0?t:{}).grammarSource,s={start:P5},o=P5,a="none",l=")",c=",",h="(",f="%",m="px",y="cm",g="mm",v="in",x="pt",b="pc",_="deg",S="rad",$="grad",M="turn",I="#",C=".",L="e",V=/^[ \t\n\r]/,P=/^[a-z\-]/,z=/^[0-9a-fA-F]/,Y=/^[+\-]/,oe=/^[0-9]/,ae=La("none"),Ge=jr("none",!1),dt=jr(")",!1),Ve=jr(",",!1),Z=La("whitespace"),j=Xy([" ","	",`
`,"\r"],!1,!1),de=La("function"),Ne=jr("(",!1),fe=La("identifier"),nt=Xy([["a","z"],"-"],!1,!1),ge=La("percentage"),Qe=jr("%",!1),De=La("length"),Je=jr("px",!1),yr=jr("cm",!1),di=jr("mm",!1),kn=jr("in",!1),is=jr("pt",!1),Fe=jr("pc",!1),dr=La("angle"),Oi=jr("deg",!1),ns=jr("rad",!1),$p=jr("grad",!1),Vt=jr("turn",!1),Ni=La("number"),Po=La("color"),Kc=jr("#",!1),k5=Xy([["0","9"],["a","f"],["A","F"]],!1,!1),R5=Xy(["+","-"],!1,!1),ql=Xy([["0","9"]],!1,!1),Iie=jr(".",!1),Cie=jr("e",!1),Lie=function(){return[]},Aie=function(A,q){return{type:"function",name:A,parameters:q||[]}},kie=function(A,q){return q.length>0?dne(A,q,3):[A]},Rie=function(A){return{type:"quantity",value:A.value,unit:A.unit}},Oie=function(A){return{type:"color",colorType:A.type,value:A.value}},Nie=function(A){return A},Pie=function(){return Ww()},Die=function(A){return{value:A,unit:"%"}},Fie=function(A){return{value:A,unit:"px"}},jie=function(A){return{value:A,unit:"cm"}},Vie=function(A){return{value:A,unit:"mm"}},zie=function(A){return{value:A,unit:"in"}},Uie=function(A){return{value:A,unit:"pt"}},Bie=function(A){return{value:A,unit:"pc"}},Gie=function(A){return{value:A,unit:"deg"}},qie=function(A){return{value:A,unit:"rad"}},Hie=function(A){return{value:A,unit:"grad"}},Wie=function(A){return{value:A,unit:"turn"}},Zie=function(A){return{value:A,unit:null}},Jie=function(){return{type:"hex",value:Ww()}},Yie=function(A){return{type:"function",value:A}},Qie=function(){return{type:"named",value:Ww()}},Kie=function(){return parseFloat(Ww())},U=0|t.peg$currPos,zt=U,Ep=[{line:1,column:1}],Vs=U,Hw=t.peg$maxFailExpected||[],we=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=s[t.startRule]}function Ww(){return e.substring(zt,U)}function jr(A,q){return{type:"literal",text:A,ignoreCase:q}}function Xy(A,q,X){return{type:"class",parts:A,inverted:q,ignoreCase:X}}function Xie(){return{type:"end"}}function La(A){return{type:"other",description:A}}function O5(A){var q,X=Ep[A];if(X)return X;if(A>=Ep.length)q=Ep.length-1;else for(q=A;!Ep[--q];);for(X={line:(X=Ep[q]).line,column:X.column};q<A;)e.charCodeAt(q)===10?(X.line++,X.column=1):X.column++,q++;return Ep[A]=X,X}function N5(A,q,X){var Me=O5(A),St=O5(q);return{source:n,start:{offset:A,line:Me.line,column:Me.column},end:{offset:q,line:St.line,column:St.column}}}function Oe(A){U<Vs||(U>Vs&&(Vs=U,Hw=[]),Hw.push(A))}function ene(A,q,X){return new Om(Om.buildMessage(A,q),A,q,X)}function P5(){var A;return(A=tne())===i&&(A=rne()),A}function tne(){var A,q;return we++,A=U,Vr(),e.substr(U,4)===a?(q=a,U+=4):(q=i,we===0&&Oe(Ge)),q!==i?(Vr(),zt=A,A=Lie()):(U=A,A=i),we--,A===i&&we===0&&Oe(ae),A}function rne(){var A,q;if(A=[],(q=WE())!==i)for(;q!==i;)A.push(q),q=WE();else A=i;return A}function WE(){var A,q,X,Me;return A=U,Vr(),(q=nne())!==i?(Vr(),(X=ine())===i&&(X=null),Vr(),e.charCodeAt(U)===41?(Me=l,U++):(Me=i,we===0&&Oe(dt)),Me!==i?(Vr(),zt=A,A=Aie(q,X)):(U=A,A=i)):(U=A,A=i),A}function ine(){var A,q,X,Me,St,tr,Ir,tn;if(A=U,(q=ZE())!==i){for(X=[],Me=U,St=Vr(),e.charCodeAt(U)===44?(tr=c,U++):(tr=i,we===0&&Oe(Ve)),tr===i&&(tr=null),Ir=Vr(),(tn=ZE())!==i?Me=St=[St,tr,Ir,tn]:(U=Me,Me=i);Me!==i;)X.push(Me),Me=U,St=Vr(),e.charCodeAt(U)===44?(tr=c,U++):(tr=i,we===0&&Oe(Ve)),tr===i&&(tr=null),Ir=Vr(),(tn=ZE())!==i?Me=St=[St,tr,Ir,tn]:(U=Me,Me=i);zt=A,A=kie(q,X)}else U=A,A=i;return A}function ZE(){var A,q;return A=U,(q=sne())===i&&(q=one())===i&&(q=ane())===i&&(q=lne()),q!==i&&(zt=A,q=Rie(q)),(A=q)===i&&(A=U,(q=une())!==i&&(zt=A,q=Oie(q)),A=q),A}function Vr(){var A,q;for(we++,A=[],q=e.charAt(U),V.test(q)?U++:(q=i,we===0&&Oe(j));q!==i;)A.push(q),q=e.charAt(U),V.test(q)?U++:(q=i,we===0&&Oe(j));return we--,q=i,we===0&&Oe(Z),A}function nne(){var A,q,X;return we++,A=U,(q=D5())!==i?(e.charCodeAt(U)===40?(X=h,U++):(X=i,we===0&&Oe(Ne)),X!==i?(zt=A,A=Nie(q)):(U=A,A=i)):(U=A,A=i),we--,A===i&&(q=i,we===0&&Oe(de)),A}function D5(){var A,q,X;if(we++,A=U,q=[],X=e.charAt(U),P.test(X)?U++:(X=i,we===0&&Oe(nt)),X!==i)for(;X!==i;)q.push(X),X=e.charAt(U),P.test(X)?U++:(X=i,we===0&&Oe(nt));else q=i;return q!==i&&(zt=A,q=Pie()),we--,(A=q)===i&&(q=i,we===0&&Oe(fe)),A}function sne(){var A,q,X;return we++,A=U,Vr(),(q=ss())!==i?(e.charCodeAt(U)===37?(X=f,U++):(X=i,we===0&&Oe(Qe)),X!==i?(zt=A,A=Die(q)):(U=A,A=i)):(U=A,A=i),we--,A===i&&we===0&&Oe(ge),A}function one(){var A,q,X;return we++,A=U,Vr(),(q=ss())!==i?(e.substr(U,2)===m?(X=m,U+=2):(X=i,we===0&&Oe(Je)),X!==i?(zt=A,A=Fie(q)):(U=A,A=i)):(U=A,A=i),A===i&&(A=U,Vr(),(q=ss())!==i?(e.substr(U,2)===y?(X=y,U+=2):(X=i,we===0&&Oe(yr)),X!==i?(zt=A,A=jie(q)):(U=A,A=i)):(U=A,A=i),A===i&&(A=U,Vr(),(q=ss())!==i?(e.substr(U,2)===g?(X=g,U+=2):(X=i,we===0&&Oe(di)),X!==i?(zt=A,A=Vie(q)):(U=A,A=i)):(U=A,A=i),A===i&&(A=U,Vr(),(q=ss())!==i?(e.substr(U,2)===v?(X=v,U+=2):(X=i,we===0&&Oe(kn)),X!==i?(zt=A,A=zie(q)):(U=A,A=i)):(U=A,A=i),A===i&&(A=U,Vr(),(q=ss())!==i?(e.substr(U,2)===x?(X=x,U+=2):(X=i,we===0&&Oe(is)),X!==i?(zt=A,A=Uie(q)):(U=A,A=i)):(U=A,A=i),A===i&&(A=U,Vr(),(q=ss())!==i?(e.substr(U,2)===b?(X=b,U+=2):(X=i,we===0&&Oe(Fe)),X!==i?(zt=A,A=Bie(q)):(U=A,A=i)):(U=A,A=i)))))),we--,A===i&&we===0&&Oe(De),A}function ane(){var A,q,X;return we++,A=U,(q=ss())!==i?(e.substr(U,3)===_?(X=_,U+=3):(X=i,we===0&&Oe(Oi)),X!==i?(zt=A,A=Gie(q)):(U=A,A=i)):(U=A,A=i),A===i&&(A=U,(q=ss())!==i?(e.substr(U,3)===S?(X=S,U+=3):(X=i,we===0&&Oe(ns)),X!==i?(zt=A,A=qie(q)):(U=A,A=i)):(U=A,A=i),A===i&&(A=U,(q=ss())!==i?(e.substr(U,4)===$?(X=$,U+=4):(X=i,we===0&&Oe($p)),X!==i?(zt=A,A=Hie(q)):(U=A,A=i)):(U=A,A=i),A===i&&(A=U,(q=ss())!==i?(e.substr(U,4)===M?(X=M,U+=4):(X=i,we===0&&Oe(Vt)),X!==i?(zt=A,A=Wie(q)):(U=A,A=i)):(U=A,A=i)))),we--,A===i&&(q=i,we===0&&Oe(dr)),A}function lne(){var A,q;return we++,A=U,Vr(),(q=ss())!==i?(zt=A,A=Zie(q)):(U=A,A=i),we--,A===i&&we===0&&Oe(Ni),A}function une(){var A,q,X,Me;if(we++,A=U,e.charCodeAt(U)===35?(q=I,U++):(q=i,we===0&&Oe(Kc)),q!==i){if(X=[],Me=e.charAt(U),z.test(Me)?U++:(Me=i,we===0&&Oe(k5)),Me!==i)for(;Me!==i;)X.push(Me),Me=e.charAt(U),z.test(Me)?U++:(Me=i,we===0&&Oe(k5));else X=i;X!==i?(zt=A,A=Jie()):(U=A,A=i)}else U=A,A=i;return A===i&&(A=U,(q=WE())!==i&&(zt=A,q=Yie(q)),(A=q)===i&&(A=U,(q=D5())!==i&&(zt=A,q=Qie()),A=q)),we--,A===i&&(q=i,we===0&&Oe(Po)),A}function ss(){var A,q,X,Me,St,tr,Ir,tn;for(A=U,q=e.charAt(U),Y.test(q)?U++:(q=i,we===0&&Oe(R5)),q===i&&(q=null),X=U,Me=[],St=e.charAt(U),oe.test(St)?U++:(St=i,we===0&&Oe(ql));St!==i;)Me.push(St),St=e.charAt(U),oe.test(St)?U++:(St=i,we===0&&Oe(ql));if(e.charCodeAt(U)===46?(St=C,U++):(St=i,we===0&&Oe(Iie)),St!==i){if(tr=[],Ir=e.charAt(U),oe.test(Ir)?U++:(Ir=i,we===0&&Oe(ql)),Ir!==i)for(;Ir!==i;)tr.push(Ir),Ir=e.charAt(U),oe.test(Ir)?U++:(Ir=i,we===0&&Oe(ql));else tr=i;tr!==i?X=Me=[Me,St,tr]:(U=X,X=i)}else U=X,X=i;if(X===i)if(X=[],Me=e.charAt(U),oe.test(Me)?U++:(Me=i,we===0&&Oe(ql)),Me!==i)for(;Me!==i;)X.push(Me),Me=e.charAt(U),oe.test(Me)?U++:(Me=i,we===0&&Oe(ql));else X=i;if(X!==i){if(Me=U,e.charCodeAt(U)===101?(St=L,U++):(St=i,we===0&&Oe(Cie)),St!==i){if(tr=e.charAt(U),Y.test(tr)?U++:(tr=i,we===0&&Oe(R5)),tr===i&&(tr=null),Ir=[],tn=e.charAt(U),oe.test(tn)?U++:(tn=i,we===0&&Oe(ql)),tn!==i)for(;tn!==i;)Ir.push(tn),tn=e.charAt(U),oe.test(tn)?U++:(tn=i,we===0&&Oe(ql));else Ir=i;Ir!==i?Me=St=[St,tr,Ir]:(U=Me,Me=i)}else U=Me,Me=i;Me===i&&(Me=null),zt=A,A=Kie()}else U=A,A=i;return A}function cne(A,q){return A.map(function(X){return X[q]})}function dne(A,q,X){return[A].concat(cne(q,X))}if(r=o(),t.peg$library)return{peg$result:r,peg$currPos:U,peg$FAILED:i,peg$maxFailExpected:Hw,peg$maxFailPos:Vs};if(r!==i&&U===e.length)return r;throw r!==i&&U<e.length&&Oe(Xie()),ene(Hw,Vs<e.length?e.charAt(Vs):null,Vs<e.length?N5(Vs,Vs+1):N5(Vs,Vs))}function DP(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=hV(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new N("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:hV(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!WW(t[r].effects,t[r+1].effects))throw new N("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});ZW(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function hV(e){let t;if(!e)return[];try{t=xCe(e)}catch(r){throw new N("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>SCe(r))}function SCe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return $Ce(e);case"opacity":return ECe(e);case"hue-rotate":return TCe(e);case"blur":return MCe(e);case"drop-shadow":return ICe(e);case"bloom":return CCe(e)}}catch(t){throw t.details.filter=e,t}throw new N("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function $Ce(e){let t=1;return Wy(e.parameters,1),e.parameters.length===1&&(t=wo(e.parameters[0])),new bC(e.name,t)}function ECe(e){let t=1;return Wy(e.parameters,1),e.parameters.length===1&&(t=wo(e.parameters[0])),new qW(t)}function TCe(e){let t=0;return Wy(e.parameters,1),e.parameters.length===1&&(t=NCe(e.parameters[0])),new BW(t)}function MCe(e){let t=0;return Wy(e.parameters,1),e.parameters.length===1&&(t=VP(e.parameters[0]),Vw(t,e.parameters[0])),new FW(t)}function ICe(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new N("effect:type-error","Accepts only one color",{});r=PCe(i)}else{const n=VP(i);if(Object.isFrozen(t))throw new N("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&Vw(n,i)}if(t.length<2||t.length>3)throw new N("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new zW(t[0],t[1],t[2]||0,r||CX("black"))}function CCe(e){let t=1,r=0,i=0;return Wy(e.parameters,3),e.parameters[0]&&(t=wo(e.parameters[0])),e.parameters[1]&&(r=VP(e.parameters[1]),Vw(r,e.parameters[1])),e.parameters[2]&&(i=wo(e.parameters[2])),new PW(t,r,i)}function Wy(e,t){if(e.length>t)throw new N("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function kE(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in jP)return"<length>";if(e.unit in FP)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Vw(e,t){if(e<0)throw new N("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function LCe(e){if(e.type!=="quantity"||e.unit!==null)throw new N("effect:type-error",`Expected <double>, Actual: ${kE(e)}`,{term:e})}function ACe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new N("effect:type-error",`Expected <double> or <percentage>, Actual: ${kE(e)}`,{term:e})}_Ce(Om,Error),Om.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,i=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){i=e[r].text.split(/\r\n|\n|\r/g);break}var n=this.location.start,s=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,o=this.location.source+":"+s.line+":"+s.column;if(i){var a=this.location.end,l=YM("",s.line.toString().length," "),c=i[n.line-1],h=(n.line===a.line?a.column:c.length+1)-n.column||1;t+=`
 --> `+o+`
`+l+` |
`+s.line+" | "+c+`
`+l+" | "+YM("",n.column-1," ")+YM("",h,"^")}else t+=`
 at `+o}return t},Om.buildMessage=function(e,t){var r={literal:function(c){return'"'+n(c.text)+'"'},class:function(c){var h=c.parts.map(function(f){return Array.isArray(f)?s(f[0])+"-"+s(f[1]):s(f)});return"["+(c.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(c){return c.description}};function i(c){return c.charCodeAt(0).toString(16).toUpperCase()}function n(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+i(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+i(h)})}function s(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+i(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+i(h)})}function o(c){return r[c.type](c)}function a(c){var h,f,m=c.map(o);if(m.sort(),m.length>0){for(h=1,f=1;h<m.length;h++)m[h-1]!==m[h]&&(m[f]=m[h],f++);m.length=f}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function l(c){return c?'"'+n(c)+'"':"end of input"}return"Expected "+a(e)+" but "+l(t)+" found."};const FP={deg:1,grad:.9,rad:180/Math.PI,turn:360};function kCe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&FP[e.unit]!=null))throw new N("effect:type-error",`Expected <angle>, Actual: ${kE(e)}`,{term:e})}const jP={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function RCe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&jP[e.unit]!=null))throw new N("effect:type-error",`Expected <length>, Actual: ${kE(e)}`,{term:e})}function wo(e){ACe(e);const t=e.value;return Vw(t,e),e.unit==="%"?.01*t:t}function OCe(e){return LCe(e),Vw(e.value,e),e.value}function NCe(e){return kCe(e),e.value*FP[e.unit]||0}function VP(e){return RCe(e),e.value*jP[e.unit]||0}function PCe(e){switch(e.colorType){case"hex":return eye(e.value);case"named":return CX(e.value);case"function":return jCe(e.value)}}function CX(e){if(!mW(e))throw new N("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Xme(e)}const DCe=/^rgba?/i,FCe=/^hsla?/i;function jCe(e){if(Wy(e.parameters,4),DCe.test(e.name))return[wo(e.parameters[0]),wo(e.parameters[1]),wo(e.parameters[2]),e.parameters[3]?wo(e.parameters[3]):1];if(FCe.test(e.name))return yW(OCe(e.parameters[0]),wo(e.parameters[1]),wo(e.parameters[2]),e.parameters[3]?wo(e.parameters[3]):1);throw new N("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function D1(e,t,r){var i;try{return zCe(e)}catch(n){(i=r==null?void 0:r.messages)==null||i.push(n)}return null}function F1(e,t,r,i){try{const n=VCe(e);Xr(r,n,t)}catch(n){i.messages&&i.messages.push(n)}}function VCe(e){const t=DP(e);return t?Sge(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(n=>n.toJSON())})):null}function zCe(e){if(!e||e.length===0)return null;if(UCe(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:US(r.value)});return t}return US(e)}function UCe(e){const t=e[0];return!!t&&"scale"in t}function US(e){if(!(e!=null&&e.length))return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[Pa(r,"amount")];break;case"blur":i=[Pa(r,"radius","pt")];break;case"hue-rotate":i=[Pa(r,"angle","deg")];break;case"drop-shadow":i=[Pa(r,"xoffset","pt"),Pa(r,"yoffset","pt"),Pa(r,"blurRadius","pt"),BCe(r,"color")];break;case"bloom":i=[Pa(r,"strength"),Pa(r,"radius","pt"),Pa(r,"threshold")]}const n=`${r.type}(${i.filter(Boolean).join(" ")})`;DP(n),t.push(n)}return t.join(" ")}function Pa(e,t,r){if(e[t]==null)throw new N("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function BCe(e,t){if(e[t]==null)throw new N("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const GCe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:jt}},"portal-item":{read:!0,write:{layerContainerTypes:jt}}}}},pV={read:{reader:D1},write:{allowNull:!0,writer:F1,layerContainerTypes:jt}},qCe={json:{read:!1,write:!1,origins:{"web-map":pV,"portal-item":pV}}},LX=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([d(GCe)],t.prototype,"blendMode",void 0),u([d(qCe)],t.prototype,"effect",void 0),t=u([T("esri.layers.mixins.BlendLayer")],t),t},AX=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return u([d({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=u([T("esri.layers.mixins.CustomParametersMixin")],t),t},kX=96;function pBe(e,t){const r=t||e.extent,i=e.width,n=Ds(r==null?void 0:r.spatialReference);return r&&i?r.width/i*n*Bq*kX:0}function fBe(e,t){return e/(Ds(t)*Bq*kX)}function HCe(e,t,r){return WCe(e,t)&&ZCe(e,r)}function WCe(e,t){return t===0||Ao(e,t)||e<t}function ZCe(e,t){return t===0||Ao(e,t)||e>t}function JCe(e,t){return Ao(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}const fV={write:{overridePolicy:(e,t,r)=>({enabled:!r||r.filterMode==="scale"})}};let Eu=class extends Be.ClonableMixin(G){constructor(t){super(t),this.id=IE(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};u([d({type:String,json:{write:!0}})],Eu.prototype,"id",void 0),u([d({type:Number,json:fV})],Eu.prototype,"maxScale",void 0),u([d({type:Number,json:fV})],Eu.prototype,"minScale",void 0),u([d({type:String,json:{write:!0}})],Eu.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Eu.prototype,"where",void 0),Eu=u([T("esri.layers.support.DisplayFilter")],Eu);const RX=Eu;function YCe(e,t){return{...t,filterMode:e.mode}}function QCe(e,t){return OX(e,t).next().value??null}function yBe(e,t,r){const i=KCe(e);if(i&&(vW(t,i[0])||yC(r,i[1])))return"";const n=Array.from(OX(e,t,r)),s=XCe(n,t,r)?"1=1":n.map(o=>o.where||"1=1").reduce((o,a)=>nwe(o,a),"");return s&&s!=="1=1"?s:""}function KCe(e){if(NX(e)==="manual")return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:i}of e.filters)t[0]=Math.max(t[0],j1(r)),t[1]=Math.min(t[1],BS(i));return t}function*OX(e,t,r){if(NX(e)==="manual"){const i=e.filters.find(n=>n.id===e.activeFilterId);i&&(yield i)}else{typeof t=="object"&&(t=t.scale);for(const i of e.filters)eLe(i.minScale,i.maxScale,t,r)&&(yield i)}}function XCe(e,t,r){var s,o;if(e.length===0)return!0;const i=j1((s=e.at(0))==null?void 0:s.minScale),n=BS((o=e.at(-1))==null?void 0:o.maxScale);if(yC(i,t)||vW(n,r))return!0;for(let a=0;a<e.length-1;a++){const l=e[a],c=e[a+1];if(yC(j1(c.minScale),BS(l.maxScale)))return!0}return!1}function eLe(e,t,r,i){return e=j1(e),r=j1(r),t=BS(t),!(!Ao(r,e)&&(i??r)>e)&&!rye(t,r)&&(i===void 0||!Ao(i,e))}function NX(e){return"mode"in e?e.mode:e.filterMode}function j1(e){return e||Number.POSITIVE_INFINITY}function BS(e){return e||0}let Gd=class extends Be.ClonableMixin(G){constructor(t){super(t),this.activeFilterId=null,this.filters=new(ie.ofType(RX)),this.mode="manual"}writeFilters(t,r,i,n){const s=t.toArray();this.mode==="scale"&&s.sort((o,a)=>{const l=JCe(a.minScale,o.minScale),c=o.maxScale-a.maxScale;return l===0?c:l}),r[i]=s.map(o=>o.toJSON(n))}write(t,r){return super.write(t,YCe(this,r))}};u([d({type:String,json:{write:{overridePolicy:(e,t,r)=>({enabled:r.filterMode==="manual",isRequired:!0})}}})],Gd.prototype,"activeFilterId",void 0),u([d({type:ie.ofType(RX),nonNullable:!0,json:{write:!0}})],Gd.prototype,"filters",void 0),u([te("filters")],Gd.prototype,"writeFilters",null),u([d({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],Gd.prototype,"mode",void 0),Gd=u([T("esri.layers.support.DisplayFilterInfo")],Gd);const tLe=Gd,PX=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return u([d(rLe)],t.prototype,"displayFilterEnabled",void 0),u([d(iLe)],t.prototype,"displayFilterInfo",void 0),t=u([T("esri.layers.mixins.DisplayFilteredLayer")],t),t},rLe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:jt,writer(e,t,r){Xr(r,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},iLe={type:tLe,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:jt},origins:{"web-scene":{write:!1,read:!1}}}},nLe=WMe(),DX=new Map,FX=new Map;async function vBe(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let n=DX.get(i);if(!n){const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await ft(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===t}async function wBe(e,t,r=!1){var s,o,a;if(!e||!t)return!0;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=FX.get(i))==null?void 0:s.entries();if(n){for(const[l,c]of n)if(c.name===t){const h=!((o=c.stack)!=null&&o.hasForwardEdits());if(!h&&r){const[{deleteForwardEdits:f},{default:m}]=await Promise.all([B(()=>import("./deleteForwardEdits-ad371f1f.js"),[]),B(()=>import("./DeleteForwardEditsParameters-e6a7715d.js"),[])]),y=await f(i,l,new m({sessionId:nLe,moment:c.moment}));return y.success&&((a=c.stack)==null||a.clearForwardEdits()),y.success}return h}}return!0}function sLe(e,t){var n;if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=(n=FX.get(r))==null?void 0:n.entries();if(i){for(const[s,o]of i)if(o.name===t)return o.lockType==="edit"}return!1}const zP=new Ns.EventEmitter;function oLe(e){return zP.on("apply-edits",new WeakRef(e))}function aLe(e){return zP.on("update-moment",new WeakRef(e))}function bBe(e,t,r=null,i=!1){const n=es();return i=t==null||i,zP.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:n.promise}),n}const jX=Symbol();function _Be(e){return e!=null&&typeof e=="object"&&jX in e}function Rg(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function QM(e,t,r){const i=new URL(e).host,n=DX.get(i),s=o=>!o||o===n;return s(t)&&s(r)||t===r}const lLe=e=>{var t;let r=class extends e{constructor(...i){super(...i),this[t]=!0,this._applyEditsHandler=n=>{const{serviceUrl:s,layerId:o,gdbVersion:a,mayReceiveServiceEdits:l,result:c}=n,h=s===this.url,f=o!=null&&this.layerId!=null&&o===this.layerId,m=Rg(this),y=Rg(this)&&QM(s,a,this.gdbVersion);if(!h||m&&!y||!f&&!l)return;const g=c.then(v=>{var _;if(this.lastEditsEventDate=new Date,f&&(v.addedFeatures.length||v.updatedFeatures.length||v.deletedFeatures.length||v.addedAttachments.length||v.updatedAttachments.length||v.deletedAttachments.length))return this.emit("edits",O(v)),v;const x=(_=v.editedFeatures)==null?void 0:_.find(({layerId:S})=>S===this.layerId);if(x){const{adds:S,updates:$,deletes:M}=x.editedFeatures,I={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:S?S.map(({attributes:C})=>({objectId:this.objectIdField&&C[this.objectIdField],globalId:this.globalIdField&&C[this.globalIdField]})):[],deletedFeatures:M?M.map(({attributes:C})=>({objectId:this.objectIdField&&C[this.objectIdField],globalId:this.globalIdField&&C[this.globalIdField]})):[],updatedFeatures:$?$.map(({current:{attributes:C}})=>({objectId:this.objectIdField&&C[this.objectIdField],globalId:this.globalIdField&&C[this.globalIdField]})):[],editedFeatures:O(v.editedFeatures),exceededTransferLimit:!1,historicMoment:O(v.historicMoment)};return this.emit("edits",I),I}const b={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:O(v.editedFeatures),exceededTransferLimit:!1,historicMoment:O(v.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,b.historicMoment)&&this.emit("edits",b),b}).then(v=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,v.historicMoment)&&(this.historicMoment=v.historicMoment),v));this.emit("apply-edits",{result:g})},this._updateMomentHandler=n=>{const{serviceUrl:s,gdbVersion:o,moment:a}=n,l=s===this.url,c=Rg(this),h=Rg(this)&&QM(s,o,this.gdbVersion),f=Rg(this)&&!QM(s,this.gdbVersion,null);l&&c&&h&&f&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(oLe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(aLe(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(i,n,s){return"historicMoment"in this&&this.historicMoment!==s&&sLe(i,n)}};return t=jX,u([d()],r.prototype,"lastEditsEventDate",void 0),r=u([T("esri.layers.mixins.EditBusLayer")],r),r};var KA;const KM=new je({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),XM=new je({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ea=KA=class extends G{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new vn({geometry:O(r),objectIds:O(s),spatialRelationship:i,timeExtent:O(n),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:n,units:s,distance:o}=this;return new KA({geometry:O(t),objectIds:O(n),spatialRelationship:r,timeExtent:O(i),where:e,units:s,distance:o})}};u([d({type:String,json:{write:!0}})],ea.prototype,"where",void 0),u([d({types:$w,json:{write:!0}})],ea.prototype,"geometry",void 0),u([d({type:KM.apiValues,json:{name:"spatialRel",read:{reader:KM.read},write:{allowNull:!1,writer:KM.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],ea.prototype,"spatialRelationship",void 0),u([d({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],ea.prototype,"distance",void 0),u([d({type:[Number],json:{write:!0}})],ea.prototype,"objectIds",void 0),u([d({type:XM.apiValues,json:{read:XM.read,write:{writer:XM.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],ea.prototype,"units",void 0),u([d({type:Fl,json:{write:!0}})],ea.prototype,"timeExtent",void 0),ea=KA=u([T("esri.layers.support.FeatureFilter")],ea);const uLe=ea;var XA;const mV={read:{reader:D1},write:{writer:F1,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},yV={read:{reader:D1},write:{writer:F1,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},gV={name:"showExcludedLabels",default:!0};let qd=XA=class extends G{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var i,n;const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const s=Object.keys(r.filter);if(s.length>1||s[0]!=="where")return(i=t.messages)==null||i.push(new N("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return(n=t.messages)==null||n.push(new N("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new XA({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([d({type:uLe,json:{write:{allowNull:!0,writer(e,t,r,i){const n=e==null?void 0:e.write({},i);n&&Object.keys(n).length!==0?Xr(r,n,t):Xr(r,null,t)}}}})],qd.prototype,"filter",void 0),u([d({json:{read:D1,write:{writer:F1,allowNull:!0},origins:{"web-map":mV,"portal-item":mV}}})],qd.prototype,"includedEffect",void 0),u([d({json:{read:D1,write:{writer:F1,allowNull:!0},origins:{"web-map":yV,"portal-item":yV}}})],qd.prototype,"excludedEffect",void 0),u([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":gV,"portal-item":gV}}})],qd.prototype,"excludedLabelsVisible",void 0),qd=XA=u([T("esri.layers.support.FeatureEffect")],qd);const cLe=qd,vV={write:{allowNull:!0}},dLe={type:cLe,json:{origins:{"web-map":vV,"portal-item":vV}}},VX=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return u([d(dLe)],t.prototype,"featureEffect",void 0),t=u([T("esri.layers.mixins.FeatureEffectLayer")],t),t};var ek;let D0=ek=class extends G{constructor(e){super(e)}async collectRequiredFields(e,t){return ki(e,t,this.expression)}clone(){return new ek({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};u([d({type:String,json:{write:{isRequired:!0}}})],D0.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],D0.prototype,"title",void 0),D0=ek=u([T("esri.symbols.support.FeatureExpressionInfo")],D0);const wV=D0,RE={unknown:1,inches:or(1,"meters","inches"),feet:or(1,"meters","feet"),"us-feet":or(1,"meters","us-feet"),yards:or(1,"meters","yards"),miles:or(1,"meters","miles"),"nautical-miles":or(1,"meters","nautical-miles"),millimeters:or(1,"meters","millimeters"),centimeters:or(1,"meters","centimeters"),decimeters:or(1,"meters","decimeters"),meters:or(1,"meters","meters"),kilometers:or(1,"meters","kilometers"),"decimal-degrees":1/_he(1,"meters",Xt.radius)};function xBe(e){return!!e&&RE[e]!=null}function SBe(e){return 1/(RE[e]||1)}function hLe(){const e=Object.keys(RE);return WB(e,"decimal-degrees"),e.sort(),e}const pLe=hLe();var tk;const Kb=ei()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),bV=new je({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let tl=tk=class extends G{constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new tk({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Rle(this.featureExpressionInfo,e.featureExpressionInfo)}};u([d({type:wV,json:{write:!0}})],tl.prototype,"featureExpressionInfo",void 0),u([J("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],tl.prototype,"readFeatureExpressionInfo",null),u([te("featureExpressionInfo",{featureExpressionInfo:{type:wV},"featureExpression.value":{type:[0]}})],tl.prototype,"writeFeatureExpressionInfo",null),u([d({type:Kb.apiValues,nonNullable:!0,json:{type:Kb.jsonValues,read:Kb.read,write:{writer:Kb.write,isRequired:!0}}})],tl.prototype,"mode",null),u([d({type:Number,json:{write:!0}})],tl.prototype,"offset",void 0),u([d({type:pLe,json:{type:String,read:bV.read,write:bV.write}})],tl.prototype,"unit",null),tl=tk=u([T("esri.symbols.support.ElevationInfo")],tl);const fLe=tl;let Af=class extends G{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};u([d({type:String,json:{write:!0}})],Af.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Af.prototype,"label",void 0),u([d()],Af.prototype,"type",void 0),Af=u([T("esri.tables.elements.AttributeTableElement")],Af);const xy=Af;var rk;let F0=rk=class extends xy{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new rk({description:this.description,displayType:this.displayType,label:this.label})}};u([d({type:["auto"],json:{write:!0}})],F0.prototype,"displayType",void 0),u([d({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],F0.prototype,"type",void 0),F0=rk=u([T("esri.tables.elements.AttributeTableAttachmentElement")],F0);const _V=F0;var ik;let j0=ik=class extends xy{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new ik({description:this.description,fieldName:this.fieldName,label:this.label})}};u([d({type:String,json:{write:!0}})],j0.prototype,"fieldName",void 0),u([d({type:String,json:{read:!1,write:!0}})],j0.prototype,"type",void 0),j0=ik=u([T("esri.tables.elements.AttributeTableFieldElement")],j0);const xV=j0;var nk;let V0=nk=class extends xy{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new nk({description:this.description,label:this.label,relationshipId:this.relationshipId})}};u([d({type:Number,json:{write:!0}})],V0.prototype,"relationshipId",void 0),u([d({type:["relationship"],json:{read:!1,write:!0}})],V0.prototype,"type",void 0),V0=nk=u([T("esri.tables.elements.AttributeTableRelationshipElement")],V0);const SV=V0;function zX(e){return{typesWithGroup:{base:xy,key:"type",typeMap:{attachment:_V,field:xV,group:e,relationship:SV}},typesWithoutGroup:{base:xy,key:"type",typeMap:{attachment:_V,field:xV,relationship:SV}}}}function UX(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function BX(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function GX(e,t,r=!0){return e?e.map(i=>Oo(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var sk;let dl=sk=class extends xy{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return GX(e,eI,!1)}readElements(e,t){return UX(t.attributeTableElements,eI,!1)}writeElements(e,t){t.attributeTableElements=BX(e,eI,!1)}clone(){return new sk({description:this.description,elements:O(this.elements),label:this.label})}};u([d({json:{write:!0}})],dl.prototype,"elements",void 0),u([He("elements")],dl.prototype,"castElements",null),u([J("elements",["attributeTableElements"])],dl.prototype,"readElements",null),u([te("elements")],dl.prototype,"writeElements",null),u([d({type:String,json:{read:!1,write:!0}})],dl.prototype,"type",void 0),dl=sk=u([T("esri.tables.elements.AttributeTableGroupElement")],dl);const eI=zX(dl),mLe=dl;var ok;const tI=zX(mLe);let Tu=ok=class extends G{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return GX(e,tI)}readElements(e,t){return UX(t.attributeTableElements,tI)}writeElements(e,t){t.attributeTableElements=BX(e,tI)}clone(){return new ok({elements:O(this.elements),orderByFields:this.orderByFields})}};u([d({json:{write:!0}})],Tu.prototype,"elements",void 0),u([He("elements")],Tu.prototype,"castElements",null),u([J("elements",["attributeTableElements"])],Tu.prototype,"readElements",null),u([te("elements")],Tu.prototype,"writeElements",null),u([d({type:[Object],json:{write:!0}})],Tu.prototype,"orderByFields",void 0),Tu=ok=u([T("esri.tables.AttributeTableTemplate")],Tu);const yLe=Tu,qX={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:jt}}},zw={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},Uw={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:jt}}},HX={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Yh}}},WX={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:jt}}},ZX={value:null,type:fLe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:jt}}};function EBe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const JX={write:{enabled:!0,layerContainerTypes:jt},read:!0},GS={type:Number,json:{origins:{"web-document":JX,"portal-item":{write:{layerContainerTypes:jt}}}}},gLe={...GS,json:{...GS.json,origins:{"web-document":{...JX,write:{enabled:!0,layerContainerTypes:jt,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>{var i;return r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(i=t.layerDefinition)!=null&&i.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?b1(t.layerDefinition.drawingInfo.transparency):void 0:b1(t.drawingInfo.transparency)}}}},TBe={type:bt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=bt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Ie.fromJSON(t.spatialReference)),r}}}},read:!1}},YX={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},vLe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:jt}}},wLe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:jt}}},QX={json:{write:{ignoreOrigin:!0,layerContainerTypes:jt},origins:{"web-map":{read:!1,write:!1}}}},KX={type:yLe,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let rl=class extends Be.ClonableMixin(G){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};u([d()],rl.prototype,"creatorField",void 0),u([d()],rl.prototype,"creationDateField",void 0),u([d()],rl.prototype,"editorField",void 0),u([d()],rl.prototype,"editDateField",void 0),u([d()],rl.prototype,"realm",void 0),u([d(v1("dateFieldsTimeReference",!0))],rl.prototype,"timeZone",void 0),rl=u([T("esri.layers.support.EditFieldsInfo")],rl);const bLe=rl;let la=class extends Be.ClonableMixin(G){constructor(t){super(t)}};u([d({constructOnly:!0,json:{write:!0}})],la.prototype,"name",void 0),u([d({constructOnly:!0,json:{write:!0}})],la.prototype,"fields",void 0),u([d({constructOnly:!0,json:{write:!0}})],la.prototype,"isAscending",void 0),u([d({constructOnly:!0,json:{write:!0}})],la.prototype,"indexType",void 0),u([d({constructOnly:!0,json:{write:!0}})],la.prototype,"isUnique",void 0),u([d({constructOnly:!0,json:{write:!0}})],la.prototype,"description",void 0),la=u([T("esri.layers.support.FeatureIndex")],la);async function _Le(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=XX(e));const i=xLe(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let s=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;t.start+=i}return s}function xLe(e){return XX(e)*SLe(e)}function SLe(e){return e.capabilities.query.maxRecordCount||2e3}function XX(e){return e.capabilities.query.supportsMaxRecordCountFactor?vn.MAX_MAX_RECORD_COUNT_FACTOR:1}var ak;let z0=ak=class extends G{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new ak({minValue:this.minValue,maxValue:this.maxValue})}};u([d({type:Number,json:{write:!0}})],z0.prototype,"minValue",void 0),u([d({type:Number,json:{write:!0}})],z0.prototype,"maxValue",void 0),z0=ak=u([T("esri.renderers.support.AuthoringInfoClassBreakInfo")],z0);var lk;let Bu=lk=class extends G{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new lk({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:O(this.classBreakInfos)})}};u([d({type:String,json:{write:!0}})],Bu.prototype,"field",void 0),u([d({type:String,json:{write:!0}})],Bu.prototype,"normalizationField",void 0),u([d({type:String,json:{write:!0}})],Bu.prototype,"label",void 0),u([d({type:[z0],json:{write:!0}})],Bu.prototype,"classBreakInfos",void 0),Bu=lk=u([T("esri.renderers.support.AuthoringInfoFieldInfo")],Bu);var uk;let kf=uk=class extends G{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new uk({label:this.label,value:this.value,size:this.size})}};u([d({type:String,json:{write:!0}})],kf.prototype,"label",void 0),u([d({type:Number,json:{write:!0}})],kf.prototype,"size",void 0),u([d({type:Number,json:{write:!0}})],kf.prototype,"value",void 0),kf=uk=u([T("esri.renderers.support.AuthoringInfoSizeStop")],kf);const $Le=kf;var ck;const Xb=new je({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),e_=new je({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),$V={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},EV=["high-to-low","above-and-below","centered-on","extremes"],TV=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],MV=["seconds","minutes","hours","days","months","years"],ELe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let Br=ck=class extends G{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new ck({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:O(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([d({types:$V,json:{write:!0}})],Br.prototype,"endTime",void 0),u([He("endTime")],Br.prototype,"castEndTime",null),u([d({type:String,json:{write:!0}})],Br.prototype,"field",void 0),u([d({type:Number,json:{write:!0}})],Br.prototype,"maxSliderValue",void 0),u([d({type:Number,json:{write:!0}})],Br.prototype,"minSliderValue",void 0),u([d({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Br.prototype,"normalizationField",null),u([d({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Br.prototype,"referenceSizeScale",null),u([d({type:ELe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Br.prototype,"referenceSizeSymbolStyle",null),u([d({types:$V,json:{write:!0}})],Br.prototype,"startTime",void 0),u([He("startTime")],Br.prototype,"castStartTime",null),u([d({type:[$Le],json:{origins:{"web-scene":{write:!1}},write:!0}})],Br.prototype,"sizeStops",null),u([d({type:Xb.apiValues,value:null,json:{type:Xb.jsonValues,read:Xb.read,write:Xb.write}})],Br.prototype,"style",null),u([d({type:TV,value:null,json:{type:TV,origins:{"web-scene":{type:EV,write:{writer:(e,t)=>{EV.includes(e)&&(t.theme=e)}}}},write:!0}})],Br.prototype,"theme",null),u([d({type:e_.apiValues,json:{type:e_.jsonValues,read:e_.read,write:e_.write}})],Br.prototype,"type",void 0),u([d({type:MV,json:{type:MV,write:!0}})],Br.prototype,"units",void 0),Br=ck=u([T("esri.renderers.support.AuthoringInfoVisualVariable")],Br);const TLe=Br;let V2=class extends G{constructor(t){super(t),this.type=null}};u([d({readOnly:!0,json:{read:!1,write:!0}})],V2.prototype,"type",void 0),V2=u([T("esri.rest.support.ColorRamp")],V2);const UP=V2;var dk;let Hd=dk=class extends UP{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new dk({fromColor:O(this.fromColor),toColor:O(this.toColor),algorithm:this.algorithm})}};u([ve({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Hd.prototype,"algorithm",void 0),u([d({type:Q,json:{type:[Xe],write:!0}})],Hd.prototype,"fromColor",void 0),u([d({type:Q,json:{type:[Xe],write:!0}})],Hd.prototype,"toColor",void 0),u([d({type:["algorithmic"]})],Hd.prototype,"type",void 0),Hd=dk=u([T("esri.rest.support.AlgorithmicColorRamp")],Hd);const BP=Hd;var hk;let U0=hk=class extends UP{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new hk({colorRamps:O(this.colorRamps)})}};u([d({type:[BP],json:{write:!0}})],U0.prototype,"colorRamps",void 0),u([d({type:["multipart"]})],U0.prototype,"type",void 0),U0=hk=u([T("esri.rest.support.MultipartColorRamp")],U0);const eee=U0,MLe={key:"type",base:UP,typeMap:{algorithmic:BP,multipart:eee}};function ILe(e){return e!=null&&e.type?e.type==="algorithmic"?BP.fromJSON(e):e.type==="multipart"?eee.fromJSON(e):null:null}var pk;const ld=new je({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),t_=new je({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),IV=new je({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),CV=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],CLe=["high-to-low","above-and-below","above","below"],LLe=["flow-line","wave-front"],ALe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Wt=pk=class extends G{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?ILe(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new pk({classificationMethod:this.classificationMethod,colorRamp:O(this.colorRamp),fadeRatio:O(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:O(this.field1),field2:O(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([d({type:ld.apiValues,value:null,json:{type:ld.jsonValues,read:ld.read,write:ld.write,origins:{"web-document":{default:"manual",type:ld.jsonValues,read:ld.read,write:ld.write}}}})],Wt.prototype,"classificationMethod",null),u([d({types:MLe,json:{write:!0}})],Wt.prototype,"colorRamp",void 0),u([J("colorRamp")],Wt.prototype,"readColorRamp",null),u([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wt.prototype,"fadeRatio",void 0),u([d({type:[String],value:null,json:{write:!0}})],Wt.prototype,"fields",null),u([d({type:Bu,value:null,json:{write:!0}})],Wt.prototype,"field1",null),u([d({type:Bu,value:null,json:{write:!0}})],Wt.prototype,"field2",null),u([d({type:LLe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wt.prototype,"flowTheme",null),u([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Wt.prototype,"focus",null),u([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Wt.prototype,"isAutoGenerated",void 0),u([d({type:Number,value:null,json:{type:Xe,write:!0}})],Wt.prototype,"numClasses",null),u([d({type:CV,json:{type:CV,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Wt.prototype,"lengthUnit",void 0),u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wt.prototype,"maxSliderValue",void 0),u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wt.prototype,"minSliderValue",void 0),u([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wt.prototype,"statistics",null),u([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Wt.prototype,"standardDeviationInterval",null),u([d({type:t_.apiValues,value:null,json:{type:t_.jsonValues,read:t_.read,write:t_.write,origins:{"web-scene":{type:IV.jsonValues,write:{writer:IV.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Wt.prototype,"type",null),u([d({type:[TLe],json:{write:!0}})],Wt.prototype,"visualVariables",void 0),u([d({type:ALe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wt.prototype,"univariateSymbolStyle",null),u([d({type:CLe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wt.prototype,"univariateTheme",null),Wt=pk=u([T("esri.renderers.support.AuthoringInfo")],Wt);const GP=Wt,rI=new je({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let B0=class extends G{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([d({type:GP,json:{write:!0}})],B0.prototype,"authoringInfo",void 0),u([d({type:rI.apiValues,readOnly:!0,json:{type:rI.jsonValues,read:!1,write:{writer:rI.write,ignoreOrigin:!0,isRequired:!0}}})],B0.prototype,"type",void 0),B0=u([T("esri.renderers.Renderer")],B0);const Gl=B0;let G0=class extends Be.ClonableMixin(G){constructor(){super(...arguments),this.showLegend=null,this.title=null}};u([d({type:Boolean,json:{write:!0}})],G0.prototype,"showLegend",void 0),u([d({type:String,json:{write:!0}})],G0.prototype,"title",void 0),G0=u([T("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],G0);const tee=G0,iI=new je({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ao=class extends G{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(W.getLogger(this).error(".field: field must be a string value"),null):fw(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([d()],ao.prototype,"index",void 0),u([d({type:iI.apiValues,readOnly:!0,json:{read:iI.read,write:{writer:iI.write,isRequired:!0}}})],ao.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],ao.prototype,"field",void 0),u([He("field")],ao.prototype,"castField",null),u([d({type:String,json:{write:!0}})],ao.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],ao.prototype,"valueExpressionTitle",void 0),u([d({readOnly:!0})],ao.prototype,"arcadeRequired",null),u([d({type:tee,json:{write:!0}})],ao.prototype,"legendOptions",void 0),ao=u([T("esri.renderers.visualVariables.VisualVariable")],ao);const Zy=ao;var fk;let Wd=fk=class extends G{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new fk({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([d({type:Q,json:{type:[Xe],write:{isRequired:!0}}})],Wd.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],Wd.prototype,"label",void 0),u([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Wd.prototype,"value",void 0),u([te("value")],Wd.prototype,"writeValue",null),Wd=fk=u([T("esri.renderers.visualVariables.support.ColorStop")],Wd);const kLe=Wd;var mk;let Zd=mk=class extends Zy{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new mk({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([d({readOnly:!0})],Zd.prototype,"cache",null),u([d({type:["color"],json:{type:["colorInfo"]}})],Zd.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Zd.prototype,"normalizationField",void 0),u([d({type:[kLe],json:{write:!0}})],Zd.prototype,"stops",null),Zd=mk=u([T("esri.renderers.visualVariables.ColorVariable")],Zd);const ree=Zd;var yk;let Mu=yk=class extends G{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return b1(t.transparency)}writeOpacity(e,t,r){t[r]=J$(e)}clone(){return new yk({label:this.label,opacity:this.opacity,value:this.value})}};u([d({type:String,json:{write:!0}})],Mu.prototype,"label",void 0),u([d({type:Number,json:{type:Xe,write:{target:"transparency",isRequired:!0}}})],Mu.prototype,"opacity",void 0),u([J("opacity",["transparency"])],Mu.prototype,"readOpacity",null),u([te("opacity")],Mu.prototype,"writeOpacity",null),u([d({type:Number,json:{write:{isRequired:!0}}})],Mu.prototype,"value",void 0),Mu=yk=u([T("esri.renderers.visualVariables.support.OpacityStop")],Mu);const RLe=Mu;var gk;let Jd=gk=class extends Zy{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new gk({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([d({readOnly:!0})],Jd.prototype,"cache",null),u([d({type:["opacity"],json:{type:["transparencyInfo"]}})],Jd.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Jd.prototype,"normalizationField",void 0),u([d({type:[RLe],json:{write:!0}})],Jd.prototype,"stops",null),Jd=gk=u([T("esri.renderers.visualVariables.OpacityVariable")],Jd);const qP=Jd;var vk;let Yd=vk=class extends Zy{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new vk({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};u([d({readOnly:!0})],Yd.prototype,"cache",null),u([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Yd.prototype,"axis",void 0),u([d({type:["rotation"],json:{type:["rotationInfo"]}})],Yd.prototype,"type",void 0),u([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Yd.prototype,"rotationType",void 0),Yd=vk=u([T("esri.renderers.visualVariables.RotationVariable")],Yd);const iee=Yd;function OLe(e){return qe(e)}var wk;let Iu=wk=class extends G{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new wk({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};u([d({type:String,json:{write:!0}})],Iu.prototype,"label",void 0),u([d({type:Number,cast:qe,json:{write:{isRequired:!0}}})],Iu.prototype,"size",void 0),u([d({type:Number,json:{write:{isRequired:!0}}})],Iu.prototype,"value",void 0),u([d({type:Boolean,json:{write:!1}})],Iu.prototype,"useMinValue",void 0),u([d({type:Boolean,json:{write:!1}})],Iu.prototype,"useMaxValue",void 0),Iu=wk=u([T("esri.renderers.visualVariables.support.SizeStop")],Iu);const z2=Iu;let U2=class extends tee{constructor(){super(...arguments),this.customValues=null}};u([d({type:[Number],json:{write:!0}})],U2.prototype,"customValues",void 0),U2=u([T("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],U2);const nee=U2;var Ll,Nr;function um(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function V1(e){return e!=null&&!isNaN(e)&&isFinite(e)}function see(e){return e.valueExpression?Ll.Expression:e.field&&typeof e.field=="string"?Ll.Field:Ll.Unknown}function NLe(e,t){const r=t||see(e),i=e.valueUnit||"unknown";return r===Ll.Unknown?Nr.Constant:e.stops?Nr.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Nr.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Nr.Proportional:Nr.Additive:Nr.Identity:Nr.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Ll||(Ll={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Nr||(Nr={}));const oee=()=>W.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),OE=e=>oee().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),NE=()=>oee().error("Use of arcade expressions requires an arcade context"),LV=new kc,B2=Math.PI,aee=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function lee(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void OE("ColorVariable");const n=typeof t=="number",s=n?null:t,o=s==null?void 0:s.attributes;let a=n?t:null;const l=i.field,{ipData:c,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!l&&!h){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if((r==null?void 0:r.arcade)==null)return void NE();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,x=v.getViewInfo(g),b=v.createExecContext(s,x,r.timeZone);if(!f){const _=v.createSyntaxTree(i.valueExpression);f=v.createFunction(_),i.cache.compiledFunc=f}a=v.executeFunction(f,b)}else o&&(a=o[l]);const m=i.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=HP(a,c);if(g){const v=g[0],x=g[1],b=v===x?i.stops[v].color:Q.blendColors(i.stops[v].color,i.stops[x].color,g[2],r!=null?r.color:void 0);return new Q(b)}}}function uee(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void OE("OpacityVariable");const n=typeof t=="number",s=n?null:t,o=s==null?void 0:s.attributes;let a=n?t:null;const l=i.field,{ipData:c,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!l&&!h){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if((r==null?void 0:r.arcade)==null)return void NE();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,x=v.getViewInfo(g),b=v.createExecContext(s,x,r.timeZone);if(!f){const _=v.createSyntaxTree(i.valueExpression);f=v.createFunction(_),i.cache.compiledFunc=f}a=v.executeFunction(f,b)}else o&&(a=o[l]);const m=i.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=HP(a,c);if(g){const v=g[0],x=g[1];if(v===x)return i.stops[v].opacity;{const b=i.stops[v].opacity;return b+(i.stops[x].opacity-b)*g[2]}}}}function cee(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(y=>y.type==="rotation"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void OE("RotationVariable");const n=i.axis||"heading",s=n==="heading"&&i.rotationType==="arithmetic"?90:0,o=n==="heading"&&i.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a==null?void 0:a.attributes,c=i.field,{hasExpression:h}=i.cache;let f=i.cache.compiledFunc,m=0;if(!c&&!h)return m;if(h){if((r==null?void 0:r.arcade)==null)return void NE();const y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,v=g.getViewInfo(y),x=g.createExecContext(a,v,r.timeZone);if(!f){const b=g.createSyntaxTree(i.valueExpression);f=g.createFunction(b),i.cache.compiledFunc=f}m=g.executeFunction(f,x)}else l&&(m=l[c]||0);return m=typeof m!="number"||isNaN(m)?null:s+o*m,m}function PLe(e,t,r){const i=typeof t=="number",n=i?null:t,s=n==null?void 0:n.attributes;let o=i?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const h=r!=null?r.scale:void 0,f=r!=null?r.view:void 0;o=h==null||f==="3d"?DLe(e):h}else if(!i)switch(e.inputValueType){case Ll.Expression:{if((r==null?void 0:r.arcade)==null)return void NE();const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,m=f.getViewInfo(h),y=f.createExecContext(n,m,r.timeZone);if(!l){const g=f.createSyntaxTree(e.valueExpression);l=f.createFunction(g),e.cache.compiledFunc=l}o=f.executeFunction(l,y);break}case Ll.Field:s&&(o=s[e.field]);break;case Ll.Unknown:o=null}if(!V1(o))return null;if(i||!e.normalizationField)return o;const c=s?parseFloat(s[e.normalizationField]):null;return V1(c)&&c!==0?o/c:null}function DLe(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function PE(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void OE("SizeVariable");const n=hee(PLe(i,t,r),i,t,r,i.cache.ipData);return n==null||isNaN(n)?0:n}function Tn(e,t,r){return e==null?null:um(e)?PE(e,t,r):V1(e)?e:null}function dee(e,t,r){return V1(r)&&e>r?r:V1(t)&&e<t?t:e}function FLe(e,t,r,i){return e+((Tn(t.minSize,r,i)||t.minDataValue)??0)}function jLe(e,t,r){const i=e.stops;let n=(i==null?void 0:i.length)&&i[0].size;return n==null&&(n=e.minSize),Tn(n,t,r)}function VLe(e,t,r,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=Tn(t.minSize,r,i),o=Tn(t.maxSize,r,i),a=i!=null?i.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(s==null||o==null)return null;if(t.scaleBy==="area"&&a){const l=a==="circle",c=l?B2*(s/2)**2:s*s,h=c+n*((l?B2*(o/2)**2:o*o)-c);return l?2*Math.sqrt(h/B2):Math.sqrt(h)}return s+n*(o-s)}function zLe(e,t,r,i){const n=i!=null?i.shape:void 0,s=e/t.minDataValue,o=Tn(t.minSize,r,i),a=Tn(t.maxSize,r,i);let l=null;return l=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,dee(l,o,a)}function ULe(e,t,r,i,n){var l,c,h;const[s,o,a]=HP(e,n);if(s===o)return Tn((l=t.stops)==null?void 0:l[s].size,r,i);{const f=Tn((c=t.stops)==null?void 0:c[s].size,r,i);return f+(Tn((h=t.stops)==null?void 0:h[o].size,r,i)-f)*a}}function BLe(e,t,r,i){const n=((i==null?void 0:i.resolution)??1)*RE[t.valueUnit],s=Tn(t.minSize,r,i),o=Tn(t.maxSize,r,i),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/B2)/n:a==="radius"||a==="distance"?2*e/n:e/n,dee(l,s,o)}function hee(e,t,r,i,n){switch(t.transformationType){case Nr.Additive:return FLe(e,t,r,i);case Nr.Constant:return jLe(t,r,i);case Nr.ClampedLinear:return VLe(e,t,r,i);case Nr.Proportional:return zLe(e,t,r,i);case Nr.Stops:return ULe(e,t,r,i,n);case Nr.RealWorldSize:return BLe(e,t,r,i);case Nr.Identity:return e;case Nr.Unknown:return null}}function GLe(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const n={scale:t,view:r};let s=Tn(e.minSize,LV,n),o=Tn(e.maxSize,LV,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function qLe(e,t,r){if(!e.visualVariables)return;const i=[],n=[],s=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach(l=>{const c=lee(l,t,r);i.push({variable:l,value:c})}),s.forEach(l=>{const c=uee(l,t,r);i.push({variable:l,value:c})}),a.forEach(l=>{const c=cee(l,t,r);i.push({variable:l,value:c})}),o.forEach(l=>{const c=PE(l,t,r);i.push({variable:l,value:c})}),i.filter(l=>l.value!=null)}function HP(e,t){if(!t)return;let r=0,i=t.length-1;return t.some((n,s)=>e<n?(i=s,!0):(r=s,!1)),[r,i,(e-t[r])/(t[i]-t[r])]}function HLe(e,t,r){const i=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":PE(n,t,r);switch(n.axis){case"width":i[0]=s;break;case"depth":i[1]=s;break;case"height":i[2]=s;break;case"width-and-depth":i[0]=s,i[1]=s;break;case"all":case void 0:case null:i[0]=s,i[1]=s,i[2]=s;break;default:n.axis}}return i}const _p=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:HLe,getColor:lee,getOpacity:uee,getRotationAngle:cee,getSize:PE,getSizeForValue:hee,getSizeFromNumberOrVariable:Tn,getSizeRangeAtScale:GLe,getVisualVariableValues:qLe,viewScaleRE:aee},Symbol.toStringTag,{value:"Module"}));var bk;const r_=new je({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),_k=new je({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function AV(e){if(e!=null)return typeof e=="string"||typeof e=="number"?OLe(e):e.type==="size"?um(e)?e:(delete(e={...e}).type,new ut(e)):void 0}function kV(e,t,r){if(typeof e!="object")return e;const i=new ut;return i.read(e,r),i}let ut=bk=class extends Zy{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&aee.test(this.valueExpression)}}set index(e){um(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),um(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return see(this)}set maxDataValue(e){e&&this.stops&&(W.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(W.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return AV(e)}readMaxSize(e,t,r){return kV(e,t,r)}set minDataValue(e){e&&this.stops&&(W.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(W.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return AV(e)}readMinSize(e,t,r){return kV(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(W.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return NLe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i!=null&&i.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;i.messages.push(new N("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?_k.read(e):null}clone(){var e,t;return new bk({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:um(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:um(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(r=>r.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===Nr.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Nr.Stops){const e=this.stops;if(!e)return this;const t=e.map(i=>i.size).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};u([d({readOnly:!0})],ut.prototype,"cache",null),u([d({type:r_.apiValues,json:{type:r_.jsonValues,origins:{"web-map":{read:!1}},read:r_.read,write:r_.write}})],ut.prototype,"axis",void 0),u([d()],ut.prototype,"index",null),u([d({type:String,readOnly:!0})],ut.prototype,"inputValueType",null),u([d({type:nee,json:{write:!0}})],ut.prototype,"legendOptions",void 0),u([d({type:Number,value:null,json:{write:!0}})],ut.prototype,"maxDataValue",null),u([d({type:Number,value:null,json:{write:!0}})],ut.prototype,"maxSize",null),u([He("maxSize")],ut.prototype,"castMaxSize",null),u([J("maxSize")],ut.prototype,"readMaxSize",null),u([d({type:Number,value:null,json:{write:!0}})],ut.prototype,"minDataValue",null),u([d({type:Number,value:null,json:{write:!0}})],ut.prototype,"minSize",null),u([He("minSize")],ut.prototype,"castMinSize",null),u([J("minSize")],ut.prototype,"readMinSize",null),u([d({type:String,json:{write:!0}})],ut.prototype,"normalizationField",void 0),u([d({readOnly:!0})],ut.prototype,"arcadeRequired",null),u([d({type:String})],ut.prototype,"scaleBy",void 0),u([d({type:[z2],value:null,json:{write:!0}})],ut.prototype,"stops",null),u([d({type:["outline"],json:{write:!0}})],ut.prototype,"target",void 0),u([d({type:String,readOnly:!0})],ut.prototype,"transformationType",null),u([d({type:["size"],json:{type:["sizeInfo"]}})],ut.prototype,"type",void 0),u([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],ut.prototype,"useSymbolValue",void 0),u([d({type:String,json:{write:!0}})],ut.prototype,"valueExpression",void 0),u([J("valueExpression",["valueExpression","expression"])],ut.prototype,"readValueExpression",null),u([te("web-scene","valueExpression")],ut.prototype,"writeValueExpressionWebScene",null),u([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],ut.prototype,"valueRepresentation",void 0),u([d({type:_k.apiValues,json:{write:_k.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],ut.prototype,"valueUnit",void 0),u([J("valueUnit")],ut.prototype,"readValueUnit",null),ut=bk=u([T("esri.renderers.visualVariables.SizeVariable")],ut);const Jy=ut,WLe={color:ree,size:Jy,opacity:qP,rotation:iee},ZLe=new je({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),JLe=/^\[([^\]]+)\]$/i;let G2=class extends ce{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter(r=>!!r),t==null?void 0:t.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(r=>!!r.target)&&t.sort((r,i)=>{let n=null;return n=r.target===i.target?0:r.target?1:-1,n});for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){const{rotationExpression:n,rotationType:s}=r,o=n==null?void 0:n.match(JLe),a=o==null?void 0:o[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:s,field:a})),t)return t.map(l=>{const c=ZLe.read(l.type),h=WLe[c];h||(W.getLogger(this).warn(`Unknown variable type: ${c}`),i!=null&&i.messages&&i.messages.push(new Os("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:i})));const f=new h;return f.read(l,i),f})}writeVariables(t,r){const i=[];for(const n of t){const s=n.toJSON(r);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([d()],G2.prototype,"visualVariables",null),G2=u([T("esri.renderers.visualVariables.VisualVariableFactory")],G2);const YLe=G2,QLe={base:Zy,key:"type",typeMap:{opacity:qP,color:ree,rotation:iee,size:Jy}},Yy=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new YLe}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,n){return this._vvFactory.readVariables(r,i,n)}writeVisualVariables(r,i,n,s){i[n]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){var r;return((r=this.visualVariables)==null?void 0:r.some(({arcadeRequired:i})=>i))??!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){var n;return((n=this.visualVariables)==null?void 0:n.filter(s=>s.type===r&&(typeof i=="string"?s.target===i:i!==!1||!s.target)))??[]}async collectVVRequiredFields(r,i){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&Qi(r,i,s.field),s.normalizationField&&Qi(r,i,s.normalizationField),s.valueExpression&&(KLe(s.valueExpression,r,i)||await ki(r,i,s.valueExpression)))}};return u([d({types:[QLe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),u([J("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),u([te("visualVariables")],t.prototype,"writeVisualVariables",null),t=u([T("esri.renderers.mixins.VisualVariablesMixin")],t),t};function KLe(e,t,r){const i=wwe(e);return i!=null&&(Qi(t,r,i),!0)}const WP=[252,146,31,255],XLe=[153,153,153,255],pee={type:"esriSMS",style:"esriSMSCircle",size:6,color:WP,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},fee={type:"esriSLS",style:"esriSLSSolid",width:.75,color:WP},mee={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},eAe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},tAe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},rAe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},iAe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},qS=Ci.fromJSON(pee),ZP=en.fromJSON(fee),yee=Ul.fromJSON(mee),nAe=Gy.fromJSON(eAe);function NBe(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return qS;case"polyline":return ZP;case"polygon":case"extent":return yee}return null}const PBe=Ci.fromJSON(tAe),DBe=en.fromJSON(rAe),FBe=Ul.fromJSON(iAe),sAe=$l.fromSimpleMarkerSymbol(qS),oAe=bp.fromSimpleLineSymbol(ZP),aAe=Yc.fromSimpleFillSymbol(yee),lAe=new Rw({symbolLayers:new ie([new wp({material:{color:WP},edges:new zJ({size:An(1),color:new Q(XLe)})})])}),uAe=new bp({symbolLayers:new ie([new Uy({material:{color:new Q([0,0,0])},size:An(1)})])}),cAe=new Yc({symbolLayers:new ie([new wp({outline:{color:new Q([0,0,0]),size:An(1)}})])});function jBe(e){if(e==null)return null;switch(e.type){case"mesh":return lAe;case"point":case"multipoint":return sAe;case"polyline":return oAe;case"polygon":case"extent":return aAe}return null}const RV="#useCIMFallbackSymbology()",yl={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Sy(e,t=yl){var l,c,h,f;if(!e)return{symbol:null};const{retainId:r=yl.retainId,ignoreDrivers:i=yl.ignoreDrivers,hasLabelingContext:n=yl.hasLabelingContext,retainCIM:s=yl.retainCIM,cimFallbackEnabled:o=yl.cimFallbackEnabled}=t;let a=null;if(Ca(e)||e instanceof Ac)a=e.clone();else if(e.type==="cim"){const m=(c=(l=e.data)==null?void 0:l.symbol)==null?void 0:c.type;switch(m){case"CIMPointSymbol":a=s?e.clone():$l.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(a=uAe.clone(),(h=t==null?void 0:t.logWarning)==null||h.call(t,RV,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=cAe.clone(),(f=t==null?void 0:t.logWarning)==null||f.call(t,RV,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new N("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${m||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof en)a=bp.fromSimpleLineSymbol(e);else if(e instanceof Ci)a=$l.fromSimpleMarkerSymbol(e);else if(e instanceof Ow)a=$l.fromPictureMarkerSymbol(e);else if(e instanceof Ul)a=t.geometryType&&t.geometryType==="mesh"?Rw.fromSimpleFillSymbol(e):Yc.fromSimpleFillSymbol(e);else{if(!(e instanceof Gy))return{error:new N("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=n?fE.fromTextSymbol(e):$l.fromTextSymbol(e)}return r&&a&&a.type!=="cim"&&(a.id=e.id),!i||a.type==="cim"||a instanceof Ac||a.symbolLayers.forEach(m=>m.ignoreDrivers=!0),{symbol:a}}function HS(e,t,r,i){const n=gee(e,{},{context:i,isLabelSymbol:!1});n!=null&&(t[r]=n)}function OV(e,t,r,i){const n=gee(e,{},{context:i,isLabelSymbol:!0});n!=null&&(t[r]=n)}function NV(e){return Ca(e)||e instanceof Ac}function dAe(e){return(e==null?void 0:e.type)==="polygon-3d"||(e==null?void 0:e.type)==="line-3d"}function gee(e,t,r){var a;if(e==null)return null;const{context:i,isLabelSymbol:n}=r,s=i==null?void 0:i.origin,o=i==null?void 0:i.messages;if(s==="web-scene"&&!NV(e)){const l=Sy(e,{retainCIM:!0,hasLabelingContext:n});return l.symbol!=null?l.symbol.write(t,i):(o==null||o.push(new N("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:l.error})),null)}return mC(i==null?void 0:i.layer)&&dAe(e)?(o==null||o.push(new N("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(a=i==null?void 0:i.layer)==null?void 0:a.declaredClass}'.`,{symbol:e,context:i})),null):(s==="web-map"||s==="portal-item"&&!mC(i==null?void 0:i.layer))&&NV(e)?(o==null||o.push(new N("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function vee(e,t){return p_e(e,null,t)}const DE={types:gY,json:{write:{writer:HS},origins:{"web-scene":{types:Hj,write:{writer:HS},read:{reader:Ry({types:Hj})}}}}},JP=bO({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},DE),YP={types:{base:ci,key:"type",typeMap:{"simple-fill":ic.typeMap["simple-fill"],"picture-fill":ic.typeMap["picture-fill"],"polygon-3d":ic.typeMap["polygon-3d"],cim:ic.typeMap.cim}},json:{write:{writer:HS},origins:{"web-scene":{type:Yc,write:{writer:HS}}}}},q2={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var xk;let Qd=xk=class extends Yy(Gl){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.symbols.map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new xk({description:this.description,label:this.label,symbol:O(this.symbol),visualVariables:O(this.visualVariables),authoringInfo:O(this.authoringInfo)})}};u([d({type:String,json:{write:!0}})],Qd.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Qd.prototype,"label",void 0),u([d(JP)],Qd.prototype,"symbol",void 0),u([ve({simple:"simple"})],Qd.prototype,"type",void 0),Qd=xk=u([T("esri.renderers.SimpleRenderer")],Qd);const Al=Qd,hAe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function Sk(e){return e instanceof ce}function PV(e){return e instanceof ie?Object.keys(e.items):Sk(e)?Mn(e).keys():e?Object.keys(e):[]}function i_(e,t){return e instanceof ie?e.items[t]:e[t]}function pAe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Ov(e){return e?e.declaredClass:null}function wee(e,t){var f;const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=PV(e),n=PV(t);if(i.length===0&&n.length===0)return;if(!i.length||!n.length||pAe(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter(m=>!i.includes(m)),o=i.filter(m=>!n.includes(m)),a=i.filter(m=>n.includes(m)&&i_(e,m)!==i_(t,m)).concat(s,o).sort(),l=Ov(e);if(l&&hAe.has(l)&&a.length)return{type:"complete",oldValue:e,newValue:t};let c;const h=Sk(e)&&Sk(t);for(const m of a){const y=i_(e,m),g=i_(t,m);let v;if((h||typeof y!="function"&&typeof g!="function")&&y!==g&&(y!=null||g!=null)){if(r&&r[m]&&typeof r[m]=="function")v=(f=r[m])==null?void 0:f.call(r,y,g);else if(y instanceof Date&&g instanceof Date){if(y.getTime()===g.getTime())continue;v={type:"complete",oldValue:y,newValue:g}}else v=typeof y=="object"&&typeof g=="object"&&Ov(y)===Ov(g)?wee(y,g):{type:"complete",oldValue:y,newValue:g};v!=null&&(c!=null?c.diff[m]=v:c={type:"partial",diff:{[m]:v}})}}return c}function VBe(e,t){return fAe(e,t)}function fAe(e,t){if(e==null)return!1;const r=t.split(".");let i=e;for(const n of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const s=i.diff[n];if(!s)return!1;i=s}}return!0}function zBe(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function mAe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&Ov(e)!==Ov(t)?{type:"complete",oldValue:e,newValue:t}:wee(e,t)}function n_(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const r of t.added)if(!n_(r))return!1;for(const r of t.removed)if(!n_(r))return!1;for(const r of t.changed)if(!n_(r))return!1;return!0}case"partial":for(const t in e.diff)if(!n_(e.diff[t]))return!1;return!0}}var $k;const yAe=ei()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let q0=$k=class extends Be.ClonableMixin(G){static from(e){return mw($k,e)}constructor(e){super(e),this.title=null,this.order=null}};u([d({type:String,json:{write:!0}})],q0.prototype,"title",void 0),u([ve(yAe)],q0.prototype,"order",void 0),q0=$k=u([T("esri.renderers.support.RendererLegendOptions")],q0);const QP=q0;let Rf=class extends Be.ClonableMixin(G){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};u([d(q2)],Rf.prototype,"value",void 0),u([d(q2)],Rf.prototype,"value2",void 0),u([d(q2)],Rf.prototype,"value3",void 0),Rf=u([T("esri.renderers.support.UniqueValue")],Rf);const Nm=Rf;let Cu=class extends Be.ClonableMixin(G){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map(i=>new Nm({value:i})):r==="object"?t[0]instanceof Nm?t:t.map(i=>new Nm(i)):null}};u([d({type:String,json:{write:!0}})],Cu.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Cu.prototype,"label",void 0),u([d(DE)],Cu.prototype,"symbol",void 0),u([d({type:[Nm],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new Nm({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const r=[];for(const i of e){const n=[i.value,i.value2,i.value3].filter(Ei).map(s=>s.toString());r.push(n)}t.values=r}}}})],Cu.prototype,"values",void 0),u([He("values")],Cu.prototype,"castValues",null),Cu=u([T("esri.renderers.support.UniqueValueClass")],Cu);const bee=Cu;let H0=class extends Be.ClonableMixin(G){constructor(t){super(t),this.heading=null,this.classes=null}};u([d({type:String,json:{write:!0}})],H0.prototype,"heading",void 0),u([d({type:[bee],json:{write:{isRequired:!0}}})],H0.prototype,"classes",void 0),H0=u([T("esri.renderers.support.UniqueValueGroup")],H0);const Ek=H0;var Tk;let Kd=Tk=class extends G{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new Tk({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};u([d({type:String,json:{write:!0}})],Kd.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Kd.prototype,"label",void 0),u([d(JP)],Kd.prototype,"symbol",void 0),u([d(q2)],Kd.prototype,"value",void 0),Kd=Tk=u([T("esri.renderers.support.UniqueValueInfo")],Kd);const Nv=Kd,DV=new Map;async function gAe(e,t){try{return{data:(await KP(e,t)).data,baseUrl:FO(e),styleUrl:e}}catch(r){return _o(r),null}}function vAe(e,t,r){var l;const i=t.portal!=null?t.portal:Ai.getDefault();let n;const s=`${i.url} - ${(l=i.user)==null?void 0:l.username} - ${e}`,o=DV.get(s);if(o)return o;const a=wAe(e,i,r).then(c=>(n=c,c.fetchData())).then(c=>({data:c,baseUrl:n.itemUrl??"",styleName:e}));return DV.set(s,a),a}function wAe(e,t,r){return t.load(r).then(()=>{const i=new So({disableExtraQuery:!0,query:`owner:${FV} AND type:${jV} AND typekeywords:"${e}"`});return t.queryItems(i,r)}).then(({results:i})=>{var o;let n=null;const s=e.toLowerCase();if(i&&Array.isArray(i)){for(const a of i)if(((o=a.typeKeywords)==null?void 0:o.some(c=>c.toLowerCase()===s))&&a.type===jV&&a.owner===FV){n=a;break}}if(!n)throw new N("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(r)})}function _ee(e,t,r){return(e==null?void 0:e.styleUrl)!=null?gAe(e.styleUrl,r):(e==null?void 0:e.styleName)!=null?vAe(e.styleName,t,r):Promise.reject(new N("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function xee(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function bAe(e,t){for(const r of t)switch(r){case"cim":if(e.cimRef)return{format:r,url:encodeURI(e.cimRef)};break;case"web-gltf-basisu":{const i=nI(e,"gltf_basisu");if(i)return{format:r,url:i};break}case"web-gltf":{const i=nI(e,"gltf");if(i)return{format:r,url:i};break}case"web":{const i=nI(e,"gltf");if(i)return{format:"web-gltf",url:i};if(e.webRef)return{format:r,url:encodeURI(e.webRef)};break}}}function nI(e,t){var r,i;if(!F("enable-feature:force-wosr"))return(i=(r=e.formatInfos)==null?void 0:r.find(n=>n.type===t))==null?void 0:i.href}function KP(e,t){const r={responseType:"json",query:{f:"json"},...t};return ft(Co(e),r)}const FV="esri_en",jV="Style",_Ae="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var W0;const See="esri.renderers.UniqueValueRenderer",nu=()=>W.getLogger(See),VV="uvInfos-watcher",zV="uvGroups-watcher",xAe=",",SAe=Er(Nv);function $Ae(e){const{field1:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=e,a=!(!t||!r);return[{classes:(s??[]).map(l=>{var b;const{symbol:c,label:h,value:f,description:m}=l,[y,g,v]=a?((b=f==null?void 0:f.toString())==null?void 0:b.split(n||""))||[]:[f],x=[];return(t||o)&&x.push(y),r&&x.push(g),i&&x.push(v),{symbol:c,label:h,values:[x],description:m}})}]}function Bp(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let Rt=W0=class extends Yy(Gl){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const o=t.find(a=>a.value===r[s].value);o?mAe(o,r[s])?(n.changed.push({type:"complete",oldValue:o,newValue:r[s]}),i=!0):n.unchanged.push({oldValue:o,newValue:r[s]}):(n.added.push(r[s]),i=!0)}for(let s=0;s<t.length;s++)r.find(o=>o.value===t[s].value)||(n.removed.push(t[s]),i=!0);return i?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:fw(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i!=null&&i.messages?i.messages.push(new N("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):nu().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||Ai.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=Ec(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=yw(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?nu().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?nu().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var i;if(this.styleOrigin)return void nu().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?SAe(e):new Nv({value:e,symbol:vY(t)}),(i=this.uniqueValueInfos)==null||i.push(r),this._valueInfoMap[Bp(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void nu().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[Bp(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await $a()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void nu().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return(r==null?void 0:r.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(r==null?void 0:r.arcade)==null){const n=await $a(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this._getUniqueValueInfo(e,r);return(i==null?void 0:i.symbol)||this.defaultSymbol}get symbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){var i;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=(i=this.uniqueValueInfos)==null?void 0:i.reduce((n,s)=>n+s.getMeshHash(),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new W0({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:O(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:O(this.visualVariables),legendOptions:O(this.legendOptions),authoringInfo:O(this.authoringInfo),backgroundFillSymbol:O(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=O(this.uniqueValueInfos),r=O(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(O(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map(i=>i.collectRequiredFields(e,t)),ki(e,t,this.valueExpression)];Qi(e,t,this.field),Qi(e,t,this.field2),Qi(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return _ee(this.styleOrigin,{portal:this.portal}).then(e=>{var r;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const n=new Ac({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new Nv({value:i.name,symbol:n});t.push(s),this._valueInfoMap[Bp(i.name)]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((r=this.uniqueValueInfos)!=null&&r.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",xAe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[Bp(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(VV);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(ee(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(i,n)=>{i!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,VV)}}_watchUniqueValueGroups(){this.removeHandles(zV);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(ee(()=>({classes:r.classes}),(i,n)=>{i!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const i of r.classes??[])t.push(ee(()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,zV)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!r);for(const l of s)for(const c of l.classes??[]){const{symbol:h,label:f,values:m,description:y}=c;for(const g of m??[]){const{value:v,value2:x,value3:b}=g,_=[v];r&&_.push(x),i&&_.push(b);const S=a?_.join(n||""):_[0]??void 0;e.push(new Nv({symbol:h,label:f,value:S,description:y}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!t&&!i||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),a=s.map(c=>{var b;const{symbol:h,label:f,value:m,description:y}=c,[g,v,x]=o?((b=m==null?void 0:m.toString())==null?void 0:b.split(n||""))||[]:[m];return new bee({symbol:h,label:f,description:y,values:[new Nm({value:g,value2:v,value3:x})]})}),l=[new Ek({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:o}=t??{};let a=this._cache.compiledFunc;const l=s.arcadeUtils;if(!a){const h=l.createSyntaxTree(this.valueExpression);a=l.createFunction(h),this._cache.compiledFunc=a}const c=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),o));return this._valueInfoMap[Bp(c)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const n=this.field2,s=this.field3,o=[];t&&o.push(r[t]),n&&o.push(r[n]),s&&o.push(r[s]),i=o.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[Bp(i)]}static fromPortalStyle(e,t){const r=new W0(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",(t==null?void 0:t.portal)||Ai.getDefault());const i=r.populateFromStyle();return i.catch(n=>{nu().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),i}static fromStyleUrl(e,t){const r=new W0(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(n=>{nu().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),i}};u([d({readOnly:!0})],Rt.prototype,"_cache",null),u([ve({uniqueValue:"unique-value"})],Rt.prototype,"type",void 0),u([d(YP)],Rt.prototype,"backgroundFillSymbol",void 0),u([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Rt.prototype,"field",null),u([He("field")],Rt.prototype,"castField",null),u([te("field")],Rt.prototype,"writeField",null),u([d({type:String,value:null,json:{write:!0}})],Rt.prototype,"field2",null),u([d({type:String,value:null,json:{write:!0}})],Rt.prototype,"field3",null),u([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Rt.prototype,"orderByClassesEnabled",void 0),u([d({type:String,value:null,json:{write:!0}})],Rt.prototype,"valueExpression",null),u([d({type:String,json:{write:!0}})],Rt.prototype,"valueExpressionTitle",void 0),u([d({type:QP,json:{write:!0}})],Rt.prototype,"legendOptions",void 0),u([d({type:String,json:{write:!0}})],Rt.prototype,"defaultLabel",void 0),u([d(bO({...DE},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Rt.prototype,"defaultSymbol",null),u([d({type:String,value:null,json:{write:!0}})],Rt.prototype,"fieldDelimiter",null),u([d({type:Ai,readOnly:!0})],Rt.prototype,"portal",void 0),u([J("portal",["styleName"])],Rt.prototype,"readPortal",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Rt.prototype,"styleOrigin",void 0),u([J("styleOrigin",["styleName","styleUrl"])],Rt.prototype,"readStyleOrigin",null),u([te("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Rt.prototype,"writeStyleOrigin",null),u([d({type:[Ek],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||$Ae(t)).map(i=>Ek.fromJSON(i,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Rt.prototype,"uniqueValueGroups",null),u([d({type:[Nv],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Rt.prototype,"uniqueValueInfos",null),Rt=W0=u([T(See)],Rt);const XP=Rt;var Mk;let Ar=Mk=class extends G{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new Mk(O({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};u([d({type:[String],json:{write:!0}})],Ar.prototype,"attachmentTypes",void 0),u([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Ar.prototype,"attachmentsWhere",void 0),u([d({type:Boolean,json:{write:!0}})],Ar.prototype,"cacheHint",void 0),u([d({type:[String],json:{write:!0}})],Ar.prototype,"keywords",void 0),u([d({type:[String],json:{write:!0}})],Ar.prototype,"globalIds",void 0),u([d({json:{write:!0}})],Ar.prototype,"name",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Ar.prototype,"num",void 0),u([d({type:[Number],json:{write:!0}})],Ar.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],Ar.prototype,"orderByFields",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],Ar.prototype,"returnMetadata",void 0),u([d({type:[Number],json:{write:!0}})],Ar.prototype,"size",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],Ar.prototype,"start",void 0),u([te("start"),te("num")],Ar.prototype,"writeStart",null),u([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ar.prototype,"where",void 0),Ar=Mk=u([T("esri.rest.support.AttachmentQuery")],Ar),Ar.from=Er(Ar);const EAe=Ar,$ee=ei()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),UV="percent-of-total",BV="field",qBe=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const i=!!this.normalizationField,n=this.normalizationTotal!=null;return i||n?(r=i&&BV||n&&UV||null,i&&n&&W.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==BV&&r!==UV||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return u([d({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),u([d({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),u([d({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),u([d({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),u([ve($ee,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=u([T("esri.rest.support.NormalizationBinParametersMixin")],t),t};var Ik;let Ut=Ik=class extends G{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new Ik(O({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};u([d({type:Boolean,json:{write:!0}})],Ut.prototype,"cacheHint",void 0),u([d({type:vo,json:{write:!0}})],Ut.prototype,"dynamicDataSource",void 0),u([d({type:String,json:{write:!0}})],Ut.prototype,"gdbVersion",void 0),u([d({type:Number,json:{write:!0}})],Ut.prototype,"geometryPrecision",void 0),u([d({type:Date})],Ut.prototype,"historicMoment",void 0),u([te("historicMoment")],Ut.prototype,"_writeHistoricMoment",null),u([d({type:Number,json:{write:!0}})],Ut.prototype,"maxAllowableOffset",void 0),u([d({json:{write:!0}})],Ut.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],Ut.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],Ut.prototype,"outFields",void 0),u([d({type:Ie,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ut.prototype,"outSpatialReference",void 0),u([d({json:{write:!0}})],Ut.prototype,"relationshipId",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],Ut.prototype,"start",void 0),u([te("start"),te("num")],Ut.prototype,"writeStart",null),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Ut.prototype,"num",void 0),u([d({json:{write:!0}})],Ut.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ut.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ut.prototype,"returnZ",void 0),u([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ut.prototype,"where",void 0),Ut=Ik=u([T("esri.rest.support.RelationshipQuery")],Ut),Ut.from=Er(Ut);const e5=Ut,HBe=Object.freeze(Object.defineProperty({__proto__:null,default:e5},Symbol.toStringTag,{value:"Module"})),Ck=new je({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function TAe(e,t,r,i){const n=await Qc(e);if(await t5(e,t,i),!n.addAttachment)throw new N(i,"Layer source does not support addAttachment capability");return n.addAttachment(t,r)}function t5(e,t,r){var s,o;const{attributes:i}=t,{objectIdField:n}=e;return(o=(s=e.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?t?i?n&&i[n]?Promise.resolve():Promise.reject(new N(r,`feature is missing the identifying attribute ${n}`)):Promise.reject(new N(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new N(r,"A feature is required to add/delete/update attachments")):Promise.reject(new N(r,"this layer doesn't support attachments"))}async function MAe(e,t,r,i,n){const s=await Qc(e);if(await t5(e,t,n),!s.updateAttachment)throw new N(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,r,i)}async function IAe(e,t,r){const{applyEdits:i}=await B(()=>import("./editingSupport-c35d47ee.js"),[]),n=await e.load();let s=r;return n.type==="feature"&&n.infoFor3D&&t.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await YAe(n,t.deleteFeatures,n.globalIdField)}),i(n,n.source,t,r)}async function CAe(e,t,r){const{uploadAssets:i}=await B(()=>import("./editingSupport-c35d47ee.js"),[]),n=await e.load();return i(n,n.source,t,r)}async function LAe(e,t,r,i){const n=await Qc(e);if(await t5(e,t,i),!n.deleteAttachments)throw new N(i,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,r)}async function AAe(e,t,r){const i=(await e.load({signal:t==null?void 0:t.signal})).source;if(!i.fetchRecomputedExtents)throw new N(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function kAe(e,t,r,i){var y,g,v,x;t=EAe.from(t),await e.load();const n=e.source,s=e.capabilities;if(!((y=s==null?void 0:s.data)!=null&&y.supportsAttachment))throw new N(i,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:c,size:h,start:f,where:m}=t;if(!((g=s==null?void 0:s.operations)!=null&&g.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(l==null?void 0:l.length)>0||(h==null?void 0:h.length)>0||c||f||m))throw new N(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a!=null&&a.length||l!=null&&l.length||m))throw new N(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new N(i,"Layer source does not support queryAttachments capability",t);return!((v=s==null?void 0:s.attachment)!=null&&v.supportsOrderByFields)&&((x=t.orderByFields)!=null&&x.length)&&((t=t.clone()).orderByFields=null),n.queryAttachments(t)}async function RAe(e,t,r,i){const n=await Qc(e);if(!n.queryObjectIds)throw new N(i,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(vn.from(t)??e.createQuery(),r)}async function OAe(e,t,r,i){const n=await Qc(e);if(!n.queryFeatureCount)throw new N(i,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(vn.from(t)??e.createQuery(),r)}async function NAe(e,t,r,i){const n=await Qc(e);if(!n.queryExtent)throw new N(i,"Layer source does not support queryExtent capability");return n.queryExtent(vn.from(t)??e.createQuery(),r)}async function PAe(e,t,r,i){const n=await Qc(e);if(!n.queryRelatedFeatures)throw new N(i,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(e5.from(t),r)}async function DAe(e,t,r,i){const n=await Qc(e);if(!n.queryRelatedFeaturesCount)throw new N(i,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(e5.from(t),r)}async function FAe(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(i!=null&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await VN(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function jAe(e){var o,a;const t=new vn,r=(o=e.capabilities)==null?void 0:o.data,i=(a=e.capabilities)==null?void 0:a.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,i&&(t.compactGeometryEnabled=i.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),r&&(r.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),r.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:s}=e;return t.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function Eee(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function Tee(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function VAe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function zAe(e,t,r,i){var l,c;const n=r==null?void 0:r.feature,s=!!((l=e.subtypes)!=null&&l.length);if(s&&!(r!=null&&r.excludeImpliedDomains)){const h=BAe(e,t);if(h)return h}const o=s&&UAe(e,n);if(o){const h=(c=o==null?void 0:o.domains)==null?void 0:c[t];return(h==null?void 0:h.type)==="inherited"?i:h}const a=Cee(e.types,e.typeIdField,n);if(a){const h=a.domains&&a.domains[t];if(h&&(h==null?void 0:h.type)!=="inherited")return h}if(i)return i;if(!(r!=null&&r.excludeImpliedDomains)){const h=GAe(e,t);if(h)return h}return null}function UAe(e,t){const{subtypes:r,subtypeField:i}=e;if(!(t!=null&&t.attributes)||!(r!=null&&r.length)||!i)return null;const n=t.attributes[i];return n==null?null:r.find(s=>s.code===n)}function BAe(e,t){var o,a;const{fieldsIndex:r,subtypeField:i}=e,{name:n,type:s}=r.get(t)??{};if(!n)return null;if((i&&((o=r.get(i))==null?void 0:o.name))===n&&((a=e.subtypes)!=null&&a.length)){const l=e.subtypes.map(c=>new Eh({code:Mee(c.code,s),name:c.name}));if(l!=null&&l.length)return new gE({codedValues:l})}return null}function GAe(e,t){var s,o;const{fieldsIndex:r}=e,{name:i,type:n}=r.get(t)??{};if(!i)return null;if(("typeIdField"in e?(s=r.get(e.typeIdField))==null?void 0:s.name:null)===i&&"types"in e&&((o=e.types)!=null&&o.length)){const a=e.types.map(l=>new Eh({code:Mee(l.id,n),name:l.name}));return new gE({codedValues:a})}return null}function Mee(e,t){return t?CJ({type:t})&&typeof e=="number"?`${e}`:Xwe({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function Qc(e){return(await e.load()).source}async function WBe(e,t){if(!Ee)return;const r=Ee.findCredential(e);if(r)return r.userId;let i;try{const n=await fN(e,t);n&&(i=await Ee.checkSignInStatus(`${n}/sharing`))}catch{}return i?i.userId:null}async function Iee(e,t){if(!Ee||Ee.findCredential(e))return;let r;try{const i=await fN(e,t);i&&(r=await Ee.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=t!=null?t.signal:null;await Ee.getCredential(e,{signal:i})}catch{}}async function qAe(e,t,r){var n;const i=(n=e.parsedUrl)==null?void 0:n.path;i&&e.authenticationTriggerEvent===t&&await Iee(i,r)}async function ZBe(e){var r;const t=(r=e.parsedUrl)==null?void 0:r.path;t&&HAe(e)&&await Iee(t)}function HAe(e){return WAe(e)&&("serviceDefinitionExpression"in e&&WS(e.serviceDefinitionExpression)||"definitionExpression"in e&&WS(e.definitionExpression))}function WAe(e){var t;return!(!pW(e)||!((t=e.capabilities)!=null&&t.query.supportsCurrentUser))}function WS(e){return!!(e!=null&&e.toLowerCase().includes("current_user"))}function ZAe(e){return!H2(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const sI=Ry({types:gY});function r5(e,t){var r;if(e.defaultSymbol)return(r=e.types)!=null&&r.length?new XP({defaultSymbol:sI(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(i=>({id:i.id,symbol:sI(i.symbol,i,t)}))}):new Al({symbol:sI(e.defaultSymbol,e,t)})}function JAe(e){var i,n,s;let t=(i=e.sourceJSON)==null?void 0:i.cacheMaxAge;if(!t)return!1;const r=(s=(n=e.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function YAe(e,t,r){if(t==null)return null;const i=[],{objectIdField:n}=e;if(t.forEach(c=>{let h=null;if("attributes"in c){const{attributes:f}=c;h={globalId:f[r],objectId:f[n]!=null&&f[n]!==-1?f[n]:null}}else h={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||i.push(h.globalId))}),i.length===0)return null;const s=e.createQuery();s.where=i.map(c=>`${r}='${c}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,r],s.cacheHint=!1;const o=await Yde(_Le(e,s));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const c of l){const h=c.attributes[r],f=c.attributes[n];h!=null&&f!=null&&f!==-1&&a.set(ZMe(h),f)}return a}function Cee(e,t,r){if(!t||!r||!e)return null;const i=r.getAttribute(t);return i==null?null:e.find(n=>{const{id:s}=n;return s!=null&&s.toString()===i.toString()})??null}function H2(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||QAe(e)}function QAe(e){var t,r;return!!((r=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&r.toLowerCase().split(",").map(i=>i.trim()).includes("map"))}function KAe(e,t,r){const i=t==null?void 0:t.queryAttributeBins;if(!i)throw new N(r,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!i.supportsAutoInterval)throw new N(r,"Layer source does not support auto-interval binning");if(e.binParameters.normalizationType&&(!i.supportsNormalization||!GV(e.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new N(r,"Layer source does not support normalization binning");break;case"date":if(!i.supportsDate)throw new N(r,"Layer source does not support date binning");if(e.binParameters.snapToData&&!i.supportsSnapToData)throw new N(r,"Layer source does not support snapToData binning");if(e.binParameters.returnFullIntervalBin&&!i.supportsReturnFullIntervalBin)throw new N(r,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!i.supportsFixedBoundaries)throw new N(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!i.supportsFixedInterval)throw new N(r,"Layer source does not support fixed-interval binning");if(e.binParameters.normalizationType&&(!i.supportsNormalization||!GV(e.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new N(r,"Layer source does not support normalization binning")}if(e.binParameters.stackBy&&!i.supportsStackBy)throw new N(r,"Layer source does not support stackBy binning");if(e.binParameters.splitBy&&!i.supportsSplitBy)throw new N(r,"Layer source does not support splitBy binning");if(e.binParameters.firstDayOfWeek&&!i.supportsFirstDayOfWeek)throw new N(r,"Layer source does not support firstDayOfWeek binning");const n=i==null?void 0:i.supportedStatistics;if(e.outStatistics&&n){const s=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of e.outStatistics){const a=s.get(o);if(a&&!n[a])throw new N(r,`Layer source does not support ${o} statistic type`)}}}function GV(e,t){return e!=null&&!!(t!=null&&t[$ee.toJSON(e)])}let Of=class extends Be.ClonableMixin(G){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Of.prototype,"shapeAreaField",void 0),u([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Of.prototype,"shapeLengthField",void 0),u([d({type:String,json:{read:e=>Ihe.read(e)||Che.read(e)}})],Of.prototype,"units",void 0),Of=u([T("esri.layers.support.GeometryFieldsInfo")],Of);const XAe=Of;var Lk;let Nf=Lk=class extends G{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ie}clone(){return new Lk({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([d({type:String,json:{write:{isRequired:!0}}})],Nf.prototype,"floorField",void 0),u([d({json:{read:!1,write:!1}})],Nf.prototype,"viewAllMode",void 0),u([d({json:{read:!1,write:!1}})],Nf.prototype,"viewAllLevelIds",void 0),Nf=Lk=u([T("esri.layers.support.LayerFloorInfo")],Nf);const eke=Nf,qV=new je({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),HV=new je({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Un=class extends Be.ClonableMixin(G){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([d({json:{read:qV.read,write:qV.write}})],Un.prototype,"cardinality",void 0),u([d({json:{name:"catalogID"}})],Un.prototype,"catalogId",void 0),u([d({json:{read:!0,write:!0}})],Un.prototype,"composite",void 0),u([d({json:{read:!0,write:!0}})],Un.prototype,"id",void 0),u([d({json:{read:!0,write:!0}})],Un.prototype,"keyField",void 0),u([d({json:{read:!0,write:!0}})],Un.prototype,"keyFieldInRelationshipTable",void 0),u([d({json:{read:!0,write:!0}})],Un.prototype,"name",void 0),u([d({json:{read:!0,write:!0}})],Un.prototype,"relatedTableId",void 0),u([d({json:{read:!0,write:!0}})],Un.prototype,"relationshipTableId",void 0),u([d({json:{read:HV.read,write:HV.write}})],Un.prototype,"role",void 0),Un=u([T("esri.layers.support.Relationship")],Un);const tke=Un,rke=[["binary","application/octet-stream","bin",""]];function QBe(e,t){return Ree(t.name,(e==null?void 0:e.supportedFormats)??[])!=null}function KBe(e,t){if(!e)return!1;const r=ike(t,e.supportedFormats??[]);return r!=null&&e.editFormats.includes(r)}function Lee(e,t){return n5(ake(e,t))}function Aee(e,t){return n5(Ree(e,t))}function XBe(e,t){return Oee(oke(e,t))}function ike(e,t){return Aee(e.name,t)??Lee(e.type,t)}function FE(e,t,r){return Lee(e,r)??Aee(t,r)}function kee({supportedFormats:e}){return FE("model/gltf-binary","glb",e)}function eGe(e){const t=kee(e);return t!=null&&e.editFormats.includes(t)}function nke({supportedFormats:e}){return FE("model/gltf+json","gltf",e)}function ske(e){if(!e)return null;const t=kee(e),r=nke(e);let i=null;for(const n of e.queryFormats){if(n===t)return n;n===r&&(i=n)}return i}function tGe({supportedFormats:e}){return FE("application/esri3do-SR_world","wld",e)}function rGe({supportedFormats:e}){return FE("application/esri3do-SR_prj","prj",e)}function i5(e){return[...rke,...e]}function oke(e,t){return i5(t).find(r=>n5(r)===e)}function ake(e,t){const r=e.toLowerCase();return i5(t).find(i=>Oee(i)===r)}function Ree(e,t){const r=e.toLowerCase();return i5(t).find(i=>lke(i).some(n=>r.endsWith(n)))}function n5(e){return e==null?void 0:e[0]}function Oee(e){return e==null?void 0:e[1].toLowerCase()}function lke(e){return(e==null?void 0:e[2].split(",").map(t=>t.toLowerCase()))??[]}function iGe(e){var t;return(t=e.tables)==null?void 0:t.find(r=>r.role==="assetMaps")}function ue(e,t,r){return!!Nee(e,t,r)}function Z0(e,t,r){return Nee(e,t,r)}function Nee(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const uke={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function cke(e){var r;const t=(r=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:r.map(i=>i.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Bw(e,t){var i;const r=(i=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:i.map(n=>n.toLowerCase());return!!(r!=null&&r.includes(t.toLowerCase()))}function dke(e){var r;const t=(r=e==null?void 0:e.supportedStatisticTypes)==null?void 0:r.map(i=>i.toLowerCase());return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_continuous")),percentileDiscrete:!!(t!=null&&t.includes("percentile_discrete")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function hke(e){var r;const t=(r=e==null?void 0:e.supportedNormalizationTypes)==null?void 0:r.map(i=>i.toLowerCase());return{field:!!(t!=null&&t.includes("field")),log:!!(t!=null&&t.includes("log")),naturalLog:!!(t!=null&&t.includes("naturallog")),percentOfTotal:!!(t!=null&&t.includes("percentoftotal")),squareRoot:!!(t!=null&&t.includes("squareroot"))}}function Pee(e,t){return{analytics:pke(e),attachment:fke(e),data:mke(e),metadata:yke(e),operations:gke(e.capabilities,e,t),query:vke(e,t),queryAttributeBins:_ke(e),queryRelated:wke(e),queryTopFeatures:bke(e),editing:xke(e)}}function pke(e){return{supportsCacheHint:Bw(e.advancedQueryCapabilities,"queryAnalytics")}}function fke(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Bw(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:ue(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:ue(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(i=>{const n=uke[i.name];n&&(r[n]=!!i.isEnabled)}),r}function mke(e){return{isVersioned:ue(e,"isDataVersioned",!1),isBranchVersioned:ue(e,"isDataBranchVersioned",!1),supportsAttachment:ue(e,"hasAttachments",!1),supportsM:ue(e,"hasM",!1),supportsZ:ue(e,"hasZ",!1)}}function yke(e){return{supportsAdvancedFieldProperties:ue(e,"supportsFieldDescriptionProperty",!1)}}function gke(e,t,r){const i=e?e.toLowerCase().split(",").map(m=>m.trim()):[],n=r?Ny(r):null,s=i.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&i.includes("create"),l=o&&i.includes("delete"),c=o&&i.includes("update");const h=i.includes("changetracking"),f=t.advancedQueryCapabilities;return o&&!(a||l||c)&&(a=l=c=!0),{supportsCalculate:ue(t,"supportsCalculate",!1),supportsTruncate:ue(t,"supportsTruncate",!1),supportsValidateSql:ue(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:ue(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:ue(f,"supportsQueryAttachments",!1),supportsQueryBins:ue(f,"supportsQueryBins",!1),supportsQueryTopFeatures:ue(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ue(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:ue(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:ue(t,"supportsAsyncConvert3D",!1)}}function vke(e,t){const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,s=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),a=!o||s>=F("mapserver-pbf-version-support"),l=Yx(t),c=new Set((e.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:Z0(e,"maxRecordCount",void 0),maxRecordCountFactor:Z0(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:Z0(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:cke(r),supportsCacheHint:ue(r,"supportsQueryWithCacheHint",!1)||Bw(r,"query"),supportsCentroid:ue(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsCurrentUser:ue(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:ue(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:ue(r,"supportsDisjointSpatialRel",!1),supportsDistance:ue(r,"supportsQueryWithDistance",!1),supportsDistinct:ue(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ue(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&c.has("pbf"),supportsFullTextSearch:ue(r,"supportsFullTextSearch",!1),supportsGeometryProperties:ue(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:ue(r,"supportsHavingClause",!1),supportsHistoricMoment:ue(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:ue(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:ue(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ue(r,"supportsPagination",!1),supportsPercentileStatistics:ue(r,"supportsPercentileStatistics",!1),supportsQuantization:ue(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ue(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:ue(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:ue(i,"allowOthersToQuery",!0),supportsQueryGeometry:ue(e,"supportsReturningQueryGeometry",!1),supportsResultType:ue(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!ske(e.infoFor3D),supportsSpatialAggregationStatistics:ue(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:ue(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ue(e,"useStandardizedQueries",!1),supportsStatistics:ue(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:ue(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:ue(r,"supportsTrueCurve",!1),tileMaxRecordCount:Z0(e,"tileMaxRecordCount",void 0)}}function wke(e){const t=e.advancedQueryCapabilities,r=ue(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ue(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:Bw(t,"queryRelated")}}function bke(e){return{supportsCacheHint:Bw(e.advancedQueryCapabilities,"queryTopFilter")}}function _ke(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:ue(t,"supportsDateBin",!1),supportsFixedInterval:ue(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:ue(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:ue(t,"supportsFixedBoundariesBin",!1),supportsStackBy:ue(t,"supportsStackBy",!1),supportsSplitBy:ue(t,"supportsSplitBy",!1),supportsSnapToData:ue(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:ue(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:ue(t,"supportsFirstDayOfWeek",!1),supportsNormalization:ue(t,"supportsNormalization",!1),supportedStatistics:dke(t),supportedNormalizationTypes:hke(t)}}function xke(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:ue(e,"allowGeometryUpdates",!0),supportsGlobalId:ue(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ue(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ue(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ue(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ue(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ue(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ue(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ue(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ue(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:ue(r,"supportsAsyncApplyEdits",!1),zDefault:Z0(e,"zDefault",void 0)}}function nGe(e){var t;return{operations:{supportsAppend:ue(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:ue(e,"supportsExportClip",!1),supportsExportFrameset:ue(e,"supportsExportFrameset",!1),supportsMensuration:ue(e,"supportsMensuration",!1),supportsUpdate:ue(e,"supportsUpdate",!1)}}}let il=class extends Be.ClonableMixin(G){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const i of Object.keys(t))r[i]=vE(t[i]);return r}writeDomains(t,r){var n;if(!t)return;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=(n=t[s])==null?void 0:n.toJSON());r.domains=i}};u([d({type:Number,json:{write:!0}})],il.prototype,"code",void 0),u([d({type:Object,json:{write:!0}})],il.prototype,"defaultValues",void 0),u([d({json:{write:!0}})],il.prototype,"domains",void 0),u([J("domains")],il.prototype,"readDomains",null),u([te("domains")],il.prototype,"writeDomains",null),u([d({type:String,json:{write:!0}})],il.prototype,"name",void 0),il=u([T("esri.layers.support.Subtype")],il);const Ske=il,$ke=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ie.ofType(la)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Ie.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}getFieldDomain(){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:n,operations:s,editing:o}=r;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||s.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(WS(this.serviceDefinitionExpression)||WS(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(JAe(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const i=this.editFieldsInfo;return(i!=null&&i.creatorField||i!=null&&i.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,i){return Pee(i,this.url)}readEditingInfo(r,i){const{editingInfo:n}=i;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const i=O(r),{operations:n,editing:s}=i;return H2(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),i)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,i){return Eee(i)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||H2(this))return!1;const{operations:i,editing:n}=r;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:i,editing:n}=r;return H2(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(r,i){return i.type==="Table"}readMaxScale(r,i){return i.effectiveMaxScale||r||0}readMinScale(r,i){return i.effectiveMinScale||r||0}readObjectIdFieldFromService(r,i){return Tee(i)}readServiceDefinitionExpression(r,i){return i.definitionQuery||i.definitionExpression}set url(r){if(r==null)return void this._set("url",r);const i=yde({layer:this,url:r,nonStandardUrlAllowed:!0,logger:W.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(r,i,n,s){gde(this,r,null,i,s)}readVersion(r,i){return VAe(i)}};return u([d({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),u([d({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),u([d({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),u([J("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),u([d(v1("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),u([d({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),u([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),u([d({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),u([d({readOnly:!0,type:bLe})],t.prototype,"editFieldsInfo",void 0),u([d({readOnly:!0})],t.prototype,"editingInfo",void 0),u([J("editingInfo")],t.prototype,"readEditingInfo",null),u([d({readOnly:!0})],t.prototype,"effectiveCapabilities",null),u([d()],t.prototype,"effectiveEditingEnabled",null),u([d((()=>{const r=O(ZX),i=r.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),u([d()],t.prototype,"fieldsIndex",void 0),u([d({type:eke,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:jt}}})],t.prototype,"floorInfo",void 0),u([d({type:bt,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),u([d()],t.prototype,"gdbVersion",void 0),u([d({readOnly:!0,type:XAe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),u([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Ck.read}}}})],t.prototype,"geometryType",void 0),u([d({type:String})],t.prototype,"globalIdField",void 0),u([J("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),u([d({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),u([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),u([d({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),u([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),u([d({readOnly:!0,type:Tw})],t.prototype,"heightModelInfo",void 0),u([d({type:Date})],t.prototype,"historicMoment",void 0),u([d({type:ie.ofType(la),readOnly:!0})],t.prototype,"indexes",void 0),u([d({readOnly:!0})],t.prototype,"isTable",void 0),u([J("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),u([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),u([d(wLe)],t.prototype,"maxScale",void 0),u([J("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),u([d(vLe)],t.prototype,"minScale",void 0),u([J("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),u([d({type:String})],t.prototype,"objectIdField",void 0),u([J("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),u([d(v1("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),u([d({type:[tke],readOnly:!0})],t.prototype,"relationships",void 0),u([d({type:Boolean})],t.prototype,"returnM",void 0),u([d({type:Boolean})],t.prototype,"returnZ",void 0),u([d({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),u([d({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),u([J("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),u([d({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),u([d()],t.prototype,"sourceJSON",void 0),u([d({type:Ie,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),u([d({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),u([d({type:[Ske],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),u([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),u([d(HX)],t.prototype,"url",null),u([te("url")],t.prototype,"writeUrl",null),u([d({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),u([J("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=u([T("esri.layers.mixins.FeatureLayerBase")],t),t};let Pf=class extends Be.ClonableMixin(G){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};u([d({type:String,json:{write:!0}})],Pf.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],Pf.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Pf.prototype,"returnType",void 0),Pf=u([T("esri.layers.support.ExpressionInfo")],Pf);const s5=Pf;var Ak;let nl=Ak=class extends G{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new Ak({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:O(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};u([d({type:Boolean,json:{write:!0}})],nl.prototype,"isAutoGenerated",void 0),u([d({type:String,json:{write:!0}})],nl.prototype,"name",void 0),u([d({type:String,json:{write:!0}})],nl.prototype,"alias",void 0),u([d({type:String,json:{write:!0}})],nl.prototype,"onStatisticField",void 0),u([d({type:s5,json:{write:!0}})],nl.prototype,"onStatisticExpression",void 0),u([d({type:String,json:{write:!0}})],nl.prototype,"statisticType",void 0),nl=Ak=u([T("esri.layers.support.AggregateField")],nl);const Dc=nl;let _c=class extends G{constructor(){super(...arguments),this.type=null}};u([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],_c.prototype,"type",void 0),_c=u([T("esri.layers.support.FeatureReduction")],_c);const o5="__begin__",a5="__end__",Eke=new RegExp(o5,"ig"),Tke=new RegExp(a5,"ig"),WV=new RegExp("^"+o5,"i"),ZV=new RegExp(a5+"$","i"),ZS='"',Mke=ZS+" + ",Ike=" + "+ZS;function Cke(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function Lke(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function l5(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Cke(e.labelExpression),t.type="conventional"),t}function Ake(e){const t=l5(e);switch(t.type){case"conventional":return kk(t.expression);case"arcade":return t.expression}return null}function kke(e){const t=l5(e);switch(t.type){case"conventional":return Oke(t.expression);case"arcade":return Dee(t.expression)}return null}function kk(e){let t;return e?(t=nw(e,r=>o5+'$feature["'+r+'"]'+a5),t=WV.test(t)?t.replace(WV,""):ZS+t,t=ZV.test(t)?t.replace(ZV,""):t+ZS,t=t.replaceAll(Eke,Mke).replaceAll(Tke,Ike)):t='""',t}const Rke=/^\s*\{([^}]+)\}\s*$/i;function Oke(e){const t=e==null?void 0:e.match(Rke);return(t==null?void 0:t[1].trim())||null}const Nke=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,Pke=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Dke=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Dee(e){if(!e)return null;let t=Nke.exec(e)||Pke.exec(e);return t?t[1]||t[3]:(t=Dke.exec(e),t?t[2]:null)}var Rk;let Lu=Rk=class extends G{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?kk(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=kk(this.value)),e!=null&&(t[r]=e)}clone(){return new Rk({expression:this.expression,title:this.title,value:this.value})}};u([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Lu.prototype,"expression",void 0),u([J("expression",["expression","value"])],Lu.prototype,"readExpression",null),u([te("expression")],Lu.prototype,"writeExpression",null),u([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Lu.prototype,"title",void 0),u([d({json:{read:!1,write:!1}})],Lu.prototype,"value",void 0),Lu=Rk=u([T("esri.layers.support.LabelExpressionInfo")],Lu);const Fee=Lu;var Ok;const s_=new je({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function o_(e,t,r){return{enabled:!mC(r==null?void 0:r.layer)}}function jee(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function Fke(e){return(e==null?void 0:e.type)==="map-image"}function Vee(e){var t,r;return!!Fke(e)&&!!((r=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&r.supportsArcadeExpressionForLabeling)}function jke(e){return jee(e)||Vee(e==null?void 0:e.layer)}let nr=Ok=class extends G{static evaluateWhere(e,t){const r=(i,n,s)=>{switch(n){case"=":return i==s;case"<>":return i!=s;case">":return i>s;case">=":return i>=s;case"<":return i<s;case"<=":return i<=s}return!1};try{if(e==null)return!0;const i=e.split(" ");if(i.length===3)return r(t[i[0]],i[1],i[2]);if(i.length===7){const n=r(t[i[0]],i[1],i[2]),s=i[3],o=r(t[i[4]],i[5],i[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=nAe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=Lke(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const i=Dee(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(e==null&&this.labelExpression!=null&&jee(i))e=new Fee({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(i);n.expression&&(t[r]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return l5(this)}getLabelExpressionArcade(){return Ake(this)}getLabelExpressionSingleField(){return kke(this)}hash(){return JSON.stringify(this)}clone(){return new Ok({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:O(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:O(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};u([d({type:String,json:{write:!0}})],nr.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:o_}}}}})],nr.prototype,"allowOverrun",void 0),u([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:o_}}}}})],nr.prototype,"deconflictionStrategy",void 0),u([d({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&Vee(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],nr.prototype,"labelExpression",void 0),u([J("labelExpression")],nr.prototype,"readLabelExpression",null),u([te("labelExpression")],nr.prototype,"writeLabelExpression",null),u([d({type:Fee,json:{write:{overridePolicy:(e,t,r)=>jke(r)?{allowNull:!0}:{enabled:!1}}}})],nr.prototype,"labelExpressionInfo",void 0),u([te("labelExpressionInfo")],nr.prototype,"writeLabelExpressionInfo",null),u([d({type:s_.apiValues,json:{type:s_.jsonValues,read:s_.read,write:s_.write}})],nr.prototype,"labelPlacement",void 0),u([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],nr.prototype,"labelPosition",void 0),u([d({type:Number})],nr.prototype,"maxScale",void 0),u([te("maxScale")],nr.prototype,"writeMaxScale",null),u([d({type:Number})],nr.prototype,"minScale",void 0),u([te("minScale")],nr.prototype,"writeMinScale",null),u([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:o_}}}}})],nr.prototype,"repeatLabel",void 0),u([d({type:Number,cast:qe,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:o_}}}}})],nr.prototype,"repeatLabelDistance",void 0),u([d({types:f_e,json:{origins:{"web-scene":{types:m_e,write:OV,default:null}},write:OV,default:null}})],nr.prototype,"symbol",void 0),u([d({type:Boolean,json:{write:!0}})],nr.prototype,"useCodedValues",void 0),u([d({type:String,json:{write:!0}})],nr.prototype,"where",void 0),nr=Ok=u([T("esri.layers.support.LabelClass")],nr);const Qy=nr;var Nk;let Au=Nk=class extends G{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new Nk({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};u([d({type:String,json:{write:!0}})],Au.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Au.prototype,"label",void 0),u([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Au.prototype,"minValue",void 0),u([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Au.prototype,"maxValue",void 0),u([d(JP)],Au.prototype,"symbol",void 0),Au=Nk=u([T("esri.renderers.support.ClassBreakInfo")],Au);const JS=Au;var Pk;const zee="log",W2="percent-of-total",Z2="field",a_=new je({esriNormalizeByLog:zee,esriNormalizeByPercentOfTotal:W2,esriNormalizeByField:Z2}),Vke=Er(JS);let br=Pk=class extends Yy(Gl){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map(n=>{const s=new JS;return s.read(n,r),s.minValue==null&&(s.minValue=i),s.maxValue==null&&(s.maxValue=s.minValue),i=s.maxValue,s})}writeClassBreakInfos(e,t,r,i){const n=e.map(s=>s.write({},i));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),t[r]=n}castField(e){return e==null?e:typeof e=="function"?(W.getLogger(this).error(".field: field must be a string value"),null):fw(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&Z2||r&&W2||null,t&&r&&W.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==Z2&&e!==W2||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new JS({minValue:e,maxValue:t,symbol:vY(r)}):Vke(O(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&W.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await $a()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void W.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const n=await $a(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((i,n)=>i+n.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new Pk({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:O(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:O(this.visualVariables),legendOptions:O(this.legendOptions),authoringInfo:O(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map(i=>i.collectRequiredFields(e,t)),ki(e,t,this.valueExpression)];Qi(e,t,this.field),Qi(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!l){const f=c.createSyntaxTree(a);l=c.createFunction(f),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const h=c.executeFunction(l,c.createExecContext(e,c.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let n=parseFloat(r[t]);if(i){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===zee)n=Math.log(n)*Math.LOG10E;else if(i!==W2||s==null||isNaN(s)){if(i===Z2&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};u([d(YP)],br.prototype,"backgroundFillSymbol",void 0),u([d({type:[JS],json:{write:{isRequired:!0}}})],br.prototype,"classBreakInfos",void 0),u([J("classBreakInfos")],br.prototype,"readClassBreakInfos",null),u([te("classBreakInfos")],br.prototype,"writeClassBreakInfos",null),u([d({type:String,json:{write:!0}})],br.prototype,"defaultLabel",void 0),u([d(DE)],br.prototype,"defaultSymbol",void 0),u([d({type:String,json:{write:!0}})],br.prototype,"field",void 0),u([He("field")],br.prototype,"castField",null),u([d({type:Boolean})],br.prototype,"isMaxInclusive",void 0),u([d({type:QP,json:{write:!0}})],br.prototype,"legendOptions",void 0),u([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],br.prototype,"minValue",null),u([d({type:String,json:{write:!0}})],br.prototype,"normalizationField",void 0),u([d({type:Number,json:{write:!0}})],br.prototype,"normalizationTotal",void 0),u([d({type:a_.apiValues,value:null,json:{type:a_.jsonValues,read:a_.read,write:a_.write}})],br.prototype,"normalizationType",null),u([ve({classBreaks:"class-breaks"})],br.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],br.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],br.prototype,"valueExpressionTitle",void 0),br=Pk=u([T("esri.renderers.ClassBreaksRenderer")],br);const Uee=br,Dk=-3,zke=Dk-1;var hl;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(hl||(hl={}));let Uke=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Oh,this._users=new Oh}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,r){const i=this._db.get(t.id+r);return(i==null?void 0:i.size)??0}put(t,r,i,n,s){r=t.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(r),o.entry!==i&&this._notifyRemove(r,o.entry,o.size,hl.ALL)),n>this._maxSize)return void this._notifyRemove(r,i,n,hl.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${r}`),void this._notifyRemove(r,i,0,hl.ALL);const a=1+Math.max(s,zke)-Dk;this._db.set(r,new Bke(i,n,a)),this._size+=n,t.size+=n,this._checkSize()}updateSize(t,r,i,n){r=t.id+r;const s=this._db.get(r);if(s&&s.entry===i){for(this._size-=s.size,t.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(r,i,n,hl.SOME);if(!(o!=null&&o>0))return void this._db.delete(r);n=o}s.size=n,this._size+=n,t.size+=n,this._checkSize()}}pop(t,r){r=t.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(t,r){r=t.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(t,r){const i=this._db.get(t.id+r);return i?++this._hit:++this._miss,i==null?void 0:i.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;i[l]=(i[l]||0)+o.size,this._users.forAll(c=>{const{id:h,name:f}=c;if(a.startsWith(h)){const m=r[f]||0;r[f]=m+o.size}})});const n={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=r[a]||0;r[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(r);s.sort((o,a)=>r[a]-r[o]),s.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+n[o]);for(let o=i.length-1;o>=0;--o){const a=i[o];a&&(t["Priority "+(o+Dk-1)]=Math.round(a/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const r=t.id;this._db.forEach((i,n)=>{n.startsWith(r)&&(this._size-=i.size,this._db.delete(n),this._notifyRemove(n,i.entry,i.size,hl.ALL))}),t.size=0}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,t.size,hl.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i,n){let s;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const a=o[1](r,n,i);return typeof a=="number"&&(s=a),!0}return!1}),s}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const r=t??this;if(r.maxSize<0||r.size<=r.maxSize)return;const i=t==null?void 0:t.id;let n=!0;for(;n;){n=!1;for(const[s,o]of this._db)if(o.lifetime===0&&(!i||s.startsWith(i))){if(this._purgeItem(s,o,t),r.size<=.9*r.maxSize)return;n||(n=this._db.has(s))}}for(const[s,o]of this._db)if((!i||s.startsWith(i))&&(this._purgeItem(s,o,t),r.size<=.9*r.maxSize))return}_purgeItem(t,r,i=this._users.find(n=>t.startsWith(n.id))){if(this._db.delete(t),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const n=this._notifyRemove(t,r.entry,r.size,hl.SOME);n!=null&&n>0&&(this._size+=n,i&&(i.size+=n),r.lives=r.lifetime,r.size=n,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},Bke=class{constructor(t,r,i){this.entry=t,this.size=r,this.lifetime=i,this.lives=i}},Bee=class{constructor(t,r){this._storage=new Uke,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,i=1){this._storage.put(this,t,r,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}};function Gke(e){return"timeZone"in e}function qke(e){return"timeZone"in e}function Hke(e){return"dateFieldsTimeZone"in e}const Wke=new Map;let Gee=class J2{static fromJSON(t){return new J2(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new J2(t.fields??[],YV(t))}static fromLayerJSON(t){return new J2(t.fields??[],YV(t))}constructor(t=[],r){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=JV(o);if(o&&a){const l=yh(o);this._fieldsMap.set(o,s),this._fieldsMap.set(l,s),this._normalizedFieldsMap.set(a,s),i.push(`${l}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),BN(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):IJ(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),Fj(s)||jj(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)Fj(t)||jj(t)||t.nullable||Bwe(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(yh(t))??this._normalizedFieldsMap.get(JV(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(W.getLogger("esri.layers.support.FieldsIndex").errorOnce(new N("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),_a):qee.has(r.type)?ip:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===ip?xo.instance:r===_a?Jr.utcInstance:pw(Wke,r,()=>In.create(r)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return LJ(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;return((r=this.get(t))==null?void 0:r.name)??void 0}toJSON(){return{fields:this.fields.map(t=>G.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function yh(e){return e.trim().toLowerCase()}function JV(e){var t;return((t=Cwe(e))==null?void 0:t.toLowerCase())??""}const qee=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function YV(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:n}=e,s=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",a=Hke(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?H_(e.dateFieldsTimeReference):null,l=n?Gke(n)?n.timeZone??a:n.dateFieldsTimeReference?H_(n.dateFieldsTimeReference):a??_a:null,c=i?qke(i)?i.timeZone??a:i.timeReference?H_(i.timeReference):a:null,h=new Map([[yh((n==null?void 0:n.creationDateField)??""),l],[yh((n==null?void 0:n.editDateField)??""),l],[yh(s),c],[yh(o),c]]);for(const{name:f,type:m}of e.fields)if(qee.has(m))t.set(f,ip);else if(m!=="date"&&m!=="esriFieldTypeDate")t.set(f,null);else if(r)t.set(f,ip);else{const y=h.get(yh(f??""))??a;t.set(f,y)}return t}var QV,KV,XV,e9,t9,r9,i9,n9,s9,o9,Fk,jk,a9,l9,u9,c9,d9,h9,p9,f9,m9,y9,g9,v9,w9,b9,_9,x9,S9,$9,E9,T9,M9,I9,C9,L9,A9,k9,R9,O9,N9,P9,D9,F9,j9,V9,z9,U9,B9,G9,q9,H9,W9,Z9,J9,YS,Y9,Q9,K9,X9,ez,tz,rz;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(QV||(QV={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(KV||(KV={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(XV||(XV={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(e9||(e9={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(t9||(t9={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(r9||(r9={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(i9||(i9={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(n9||(n9={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(s9||(s9={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(o9||(o9={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(Fk||(Fk={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(jk||(jk={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(a9||(a9={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(l9||(l9={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(u9||(u9={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(c9||(c9={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(d9||(d9={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(h9||(h9={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(p9||(p9={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(f9||(f9={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(m9||(m9={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(y9||(y9={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(g9||(g9={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(v9||(v9={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(w9||(w9={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(b9||(b9={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(_9||(_9={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(x9||(x9={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(S9||(S9={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}($9||($9={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(E9||(E9={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(T9||(T9={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(M9||(M9={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AlongLine=1]="AlongLine"}(I9||(I9={})),function(e){e[e.Auto=0]="Auto",e[e.Clockwise=1]="Clockwise",e[e.Counterclockwise=2]="Counterclockwise"}(C9||(C9={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(L9||(L9={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(A9||(A9={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(k9||(k9={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(R9||(R9={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(O9||(O9={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(N9||(N9={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(P9||(P9={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(D9||(D9={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(F9||(F9={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(j9||(j9={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(V9||(V9={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(z9||(z9={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(U9||(U9={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(B9||(B9={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(G9||(G9={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(q9||(q9={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(H9||(H9={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(W9||(W9={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(Z9||(Z9={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(J9||(J9={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(YS||(YS={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(Y9||(Y9={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(Q9||(Q9={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(K9||(K9={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(X9||(X9={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(ez||(ez={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(tz||(tz={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(rz||(rz={}));const Zke={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},Vk={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:YS.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:YS.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:Fk.Loop,repeatdelay:0,easing:jk.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function Jke(e){return typeof e=="function"}function dGe(e,t,r,i){return Jke(e)?e(t,r,i):e}function hGe(e){return[e.r,e.g,e.b,e.a]}const Yke=` /-,
`;function iz(e){let t=e.length;for(;t--;)if(!Yke.includes(e.charAt(t)))return!1;return!0}function pGe(e,t){const r=[];let i=0,n=-1;do if(n=e.indexOf("[",i),n>=i){if(n>i){const s=e.slice(i,n);r.push([s,null,iz(s)])}if(i=n+1,n=e.indexOf("]",i),n>=i){if(n>i){const s=t[e.slice(i,n)];s&&r.push([null,s,!1])}i=n+1}}while(n!==-1);if(i<e.length){const s=e.slice(i);r.push([s,null,iz(s)])}return r}function fGe(e,t,r,i){let n="",s=null;for(const o of t){const[a,l,c]=o;if(a)c?s=a:(s&&(n+=s,s=null),n+=a);else{let h=l;r!=null&&(h=Zee(l,r));const f=e.attributes[h];f&&(s&&(n+=s,s=null),n+=f)}}return Qke(n,i)}function Qke(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function mGe(e,t,r,i,n,s,o=!0){const a=t/n,l=r/s,c=Math.ceil(a/2),h=Math.ceil(l/2);for(let f=0;f<s;f++)for(let m=0;m<n;m++){const y=4*(m+(o?s-f-1:f)*n);let g=0,v=0,x=0,b=0,_=0,S=0,$=0;const M=(f+.5)*l;for(let I=Math.floor(f*l);I<(f+1)*l;I++){const C=Math.abs(M-(I+.5))/h,L=(m+.5)*a,V=C*C;for(let P=Math.floor(m*a);P<(m+1)*a;P++){let z=Math.abs(L-(P+.5))/c;const Y=Math.sqrt(V+z*z);Y>=-1&&Y<=1&&(g=2*Y*Y*Y-3*Y*Y+1,g>0&&(z=4*(P+I*t),$+=g*e[z+3],x+=g,e[z+3]<255&&(g=g*e[z+3]/250),b+=g*e[z],_+=g*e[z+1],S+=g*e[z+2],v+=g))}}i[y]=b/v,i[y+1]=_/v,i[y+2]=S/v,i[y+3]=$/x}}function Hee(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function Wee(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function zk(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function Uk(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function Kke(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function z1(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const yGe=(e,t=0)=>e==null||isNaN(e)?t:e,gGe=(e,t)=>e??t,vGe=(e,t)=>e??t,wGe=e=>e.tintColor?Hee(e.tintColor):[255,255,255,1],bGe=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function _Ge(){return B(()=>import("./geometryEngineJSON-59bdfd38.js").then(e=>e.g),["assets/geometryEngineJSON-59bdfd38.js","assets/geometryEngineBase-58446043.js","assets/_commonjsHelpers-2f3e7994.js","assets/json-48e3ea08.js"])}function xGe(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function SGe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function $Ge(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function EGe(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function nz(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=nz(t);if(r!=null)return r}break;case"CIMTextSymbol":return nz(e.symbol);case"CIMSolidFill":return e.color}return null}function sz(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const r of t){const i=sz(r);if(i!=null)return i}break}case"CIMTextSymbol":return sz(e.symbol);case"CIMSolidStroke":return e.color}}function oz(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=oz(t);if(r!==void 0)return r}break;case"CIMTextSymbol":return oz(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function TGe(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function MGe(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function IGe(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const CGe=e=>e.includes("data:image/svg+xml");function LGe(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function u5(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function AGe(e,t,r,i,n,s,o=!0){const{infos:a}=s;let l=1,c=0,h=0,f=0,m=1;for(const{absoluteAnchorPoint:v,offsetX:x,offsetY:b,rotation:_,size:S,frameHeight:$,rotateClockWise:M,scaleSymbolsProportionally:I}of a)m=v?1:l,h=lz(x,b,c,m,h),f=az(x,b,c,m,f),$&&(I||o)&&(l*=S/$),c=uz(_,M,c);const y=lz(i,n,c,m,h),g=az(i,n,c,m,f);return{size:e*l,rotation:uz(t,r,c),offsetX:y,offsetY:g}}function Xke(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>Xke(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function eRe(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...Zke[t]];const r=Vk[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function tRe(e){return e.split(" ").map(t=>Number(t))}function rRe(e){return typeof e=="string"?tRe(e):e}function kGe(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=rRe(e.dashTemplate)),e}function Bk(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return Bk(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return Bk(r.symbol)}}return"Normal"}function RGe(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const i=r.size??Vk.CIMVectorMarker.size;i>t&&(t=i);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const i=r.width;i!=null&&i>t&&(t=i);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&z1(r.markerPlacement)){const i=r.size??Vk.CIMVectorMarker.size;i>t&&(t=i)}break;case"CIMPictureFill":{const i=r.height;i!=null&&i>t&&(t=i)}}}return t}}}function Zee(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function OGe(e){return e.map(t=>({...t,propertyName:u5(t.propertyName)}))}function NGe(e){const t={};for(const r in e){const i=e[r];t[u5(r)]=i}return t}function az(e,t,r,i,n){const s=r*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*e+o*t)*i+n}return t*i+n}function lz(e,t,r,i,n){const s=r*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*i+n:e*i+n}function uz(e,t,r){return t?r-e:r+e}function PGe(e,t,r){const i=r==="Color"||r==="TintColor"||r==="ToColor",n=r==="Rotation"||r==="Angle"||r==="ToRotation";let s=t[u5(r)];if(s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=eRe(t.type,r.toLowerCase()),s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),t.primitiveName!=null){const o=e[t.primitiveName];if(o!=null){const a=o[r];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(s=a,s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:a,defaultValue:s},s!=null&&(i?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${r}".`);return s}function DGe(e,t){return Math.max(Math.min((e??t)/100,1),0)}const cz="esri.renderers.support.DictionaryLoader",iRe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Jee=class{constructor(t,r,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Bee(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=r,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){var f;let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{i=await this._dictionaryPromise}catch(m){if(Ri(m))return this._dictionaryPromise=null,null}const n=(f=this._dictionaryVersion)==null?void 0:f.greaterEqual(4,0),s={};if(this.fieldMap)for(const m of this._symbolFields){const y=Zee(this.fieldMap[m],this._fieldIndex);if(y){const g=t.attributes[y];s[m]=n?g:g!=null?""+t.attributes[y]:""}else s[m]=""}let o=null;try{o=i==null?void 0:i(s,r)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const a=o.split(";"),l=[],c=[];for(let m=0;m<a.length;m++){const y=a[m];if(y){if(y.includes("po:")){const g=y.slice(3).split("|");if(g.length===3){const v=g[0],x=g[1];let b=g[2];const _="countrylabel";if(v===_&&x==="TextString"){if(this.fieldMap!=null){let S=this.fieldMap[_];S==null&&(S=_,this.fieldMap[S]=S),t.attributes[S]=b}continue}if(x==="DashTemplate")b=b.split(" ").map(S=>Number(S));else if(x==="Color"){const S=new Q(b).toRgba();b=[S[0],S[1],S[2],255*S[3]]}else b=Number(b);c.push({primitiveName:v,propertyName:x,value:b,defaultValue:null})}}else if(y.includes("|")){for(const g of y.split("|"))if(this._itemNames.has(g)){l.push(g);break}}else if(this._itemNames.has(y))l.push(y);else if(m===0){l.length=0;let g="Invalid_P";t.geometry!=null&&(Dh(t.geometry)?g="Invalid_A":MN(t.geometry)&&(g="Invalid_L")),l.push(g);break}}}const h=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,l,c,h,r)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void W.getLogger(cz).error("no valid URL!");const r=ft(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:i}]=await Promise.all([r,$a()]);if(!i)throw this._dictionaryPromise=null,new N("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:s,expression:o,itemsNames:a}=i,l=o;let c=!1;s&&(this._dictionaryVersion=hX.parse(s),c=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=n.symbol;const h={};if(this.config){const y=this.config;for(const g in y)h[g]=y[g]}if(n.configuration)for(const y of n.configuration)h.hasOwnProperty(y.name)||(h[y.name]=y.value);const f=[];if(t!=null&&t.fields&&this.fieldMap)for(const y in this.fieldMap){const g=this.fieldMap[y],v=t.fields.filter(x=>x.name.toLowerCase()===(g==null?void 0:g.toLowerCase()));v.length>0&&f.push({...v[0],type:c?v[0].type:"esriFieldTypeString"})}f.length>0&&(this._fieldIndex=new Gee(f));const m=Twe(l,t!=null?t.spatialReference:null,f,h).then(y=>{const g={scale:0};return(v,x)=>{if(y==null)return null;const b=y.repurposeFeature({geometry:null,attributes:v});return g.scale=x!=null?x.scale??void 0:void 0,y.evaluate({$feature:b,$view:g},y.services)}}).catch(y=>(W.getLogger(cz).error("Creating dictionary expression failed:",y),null));return this._dictionaryPromise=m,m}async _cimPartsToCIMSymbol(t,r,i,n,s){const o=new Array(r.length);for(let c=0;c<r.length;c++)o[c]=this._getSymbolPart(r[c],s);let a=await Promise.all(o);const l=this.fieldMap;if(l&&a.length>0){const{OverrideHelper:c}=await B(()=>import("./OverrideHelper-a2a5ba17.js").then(h=>h.O),["assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js"]);a=O(a);for(const h of a)c.applyDictionaryTextOverrides(h,t,l,this._fieldIndex,Bk(h))}return new Zc({data:nRe(a,i,n)})}async _getSymbolPart(t,r){const i=this._symbolCache.get(t);if(i)return i;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),s=ft(n,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,s),s.finally(()=>this._ongoingRequests.delete(t));try{const o=await s;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function nRe(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.effects=null,i.symbolLayers=[];for(const n of e){const s=n;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);i.symbolLayers.unshift(...s.symbolLayers)}}return r&&(i.callout=iRe),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var Gk;let lo=Gk=class extends Yy(Gl){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new Jee(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i!=null&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new Gk({config:O(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:O(this.fieldMap),url:O(this.url),visualVariables:O(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await ki(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};u([d({type:Jee})],lo.prototype,"_loader",null),u([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],lo.prototype,"config",void 0),u([d({type:Object,json:{write:!0}})],lo.prototype,"fieldMap",void 0),u([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],lo.prototype,"scaleExpression",void 0),u([te("scaleExpression")],lo.prototype,"writeData",null),u([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],lo.prototype,"scaleExpressionTitle",void 0),u([d({type:String,json:{write:!0}})],lo.prototype,"url",void 0),u([te("visualVariables")],lo.prototype,"writeVisualVariables",null),lo=Gk=u([T("esri.renderers.DictionaryRenderer")],lo);const sRe=lo;var qk;let sl=qk=class extends G{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(W.getLogger(this).error(".field: field must be a string value"),null):fw(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new qk({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([d({type:Q,json:{type:[Number],write:!0}})],sl.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],sl.prototype,"field",void 0),u([He("field")],sl.prototype,"castField",null),u([d({type:String,json:{write:!0}})],sl.prototype,"label",void 0),u([d({type:String,json:{write:!0}})],sl.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],sl.prototype,"valueExpressionTitle",void 0),sl=qk=u([T("esri.renderers.support.AttributeColorInfo")],sl);const Yee=sl;var Hk;let Y2=Hk=class extends G{constructor(){super(...arguments),this.unit=null}clone(){return new Hk({unit:this.unit})}};u([d({type:String,json:{write:!0}})],Y2.prototype,"unit",void 0),Y2=Hk=u([T("esri.renderers.support.DotDensityLegendOptions")],Y2);const oRe=Y2;var Wk;let ln=Wk=class extends Yy(Gl){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Q([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new en,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Ul({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new Wk({attributes:O(this.attributes),backgroundColor:O(this.backgroundColor),dotBlendingEnabled:O(this.dotBlendingEnabled),dotShape:O(this.dotShape),dotSize:O(this.dotSize),dotValue:O(this.dotValue),legendOptions:O(this.legendOptions),outline:O(this.outline),referenceScale:O(this.referenceScale),seed:O(this.seed),visualVariables:O(this.visualVariables),authoringInfo:O(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(r=>r.field||r.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await ki(e,t,r.valueExpression),r.field&&e.add(r.field)}};u([d({type:[Yee],json:{write:!0}})],ln.prototype,"attributes",void 0),u([d({type:Q,json:{write:!0}})],ln.prototype,"backgroundColor",void 0),u([d({type:Boolean,json:{write:!0}})],ln.prototype,"dotBlendingEnabled",void 0),u([d({type:String,json:{write:!1}})],ln.prototype,"dotShape",void 0),u([d({type:Number,json:{write:!0}})],ln.prototype,"dotSize",void 0),u([d({type:oRe,json:{write:!0}})],ln.prototype,"legendOptions",void 0),u([d({type:en,json:{default:null,write:!0}})],ln.prototype,"outline",void 0),u([d({type:Number,json:{write:!0}})],ln.prototype,"dotValue",void 0),u([d({type:Number,json:{write:!0}})],ln.prototype,"referenceScale",void 0),u([d({type:Number,json:{write:!0}})],ln.prototype,"seed",void 0),u([ve({dotDensity:"dot-density"})],ln.prototype,"type",void 0),ln=Wk=u([T("esri.renderers.DotDensityRenderer")],ln);const aRe=ln;var Zk;let J0=Zk=class extends G{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new Zk({color:this.color&&this.color.clone(),ratio:this.ratio})}};u([d({type:Q,json:{type:[Xe],default:null,write:{isRequired:!0}}})],J0.prototype,"color",void 0),u([d({type:Number,json:{write:{isRequired:!0}}})],J0.prototype,"ratio",void 0),J0=Zk=u([T("esri.renderers.support.HeatmapColorStop")],J0);const Pv=J0;let Df=class extends Be.ClonableMixin(G){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([d({type:String,json:{write:!0}})],Df.prototype,"minLabel",void 0),u([d({type:String,json:{write:!0}})],Df.prototype,"maxLabel",void 0),u([d({type:String,json:{write:!0}})],Df.prototype,"title",void 0),Df=u([T("esri.renderers.support.HeatmapLegendOptions")],Df);function lRe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function uRe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function cRe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function dRe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function Qee(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function Kee(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function Xee(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function hRe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function pRe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function fRe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function mRe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function yRe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function gRe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function vRe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function ete(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+s*s)}function tte(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return r*r+i*i+n*n+s*s}function rte(e){const t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function ite(e){const t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function wRe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function bRe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function _Re(e,t){const r=t[0],i=t[1],n=t[2],s=t[3];let o=r*r+i*i+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=s*o),e}function xRe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function nte(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e[3]=a+i*(r[3]-a),e}function SRe(e,t=1){const r=K$;let i,n,s,o,a,l;do i=2*r()-1,n=2*r()-1,a=i*i+n*n;while(a>=1);do s=2*r()-1,o=2*r()-1,l=s*s+o*o;while(l>=1);const c=Math.sqrt((1-a)/l);return e[0]=t*i,e[1]=t*n,e[2]=t*s*c,e[3]=t*o*c,e}function $Re(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*o,e}function ERe(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2],c=r[3],h=c*i+a*s-l*n,f=c*n+l*i-o*s,m=c*s+o*n-a*i,y=-o*i-a*n-l*s;return e[0]=h*c+y*-o+f*-l-m*-a,e[1]=f*c+y*-a+m*-o-h*-l,e[2]=m*c+y*-l+h*-a-f*-o,e[3]=t[3],e}function TRe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function MRe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function IRe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=t[0],a=t[1],l=t[2],c=t[3],h=Yi();return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=h*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-l)<=h*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))}const CRe=Qee,LRe=Kee,ARe=Xee,kRe=ete,RRe=tte,ORe=rte,NRe=ite;Object.freeze(Object.defineProperty({__proto__:null,add:dRe,ceil:hRe,copy:lRe,copyVec3:uRe,dist:kRe,distance:ete,div:ARe,divide:Xee,dot:xRe,equals:IRe,exactEquals:MRe,floor:pRe,inverse:bRe,len:ORe,length:rte,lerp:nte,max:mRe,min:fRe,mul:LRe,multiply:Kee,negate:wRe,normalize:_Re,random:SRe,round:yRe,scale:gRe,scaleAndAdd:vRe,set:cRe,sqrDist:RRe,sqrLen:NRe,squaredDistance:tte,squaredLength:ite,str:TRe,sub:CRe,subtract:Qee,transformMat4:$Re,transformQuat:ERe},Symbol.toStringTag,{value:"Module"}));function jE(){return[0,0,0,0]}function PRe(e){return[e[0],e[1],e[2],e[3]]}function xp(e,t,r,i){return[e,t,r,i]}function DRe(e,t,r,i){return[e,t,r,i]}function FRe(e,t=jE()){const r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function jRe(e,t){return new Float64Array(e,t,4)}function ste(){return jE()}function ote(){return xp(1,1,1,1)}function ate(){return xp(1,0,0,0)}function lte(){return xp(0,1,0,0)}function ute(){return xp(0,0,1,0)}function cte(){return xp(0,0,0,1)}const VRe=ste(),zRe=ote(),URe=ate(),BRe=lte(),GRe=ute(),qRe=cte();Object.freeze(Object.defineProperty({__proto__:null,ONES:zRe,UNIT_W:qRe,UNIT_X:URe,UNIT_Y:BRe,UNIT_Z:GRe,ZEROS:VRe,clone:PRe,create:jE,createView:jRe,freeze:DRe,fromArray:FRe,fromValues:xp,ones:ote,unitW:cte,unitX:ate,unitY:lte,unitZ:ute,zeros:ste},Symbol.toStringTag,{value:"Module"}));const c5=2.4;function HRe(e){return An(e*c5)}function WRe(e){return qt(e)/c5}function ZRe(e,t,r,i){let{color:n,ratio:s}=t,{color:o,ratio:a}=r;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=Cn((i-s)/(a-s),0,1);nte(e,n.toArray(),o.toArray(),l)}function VGe(e){const r=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),e.length<1)return r;let i=e[0],n=e[0],s=1;const o=jE();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<e.length;)i=n,n=e[s++];ZRe(o,i,n,l),r.set(o,4*a)}return r}function zGe(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function UGe(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var Jk;function dz(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let Gr=Jk=class extends Gl{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Pv({ratio:0,color:new Q("rgba(255, 140, 0, 0)")}),new Pv({ratio:.75,color:new Q("rgba(255, 140, 0, 1)")}),new Pv({ratio:.9,color:new Q("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return dz(e)}get blurRadius(){return WRe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",HRe(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(c5**2*this.blurRadius**4)}read(e,t){e=dz(e),super.read(e,t)}getSymbol(){return new Ci}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&Qi(e,t,r),i&&typeof i=="string"&&await ki(e,t,i)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new Jk({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:O(this.colorStops),field:this.field,legendOptions:O(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([d({type:GP,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Gr.prototype,"authoringInfo",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Gr.prototype,"blurRadius",null),u([d({type:[Pv],json:{write:{isRequired:!0}}})],Gr.prototype,"colorStops",void 0),u([d({type:String,json:{write:!0}})],Gr.prototype,"field",void 0),u([d({type:Df,json:{write:!0}})],Gr.prototype,"legendOptions",void 0),u([d({type:Number,json:{write:!0}})],Gr.prototype,"maxDensity",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Gr.prototype,"maxPixelIntensity",null),u([d({type:Number,json:{write:!0}})],Gr.prototype,"minDensity",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Gr.prototype,"minPixelIntensity",null),u([d({type:Number,cast:qe,json:{write:!0}})],Gr.prototype,"radius",void 0),u([d({type:Number,range:{min:0},json:{default:0,write:!0}})],Gr.prototype,"referenceScale",void 0),u([ve({heatmap:"heatmap"})],Gr.prototype,"type",void 0),u([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Gr.prototype,"valueExpression",void 0),u([d({type:String})],Gr.prototype,"valueExpressionTitle",void 0),u([d({readOnly:!0})],Gr.prototype,"_pixelIntensityToDensity",null),Gr=Jk=u([T("esri.renderers.HeatmapRenderer")],Gr);const dte=Gr;let gh=class extends Be.ClonableMixin(G){constructor(){super(...arguments),this.color=new Q([0,0,0,0]),this.label=null,this.threshold=0}};u([d({type:Q,json:{write:!0}})],gh.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],gh.prototype,"label",void 0),u([d({type:Number,range:{min:0,max:1},json:{write:!0}})],gh.prototype,"threshold",void 0),gh=u([T("esri.renderers.support.OthersCategory")],gh);const JRe={base:Zy,key:"type",typeMap:{size:Jy,opacity:qP}};let un=class extends Yy(Be.ClonableMixin(Gl)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Q([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new gh,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new Ci({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Ei)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((r,i)=>r+i.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((t,r)=>t+JSON.stringify(r),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const i of this.attributes)i.valueExpression&&await ki(t,r,i.valueExpression),i.field&&t.add(i.field)}};u([d({type:[Yee],json:{write:!0}})],un.prototype,"attributes",void 0),u([d(YP)],un.prototype,"backgroundFillSymbol",void 0),u([d({type:Q,json:{write:!0}})],un.prototype,"defaultColor",void 0),u([d({type:String,json:{write:!0}})],un.prototype,"defaultLabel",void 0),u([d({type:Number,range:{min:0,max:1},json:{write:!0}})],un.prototype,"holePercentage",void 0),u([d({type:gh,json:{write:!0}})],un.prototype,"othersCategory",void 0),u([d({type:QP,json:{write:!0}})],un.prototype,"legendOptions",void 0),u([d({type:en,json:{default:null,write:!0}})],un.prototype,"outline",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],un.prototype,"size",void 0),u([ve({pieChart:"pie-chart"})],un.prototype,"type",void 0),u([d({types:[JRe]})],un.prototype,"visualVariables",void 0),un=u([T("esri.renderers.PieChartRenderer")],un);const YRe=un,Ky={key:"type",base:Gl,typeMap:{heatmap:dte,simple:Al,"unique-value":XP,"class-breaks":Uee,"dot-density":aRe,dictionary:sRe,"pie-chart":YRe},errorContext:"renderer"},hte={key:"type",base:Gl,typeMap:{simple:Al,"unique-value":XP,"class-breaks":Uee,heatmap:dte},errorContext:"renderer",validate:QRe};function QRe(e){switch(e.type){case"simple":return KRe(e);case"unique-value":return XRe(e);case"class-breaks":return eOe(e);case"heatmap":return e}}function KRe(e){if(e.symbol)return e;W.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function XRe(e){const t=e.uniqueValueInfos,r=t==null?void 0:t.filter(({symbol:i,label:n},s)=>(i||W.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=r),e}function eOe(e){const t=e.classBreakInfos,r=t==null?void 0:t.filter(({symbol:i,label:n},s)=>(i||W.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=r),e}function tOe(e,t){return U1(e,null,t)}const rOe=Ry({types:Ky});function U1(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r!=null&&r.messages&&r.messages.push(new Os("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):rOe(e,t,r):null}var Yk;let _i=Yk=class extends _c{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=qe("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Xr(r,i,t)}readRenderer(e,t,r){var n;const i=(n=t.drawingInfo)==null?void 0:n.renderer;return i?U1(i,t,r)??void 0:r5(t,r)}clone(){return new Yk({fields:O(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:O(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:O(this.popupTemplate),renderer:O(this.renderer),binType:O(this.binType),size:this.size})}};u([ve({binning:"binning"})],_i.prototype,"type",void 0),u([ve({geohash:"geohash",square:"square"}),d({type:["geohash","square"]})],_i.prototype,"binType",void 0),u([d({type:Number,json:{write:!0}})],_i.prototype,"fixedBinLevel",void 0),u([d({type:[Qy],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],_i.prototype,"labelingInfo",void 0),u([d(Uw)],_i.prototype,"labelsVisible",void 0),u([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],_i.prototype,"maxScale",void 0),u([d(zw)],_i.prototype,"popupEnabled",void 0),u([d({type:vp,json:{name:"popupInfo",write:!0}})],_i.prototype,"popupTemplate",void 0),u([d({cast:e=>e==="auto"?e:qi(qe(e))})],_i.prototype,"size",void 0),u([d({type:[Dc],json:{write:!0}})],_i.prototype,"fields",void 0),u([te("fields")],_i.prototype,"writeFields",null),u([d({types:Ky,json:{write:{target:"drawingInfo.renderer"}}})],_i.prototype,"renderer",void 0),u([J("renderer",["drawingInfo.renderer"])],_i.prototype,"readRenderer",null),_i=Yk=u([T("esri.layers.support.FeatureReductionBinning")],_i);const pte=_i;var Qk;function hz(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let _r=Qk=class extends G{constructor(e){super(e),this.type="cluster",this.clusterRadius=qe("80px"),this.clusterMinSize=qe("12px"),this.clusterMaxSize=qe("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){var n,s;const i=(n=t.drawingInfo)==null?void 0:n.renderer;return(s=i==null?void 0:i.authoringInfo)!=null&&s.isAutoGenerated?null:i?hz(i)?null:U1(i,t,r)??void 0:r5(t,r)}readSymbol(e,t,r){var n,s;const i=(n=t.drawingInfo)==null?void 0:n.renderer;if((s=i==null?void 0:i.authoringInfo)!=null&&s.isAutoGenerated)return null;if(i&&hz(i)){const o=U1(i,t,r);return o==null?void 0:o.symbol}return null}writeSymbol(e,t,r,i){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new Al({symbol:e});t.drawingInfo={renderer:a.write({},i)}}}writeFields(e,t,r){const i=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Xr(r,i,t)}readFields(e,t,r){return e.filter(i=>!i.isAutoGenerated).map(i=>Dc.fromJSON(i))}clone(){return new Qk({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:O(this.labelingInfo),labelsVisible:this.labelsVisible,fields:O(this.fields),maxScale:this.maxScale,renderer:O(this.renderer),symbol:O(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:O(this.popupTemplate)})}};u([d({type:["cluster"],readOnly:!0,json:{write:!0}})],_r.prototype,"type",void 0),u([d({cast:e=>e==="auto"?e:qi(qe(e)),json:{write:!0}})],_r.prototype,"clusterRadius",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],_r.prototype,"clusterMinSize",void 0),u([d({type:Number,cast:qe,json:{write:!0}})],_r.prototype,"clusterMaxSize",void 0),u([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],_r.prototype,"maxScale",void 0),u([d(zw)],_r.prototype,"popupEnabled",void 0),u([d({type:vp,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],_r.prototype,"popupTemplate",void 0),u([d({types:Ky,json:{write:{target:"drawingInfo.renderer"}}})],_r.prototype,"renderer",void 0),u([J("renderer",["drawingInfo.renderer"])],_r.prototype,"readRenderer",null),u([d({types:h_e})],_r.prototype,"symbol",void 0),u([J("symbol",["drawingInfo.renderer"])],_r.prototype,"readSymbol",null),u([te("symbol")],_r.prototype,"writeSymbol",null),u([d({type:[Qy],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],_r.prototype,"labelingInfo",void 0),u([d(Uw)],_r.prototype,"labelsVisible",void 0),u([d({type:[Dc],json:{write:!0}})],_r.prototype,"fields",void 0),u([te("fields")],_r.prototype,"writeFields",null),u([J("fields")],_r.prototype,"readFields",null),_r=Qk=u([T("esri.layers.support.FeatureReductionCluster")],_r);const fte=_r;var Kk;let Q2=Kk=class extends _c{constructor(e){super(e),this.type="selection"}clone(){return new Kk}};u([d({type:["selection"]})],Q2.prototype,"type",void 0),Q2=Kk=u([T("esri.layers.support.FeatureReductionSelection")],Q2);const pz=Q2,fz={key:"type",base:_c,typeMap:{cluster:fte,binning:pte}},iOe={types:{key:"type",base:_c,typeMap:{selection:pz,cluster:fte,binning:pte}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:fz},"portal-item":{types:fz},"web-scene":{types:{key:"type",base:_c,typeMap:{selection:pz}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:jt}}}}},Gp={Base64:0,Hex:1,String:2,Raw:3},Pm=8,mte=(1<<Pm)-1;function sc(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function nOe(e){const t=[];for(let r=0,i=e.length*Pm;r<i;r+=Pm)t[r>>5]|=(e.charCodeAt(r/Pm)&mte)<<r%32;return t}function sOe(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=Pm)t.push(String.fromCharCode(e[r>>5]>>>r%32&mte));return t.join("")}function oOe(e){const t="0123456789abcdef",r=[];for(let i=0,n=4*e.length;i<n;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}function aOe(e){const t="=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let n=0,s=4*e.length;n<s;n+=3){const o=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*e.length?i.push(t):i.push(r.charAt(o>>6*(3-a)&63))}return i.join("")}function lOe(e,t){return e<<t|e>>>32-t}function VE(e,t,r,i,n,s){return sc(lOe(sc(sc(t,e),sc(i,s)),n),r)}function fi(e,t,r,i,n,s,o){return VE(t&r|~t&i,e,t,n,s,o)}function mi(e,t,r,i,n,s,o){return VE(t&i|r&~i,e,t,n,s,o)}function yi(e,t,r,i,n,s,o){return VE(t^r^i,e,t,n,s,o)}function gi(e,t,r,i,n,s,o){return VE(r^(t|~i),e,t,n,s,o)}function uOe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,n=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const a=r,l=i,c=n,h=s;r=fi(r,i,n,s,e[o],7,-680876936),s=fi(s,r,i,n,e[o+1],12,-389564586),n=fi(n,s,r,i,e[o+2],17,606105819),i=fi(i,n,s,r,e[o+3],22,-1044525330),r=fi(r,i,n,s,e[o+4],7,-176418897),s=fi(s,r,i,n,e[o+5],12,1200080426),n=fi(n,s,r,i,e[o+6],17,-1473231341),i=fi(i,n,s,r,e[o+7],22,-45705983),r=fi(r,i,n,s,e[o+8],7,1770035416),s=fi(s,r,i,n,e[o+9],12,-1958414417),n=fi(n,s,r,i,e[o+10],17,-42063),i=fi(i,n,s,r,e[o+11],22,-1990404162),r=fi(r,i,n,s,e[o+12],7,1804603682),s=fi(s,r,i,n,e[o+13],12,-40341101),n=fi(n,s,r,i,e[o+14],17,-1502002290),i=fi(i,n,s,r,e[o+15],22,1236535329),r=mi(r,i,n,s,e[o+1],5,-165796510),s=mi(s,r,i,n,e[o+6],9,-1069501632),n=mi(n,s,r,i,e[o+11],14,643717713),i=mi(i,n,s,r,e[o],20,-373897302),r=mi(r,i,n,s,e[o+5],5,-701558691),s=mi(s,r,i,n,e[o+10],9,38016083),n=mi(n,s,r,i,e[o+15],14,-660478335),i=mi(i,n,s,r,e[o+4],20,-405537848),r=mi(r,i,n,s,e[o+9],5,568446438),s=mi(s,r,i,n,e[o+14],9,-1019803690),n=mi(n,s,r,i,e[o+3],14,-187363961),i=mi(i,n,s,r,e[o+8],20,1163531501),r=mi(r,i,n,s,e[o+13],5,-1444681467),s=mi(s,r,i,n,e[o+2],9,-51403784),n=mi(n,s,r,i,e[o+7],14,1735328473),i=mi(i,n,s,r,e[o+12],20,-1926607734),r=yi(r,i,n,s,e[o+5],4,-378558),s=yi(s,r,i,n,e[o+8],11,-2022574463),n=yi(n,s,r,i,e[o+11],16,1839030562),i=yi(i,n,s,r,e[o+14],23,-35309556),r=yi(r,i,n,s,e[o+1],4,-1530992060),s=yi(s,r,i,n,e[o+4],11,1272893353),n=yi(n,s,r,i,e[o+7],16,-155497632),i=yi(i,n,s,r,e[o+10],23,-1094730640),r=yi(r,i,n,s,e[o+13],4,681279174),s=yi(s,r,i,n,e[o],11,-358537222),n=yi(n,s,r,i,e[o+3],16,-722521979),i=yi(i,n,s,r,e[o+6],23,76029189),r=yi(r,i,n,s,e[o+9],4,-640364487),s=yi(s,r,i,n,e[o+12],11,-421815835),n=yi(n,s,r,i,e[o+15],16,530742520),i=yi(i,n,s,r,e[o+2],23,-995338651),r=gi(r,i,n,s,e[o],6,-198630844),s=gi(s,r,i,n,e[o+7],10,1126891415),n=gi(n,s,r,i,e[o+14],15,-1416354905),i=gi(i,n,s,r,e[o+5],21,-57434055),r=gi(r,i,n,s,e[o+12],6,1700485571),s=gi(s,r,i,n,e[o+3],10,-1894986606),n=gi(n,s,r,i,e[o+10],15,-1051523),i=gi(i,n,s,r,e[o+1],21,-2054922799),r=gi(r,i,n,s,e[o+8],6,1873313359),s=gi(s,r,i,n,e[o+15],10,-30611744),n=gi(n,s,r,i,e[o+6],15,-1560198380),i=gi(i,n,s,r,e[o+13],21,1309151649),r=gi(r,i,n,s,e[o+4],6,-145523070),s=gi(s,r,i,n,e[o+11],10,-1120210379),n=gi(n,s,r,i,e[o+2],15,718787259),i=gi(i,n,s,r,e[o+9],21,-343485551),r=sc(r,a),i=sc(i,l),n=sc(n,c),s=sc(s,h)}return[r,i,n,s]}function yte(e,t=Gp.Hex){const r=t||Gp.Base64,i=uOe(nOe(e),e.length*Pm);switch(r){case Gp.Raw:return i;case Gp.Hex:return oOe(i);case Gp.String:return sOe(i);case Gp.Base64:return aOe(i)}}const cOe=()=>W.getLogger("esri.views.2d.layers.support.clusterUtils");F.add("esri-cluster-arcade-enabled",!0);const dOe=F("esri-cluster-arcade-enabled"),hOe=new Set(["simple-line","simple-fill","picture-fill"]);function mz(e,t){let r=t.clone();if(!pOe(r))return r;if(t.symbols.some(i=>hOe.has(i.type))&&(r=new Al({symbol:new Ci})),r.authoringInfo||(r.authoringInfo=new GP),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");i.forEach(n=>{n.type==="rotation"?n.field?n.field=ud(e,n.field,"avg_angle","number"):n.valueExpression&&(n.field=Og(e,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=ud(e,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=ud(e,n.field,"avg","number"):n.valueExpression&&(n.field=Og(e,n.valueExpression,"avg","number"),n.valueExpression=null)}),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=ud(e,i.field,"sum","number"):i.valueExpression&&(i.field=Og(e,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=ud(e,r.field,"mode","string"):r.valueExpression&&(r.field=Og(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=ud(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=ud(e,r.field,"avg","number"):r.valueExpression&&(r.field=Og(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const pOe=e=>{const t=r=>cOe().error(new N("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!dOe){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function fOe(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const i=r,n="field",s=t.toLowerCase()+",norm:"+n+","+i.toLowerCase();return"cluster_avg_"+yte(s)}}}function Og(e,t,r,i){const n=yte(t),s=r==="mode"?`cluster_type_${n}`:r==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some(o=>o.name===s)||e.push(new Dc({name:s,isAutoGenerated:!0,onStatisticExpression:new s5({expression:t,returnType:i}),statisticType:r})),s}function ud(e,t,r,i,n){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const s=fOe(r,t,n);return e.some(o=>o.name===s)||(r==="avg_norm"?e.push(new Dc({name:s,isAutoGenerated:!0,onStatisticExpression:new s5({expression:`$feature.${t} / $feature.${n}`,returnType:i}),statisticType:"avg"})):e.push(new Dc({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),s}const gte=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(ee(()=>this.renderer,()=>{if(this.featureReduction){const i=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",i)}},xa))}set featureReduction(r){const i=this._normalizeFeatureReduction(r);this._set("featureReduction",i)}set renderer(r){}_withClusterVariable(r,i,n){const s=r.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some(o=>o.type==="size")||s.visualVariables.push(new Jy({field:"cluster_count",stops:[new z2({value:1}),new z2({useMinValue:!0,size:i}),new z2({useMaxValue:!0,size:n})]}))),s}_normalizeFeatureReduction(r){var f;if((r==null?void 0:r.type)!=="cluster")return r;const i=r.clone(),n=[new Dc({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(i.fields??[]).filter(m=>!m.isAutoGenerated),o=r.renderer&&!((f=r.renderer.authoringInfo)!=null&&f.isAutoGenerated),{clusterMinSize:a,clusterMaxSize:l}=i;if(o){i.fields=[...n,...s];const m=this._withClusterVariable(i.renderer,a,l);return i.effectiveFeatureRenderer=m,i.effectiveClusterRenderer=m,i}if(r.symbol){if(i.fields=[...n,...s],i.renderer=null,!this.renderer)return i.effectiveFeatureRenderer=null,i.effectiveClusterRenderer=null,i;const m=mz(n,this.renderer),y=this._withClusterVariable(m,a,l),g="visualVariables"in y&&y.visualVariables?y.visualVariables:[],v=new Al({symbol:r.symbol,visualVariables:g});return i.fields=[...n,...s],i.effectiveFeatureRenderer=y,i.effectiveClusterRenderer=v,i}if(!this.renderer)return r;const c=mz(n,this.renderer);i.fields=[...n,...s],i.renderer=c;const h=this._withClusterVariable(c,a,l);return i.effectiveFeatureRenderer=h,i.effectiveClusterRenderer=h,i}};return u([d(iOe)],t.prototype,"featureReduction",null),t=u([T("esri.layers.mixins.FeatureReductionLayer")],t),t},yz={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},gz={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},vz={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},mOe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":yz,"web-map/basemap":gz,"web-map/tables":vz,"link-chart/operational-layers":{...yz,LinkChartLayer:!0},"link-chart/basemap":gz,"link-chart/tables":vz,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},vte=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,i,n){var s;return((s=n==null?void 0:n.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:r}writeListMode(r,i,n,s){(s&&s.layerContainerType==="ground"||r&&Ice(this,n,{},s))&&(i[n]=r)}writeOperationalLayerType(r,i,n){r&&(i[n]=r)}writeTitle(r,i){i.title=r??"Layer"}readVisibilityTimeExtent(r){return r?Fl.fromArray(r):null}writeVisibilityTimeExtent(r,i,n,s){r&&s.layerContainerType!=="tables"&&(r.isEmpty?s!=null&&s.messages&&s.messages.push(new N("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[n]=r.toArray())}read(r,i){i&&(i.layer=this),Ece(this,r,n=>super.read(r,n),i)}write(r,i){var o,a;if(!this.persistenceEnabled&&!(i!=null&&i.ignorePersistenceEnabled))return null;if(i!=null&&i.origin){const l=`${i.origin}/${i.layerContainerType||"operational-layers"}`,c=mOe[l];let h=!!(c!=null&&c[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(h=!1),!h)return(o=i.messages)==null||o.push(new N("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(r,{...i,layer:this}),s=!!i&&!!i.messages&&!!i.messages.filter(l=>l instanceof N&&l.name==="web-document-write:property-required").length;return O$(n==null?void 0:n.url)?((a=i==null?void 0:i.messages)==null||a.push(new N("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return u([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),u([J("id",["id"])],t.prototype,"readId",null),u([d(QX)],t.prototype,"listMode",void 0),u([te("listMode")],t.prototype,"writeListMode",null),u([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:jt,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),u([te("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),u([d(GS)],t.prototype,"opacity",void 0),u([d({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),u([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),u([te("title"),te(["web-scene"],"title")],t.prototype,"writeTitle",null),u([d({type:Fl,json:{origins:{"web-scene":{write:{layerContainerTypes:jt}}}}})],t.prototype,"visibilityTimeExtent",void 0),u([J("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),u([te(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Xe,k$]]}})],t.prototype,"writeVisibilityTimeExtent",null),u([d({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:jt}}})],t.prototype,"visible",void 0),t=u([T("esri.layers.mixins.OperationalLayer")],t),t};var Xk;const l_=new je({asc:"ascending",desc:"descending"});let Ff=Xk=class extends G{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Xk({field:this.field,valueExpression:this.valueExpression,order:this.order})}};u([d({type:String,json:{write:!0}})],Ff.prototype,"field",void 0),u([d({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ff.prototype,"valueExpression",void 0),u([d({type:l_.apiValues,json:{type:l_.jsonValues,read:l_.read,write:l_.write}})],Ff.prototype,"order",void 0),Ff=Xk=u([T("esri.layers.support.OrderByInfo")],Ff);const wte=Ff;function yOe(e,t,r){if(!e)return null;const i=e.find(s=>!!s.field);if(!i)return null;const n=new wte;return n.read(i,r),[n]}function gOe(e,t,r,i){const n=e.find(s=>!!s.field);n&&Xr(r,[n.toJSON()],t)}const vOe={type:[wte],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:yOe},write:{writer:gOe}}},bte=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return u([d(vOe)],t.prototype,"orderBy",void 0),t=u([T("esri.layers.mixins.OrderedLayer")],t),t};async function wOe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return tm(e);const r=Ie.WGS84;return await ON(t,r),Wc(e,r)}function bOe(e,t){if(!_te(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function _te(e,t){var r;return!!((r=e.typeKeywords)!=null&&r.includes(t))}function qGe(e){return _te(e,xOe.HOSTED_SERVICE)}function _Oe(e,t){const r=e.typeKeywords;if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}function HGe(e,t,r){r?bOe(e,t):_Oe(e,t)}async function WGe(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return wOe(r)}const xOe={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function SOe(e){var l;const{portal:t,isOrgItem:r,itemControl:i}=e,n=(l=t.user)==null?void 0:l.privileges;let s=!n||n.includes("features:user:edit"),o=!!r&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=i==="update"||i==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const xte=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Et(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,n){if(i.itemId)return new mv({id:i.itemId,portal:n==null?void 0:n.portal})}writePortalItem(r,i){r!=null&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:s}=await B(()=>import("./layersLoader-214c5c74.js"),["assets/layersLoader-214c5c74.js","assets/fetchService-ee26faaa.js","assets/loadUtils-25f64202.js","assets/associatedFeatureServiceUtils-97d0532b.js","assets/jsonContext-39c24700.js"]);return Ht(i),await s({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},i)}catch(s){throw Ri(s)||W.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(i=>(_o(i),!0)))}async setUserPrivileges(r,i){if(!Ke.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(i);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(r,i);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){_o(n)}}async _fetchUserPrivileges(r,i){let n=this.portalItem;if(!r||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(i);const s=!(Ee!=null&&Ee.findCredential(this.url)),o=r===n.id;if(o&&n.portal.user)return this._getUserPrivileges(n,s);let a,l;if(o)a=n.portal.url;else try{a=await fN(this.url,i)}catch(m){_o(m)}if(!a||!qce(a,n.portal.url))return this._fetchFallbackUserPrivileges(i);try{const m=i!=null?i.signal:null;l=await(Ee==null?void 0:Ee.getCredential(`${a}/sharing`,{prompt:!1,signal:m}))}catch(m){_o(m)}const c=!0,h=!1,f=!1;if(!l)return{features:{edit:c,fullEdit:h},content:{updateItem:f}};try{if(o?await n.reload():(n=new mv({id:r,portal:{url:a}}),await n.load(i)),n.portal.user)return this._getUserPrivileges(n,s)}catch(m){_o(m)}return{features:{edit:c,fullEdit:h},content:{updateItem:f}}}_getUserPrivileges(r,i){const n=SOe(r);return i&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(r){let i=!0;try{i=await this._fetchUserHasEditingPrivileges(r)}catch(n){_o(n)}return{features:{edit:i,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const i=this.url?Ee==null?void 0:Ee.findCredential(this.url):null;if(!i)return!0;const n=u_.credential===i?u_.user:await this._fetchEditingUser(r);return u_.credential=i,u_.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var h,f;const i=(f=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:f.user;if(i)return i;const n=Ee==null?void 0:Ee.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=Ai.getDefault();if(o&&o.loaded&&Co(o.restUrl)===Co(s))return o.user;const a=`${s}/community/self`,l=r!=null?r.signal:null,c=await P$(ft(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return c.ok?rN.fromJSON(c.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){var o;const n=i==null?void 0:i.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Ai.getDefault());return n&&s&&!cq(s.restUrl,n.restUrl)?(i.messages&&i.messages.push(new N("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return u([d({type:mv})],t.prototype,"portalItem",null),u([J("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),u([te("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),u([d({clonable:!1})],t.prototype,"resourceReferences",void 0),u([d({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),u([d({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),u([d({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=u([T("esri.layers.mixins.PortalLayer")],t),t},u_={credential:null,user:null};let Y0=class extends ce{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};u([d()],Y0.prototype,"updating",void 0),u([d()],Y0.prototype,"status",void 0),Y0=u([T("esri.layers.support.PublishingInfo")],Y0);const $Oe=Y0,EOe=Symbol(),TOe=e=>{var t;let r=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const i=this._get("publishingInfo");if(i)return i;const n=new $Oe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(i){let o=0;const a=async c=>{let h;i.updating=!0;try{h=await this.fetchPublishingStatus()}catch{h="unavailable"}h!=="published"&&h!=="unavailable"||(i.status==="publishing"&&this.refresh(),l.remove()),i.status=h,i.updating=!1,l.removed||(o=setTimeout(a,c,c+125))},l={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>l.remove()),a(250),this.addHandles(l)}};return t=EOe,u([d({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=u([T("esri.layers.mixins.PublishableLayer")],r),r},oc=new ie,Dv=new WeakMap;function MOe(e){COe(e)&&oc.push(new WeakRef(e))}function IOe(e){const t=oc.find(r=>r.deref()===e);t&&oc.remove(t)}function COe(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Ste(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Ste(t,e%t):0}let oI=0,c_=0;function LOe(){const e=Date.now();let t=!1;for(const r of oc){const i=r.deref();i?i.refreshInterval&&e-(Dv.get(i)??0)+5>=6e4*i.refreshInterval&&(Dv.set(i,e),i.refresh(e)):t=!0}if(t)for(let r=oc.length-1;r>=0;r--)oc.at(r).deref()||oc.removeAt(r)}kG(()=>{const e=Date.now();let t=0;for(const r of oc){const i=r.deref();i&&(t=Ste(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?Dv.get(i)||Dv.set(i,e):Dv.delete(i))}if(t!==c_){if(c_=t,clearInterval(oI),c_===0)return void(oI=0);oI=setInterval(LOe,c_)}},xa);const wz=.1,$te=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=dw(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||MOe(this)},()=>{})}destroy(){IOe(this)}castRefreshInterval(r){return r>=wz?r:r<=0?0:wz}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){u1(this._debounceHasDataChanged()).then(i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})},i=>{W.getLogger(this).error(i),this.emit("refresh",{dataChanged:!1,error:i})})}async hasDataChanged(){return!0}get test(){}};return u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:jt}}}}})],t.prototype,"refreshInterval",void 0),u([He("refreshInterval")],t.prototype,"castRefreshInterval",null),u([d({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),u([d({readOnly:!0})],t.prototype,"refreshParameters",null),t=u([T("esri.layers.mixins.RefreshableLayer")],t),t},Ete=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&AOe(r,i.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===r.minScale&&n.maxScale===r.maxScale?n:r}};return u([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),u([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=u([T("esri.layers.mixins.ScaleRangeLayer")],t),t};function AOe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Tte=ei()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Q0=class extends Be.ClonableMixin(G){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return QW(this.value,this.unit,"milliseconds")}};u([ve(Tte,{nonNullable:!0})],Q0.prototype,"unit",void 0),u([d({type:Number,json:{write:!0},nonNullable:!0})],Q0.prototype,"value",void 0),Q0=u([T("esri.time.TimeInterval")],Q0);const B1=Q0;function bz(e,t){return B1.fromJSON({value:e,unit:t})}let ii=class extends Be.ClonableMixin(G){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?Fl.fromArray(r.timeExtent):null}writeFullTimeExtent(t,r){(t==null?void 0:t.start)!=null&&t.end!=null?r.timeExtent=t.toArray():r.timeExtent=null}readInterval(t,r){return r.timeInterval&&r.timeIntervalUnits?bz(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?bz(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(t,r){r.timeInterval=(t==null?void 0:t.toJSON().value)??null,r.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};u([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ii.prototype,"cumulative",void 0),u([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ii.prototype,"endField",void 0),u([d({type:Fl,json:{write:{enabled:!0,allowNull:!0}}})],ii.prototype,"fullTimeExtent",void 0),u([J("fullTimeExtent",["timeExtent"])],ii.prototype,"readFullTimeExtent",null),u([te("fullTimeExtent")],ii.prototype,"writeFullTimeExtent",null),u([d({type:Boolean,json:{write:!0}})],ii.prototype,"hasLiveData",void 0),u([d({type:B1,json:{write:{enabled:!0,allowNull:!0}}})],ii.prototype,"interval",void 0),u([J("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ii.prototype,"readInterval",null),u([te("interval")],ii.prototype,"writeInterval",null),u([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ii.prototype,"startField",void 0),u([d(v1("timeReference",!0))],ii.prototype,"timeZone",void 0),u([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ii.prototype,"trackIdField",void 0),u([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ii.prototype,"useTime",void 0),u([d({type:[Date],json:{read:!1}})],ii.prototype,"stops",void 0),ii=u([T("esri.layers.support.TimeInfo")],ii);const Mte=ii,kOe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:jt}}},Ite=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const n=i.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=Tte.fromJSON(n.timeOffsetUnits);return s&&o?new B1({value:s,unit:o}):null}set timeInfo(r){zN(r,this.fieldsIndex),this._set("timeInfo",r)}};return u([d({type:Fl,json:{write:!1}})],t.prototype,"timeExtent",void 0),u([d({type:B1})],t.prototype,"timeOffset",void 0),u([J("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),u([d({value:null,type:Mte,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),u([d(kOe)],t.prototype,"useViewTime",void 0),t=u([T("esri.layers.mixins.TemporalLayer")],t),t};let Xd=class extends Be.ClonableMixin(G){constructor(t){super(t),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};u([d({type:[Qy],json:{write:!0}})],Xd.prototype,"labelingInfo",void 0),u([d(Uw)],Xd.prototype,"labelsVisible",void 0),u([d({types:Ky,json:{write:!0}})],Xd.prototype,"renderer",void 0),u([d({type:Boolean,json:{write:!0}})],Xd.prototype,"visible",void 0),Xd=u([T("esri.layers.support.TrackPartInfo")],Xd);const Dm=Xd;let cn=class extends Be.ClonableMixin(G){constructor(t){super(t),this.enabled=!0,this.fields=[],this.latestObservations=new Dm({renderer:new Al({symbol:qS.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new Dm({renderer:new Al({symbol:qS.clone()})}),this.trackLines=new Dm({renderer:new Al({symbol:ZP.clone()})}),this.timeField="startTimeField"}writeFields(t,r,i){const n=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Xr(i,n,r)}};u([d({type:Boolean,json:{write:!0}})],cn.prototype,"enabled",void 0),u([d({type:[Dc],json:{write:!0}})],cn.prototype,"fields",void 0),u([te("fields")],cn.prototype,"writeFields",null),u([d({type:Dm,json:{write:!0}})],cn.prototype,"latestObservations",void 0),u([d({type:B1,json:{write:!0}})],cn.prototype,"maxDisplayDuration",void 0),u([d({type:Number,json:{write:!0}})],cn.prototype,"maxDisplayObservationsPerTrack",void 0),u([d(zw)],cn.prototype,"popupEnabled",void 0),u([d({type:vp,json:{name:"popupInfo",write:!0}})],cn.prototype,"popupTemplate",void 0),u([d({type:Dm,json:{write:!0}})],cn.prototype,"previousObservations",void 0),u([d({type:Dm,json:{write:!0}})],cn.prototype,"trackLines",void 0),u([d({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],cn.prototype,"timeField",void 0),cn=u([T("esri.layers.support.TrackInfo")],cn);const ROe=cn,Cte=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return u([d({type:ROe})],t.prototype,"trackInfo",void 0),t=u([T("esri.layers.mixins.TrackableLayer")],t),t},_z=new je({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let ku=class extends Be.ClonableMixin(G){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([d({json:{write:!0}})],ku.prototype,"name",void 0),u([d({json:{write:!0}})],ku.prototype,"description",void 0),u([d({json:{read:_z.read,write:_z.write}})],ku.prototype,"drawingTool",void 0),u([d({json:{write:!0}})],ku.prototype,"prototype",void 0),u([d({json:{write:!0}})],ku.prototype,"thumbnail",void 0),ku=u([T("esri.layers.support.FeatureTemplate")],ku);const zE=ku;let ol=class extends Be.ClonableMixin(G){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const i of Object.keys(t))r[i]=vE(t[i]);return r}writeDomains(t,r){var n;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=(n=t[s])==null?void 0:n.toJSON());r.domains=i}};u([d({json:{write:!0}})],ol.prototype,"id",void 0),u([d({json:{write:!0}})],ol.prototype,"name",void 0),u([d({json:{write:!0}})],ol.prototype,"domains",void 0),u([J("domains")],ol.prototype,"readDomains",null),u([te("domains")],ol.prototype,"writeDomains",null),u([d({type:[zE],json:{write:!0}})],ol.prototype,"templates",void 0),ol=u([T("esri.layers.support.FeatureType")],ol);const Lte=ol;function Ate(){return{fields:{type:[wE],value:null,set:function(e){if(e&&F("big-integer-warning-enabled")){const t=e.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(t.length){const r=t.map(i=>`'${i.name}'`).join(", ");W.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return Gee.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const r of e)((t=this.fieldsIndex)==null?void 0:t.has(r))||W.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${r} found in outFields`,{layer:this,outFields:e});return lE(this.fieldsIndex,e)}}}}const aI=()=>W.getLogger("esri.layers.support.labelingInfo"),OOe=/\[([^[\]]+)\]/gi;function K2(e,t,r){return e?e.map(i=>{var s;const n=new Qy;if(n.read(i,r),n.labelExpression){const o=t.fields||((s=t.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(OOe,(a,l)=>`[${NOe(l,o)}]`)}return n}):null}function NOe(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const n=t[i].name;if(n.toLowerCase()===r)return n}return e}const POe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function tqe(e,t){const r=[];for(const i of e){const n=i.labelPlacement,s=POe[t];if(!i.symbol)return aI().warn("No ILabelClass symbol specified."),[];if(!s)return aI().error(new N("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(s.includes(n))r.push(i);else{const o=s[0];n&&aI().warn(`Found invalid label placement type ${n} for ${t}. Defaulting to ${o}`);const a=i.clone();a.labelPlacement=o,r.push(a)}}return r}const DOe="relationships/",FOe="expression/";let zi=class extends ce{constructor(t){super(t),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||ww(()=>$a()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??B(()=>import("./featureUtils-be8eb6c0.js"),[]).then(t=>this._featureUtils=t)}get calculatedExpressions(){var r;const t=new ie;if(!this.expressionsUsedInTitle.length)return t;if(!((r=this._arcadeTask)!=null&&r.value)){for(const i of this.expressionsUsedInTitle??[])t.push({name:i.name,invalid:!0});return t}for(const i of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(i.expression,["$layer","$map","$datastore"]);if(n.isAsync){t.push({name:i.name,invalid:!0});break}t.push({name:i.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{t.push({name:i.name,invalid:!0});break}return t}get expressionsUsedInTitle(){var r,i,n;let t=((r=this.effectivePopupTemplate)==null?void 0:r.title)??"";return typeof t!="string"?[]:(t=t.toLowerCase(),((n=(i=this.effectivePopupTemplate)==null?void 0:i.expressionInfos)==null?void 0:n.filter(s=>t.includes(`{expression/${s.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(t=>t.invalid===!0)}get requiredFields(){var i,n;const t=new Set;if((i=this._arcadeTask)!=null&&i.value&&!this.hasBadExpressions)for(const s of((n=this.calculatedExpressions)==null?void 0:n.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const a of o){const l=a.split("."),c=this.fieldsIndex.get(l.at(-1)??"");c&&t.add(c.name)}}catch{}const r=this._extractFieldNames(this.workingTitle);for(const s of r){const o=this.fieldsIndex.get(s);o&&t.add(o.name)}return t}get titleFromDisplayField(){var r,i;let t="";return this.displayField&&(t=((r=this.fieldsIndex.get(this.displayField))==null?void 0:r.name)??""),t||(t=((i=this.fieldsIndex.get(this.objectIdField))==null?void 0:i.name)??""),t?`{${t}}`:""}get workingTitle(){const t=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return t===""||t==null||this.hasBadExpressions||typeof t!="string"?this.titleFromDisplayField:t}async getTitle(t,r,i){var n;try{const{attributes:s}=r,o=(i==null?void 0:i.timeZone)??"system",[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,(n=this._arcadeTask)==null?void 0:n.promise]);if(i.fetchMissingFields&&(r=await this._checkAndReQueryGraphic(t,r)),this.workingTitle&&this.fieldInfoMap){const l=this._createFormattedAttributes(t,r,o).global;return a({attributes:s,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:l,layer:t,text:this.workingTitle})}return""}catch{}return""}async _checkAndReQueryGraphic(t,r){const i=r.getObjectId();if(i==null)return r;if(!ube(this.requiredFields,r)){const n=t.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=[i];const s=await t.queryFeatures(n);if((s==null?void 0:s.features.length)===1)return s.features[0]}return r}_createFieldInfoMap(t){const r=new Map;if(!t)return r;for(const i of t){if(!i.fieldName)continue;const n=this.fieldsIndex.get(i.fieldName),s=(n==null?void 0:n.name)??i.fieldName;i.fieldName=s,r.set(s.toLowerCase(),i)}return r}_createFormattedAttributes(t,r,i="system"){var a,l;const n=((a=this.effectivePopupTemplate)==null?void 0:a.fieldInfos)??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((l=this._arcadeTask)!=null&&l.value)){const c=this._arcadeTask.value.Feature.createFromGraphicLikeObject(r.geometry,r.attributes,t,null);for(const h of this.calculatedExpressions)try{s[`expression/${h.name}`]=h.func({vars:{$feature:c}})}catch{}}const o={...r.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:o,graphic:r,timeZone:i,layer:t,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(t){return GN(t).filter(r=>!(r.indexOf(DOe)===0||r.indexOf(FOe)===0))}};u([d({readOnly:!0})],zi.prototype,"_arcadeTask",null),u([d()],zi.prototype,"_featureUtils",void 0),u([d({readOnly:!0})],zi.prototype,"featureUtilsPromise",null),u([d({readOnly:!0})],zi.prototype,"calculatedExpressions",null),u([d()],zi.prototype,"displayField",void 0),u([d()],zi.prototype,"effectivePopupTemplate",void 0),u([d()],zi.prototype,"expressionsUsedInTitle",null),u([d()],zi.prototype,"fieldsIndex",void 0),u([d()],zi.prototype,"fieldInfoMap",null),u([d()],zi.prototype,"fields",void 0),u([d()],zi.prototype,"objectIdField",void 0),u([d()],zi.prototype,"requiredFields",null),zi=u([T("esri.layers.support.TitleCreator")],zi);const jOe=zi,jf=[];function VOe(e,t){if(Yx(e.url??""))return!0;const{wkid:r}=t;for(const i of jf){if((e.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}jf.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),jf.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),jf.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),jf.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),jf.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function zOe(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const n=await P$(i.populateFromStyle());if(Ht(r),n.ok===!1){const s=n.error;t!=null&&t.messages&&t.messages.push(new Os("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function kte({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:n},s){if(!r)return null;const o=qOe({editFieldsInfo:t,fields:r,objectIdField:i},s);if(!o.length)return null;const a=ZOe({titleBase:n,fields:r,displayField:e}),l=WOe();return new vp({title:a,content:l,fieldInfos:o})}function iqe(e){var c;const{title:t,graphic:r}=e??{},{attributes:i,sourceLayer:n}=r??{},s=n&&"displayField"in n?n.displayField:null,o=s?i==null?void 0:i[s]:null,a=o!=null?JSON.stringify(o):null,l=(c=r==null?void 0:r.getObjectId())==null?void 0:c.toString();return t||a||l||""}const UOe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):Uwe(e,t);function BOe({fields:e,ignoreFieldTypes:t,sortDisabled:r}){const i=e;return t&&(e=e.filter(n=>!t.includes(n.type))),e===i&&(e=e.slice()),r!==!0&&e.sort(GOe),e}function GOe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:xz(e)?-1:xz(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function qOe(e,t){const r=t==null?void 0:t.visibleFieldNames;return BOe({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||JOe,sortDisabled:t==null?void 0:t.sortDisabled}).map(i=>new qN({fieldName:i.name,isEditable:zwe(i,e),label:i.alias,format:HOe(i),visible:UOe(i,{...e,visibleFieldNames:r})}))}function HOe(e){switch(e.type){case"small-integer":case"integer":case"single":return new n2({digitSeparator:!0,places:0});case"double":return new n2({digitSeparator:!0,places:2});case"string":return dbe(e.name)?new n2({digitSeparator:!0,places:0}):void 0;default:return}}function WOe(){return[new wy,new vy]}function ZOe(e){const t=kwe(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function xz(e){var r;return(e.name&&e.name.toLowerCase())==="name"?!0:((r=e.alias)==null?void 0:r.toLowerCase())==="name"}const JOe=["geometry","blob","raster","guid","xml"];var cm;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(cm||(cm={}));const ti="FeatureLayer";function d_(e,t){return new N("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function Sz(e){return e&&e instanceof ie}const lI=Ate();function uI(e,t,r){const i=!!(r!=null&&r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let he=class extends $ke(gte(VX(TOe(lLe(PX(LX(bte(Ite(Cte(Ete($te(bCe(vte(xte(OP(AX(wCe(Be.ClonableMixin(eE))))))))))))))))))){constructor(...t){super(...t),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Ie.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=dw(async(r,i,n)=>{const{save:s,saveAs:o}=await B(()=>import("./featureLayerUtils-3c19e8cf.js"),["assets/featureLayerUtils-3c19e8cf.js","assets/originUtils-cfe4feaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/utils-af474e25.js","assets/jsonContext-39c24700.js","assets/saveUtils-6d132a97.js","assets/fetchService-ee26faaa.js"]);switch(r){case cm.SAVE:return s(this,i);case cm.SAVE_AS:return o(this,n,i)}})}destroy(){var t;(t=this.source)==null||t.destroy()}normalizeCtorArgs(t,r){return typeof t=="string"?{url:t,...r}:t}load(t){var n;const r=t!=null?t.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(r).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},t).catch(_o).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(r);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new N("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(r))}).then(()=>qAe(this,"load",t));return this.addResolvingPromise(i),Promise.resolve(this)}get _titleCreator(){const t=this._get("_titleCreator");return Et(t),new jOe({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(t,r){return r=r.layerDefinition||r,Pee(r,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var t;return!(this.loaded&&!((t=this.capabilities)!=null&&t.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,r){return this._readEditingEnabled(r,!1)}readEditingEnabledFromWebMap(t,r,i){return this._readEditingEnabled(r,!0,i)}writeEditingEnabled(t,r){this._writeEditingEnabled(t,r,!1)}writeEditingEnabledToWebMap(t,r,i,n){this._writeEditingEnabled(t,r,!0,n)}get effectiveEditingEnabled(){return ZAe(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(t,r){return(r=(r==null?void 0:r.layerDefinition)??r).type==="Table"||!r.geometryType}writeIsTable(t,r,i,n){n!=null&&n.writeLayerSchema&&Xr(i,t?"Table":"Feature Layer",r)}readGlobalIdField(t,r){return Eee(r.layerDefinition||r)}readObjectIdField(t,r){return Tee(r.layerDefinition||r)}get parsedUrl(){const t=mr(this.url);return t!=null&&(this.dynamicDataSource!=null?t.path=oy(t.path,"dynamicLayer"):this.layerId!=null&&(t.path=oy(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){$S(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,r,i){var s;r=r.layerDefinition||r;const n=(s=r.drawingInfo)==null?void 0:s.renderer;if(n){const o=U1(n,r,i)??void 0;return o||W.getLogger(this).error("Failed to create renderer",{rendererDefinition:r.drawingInfo.renderer,layer:this,context:i}),o}return r5(r,i)}set source(t){const r=this._get("source");r!==t&&(Sz(r)&&this._resetMemorySource(r),Sz(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof ie?new cl({layer:this,items:t}):t:null}readSource(t,r){const i=PP.fromJSON(r.featureSet);return new cl({layer:this,items:(i==null?void 0:i.features)??[]})}readTemplates(t,r){const i=r.editFieldsInfo,n=i==null?void 0:i.creatorField,s=i==null?void 0:i.editorField;return t=t==null?void 0:t.map(o=>zE.fromJSON(o)),this._fixTemplates(t,n),this._fixTemplates(t,s),t}readTitle(t,r){var s,o,a;const i=((s=r.layerDefinition)==null?void 0:s.name)??r.name,n=r.title||((o=r.layerDefinition)==null?void 0:o.title);if(i){const l=(a=this.portalItem)==null?void 0:a.title;if(this.sublayerTitleMode==="item-title")return this.url?fde(this.url,i):i;let c=i;if(!c&&this.url){const h=Ny(this.url);h!=null&&(c=h.title)}return c?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==c&&(c=l+" - "+c),UO(c)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(t,r){var i;return r.title||((i=r.layerDefinition)==null?void 0:i.name)}readTypeIdField(t,r){let i=(r=r.layerDefinition||r).typeIdField;if(i&&r.fields){i=i.toLowerCase();const n=r.fields.find(s=>s.name.toLowerCase()===i);n&&(i=n.name)}return i}readTypes(t,r){t=(r=r.layerDefinition||r).types;const i=r.editFieldsInfo,n=i==null?void 0:i.creatorField,s=i==null?void 0:i.editorField;return t==null?void 0:t.map(o=>(o=Lte.fromJSON(o),this._fixTemplates(o.templates,n),this._fixTemplates(o.templates,s),o))}readVisible(t,r){var i;return((i=r.layerDefinition)==null?void 0:i.defaultVisibility)!=null?!!r.layerDefinition.defaultVisibility:r.visibility!=null?!!r.visibility:void 0}async addAttachment(t,r){const i=await TAe(this,t,r,ti);return this.lastEditsEventDate=new Date,i}async updateAttachment(t,r,i){const n=await MAe(this,t,r,i,ti);return this.lastEditsEventDate=new Date,n}async applyEdits(t,r){return IAe(this,t,r)}async uploadAssets(t,r){return CAe(this,t,r)}on(t,r){return super.on(t,r)}createPopupTemplate(t){return kte(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:r}=await $G(B(()=>import("./FeatureLayerSource-810ec0fb.js"),["assets/FeatureLayerSource-810ec0fb.js","assets/MeshLocalVertexSpace-205953f5.js","assets/meshVertexSpaceUtils-17de56f2.js","assets/External-526b25c0.js","assets/MeshTransform-1d78c1ec.js","assets/mat4f64-7b47076d.js","assets/quat-a74ccdda.js","assets/mat3f64-e19cdcb8.js","assets/quatf64-216ddd5a.js","assets/axisAngleDegrees-bcdcaa47.js","assets/editingSupport-c35d47ee.js","assets/QueryTask-df05e365.js","assets/executeForIds-e25c490a.js","assets/query-bbf38cc9.js","assets/pbfQueryUtils-fd62a34b.js","assets/pbf-8ef4f2aa.js","assets/memoryEstimations-e8cfae6e.js","assets/OptimizedGeometry-4a66a431.js","assets/OptimizedFeature-6e8489c3.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/executeQueryJSON-2818c840.js","assets/executeQueryPBF-d218a410.js","assets/featureConversionUtils-c3e620ab.js"]),t);return new r({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:t})}createQuery(){const t=jAe(this);t.dynamicDataSource=this.dynamicDataSource;const r=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=pJ(this.definitionExpression,r);return t.where=i||"1=1",t}async deleteAttachments(t,r){const i=await LAe(this,t,r,ti);return this.lastEditsEventDate=new Date,i}async fetchRecomputedExtents(t){return AAe(this,t,ti)}getFeatureTitle(t,r={timeZone:"system",fetchMissingFields:!1}){return this._titleCreator.getTitle(this,t,r)}getFeatureType(t){return Cee(this.types,this.typeIdField,t)}getFieldDomain(t,r){var i;return zAe(this,t,r,((i=this.getField(t))==null?void 0:i.domain)??null)}async queryAttachments(t,r){return kAe(this,t,r,ti)}async queryFeatures(t,r){const i=await this.load(),n=await i.source.queryFeatures(vn.from(t)??i.createQuery(),r);if(n!=null&&n.features)for(const s of n.features)s.layer=s.sourceLayer=i;return n}async queryObjectIds(t,r){return(await RAe(this,t,r,ti)).filter(Rj)}async queryFeatureCount(t,r){return OAe(this,t,r,ti)}async queryExtent(t,r){return NAe(this,t,r,ti)}async queryRelatedFeatures(t,r){return PAe(this,t,r,ti)}async queryRelatedFeaturesCount(t,r){return DAe(this,t,r,ti)}async queryTopFeatures(t,r){var a;const{source:i,capabilities:n}=await this.load();if(!i.queryTopFeatures||!((a=n==null?void 0:n.query)!=null&&a.supportsTopFeaturesQuery))throw new N(ti,"Layer source does not support queryTopFeatures capability");const s=await B(()=>import("./TopFeaturesQuery-59433dc2.js"),[]),o=await i.queryTopFeatures(s.default.from(t),r);if(o!=null&&o.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryAttributeBins(t,r){var a;const{source:i,capabilities:n}=await this.load();if(!i.queryAttributeBins||!((a=n==null?void 0:n.operations)!=null&&a.supportsQueryBins))throw new N(ti,"Layer source does not support queryAttributeBins capability");KAe(t,n,ti);const s=await B(()=>import("./AttributeBinsQuery-766a2411.js"),["assets/AttributeBinsQuery-766a2411.js","assets/queryUtils-d1b9b043.js","assets/json-48e3ea08.js","assets/FixedIntervalBinParameters-16f91595.js"]),o=await i.queryAttributeBins(s.default.from(t),r);if(o.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryTopObjectIds(t,r){const{source:i,capabilities:n}=await this.load();if(!i.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new N(ti,"Layer source does not support queryTopObjectIds capability");const s=await B(()=>import("./TopFeaturesQuery-59433dc2.js"),[]);return(await i.queryTopObjectIds(s.default.from(t),r)).filter(Rj)}async queryTopFeaturesExtent(t,r){var o;const{source:i,capabilities:n}=await this.load();if(!i.queryTopExtents||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new N(ti,"Layer source does not support queryTopExtents capability");const s=await B(()=>import("./TopFeaturesQuery-59433dc2.js"),[]);return i.queryTopExtents(s.default.from(t),r)}async queryTopFeatureCount(t,r){var o;const{source:i,capabilities:n}=await this.load();if(!i.queryTopCount||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new N(ti,"Layer source does not support queryFeatureCount capability");const s=await B(()=>import("./TopFeaturesQuery-59433dc2.js"),[]);return i.queryTopCount(s.default.from(t),r)}read(t,r){const i=t.featureCollection;if((i||t.type==="Feature Collection")&&(this.resourceInfo=t),i){const n=i.layers;n&&n.length===1&&(super.read(n[0],r),i.showLegend!=null&&super.read({showLegend:i.showLegend},r))}super.read(t,r),r&&r.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,r){r={...r,origin:(r==null?void 0:r.origin)??void 0,writeLayerSchema:(r==null?void 0:r.writeLayerSchema)??this._hasMemorySource()};const{origin:i,layerContainerType:n,messages:s}=r;if(this.dynamicDataSource)return s==null||s.push(d_(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((i==="web-map"||i==="web-scene")&&n!=="tables")return s==null||s.push(d_(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return s==null||s.push(d_(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(i==="web-map"||i==="web-scene")&&n==="tables")return s==null||s.push(d_(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(t,r)}clone(){if(this._hasMemorySource())throw new N(ti,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){var r;return!!this.loaded&&(((r=this.source)==null?void 0:r.type)==="memory"||VOe(this,t))}async save(t){return this._debouncedSaveOperations(cm.SAVE,t)}async saveAs(t,r){return this._debouncedSaveOperations(cm.SAVE_AS,r,t)}_readEditingEnabled(t,r,i){var s;let n=(s=t.layerDefinition)==null?void 0:s.capabilities;return n?this._hasEditingCapability(n):(n=t.capabilities,r&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(r=>r.trim()).includes("editing")}_writeEditingEnabled(t,r,i,n){var s,o;if(!t){const a=(o=(s=this.capabilities)==null?void 0:s.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Xr("layerDefinition.capabilities",a,r),i&&!(n!=null&&n.writeLayerSchema)&&(r.capabilities=a)}}_fetchFirstValidLayerId(t){return ft(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(r=>{const i=r.data;if(i)return this.findFirstValidLayerId(i)})}async initLayerProperties(t){var r;return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(r=this.portalItem)==null?void 0:r.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),$S(this.renderer,this.fieldsIndex),zN(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),zOe(this,{origin:"service"})}async hasDataChanged(){return FAe(this)}async fetchPublishingStatus(){const t=this.source;return t!=null&&t.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){var r,i;const t=((r=this.parsedUrl)==null?void 0:r.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||(i=this.fields)!=null&&i.some(n=>n.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,r){t&&t.forEach(i=>{var s;const n=(s=i.prototype)==null?void 0:s.attributes;n&&r&&delete n[r]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new N("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new N("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(r=>{r.layer=this,r.sourceLayer=this}),this.addHandles([t.on("after-add",r=>{r.item.layer=this,r.item.sourceLayer=this}),t.on("after-remove",r=>{r.item.layer=null,r.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(r=>{r.layer=null,r.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(t){return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}};u([d({clonable:!1,readOnly:!0})],he.prototype,"_titleCreator",null),u([d(KX)],he.prototype,"attributeTableTemplate",void 0),u([J("service","capabilities")],he.prototype,"readCapabilities",null),u([d({json:{origins:{"web-scene":{write:!1}},write:!0}})],he.prototype,"charts",void 0),u([d({readOnly:!0})],he.prototype,"createQueryVersion",null),u([d({json:{read:{source:"layerDefinition.copyrightText"}}})],he.prototype,"copyright",void 0),u([d({json:{read:{source:"layerDefinition.displayField"}}})],he.prototype,"displayField",void 0),u([d({types:ic,readOnly:!0})],he.prototype,"defaultSymbol",void 0),u([d({type:vo})],he.prototype,"dynamicDataSource",void 0),u([d({type:Boolean})],he.prototype,"editingEnabled",null),u([J(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],he.prototype,"readEditingEnabled",null),u([J("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],he.prototype,"readEditingEnabledFromWebMap",null),u([te(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],he.prototype,"writeEditingEnabled",null),u([te("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],he.prototype,"writeEditingEnabledToWebMap",null),u([d({readOnly:!0})],he.prototype,"effectiveEditingEnabled",null),u([d({clonable:!1,readOnly:!0})],he.prototype,"featureTitleFields",null),u([d({...lI.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:uI}}}}})],he.prototype,"fields",void 0),u([d(lI.fieldsIndex)],he.prototype,"fieldsIndex",void 0),u([d({type:fCe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],he.prototype,"formTemplate",void 0),u([d({json:{read:{source:"layerDefinition.extent"}}})],he.prototype,"fullExtent",void 0),u([d({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:uI,writer(e,t,r){const i=e?Ck.toJSON(e):null;i&&Xr(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:Ck.read}}})],he.prototype,"geometryType",void 0),u([d({json:{read:{source:"layerDefinition.hasM"}}})],he.prototype,"hasM",void 0),u([d({json:{read:{source:"layerDefinition.hasZ"}}})],he.prototype,"hasZ",void 0),u([d(YX)],he.prototype,"id",void 0),u([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],he.prototype,"infoFor3D",void 0),u([d({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],he.prototype,"isTable",void 0),u([J("service","isTable",["type","geometryType"]),J("isTable",["layerDefinition.type","layerDefinition.geometryType"])],he.prototype,"readIsTable",null),u([te("web-map","isTable")],he.prototype,"writeIsTable",null),u([d(Uw)],he.prototype,"labelsVisible",void 0),u([d({type:[Qy],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:K2,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:K2,write:{enabled:!0,layerContainerTypes:jt}}},name:"layerDefinition.drawingInfo.labelingInfo",read:K2,write:!0}})],he.prototype,"labelingInfo",void 0),u([d((()=>{const e=O(gLe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){Xr(i,J$(t),r)}}},e})())],he.prototype,"opacity",void 0),u([d(WX)],he.prototype,"legendEnabled",void 0),u([d({type:["show","hide"],json:(()=>{const e=O(QX.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],he.prototype,"listMode",void 0),u([J("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],he.prototype,"readGlobalIdField",null),u([d({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:uI}}}}})],he.prototype,"objectIdField",void 0),u([J("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],he.prototype,"readObjectIdField",null),u([d({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:jt}}})],he.prototype,"operationalLayerType",void 0),u([d(lI.outFields)],he.prototype,"outFields",void 0),u([d({readOnly:!0})],he.prototype,"parsedUrl",null),u([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],he.prototype,"path",void 0),u([d(zw)],he.prototype,"popupEnabled",void 0),u([d({type:vp,json:{name:"popupInfo",write:!0}})],he.prototype,"popupTemplate",void 0),u([d({readOnly:!0})],he.prototype,"defaultPopupTemplate",null),u([d({types:Ky,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:hte,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:jt,overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}})],he.prototype,"renderer",null),u([J("service","renderer",["drawingInfo.renderer","defaultSymbol"]),J("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],he.prototype,"readRenderer",null),u([d()],he.prototype,"resourceInfo",void 0),u([d((()=>{const e=O(qX);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],he.prototype,"screenSizePerspectiveEnabled",void 0),u([d({clonable:!1})],he.prototype,"source",null),u([He("source")],he.prototype,"castSource",null),u([J("portal-item","source",["featureSet"]),J("web-map","source",["featureSet"])],he.prototype,"readSource",null),u([d({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],he.prototype,"spatialReference",void 0),u([d({type:Number})],he.prototype,"subtypeCode",void 0),u([d({type:[zE]})],he.prototype,"templates",void 0),u([J("templates",["editFieldsInfo","creatorField","editorField","templates"])],he.prototype,"readTemplates",null),u([d({type:Mte})],he.prototype,"timeInfo",void 0),u([d()],he.prototype,"title",void 0),u([J("service","title",["name"]),J("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],he.prototype,"readTitle",null),u([J("web-map","title",["layerDefinition.name","title"])],he.prototype,"readTitleFromWebMap",null),u([d({type:String})],he.prototype,"sublayerTitleMode",void 0),u([d({json:{read:!1}})],he.prototype,"type",void 0),u([d({type:String})],he.prototype,"typeIdField",void 0),u([J("service","typeIdField"),J("typeIdField",["layerDefinition.typeIdField"])],he.prototype,"readTypeIdField",null),u([d({type:[Lte]})],he.prototype,"types",void 0),u([J("service","types",["types"]),J("types",["layerDefinition.types"])],he.prototype,"readTypes",null),u([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],he.prototype,"visible",void 0),u([J("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],he.prototype,"readVisible",null),he=u([T("esri.layers.FeatureLayer")],he);const Rte=he,sqe=Object.freeze(Object.defineProperty({__proto__:null,default:Rte},Symbol.toStringTag,{value:"Module"})),YOe={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsCurrentUser:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsReturnMesh:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0,supportsTrueCurve:!1},QOe={supportsDate:!0,supportsFixedInterval:!0,supportsAutoInterval:!0,supportsFixedBoundaries:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!0,supportedStatistics:{count:!0,sum:!0,avg:!0,var:!0,stddev:!0,min:!0,max:!0,percentileContinuous:!0,percentileDiscrete:!0,envelope:!0,centroid:!0,convexHull:!0},supportedNormalizationTypes:{field:!0,log:!0,naturalLog:!0,percentOfTotal:!0,squareRoot:!0}};function oqe(e){return{renderer:{type:"simple",symbol:e==="esriGeometryPoint"||e==="esriGeometryMultipoint"?pee:e==="esriGeometryPolyline"?fee:mee}}}const KOe=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let XOe=1;function aqe(e,t){if(F("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this${$z(t)} = null;`;for(const n in e)r+=`this${$z(n)} = ${JSON.stringify(e[n])};`;const i=new Function(`
      return class AttributesClass$${XOe++} {
        constructor() {
          ${r};
        }
      }
    `)();return()=>new i}catch{return()=>({[t]:null,...e})}}function $z(e){return KOe.test(e)?`.${e}`:`["${e}"]`}function lqe(e={}){return[{name:"New Feature",description:"",prototype:{attributes:O(e)}}]}function eNe(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:YOe,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:QOe,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}let eh=class extends va{constructor(){super(...arguments),this.type="geojson",this.refresh=dw(async t=>{await this.load();const{extent:r,timeExtent:i}=await this._connection.invoke("refresh",t);return this.sourceJSON.extent=r,i&&(this.sourceJSON.timeInfo.timeExtent=[i.start,i.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatures",t?t.toJSON():null,r)).then(i=>PP.fromJSON(i))}queryFeaturesJSON(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatures",t?t.toJSON():null,r))}queryFeatureCount(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r))}queryObjectIds(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r))}queryExtent(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r)).then(i=>({count:i.count,extent:bt.fromJSON(i.extent)}))}querySnapping(t,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",t,r))}async queryAttributeBins(t,r={}){return await this.load(),this._connection.invoke("queryAttributeBins",t==null?void 0:t.toJSON(),r)}_applyEdits(t){if(!this._connection)throw new N("geojson-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField,i=[],n=[],s=[];if(t.addFeatures)for(const o of t.addFeatures)i.push(this._serializeFeature(o));if(t.deleteFeatures)for(const o of t.deleteFeatures)"objectId"in o&&o.objectId!=null?n.push(o.objectId):"attributes"in o&&o.attributes[r]!=null&&n.push(o.attributes[r]);if(t.updateFeatures)for(const o of t.updateFeatures)s.push(this._serializeFeature(o));return this._connection.invoke("applyEdits",{adds:i,updates:s,deletes:n}).then(({extent:o,timeExtent:a,featureEditResults:l})=>(this.sourceJSON.extent=o,a&&(this.sourceJSON.timeInfo.timeExtent=[a.start,a.end]),this._createEditsResult(l)))}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new N("geojson-layer-source:edit-failure",r.description,{code:r.code}):null}}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t);return i?{geometry:i.toJSON(),attributes:r}:{attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:r.type==="mesh"||r.type==="extent"?Ps.fromExtent(r.extent):r}async _startWorker(t){this._connection=await CZ("GeoJSONSourceWorker",{strategy:F("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,hasZ:n,geometryType:s,objectIdField:o,url:a,timeInfo:l,customParameters:c}=this.layer,h=this.layer.originOf("spatialReference")==="defaults",f={url:a,customParameters:c,fields:r&&r.map(y=>y.toJSON()),geometryType:CN.toJSON(s),hasZ:n,objectIdField:o,timeInfo:l?l.toJSON():null,spatialReference:h?null:i&&i.toJSON()},m=await this._connection.invoke("load",f,{signal:t});for(const y of m.warnings)W.getLogger(this.layer).warn("#load()",`${y.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:y});m.featureErrors.length&&W.getLogger(this.layer).warn("#load()",`Encountered ${m.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:m.featureErrors}),this.sourceJSON=m.layerDefinition,this.capabilities=eNe(this.sourceJSON.hasZ,!0)}};u([d()],eh.prototype,"capabilities",void 0),u([d()],eh.prototype,"type",void 0),u([d({constructOnly:!0})],eh.prototype,"layer",void 0),u([d()],eh.prototype,"sourceJSON",void 0),eh=u([T("esri.layers.graphics.sources.GeoJSONSource")],eh);const Ez=Ate();let Ue=class extends bte(PX(AX(gte(VX(LX(Ite(Cte(Ete($te(vte(xte(OP(eE))))))))))))){constructor(t){super(t),this.attributeTableTemplate=null,this.copyright=null,this.dateFieldsTimeZone=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.outFields=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new eh({layer:this}),this.spatialReference=Ie.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson"}destroy(){var t;(t=this.source)==null||t.destroy()}load(t){const r=this.loadFromPortal({supportedTypes:["GeoJson"],supportsData:!1},t).catch(_o).then(()=>this.source.load(t)).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),$S(this.renderer,this.fieldsIndex),zN(this.timeInfo,this.fieldsIndex)});return this.addResolvingPromise(r),Promise.resolve(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&this.geometryType==null}get parsedUrl(){return this.url?mr(this.url):null}set renderer(t){$S(t,this.fieldsIndex),this._set("renderer",t)}set url(t){if(!t)return void this._set("url",t);const r=mr(t);this._set("url",r.path),r.query&&(this.customParameters={...this.customParameters,...r.query})}async applyEdits(t,r){const{applyEdits:i}=await B(()=>import("./editingSupport-c35d47ee.js"),[]);await this.load();const n=await i(this,this.source,t,r);return this.read({extent:this.source.sourceJSON.extent,timeInfo:this.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),n}on(t,r){return super.on(t,r)}createPopupTemplate(t){return kte(this,t)}createQuery(){var s;const t=new vn,r=(s=this.capabilities)==null?void 0:s.data;t.returnGeometry=!0,r&&r.supportsZ&&(t.returnZ=!0),t.outFields=["*"],t.where=this.definitionExpression||"1=1";const{timeOffset:i,timeExtent:n}=this;return t.timeExtent=i!=null&&n!=null?n.offset(-i.value,i.unit):n||null,t}getFieldDomain(t,r){var i;return(i=this.getField(t))==null?void 0:i.domain}getField(t){return this.fieldsIndex.get(t)}queryFeatures(t,r){return this.load().then(()=>this.source.queryFeatures(vn.from(t)||this.createQuery(),r)).then(i=>{if(i!=null&&i.features)for(const n of i.features)n.layer=n.sourceLayer=this;return i})}queryObjectIds(t,r){return this.load().then(()=>this.source.queryObjectIds(vn.from(t)||this.createQuery(),r))}queryFeatureCount(t,r){return this.load().then(()=>this.source.queryFeatureCount(vn.from(t)||this.createQuery(),r))}queryExtent(t,r){return this.load().then(()=>this.source.queryExtent(vn.from(t)||this.createQuery(),r))}async hasDataChanged(){try{const{dataChanged:t,updates:r}=await this.source.refresh(this.customParameters);return r!=null&&this.read(r,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),t}catch{}return!1}};u([d(KX)],Ue.prototype,"attributeTableTemplate",void 0),u([d({readOnly:!0,json:{read:!1,write:!1}})],Ue.prototype,"capabilities",null),u([d({type:String})],Ue.prototype,"copyright",void 0),u([d({readOnly:!0})],Ue.prototype,"createQueryVersion",null),u([d(v1("dateFieldsTimeReference"))],Ue.prototype,"dateFieldsTimeZone",void 0),u([d({readOnly:!0})],Ue.prototype,"defaultPopupTemplate",null),u([d({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Ue.prototype,"definitionExpression",void 0),u([d({type:String})],Ue.prototype,"displayField",void 0),u([d({type:Boolean})],Ue.prototype,"editingEnabled",void 0),u([d(ZX)],Ue.prototype,"elevationInfo",void 0),u([d({type:[wE],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],Ue.prototype,"fields",void 0),u([d(Ez.fieldsIndex)],Ue.prototype,"fieldsIndex",void 0),u([d({type:bt,json:{name:"extent"}})],Ue.prototype,"fullExtent",void 0),u([d({type:["point","polygon","polyline","multipoint"],json:{read:{reader:CN.read}}})],Ue.prototype,"geometryType",void 0),u([d({type:Boolean})],Ue.prototype,"hasZ",void 0),u([d(YX)],Ue.prototype,"id",void 0),u([d({type:Boolean,readOnly:!0})],Ue.prototype,"isTable",null),u([d(Uw)],Ue.prototype,"labelsVisible",void 0),u([d({type:[Qy],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:K2},write:!0}})],Ue.prototype,"labelingInfo",void 0),u([d(WX)],Ue.prototype,"legendEnabled",void 0),u([d({type:["show","hide"]})],Ue.prototype,"listMode",void 0),u([d({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],Ue.prototype,"objectIdField",void 0),u([d(GS)],Ue.prototype,"opacity",void 0),u([d({type:["GeoJSON"]})],Ue.prototype,"operationalLayerType",void 0),u([d(Ez.outFields)],Ue.prototype,"outFields",void 0),u([d({readOnly:!0})],Ue.prototype,"parsedUrl",null),u([d(zw)],Ue.prototype,"popupEnabled",void 0),u([d({type:vp,json:{name:"popupInfo",write:!0}})],Ue.prototype,"popupTemplate",void 0),u([d({types:Ky,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:hte}}}})],Ue.prototype,"renderer",null),u([d(qX)],Ue.prototype,"screenSizePerspectiveEnabled",void 0),u([d({readOnly:!0})],Ue.prototype,"source",void 0),u([d({type:Ie})],Ue.prototype,"spatialReference",void 0),u([d({type:[zE]})],Ue.prototype,"templates",void 0),u([d()],Ue.prototype,"title",void 0),u([d({json:{read:!1},readOnly:!0})],Ue.prototype,"type",void 0),u([d(HX)],Ue.prototype,"url",null),Ue=u([T("esri.layers.GeoJSONLayer")],Ue);const gl=Ue,dqe=Object.freeze(Object.defineProperty({__proto__:null,default:gl},Symbol.toStringTag,{value:"Module"}));var tNe=typeof window<"u";const Ote={Promise:tNe?window.Promise:void 0};var Nte="4.25",eR="next";function Pte(e){if(e.toLowerCase()===eR)return eR;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function Dte(e){return e===void 0&&(e=Nte),"https://js.arcgis.com/".concat(e,"/")}function rNe(e){e===void 0&&(e=Nte);var t=Dte(e),r=Pte(e);if(r!==eR&&r.major===3){var i=r.minor<=10?"js/":"";return"".concat(t).concat(i,"esri/css/esri.css")}else return"".concat(t,"esri/themes/light/main.css")}function iNe(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function nNe(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function sNe(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function oNe(e){return!e||Pte(e)?rNe(e):e}function aNe(e,t){var r=oNe(e),i=sNe(r);return i||(i=iNe(r),nNe(i,t)),i}var lNe={};function uNe(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function Tz(e,t,r){var i;r&&(i=cNe(e,r));var n=function(){t(e),e.removeEventListener("load",n,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",n,!1)}function cNe(e,t){var r=function(i){t(i.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function Fte(){return document.querySelector("script[data-esri-loader]")}function tR(){var e=window.require;return e&&e.on}function dNe(e){e===void 0&&(e={});var t={};[lNe,e].forEach(function(n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])});var r=t.version,i=t.url||Dte(r);return new Ote.Promise(function(n,s){var o=Fte();if(o){var a=o.getAttribute("src");a!==i?s(new Error("The ArcGIS API for JavaScript is already loaded (".concat(a,")."))):tR()?n(o):Tz(o,n,s)}else if(tR())s(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=t.css;if(l){var c=l===!0;aNe(c?r:l,t.insertCssBefore)}o=uNe(i),Tz(o,function(){o.setAttribute("data-esri-loader","loaded"),n(o)},s),document.body.appendChild(o)}})}function Mz(e){return new Ote.Promise(function(t,r){var i=window.require.on("error",r);window.require(e,function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];i.remove(),t(n)})})}function hNe(e,t){if(t===void 0&&(t={}),tR())return Mz(e);var r=Fte(),i=r&&r.getAttribute("src");return!t.url&&i&&(t.url=i),dNe(t).then(function(){return Mz(e)})}const ms="esri-layer-list",Da=`${ms}__item`,Ng={base:ms,actionMenu:`${ms}__action-menu`,actionGroup:`${ms}__action-group`,filterNoResults:`${ms}__filter-no-results`,item:Da,itemActive:`${Da}--active`,itemContentBottom:`${Da}-content-bottom`,itemMessage:`${Da}-message`,itemActionIcon:`${Da}-action-icon`,itemActionImage:`${Da}-action-image`,itemTemporaryIcon:`${Da}-temporary-icon`,itemTableIcon:`${Da}-table-icon`,itemCatalogIcon:`${Da}-catalog-icon`,statusIndicator:`${ms}__status-indicator`,publishing:`${ms}__publishing`,updating:`${ms}__updating`,connectionStatus:`${ms}__connection-status`,connectionStatusConnected:`${ms}__connection-status--connected`,visibleToggle:`${ms}__visible-toggle`,visibleIcon:`${ms}__visible-icon`};function Iz(e){return e.icon?e.icon:"image"in e&&e.image||e.className?void 0:"question"}function pNe(e){return e?{backgroundImage:`url(${e})`}:{}}function hqe({action:e,feature:t}){const r=t==null?void 0:t.attributes,i="image"in e?e.image:void 0;return i&&r?w1(i,r):i??""}const jte={hide:"hide",hideChildren:"hide-children"},fNe=10,mNe=2;function yNe({exclusive:e,visible:t,visibilityAppearance:r}){const i=r==="checkbox";return t?e?"circle-f":i?"check-square-f":"view-visible":e?"circle":i?"square":"view-hide"}function gNe({connectionStatus:e,publishing:t}){return e?e==="connected"?"beacon":"offline":t?"square":"bullet-point"}function vNe(e){return(e==null?void 0:e.listMode)===jte.hideChildren}function QS(e){return(e==null?void 0:e.listMode)??void 0}function wNe(e){return e!=null&&"minScale"in e&&e.minScale!=null?e.minScale:void 0}function bNe(e){return e!=null&&"maxScale"in e&&e.maxScale!=null?e.maxScale:void 0}function _Ne(e){if(!e)return"inherited";const t=INe(d5(e)?e.layer:e);return t!=null?t?"independent":"inherited":"visibilityMode"in e&&e.visibilityMode!=null?e.visibilityMode:"independent"}function xNe(e){e==null||e.removeMany(e.filter(t=>t==null?void 0:t.destroyed))}function Vte(e){if(e&&(!("type"in e)||e.type!=="wmts"))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function SNe(e,t){e&&(e.filterPredicate=t?r=>t(po(r)):void 0)}function $Ne(e){const t=(e!=null&&e.layer&&d5(e.layer)?e.layer.layer:void 0)??(e==null?void 0:e.layer);return!!t&&t.type!=="catalog"&&(CNe(t)??!0)}function ENe(e){return QS(e)!==jte.hide}function TNe(e,t){if(!e||t==null||isNaN(t))return!1;const r=wNe(e),i=bNe(e),n=r!=null&&!isNaN(r)&&r>0&&t>r,s=i!=null&&!isNaN(i)&&i>0&&t<i;return n||s}function zte(e,t){e==null||e.sort((r,i)=>{const n="uid"in r?t.indexOf(r.uid):-1,s="uid"in i?t.indexOf(i.uid):-1;return n>s?-1:n<s?1:0})}function MNe(e,t){const r=e==null?void 0:e.layer;if(!r)return;const i=Vte(r);if(!i)return;let n;i==="layers"&&"layers"in r?n=r.layers:i==="sublayers"&&"sublayers"in r&&(n=r.sublayers),zte(n,t)}function Cz(e){const t=e==null?void 0:e.layer;return t&&"layers"in t?t.layers:null}function d5(e){return e!=null&&"layer"in e&&e.layer!=null}function INe(e){const t=Ute(e);return t!=null&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}function CNe(e){const t=Ute(e);return t!=null&&"supportsDynamicLayers"in t?t.supportsDynamicLayers:void 0}function Ute(e){return e&&"capabilities"in e&&e.capabilities!=null&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}function po(e){return e==null?void 0:e["data-item"]}function Lz(e){return e==null?void 0:e.getAttribute("data-layer-type")}function LNe(e){const{children:t,error:r}=e,i="incompatible"in e&&e.incompatible;return!!(t!=null&&t.filter(n=>!n.hidden).length)&&!r&&!i}function ANe(e){for(const t of e)for(const r of t)if(r.type==="button"||r.type==="toggle")return r}var rR;let Le=rR=class extends Mr{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=t=>{this.item.actionsOpen=t.currentTarget.open},this._setTooltipReference=t=>{var r,i;(i=this.onTooltipReferenceChange)==null||i.call(this,(r=this.item.layer)==null?void 0:r.uid,t)},this._removeTooltipReference=()=>{var t,r;(r=this.onTooltipReferenceChange)==null||r.call(this,(t=this.item.layer)==null?void 0:t.uid,null)}}loadDependencies(){return Hy({"action-group":()=>B(()=>import("./index-3827a852.js"),["assets/index-3827a852.js","assets/customElement-a1bb8d2e.js","assets/guid-40009d79.js","assets/useT9n-c901282b.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/customElement-4f66442f.js","assets/keyed-c191e3a2.js","assets/ref-f1080d6c.js","assets/interactive-3f3b7038.js","assets/component-b5b15c2e.js","assets/customElement-e88e73f0.js","assets/floating-ui-2d7f5cd7.js","assets/debounce-0dae6e02.js","assets/openCloseComponent-62f7e67f.js","assets/static-858e9a5a.js","assets/FloatingArrow-6a150b89.js","assets/key-b113a0f3.js","assets/array-120a91a3.js","assets/customElement-e29acb8e.js"]),"action-menu":()=>B(()=>import("./index-f3025e94.js"),["assets/index-f3025e94.js","assets/customElement-a1bb8d2e.js","assets/guid-40009d79.js","assets/useT9n-c901282b.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/customElement-4f66442f.js","assets/keyed-c191e3a2.js","assets/ref-f1080d6c.js","assets/interactive-3f3b7038.js","assets/component-b5b15c2e.js","assets/customElement-e88e73f0.js","assets/floating-ui-2d7f5cd7.js","assets/debounce-0dae6e02.js","assets/openCloseComponent-62f7e67f.js","assets/static-858e9a5a.js","assets/FloatingArrow-6a150b89.js","assets/key-b113a0f3.js","assets/array-120a91a3.js"]),action:()=>B(()=>import("./index-44e8a45a.js"),["assets/index-44e8a45a.js","assets/customElement-a1bb8d2e.js","assets/guid-40009d79.js","assets/useT9n-c901282b.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/customElement-4f66442f.js","assets/keyed-c191e3a2.js","assets/ref-f1080d6c.js","assets/interactive-3f3b7038.js","assets/component-b5b15c2e.js"]),icon:()=>B(()=>import("./index-2f2bfab7.js"),["assets/index-2f2bfab7.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js"]),"list-item":()=>B(()=>import("./index-67f43025.js"),["assets/index-67f43025.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/customElement-1541fbf6.js","assets/ref-f1080d6c.js","assets/floating-ui-2d7f5cd7.js","assets/debounce-0dae6e02.js","assets/guid-40009d79.js","assets/interactive-3f3b7038.js","assets/key-b113a0f3.js","assets/component-b5b15c2e.js","assets/openCloseComponent-62f7e67f.js","assets/dynamicClasses-e688fb23.js","assets/customElement-a1bb8d2e.js","assets/useT9n-c901282b.js","assets/customElement-4f66442f.js","assets/keyed-c191e3a2.js","assets/customElement-d2216dd5.js","assets/resources6-86728a65.js","assets/customElement-fbc6930c.js","assets/utils-e7c4f253.js","assets/resources5-25fa581d.js"]),list:()=>B(()=>import("./index-e4f4e93f.js"),["assets/index-e4f4e93f.js","assets/customElement-a1bb8d2e.js","assets/guid-40009d79.js","assets/useT9n-c901282b.js","assets/customElement-1c26e0c0.js","assets/ref-f1080d6c.js","assets/observers-43783b2c.js","assets/dom-aeb6a324.js","assets/keyed-c191e3a2.js","assets/customElement-d1ab8a5a.js","assets/customElement-847c1974.js","assets/customElement-4d4e5be7.js","assets/customElement-d24c4d57.js","assets/static-858e9a5a.js","assets/form-f1517cda.js","assets/interactive-3f3b7038.js","assets/key-b113a0f3.js","assets/label-5bdbe44a.js","assets/component-b5b15c2e.js","assets/debounce-0dae6e02.js","assets/utils-e7c4f253.js"]),notice:()=>B(()=>import("./index-1ec9440c.js"),["assets/index-1ec9440c.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/ref-f1080d6c.js","assets/component-b5b15c2e.js","assets/openCloseComponent-62f7e67f.js","assets/useT9n-c901282b.js"])})}render(){var y,g;const e=this.parentTitles??[],{_title:t,item:r,activeItem:i,selectionMode:n,selectedItems:s,messages:o,parent:a,css:l}=this,c="visibleAtCurrentTimeExtent"in r&&"layerInvisibleAtTime"in o&&!r.visibleAtCurrentTimeExtent?`${t} (${o.layerInvisibleAtTime})`:"visibleAtCurrentScale"in r&&"layerInvisibleAtScale"in o&&!r.visibleAtCurrentScale?`${t} (${o.layerInvisibleAtScale})`:t,h="parent"in r&&((g=(y=r.parent)==null?void 0:y.layer)==null?void 0:g.type)==="catalog",{layer:f}=r,m="visibleAtCurrentScale"in r&&!r.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in r&&!r.visibleAtCurrentTimeExtent;return k("calcite-list-item",{afterCreate:v=>this._focusSelectedDragEl(v,r),afterUpdate:v=>this._focusSelectedDragEl(v,r),class:this.classes(l.item,"itemActive"in l&&{[l.itemActive]:i===r}),"data-item":r,"data-layer-id":f==null?void 0:f.id,dragDisabled:!r.sortable||h,id:f==null?void 0:f.uid,key:`list-item-${f==null?void 0:f.uid}`,label:t,metadata:{parentTitles:e,_title:t},open:"open"in r&&r.open,selected:n!=="none"&&s.includes(r),title:c,unavailable:m,value:f==null?void 0:f.uid,onCalciteListItemSelect:v=>"visible"in r&&this._handleCalciteListItemSelect(v,r,a),onCalciteListItemToggle:v=>"open"in r&&this._handleCalciteListItemToggle(v,r)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:t,visibleElements:r,css:i}=this;if(!r.statusIndicators)return null;const{publishing:n}=e,s="updating"in e&&e.updating&&!t,o="connectionStatus"in e?e.connectionStatus:void 0,a=!!o;return k("calcite-icon",{class:this.classes(i.statusIndicator,{[i.publishing]:n},"updating"in i&&{[i.updating]:s},"connectionStatus"in i&&{[i.connectionStatus]:a},"connectionStatusConnected"in i&&{[i.connectionStatusConnected]:a&&o==="connected"}),icon:gNe({connectionStatus:o,publishing:n}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:t,css:r}=this,{layer:i}=e,n="temporaryLayerIndicators"in t&&t.temporaryLayerIndicators,s="temporaryTableIndicators"in t&&t.temporaryTableIndicators,o=i&&"persistenceEnabled"in i&&(gN(i)||!i.persistenceEnabled);return(n||s)&&o?k("calcite-icon",{class:r.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"content-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{item:e,parent:t,messages:r,visibilityAppearance:i,css:n}=this;if(!("visible"in e&&"layerVisibility"in r&&"visibleToggle"in n&&i))return null;const{visible:s}=e,o=this._getParentVisibilityMode(t);if(o==="inherited")return null;const a=yNe({visible:s,exclusive:o==="exclusive",visibilityAppearance:i}),l=i==="checkbox",c=r.layerVisibility;return k("calcite-action",{appearance:"transparent",class:n.visibleToggle,icon:l?a:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(e,t),scale:"s",slot:l?"actions-start":"actions-end",text:c,title:c},l?null:k("calcite-icon",{class:this.classes({[n.visibleIcon]:o!=="exclusive"&&s}),icon:a,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!(e!=null&&e.open)||e.disabled||e.flowEnabled?null:k("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!(e!=null&&e.visible))return null;const{open:t,title:r,disabled:i}=e;return k("calcite-action",{active:t,appearance:"transparent",disabled:i,icon:Iz(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:r??"",title:r??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:t}=this,r=t.options;return k("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:t.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},k("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:r,title:r}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(e=>k("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map(t=>this._renderAction({action:t,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){const{css:e}=this,t=this.item.layer,r=(t==null?void 0:t.type)==="catalog-footprint",i=(t==null?void 0:t.type)==="sublayer"&&GF(t,"footprints");return"itemCatalogIcon"in e&&(r||i)?k("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){const{css:e}=this,t=this.item.layer,r=(t==null?void 0:t.type)==="catalog-dynamic-group",i=(t==null?void 0:t.type)==="sublayer"&&GF(t,"layers-in-view");return"itemCatalogIcon"in e&&(r||i)?k("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:t,visibleElements:r}=this;if(!("visible"in t))return;const{layer:i}=t,n=(i==null?void 0:i.type)==="catalog-dynamic-group";return"catalogLayerList"in r&&r.catalogLayerList&&n?k("calcite-action",{appearance:"transparent",disabled:!i.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(t),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:t,rootGroupUid:r,listModeDisabled:i,selectionMode:n,displayMode:s}=this;if(!("children"in t))return;const o=[...this.parentTitles??[],t.title],{children:a,layer:l}=t,c=(l==null?void 0:l.type)!=="catalog-dynamic-group"&&LNe(t),h=!i&&vNe(l),f=(l==null?void 0:l.type)==="group",m=!h&&!c&&e&&f,y=!!e&&"childrenSortable"in t&&t.childrenSortable&&$Ne(t);return c||m?k("calcite-list",{canPull:g=>!!this.canMove&&this.canMove(g,"pull"),canPut:g=>!!this.canMove&&this.canMove(g,"put"),"data-item":t,"data-layer-type":r,displayMode:s,dragEnabled:y,group:f?r:`${r}-${l==null?void 0:l.uid}`,key:`child-list-${l==null?void 0:l.uid}`,label:t.title,selectionAppearance:"border",selectionMode:n},a==null?void 0:a.filter(g=>!g.hidden&&(this.visibleElements.errors||!g.error)).toArray().map(g=>this._renderItem(g,t,o)),this._renderedTablesItem):null}get _hasTables(){var r,i;const{layerTablesEnabled:e}=this,t=this.item.layer;if(!e||!t)return!1;switch(t.type){case"knowledge-graph":return e.includes(t.type)&&"tables"in t&&!!((r=t.tables)!=null&&r.length);case"map-image":case"tile":return e.includes(t.type)&&"subtables"in t&&!!((i=t.subtables)!=null&&i.length);default:return!1}}get _renderedTablesItem(){const{item:e,messages:t,css:r}=this,{layer:i}=e;return"itemTableIcon"in r&&"visible"in e&&"tables"in t&&this._hasTables?k("calcite-list-item",{class:r.item,"data-layer-id":i==null?void 0:i.id,dragDisabled:!0,key:`list-item-table-list-tables-${i==null?void 0:i.uid}`,label:t.tables,title:t.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},k("calcite-icon",{class:r.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),k("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:t,css:r}=this;return e.error?k("div",{class:r.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},k("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},k("div",{slot:"message"},"tableError"in t?t.tableError:t.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in t?k("div",{class:r.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},k("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},k("div",{slot:"message"},t.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:ANe(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(e=>e.filter(t=>t.visible))}get _actionsCount(){return this.item.actionsSections.reduce((e,t)=>e+t.length,0)}_renderAction(e){const{item:t}=this,{action:r,textEnabled:i}=e;if(!r)return null;const{active:n,disabled:s,title:o,type:a,indicator:l}=r;return k("calcite-action",{active:a==="toggle"&&r.value,appearance:"transparent","data-action-id":r.id,disabled:s,icon:Iz(r),indicator:l,key:`action-${r.uid}`,loading:n,onclick:()=>this._triggerAction(t,r),scale:"s",slot:i?void 0:"actions-end",text:o??"",textEnabled:i,title:o??void 0},this._renderFallbackIcon(r))}_renderFallbackIcon(e){const{css:t}=this,{className:r,icon:i}=e;if(i)return null;const n="image"in e?e.image:void 0,s={[t.itemActionIcon]:!!r,[t.itemActionImage]:!!n};return r&&(s[r]=!0),n||r?k("span",{"aria-hidden":"true",class:this.classes(t.itemActionIcon,s),key:"icon",styles:pNe(n)}):null}_renderItem(e,t,r=[]){var i;return k(rR,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,displayMode:this.displayMode,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${(i=e.layer)==null?void 0:i.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:t,parentTitles:r,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,t){t&&e&&(t.type==="toggle"&&(t.value=!t.value),this.onAction(t,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){var t;e&&((t=this.onCatalogOpen)==null||t.call(this,e))}_focusSelectedDragEl(e,t){var r,i;this.selectedDragItemLayerUid===((r=t.layer)==null?void 0:r.uid)&&(xv(e),(i=this.onSelectedDragItemLayerUidChange)==null||i.call(this,null))}_handleCalciteListItemToggle(e,t){e.stopPropagation(),t.open=e.target.open}_getParentVisibilityMode(e){return e&&"visibilityMode"in e?e.visibilityMode:null}_handleCalciteListItemSelect(e,t,r){if(po(e.target)!==t)return;const i=this._getParentVisibilityMode(r);this.selectionMode==="none"&&i!=="inherited"&&this._toggleVisibility(t,r)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,t){!e||!("visible"in e)||this._getParentVisibilityMode(t)==="exclusive"&&e.visible||(e.visible=!e.visible)}};Le.vnodeSelector="calcite-list-item",u([d()],Le.prototype,"activeItem",void 0),u([d()],Le.prototype,"canMove",void 0),u([d()],Le.prototype,"css",void 0),u([d()],Le.prototype,"displayMode",void 0),u([d()],Le.prototype,"dragEnabled",void 0),u([d()],Le.prototype,"item",void 0),u([d()],Le.prototype,"layerTablesEnabled",void 0),u([d()],Le.prototype,"listModeDisabled",void 0),u([d()],Le.prototype,"messages",void 0),u([d()],Le.prototype,"messagesCommon",void 0),u([d()],Le.prototype,"onAction",void 0),u([d()],Le.prototype,"onPanelOpen",void 0),u([d()],Le.prototype,"onCatalogOpen",void 0),u([d()],Le.prototype,"onTablesOpen",void 0),u([d()],Le.prototype,"onSelectedDragItemLayerUidChange",void 0),u([d()],Le.prototype,"onTooltipReferenceChange",void 0),u([d()],Le.prototype,"parent",void 0),u([d()],Le.prototype,"parentTitles",void 0),u([d()],Le.prototype,"rootGroupUid",void 0),u([d()],Le.prototype,"selectionMode",void 0),u([d()],Le.prototype,"selectedItems",void 0),u([d()],Le.prototype,"selectedDragItemLayerUid",void 0),u([d()],Le.prototype,"visibleElements",void 0),u([d()],Le.prototype,"visibilityAppearance",void 0),u([d()],Le.prototype,"_title",null),u([d()],Le.prototype,"_renderedItemStatus",null),u([d()],Le.prototype,"_renderedItemTemporaryIcon",null),u([d()],Le.prototype,"_renderedItemToggle",null),u([d()],Le.prototype,"_renderedPanel",null),u([d()],Le.prototype,"_renderedPanelAction",null),u([d()],Le.prototype,"_renderedActions",null),u([d()],Le.prototype,"_renderedActionMenu",null),u([d()],Le.prototype,"_renderedActionMenuContent",null),u([d()],Le.prototype,"_renderedCatalogFootprintIcon",null),u([d()],Le.prototype,"_renderedCatalogDynamicIcon",null),u([d()],Le.prototype,"_renderedCatalogSelectNode",null),u([d()],Le.prototype,"_renderedChildList",null),u([d()],Le.prototype,"_hasTables",null),u([d()],Le.prototype,"_renderedTablesItem",null),u([d()],Le.prototype,"_renderedItemMessage",null),u([d()],Le.prototype,"_singleAction",null),u([d()],Le.prototype,"_filteredSections",null),u([d()],Le.prototype,"_actionsCount",null),Le=rR=u([T("esri.widgets.LayerList.LayerListItem")],Le);const kNe=Le;function Az(e){return e!=null&&typeof e=="object"&&e.type==="2d"&&e.view2dType==="linkchart"}function RNe(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,i=Array.isArray(e)?e:ONe(e);r.push(...i)}}function ONe(e){return e.split(",").map(t=>t.trim())}function kz(e){return e&&typeof e.render=="function"}function pqe(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}let ni=class extends qc.IdentifiableMixin(Mr){constructor(t,r){super(t,r),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([ee(()=>this._canCreateLegend,()=>this._createLegend(),Ye),ee(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),Ye)])}destroy(){this._legend=Et(this._legend)}get _canCreateLegend(){const{content:t,listItem:r}=this;if(!r)return!1;const i="legend";return t===i||t!=null&&!!Array.isArray(t)&&t.includes(i)}get _legendOptions(){const{listItem:t,_legendLayerInfo:r}=this,i=t==null?void 0:t.view;return r&&i?{view:i,layerInfos:[r]}:{}}get _legendLayerInfo(){var o;const t=(o=this.listItem)==null?void 0:o.layer;if(!t||t.type==="subtype-sublayer")return null;const r=d5(t)?t:null,i=t==null?void 0:t.parent,n=i!=null&&"type"in i&&i.type==="map-image"?r==null?void 0:r.source:null,s="";return n&&i?{layer:i,title:s,sublayerIds:[n.mapLayerId]}:{layer:t,title:s}}get disabled(){var n;const{listItem:t,_legend:r,content:i}=this;return!t||!(Array.isArray(i)&&i.length>1)&&!!r&&(!((n=r.activeLayerInfos)!=null&&n.length)||!t.visibleAtCurrentScale||!t.visible)}set disabled(t){this._overrideIfSome("disabled",t)}get icon(){const{image:t}=this,r=this._getFirstWidget();return this._get("icon")??(!t&&r?r.icon:null)}set icon(t){this._overrideIfSome("icon",t)}get title(){var t;return this._get("title")||(((t=this._getFirstWidget())==null?void 0:t.label)??"")}set title(t){this._override("title",t)}render(){return k("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(t){const{_legend:r,disabled:i,open:n}=this;return t&&!i&&n?t==="legend"&&r?k("div",{key:"legend-widget"},r.render()):typeof t=="string"?k("div",{innerHTML:t,key:t}):kz(t)?k("div",{key:"content-widget"},t.render()):t instanceof HTMLElement?k("div",{afterCreate:this._attachToNode,bind:t,key:"content-element"}):null:null}_renderContents(){const{content:t,open:r}=this;return r?Array.isArray(t)?t.map(i=>this._renderContent(i)):this._renderContent(t):null}async _createLegend(){if(Et(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:t}=await B(()=>Promise.resolve().then(()=>MDe),void 0),r=new t(this._legendOptions);this._legend=r}_attachToNode(t){t.appendChild(this)}_updateLegend(){const t=this._legend;t&&t.set(this._legendOptions)}_getWidget(t){return t==="legend"?this._legend:kz(t)?t:null}_getFirstWidget(){const{content:t}=this;return Array.isArray(t)?t.map(r=>this._getWidget(r)).find(r=>r):this._getWidget(t)}};u([d()],ni.prototype,"_legend",void 0),u([d()],ni.prototype,"_canCreateLegend",null),u([d()],ni.prototype,"_legendOptions",null),u([d()],ni.prototype,"_legendLayerInfo",null),u([d()],ni.prototype,"className",void 0),u([d()],ni.prototype,"content",void 0),u([d()],ni.prototype,"disabled",null),u([d()],ni.prototype,"flowEnabled",void 0),u([d()],ni.prototype,"icon",null),u([d()],ni.prototype,"image",void 0),u([d()],ni.prototype,"listItem",void 0),u([d()],ni.prototype,"open",void 0),u([d()],ni.prototype,"title",null),u([d()],ni.prototype,"visible",void 0),ni=u([T("esri.widgets.LayerList.ListItemPanel")],ni);const Bte=ni;var K0;const NNe=ie.ofType({key:"type",defaultKeyValue:"button",base:hE,typeMap:{button:FJ,toggle:jJ}}),Gte=ie.ofType(NNe),cI="layer",h_="child-list-mode",PNe="hide";let yt=K0=class extends qc.IdentifiableMixin(ce){constructor(e){super(e),this.actionsSections=new Gte,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(ie.ofType(K0)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([ee(()=>{var e;return[this.layer,(e=this.layer)==null?void 0:e.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),Ye),ee(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),Ye),ee(()=>this.view,e=>this._updateChildrenView(e),Ye),ee(()=>this.panel,e=>this._setListItemOnPanel(e),Ye)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){var e;(e=this.panel)==null||e.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){var e;return(e=this.layer)==null?void 0:e.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;const r=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(i=>i.layer===r)??null}castPanel(e){var t;return(t=this.panel)!=null&&t.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Bte(e):null}get sortable(){var e;return((e=this.layer)==null?void 0:e.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=Hi(this,"layer.layer");return(!e||e&&Hi(this,"layer.layer.loaded"))&&Hi(this,"layer.title")||Hi(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){var r;const{layer:e,checkPublishStatusEnabled:t}=this;return!!(t&&e&&"publishingInfo"in e&&((r=e.publishingInfo)==null?void 0:r.status)==="publishing")}get updating(){const{layerView:e,connectionStatus:t,layer:r,publishing:i}=this;return!i&&!t&&(e?e.updating:(r==null?void 0:r.loadStatus)==="loading"||!1)}get visible(){var e;return!!((e=this.layer)!=null&&e.visible)}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){var e,t;return((e=this.layerView)==null?void 0:e.visibleAtCurrentScale)??!TNe(this.layer,(t=this.view)==null?void 0:t.scale)}get visibleAtCurrentTimeExtent(){var e;return((e=this.layerView)==null?void 0:e.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return _Ne(this.layer)}clone(){return new K0({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){var t;(t=this.children)==null||t.forEach(r=>r.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(r=>r.view=e)}_createChildren(e){const{listModeDisabled:t,children:r}=this,i=e.filter(n=>!r.some(s=>s.layer===n));r.addMany(this._createChildItems(i,t))}_destroyChildren(e){const{children:t}=this,r=t.filter(i=>!!i.layer&&!e.includes(i.layer));t.destroyMany(r)}_sortChildren(e){this.children.sort((t,r)=>e.indexOf(r.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(h_),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(h_),this.listModeDisabled||this.addHandles(e.toArray().map(t=>ee(()=>t.listMode,()=>this._compileChildren(e))),h_)}_compileChildren(e){const t=this.listModeDisabled?e:e==null?void 0:e.filter(r=>QS(r)!==PNe);e!=null&&e.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),cI)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.reverse().map(r=>t||ENe(r)?new K0({layer:r,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(Ei)}_watchLayerProperties(e){if(this.removeHandles(cI),this.removeHandles(h_),!e)return;if((!this.listModeDisabled&&QS(e))==="hide-children")return void this.children.destroyAll();const t=Vte(e);t&&this.addHandles(ee(()=>e[t],r=>{e.hasOwnProperty(t)&&this._initializeChildLayers(r)},Ye),cI)}};u([d({type:Gte})],yt.prototype,"actionsSections",void 0),u([d()],yt.prototype,"actionsOpen",void 0),u([d()],yt.prototype,"checkPublishStatusEnabled",void 0),u([d({type:ie.ofType(yt)})],yt.prototype,"children",void 0),u([d()],yt.prototype,"childrenSortable",void 0),u([d({readOnly:!0})],yt.prototype,"connectionStatus",null),u([d({readOnly:!0})],yt.prototype,"error",null),u([d()],yt.prototype,"hidden",void 0),u([d({readOnly:!0})],yt.prototype,"incompatible",null),u([d()],yt.prototype,"layer",void 0),u([d({readOnly:!0})],yt.prototype,"layerView",null),u([d()],yt.prototype,"listItemCreatedFunction",void 0),u([d({nonNullable:!0})],yt.prototype,"listModeDisabled",void 0),u([d()],yt.prototype,"open",void 0),u([d({type:Bte})],yt.prototype,"panel",void 0),u([He("panel")],yt.prototype,"castPanel",null),u([d()],yt.prototype,"parent",void 0),u([d({value:!0})],yt.prototype,"sortable",null),u([d()],yt.prototype,"title",null),u([d({readOnly:!0})],yt.prototype,"publishing",null),u([d({readOnly:!0})],yt.prototype,"updating",null),u([d()],yt.prototype,"view",void 0),u([d()],yt.prototype,"visible",null),u([d({readOnly:!0})],yt.prototype,"visibleAtCurrentScale",null),u([d({readOnly:!0})],yt.prototype,"visibleAtCurrentTimeExtent",null),u([d({readOnly:!0})],yt.prototype,"visibilityMode",null),yt=K0=u([T("esri.widgets.LayerList.ListItem")],yt);const h5=yt,Js={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},DNe="hide",qte=ie.ofType(h5);let ta=class extends Ns.EventedAccessor{constructor(t){super(t),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new qte,this.view=null}initialize(){this.addHandles([ee(()=>{var t;return((t=this.view)==null?void 0:t.ready)===!0},()=>this._viewHandles(),Ye),ee(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),ee(()=>Az(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],Js.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:t}=this;return t!=null&&t.ready?"ready":t?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(t=>t.children).length}triggerAction(t,r){t&&!t.disabled&&this.emit("trigger-action",{action:t,item:r})}moveListItem(t,r,i,n){var y,g;const s=t==null?void 0:t.layer;if(!s||s.type==="subtype-sublayer"||s.type==="sublayer")return;const o=(g=(y=this.view)==null?void 0:y.map)==null?void 0:g.layers,a=r?Cz(r):o,l=i?Cz(i):o;if(!a||!l)return;const{operationalItems:c}=this,h=(r==null?void 0:r.children)||c,f=(i==null?void 0:i.children)||c,m=l.length-n;t.parent=i||null,h.remove(t),a.remove(s),f.includes(t)||f.add(t,m),l.includes(s)||l.add(s,m),this._compileList()}_createLayerViewHandles(t){this.removeHandles(Js.layerViews),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),Js.layerViews)}_createMapLayerHandles(t){this.removeHandles(Js.mapLayers),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),Js.mapLayers)}_createListItem(t){const{view:r,listItemCreatedFunction:i,checkPublishStatusEnabled:n,listModeDisabled:s}=this;return new h5({checkPublishStatusEnabled:n,listModeDisabled:s,layer:t,listItemCreatedFunction:i,view:r})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(t){return t?this.listModeDisabled?t:t.filter(r=>QS(r)!==DNe):void 0}_watchLayersListMode(t){this.removeHandles(Js.layerListMode),t&&!this.listModeDisabled&&this.addHandles(ee(()=>t.filter(r=>"listMode"in r).map(r=>r.listMode).toArray(),()=>this._compileList()),Js.layerListMode)}_compileList(){var n,s;const t=(s=(n=this.view)==null?void 0:n.map)==null?void 0:s.layers,r=Az(this.view)&&!this.view.inGeographicLayout?t==null?void 0:t.filter(({type:o})=>o==="link-chart"):t;this._watchLayersListMode(r);const i=this._getViewableLayers(r);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(t){const{operationalItems:r}=this;t.forEach(i=>{r.some(n=>n.layer===i)||r.add(this._createListItem(i))})}_removeItems(t){const{operationalItems:r}=this,i=[];r.forEach(n=>{n&&t&&t.includes(n.layer)||i.push(n)}),r.destroyMany(i)}_sortItems(t){const{operationalItems:r}=this;r.sort((i,n)=>{const s=t.indexOf(i.layer),o=t.indexOf(n.layer);return s>o?-1:s<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:t}=this;this.removeHandles([Js.mapLayers,Js.layerViews,Js.viewLayers]),t!=null&&t.ready?this.addHandles([ee(()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.allLayers},r=>this._createMapLayerHandles(r),Ye),ee(()=>{var r;return(r=this.view)==null?void 0:r.allLayerViews},r=>this._createLayerViewHandles(r),Ye)],Js.viewLayers):this._removeAllItems()}};u([d()],ta.prototype,"checkPublishStatusEnabled",void 0),u([d()],ta.prototype,"listItemCreatedFunction",void 0),u([d({nonNullable:!0})],ta.prototype,"listModeDisabled",void 0),u([d({type:qte})],ta.prototype,"operationalItems",void 0),u([d({readOnly:!0})],ta.prototype,"state",null),u([d()],ta.prototype,"totalItems",null),u([d()],ta.prototype,"view",void 0),ta=u([T("esri.widgets.LayerList.LayerListViewModel")],ta);const Hte=ta;let ys=class extends ce{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};u([d({type:Boolean,nonNullable:!0})],ys.prototype,"catalogLayerList",void 0),u([d({type:Boolean,nonNullable:!0})],ys.prototype,"closeButton",void 0),u([d({type:Boolean,nonNullable:!0})],ys.prototype,"collapseButton",void 0),u([d({type:Boolean,nonNullable:!0})],ys.prototype,"errors",void 0),u([d({type:Boolean,nonNullable:!0})],ys.prototype,"filter",void 0),u([d({type:Boolean,nonNullable:!0})],ys.prototype,"flow",void 0),u([d({type:Boolean,nonNullable:!0})],ys.prototype,"heading",void 0),u([d({type:Boolean,nonNullable:!0})],ys.prototype,"statusIndicators",void 0),u([d({type:Boolean,nonNullable:!0})],ys.prototype,"temporaryLayerIndicators",void 0),ys=u([T("esri.widgets.LayerList.LayerListVisibleElements")],ys);const Wte=ys,FNe=["label","description","metadata"],jNe=ie.ofType(h5),Rz="nested";let Ae=class extends qc.IdentifiableMixin(Mr){constructor(t,r){super(t,r),this._rootListEl=null,this._activeItem=null,this._tooltipReferenceMap=new km,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new km,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new ie(["knowledge-graph"]),this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=mNe,this.minFilterItems=fNe,this.openedLayers=new ie,this.openedLayerLists=new ie,this.selectedItems=new jNe,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new Hte,this.visibilityAppearance="default",this.visibleElements=new Wte,this._canMove=({dragEl:i,fromEl:n,toEl:s},o)=>{var M,I,C;const a=o==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,l=po(i);if(!(l!=null&&l.sortable))return!1;const c=po(n),h=Lz(n),f=po(s),m=Lz(s),y=!!h&&!!m&&h===m,g={selected:l,from:c,to:f},v=n.group,x=s.group,b=((M=c==null?void 0:c.layer)==null?void 0:M.type)??"",_=((I=f==null?void 0:f.layer)==null?void 0:I.type)??"",S=new Set(["map-image","catalog","knowledge-graph"]),$="sublayer";return v&&x&&typeof a=="function"?a.call(null,g):y&&!S.has(b)&&!S.has(_)&&((C=l==null?void 0:l.layer)==null?void 0:C.type)!==$},this._onCatalogOpen=i=>{var n,s;this.openedLayers.push((n=i.layer)==null?void 0:n.parent),this._focusLayerFlowItem=(s=i.layer)==null?void 0:s.uid},this._onTablesOpen=i=>{var n;this.openedLayers.push(i.layer),this._focusLayerFlowItem=(n=i.layer)==null?void 0:n.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onTooltipReferenceChange=(i,n)=>{n?this._tooltipReferenceMap.set(i,n):this._tooltipReferenceMap.delete(i)},this._onSelectedDragItemLayerUidChange=i=>{this._selectedDragItemLayerUid=i},this._onTriggerAction=(i,n)=>{this.triggerAction(i,n)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=i=>{if(this.visibilityAppearance!=="default")return;const n=Array.from(i.composedPath()).find(s=>{var o;return(o=s.classList)==null?void 0:o.contains(Ng.item)});this._activeItem=po(n)},this._onCalciteListOrderChange=i=>{const{_lastDragDetail:n}=this,{toEl:s,fromEl:o,dragEl:a,newIndex:l}=i;if(o&&s&&!((n==null?void 0:n.newIndex)===l&&(n==null?void 0:n.dragEl)===a&&(n==null?void 0:n.toEl)===s&&(n==null?void 0:n.fromEl)===o))if(this._lastDragDetail=i,this._selectedDragItemLayerUid=a.value,o!==s)this._moveLayerFromChildList({toEl:s,fromEl:o,dragEl:a,newIndex:l});else{const c=Array.from(o.children).filter(h=>h==null?void 0:h.matches("calcite-list-item")).map(h=>h.value);this._sortLayers(o,c)}}}initialize(){this.addHandles([En(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),Ye),En(()=>this.viewModel.operationalItems,"change",()=>xNe(this.selectedItems),Ye),ee(()=>[this.filterPredicate,this._rootListEl],()=>SNe(this._rootListEl,this.filterPredicate))])}loadDependencies(){return Hy({button:()=>B(()=>import("./index-09d80d8f.js"),["assets/index-09d80d8f.js","assets/customElement-a1bb8d2e.js","assets/guid-40009d79.js","assets/useT9n-c901282b.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/ref-f1080d6c.js","assets/static-858e9a5a.js","assets/form-f1517cda.js","assets/interactive-3f3b7038.js","assets/label-5bdbe44a.js","assets/component-b5b15c2e.js"]),flow:()=>B(()=>import("./index-a3bcd194.js"),["assets/index-a3bcd194.js","assets/ref-f1080d6c.js","assets/observers-43783b2c.js","assets/component-b5b15c2e.js","assets/dom-aeb6a324.js"]),"flow-item":()=>B(()=>import("./index-04023111.js"),["assets/index-04023111.js","assets/customElement-a1bb8d2e.js","assets/guid-40009d79.js","assets/useT9n-c901282b.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/customElement-4f66442f.js","assets/keyed-c191e3a2.js","assets/ref-f1080d6c.js","assets/interactive-3f3b7038.js","assets/component-b5b15c2e.js","assets/customElement-e88e73f0.js","assets/floating-ui-2d7f5cd7.js","assets/debounce-0dae6e02.js","assets/openCloseComponent-62f7e67f.js","assets/static-858e9a5a.js","assets/FloatingArrow-6a150b89.js","assets/key-b113a0f3.js","assets/array-120a91a3.js","assets/customElement-1c26e0c0.js","assets/customElement-861caacc.js"]),list:()=>B(()=>import("./index-e4f4e93f.js"),["assets/index-e4f4e93f.js","assets/customElement-a1bb8d2e.js","assets/guid-40009d79.js","assets/useT9n-c901282b.js","assets/customElement-1c26e0c0.js","assets/ref-f1080d6c.js","assets/observers-43783b2c.js","assets/dom-aeb6a324.js","assets/keyed-c191e3a2.js","assets/customElement-d1ab8a5a.js","assets/customElement-847c1974.js","assets/customElement-4d4e5be7.js","assets/customElement-d24c4d57.js","assets/static-858e9a5a.js","assets/form-f1517cda.js","assets/interactive-3f3b7038.js","assets/key-b113a0f3.js","assets/label-5bdbe44a.js","assets/component-b5b15c2e.js","assets/debounce-0dae6e02.js","assets/utils-e7c4f253.js"]),notice:()=>B(()=>import("./index-1ec9440c.js"),["assets/index-1ec9440c.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/ref-f1080d6c.js","assets/component-b5b15c2e.js","assets/openCloseComponent-62f7e67f.js","assets/useT9n-c901282b.js"]),tooltip:()=>B(()=>import("./index-2297f34e.js"),["assets/index-2297f34e.js","assets/ref-f1080d6c.js","assets/floating-ui-2d7f5cd7.js","assets/dom-aeb6a324.js","assets/debounce-0dae6e02.js","assets/guid-40009d79.js","assets/openCloseComponent-62f7e67f.js","assets/FloatingArrow-6a150b89.js","assets/keyed-c191e3a2.js"])})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten(t=>t.children.filter(r=>{var i;return((i=r.layer)==null?void 0:i.type)!=="catalog-dynamic-group"})).length}get _visibleItems(){var t;return(t=this.operationalItems)==null?void 0:t.filter(r=>!r.hidden&&(this.visibleElements.errors||!r.error))}get _openedPanelItems(){return this._visibleItems.flatten(t=>t.children).filter(({hidden:t,panel:r})=>!t&&(r==null?void 0:r.open)&&!r.disabled&&r.flowEnabled)}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){const{openedLayers:t}=this;return t.toArray().map((r,i)=>this._renderLayerFlowItem(r,i===t.length-1))}get icon(){return"layers"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(t){this.viewModel.listItemCreatedFunction=t}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(t){this.viewModel.operationalItems=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}triggerAction(t,r){return this.viewModel.triggerAction(t,r)}render(){var n;const t=(n=this.viewModel)==null?void 0:n.state,{_visibleItems:r}=this,i={[Qr.hidden]:t==="loading",[Qr.disabled]:t==="disabled"};return k("div",{class:this.classes(Ng.base,Qr.widget,Qr.panel,i)},r!=null&&r.length?[this._renderItemTooltips(),this._renderItems()]:this._renderNoItems())}async _createFlowList(t,r){const{_layerListMap:i}=this,n=i.get(t);if(n)return n;const s=t.type==="catalog"?await this._createCatalogLayerList(t):await this._createTableList(t);return r.aborted||i.set(t,s),s}async _handleOpenedLayersChange(){var l;const{_layerListMap:t,openedLayers:r,openedLayerLists:i}=this;(l=this._openedLayersController)==null||l.abort();const n=new AbortController,{signal:s}=n;this._openedLayersController=n,t.forEach((c,h)=>{r.includes(h)||(c.destroy(),t.delete(h))});const o=await Promise.all(r.map(c=>this._createFlowList(c,s)));if(s.aborted)return;i.removeAll(),i.addMany(o);const a=i.at(-1);a?"catalogLayer"in a?(this._set("catalogLayerList",a),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",a)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(t){var n,s;const{_tooltipReferenceMap:r,messages:i}=this;return t?k("calcite-tooltip",{key:`tooltip-${(n=t.layer)==null?void 0:n.uid}`,overlayPositioning:"fixed",referenceElement:r.get((s=t.layer)==null?void 0:s.uid)},i.layerIncompatibleTooltip):null}_renderItemTooltipNodes(t){var r;return t.incompatible?this._renderItemTooltip(t):(r=t.children)==null?void 0:r.filter(i=>!i.hidden).toArray().map(i=>this._renderItemTooltipNodes(i))}_renderItemTooltips(){var t;return(t=this._visibleItems)==null?void 0:t.toArray().map(r=>this._renderItemTooltipNodes(r))}_renderNoItemsMessage(){return k("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return k("div",{class:Ng.itemMessage,key:"esri-layer-list__no-items"},k("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}async _createCatalogLayerList(t){const{default:r}=await B(()=>import("./CatalogLayerList-f693124c.js"),[]),{headingLevel:i,catalogOptions:n,view:s,filterPlaceholder:o,listItemCreatedFunction:a,minFilterItems:l,selectionMode:c,visibilityAppearance:h,_onCatalogOpen:f,_onTablesOpen:m,layerTablesEnabled:y}=this;return new r({headingLevel:i,view:s,filterPlaceholder:o,listItemCreatedFunction:a,minFilterItems:l,selectionMode:c,visibilityAppearance:h,...n,catalogLayer:t,layerTablesEnabled:y,onCatalogOpen:f,onTablesOpen:m})}_getTableListParams(t){switch(t.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:t.tables};case"map-image":return{...this.mapImageOptions,tables:t.subtables};case"tile":return{...this.tileOptions,tables:t.subtables};default:return null}}async _createTableList(t){const{default:r}=await B(()=>import("./TableList-9dc02c86.js"),[]),{headingLevel:i,selectionMode:n,dragEnabled:s}=this;return new r({headingLevel:i,selectionMode:n,dragEnabled:s,...this._getTableListParams(t)})}_renderLayerFlowItem(t,r){var o;const{messages:i,openedLayers:n}=this,s=t.title||this.messages.untitledLayer;return k("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":t.uid,description:s,heading:i[t.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${t.uid}`,selected:r,onCalciteFlowItemBack:a=>{a.preventDefault(),n.pop();const l=n.at(-1);l?this._focusLayerFlowItem=l.uid:this._focusRootFlowItem=!0}},(o=this._layerListMap.get(t))==null?void 0:o.render())}_renderPanelFlowItems(){const{_openedPanelItems:t,openedLayers:r}=this;return t.toArray().map(({title:i,panel:n},s)=>{const o=()=>this._handlePanelFlowItemBack(n);return k("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:i,heading:n.title,headingLevel:this.headingLevel,key:`flow-panel-${n.uid}`,selected:!r.length&&s===t.length-1,onCalciteFlowItemBack:a=>{a.preventDefault(),o()}},n.render(),k("calcite-button",{appearance:"transparent",onclick:o,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(t){t.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(t){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,xv(t))}_focusLayerFlowItemNode(t){this._focusLayerFlowItem===t.dataset.layerUid&&(this._focusLayerFlowItem=null,xv(t))}_focusPanelFlowItemNode(t){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,xv(t))}_renderItems(){const{visible:t,collapsed:r,_visibleItems:i,_openedPanelItems:n,_filterEnabled:s,_rootGroupUid:o,visibleElements:{closeButton:a,collapseButton:l,heading:c,flow:h},_dragEnabled:f,selectionMode:m,filterText:y,openedLayers:g,filterPlaceholder:v,messages:x}=this,b=[k("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:a,closed:!t,collapsed:r,collapsible:l,heading:c?x.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!g.length&&!n.length,onCalciteFlowItemClose:()=>this.visible=!1},k("calcite-list",{afterCreate:_=>{this._rootListEl=_,_.addEventListener("focusin",this._setActiveItem),_.addEventListener("focusout",this._clearActiveItem)},afterRemoved:_=>{this._rootListEl=null,_.removeEventListener("focusin",this._setActiveItem),_.removeEventListener("focusout",this._clearActiveItem)},canPull:_=>this._canMove(_,"pull"),canPut:_=>this._canMove(_,"put"),"data-layer-type":o,displayMode:Rz,dragEnabled:f,filterEnabled:s,filterPlaceholder:v,filterProps:FNe,filterText:s?y:"",group:o,key:"root-list",label:x.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:m,onCalciteListChange:_=>this._handleCalciteListChange(_),onCalciteListDragEnd:_=>this._handleCalciteListDragEnd(_.detail),onCalciteListFilter:_=>{var S;return this.filterText=((S=_.currentTarget)==null?void 0:S.filterText)??""},onCalciteListOrderChange:_=>this._onCalciteListOrderChange(_.detail)},i==null?void 0:i.toArray().map(_=>this._renderItem(_)),i!=null&&i.length&&s?k("div",{class:Ng.filterNoResults,slot:"filter-no-results"},k("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return t?h?k("calcite-flow",{key:"root-flow"},b):b:null}_renderItem(t,r,i){var n;return k(kNe,{activeItem:this._activeItem,canMove:this._canMove,css:Ng,displayMode:Rz,dragEnabled:this.dragEnabled,item:t,key:`layerListItem-${(n=t.layer)==null?void 0:n.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:r,parentTitles:i,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:t,fromEl:r,dragEl:i,newIndex:n}){const s=po(i),o=po(t),a=po(r);this.viewModel.moveListItem(s,a,o,n)}_handleCalciteListDragEnd(t){const{fromEl:r,dragEl:i,oldIndex:n}=t;r.insertBefore(i,r.children[n])}_sortLayers(t,r){var i,n;if(t)if(t===this._rootListEl)zte((n=(i=this.view)==null?void 0:i.map)==null?void 0:n.layers,r);else{const s=po(t);if(!s)return;MNe(s,r)}}_handleCalciteListChange(t){const{selectionMode:r,selectedItems:i}=this;if(r==="none")return;const n=t.target.selectedItems.map(s=>po(s)).filter(Boolean);i.removeAll(),i.addMany(n)}};u([d()],Ae.prototype,"_rootListEl",void 0),u([d()],Ae.prototype,"_activeItem",void 0),u([d()],Ae.prototype,"_tooltipReferenceMap",void 0),u([d()],Ae.prototype,"_focusRootFlowItem",void 0),u([d()],Ae.prototype,"_focusPanelFlowItem",void 0),u([d()],Ae.prototype,"_focusLayerFlowItem",void 0),u([d()],Ae.prototype,"_layerListMap",void 0),u([d()],Ae.prototype,"_totalItems",null),u([d()],Ae.prototype,"_visibleItems",null),u([d()],Ae.prototype,"_openedPanelItems",null),u([d()],Ae.prototype,"_dragEnabled",null),u([d()],Ae.prototype,"_filterEnabled",null),u([d()],Ae.prototype,"_renderedOpenLayerFlowItems",null),u([d({readOnly:!0})],Ae.prototype,"catalogLayerList",void 0),u([d()],Ae.prototype,"catalogOptions",void 0),u([d()],Ae.prototype,"collapsed",void 0),u([d()],Ae.prototype,"dragEnabled",void 0),u([d()],Ae.prototype,"filterPlaceholder",void 0),u([d()],Ae.prototype,"filterPredicate",void 0),u([d()],Ae.prototype,"filterText",void 0),u([d()],Ae.prototype,"headingLevel",void 0),u([d()],Ae.prototype,"icon",null),u([d()],Ae.prototype,"knowledgeGraphOptions",void 0),u([d()],Ae.prototype,"label",null),u([d()],Ae.prototype,"layerTablesEnabled",void 0),u([d()],Ae.prototype,"listItemCanGiveFunction",void 0),u([d()],Ae.prototype,"listItemCanReceiveFunction",void 0),u([d()],Ae.prototype,"listItemCreatedFunction",null),u([d()],Ae.prototype,"mapImageOptions",void 0),u([d(),Ta("esri/widgets/LayerList/t9n/LayerList")],Ae.prototype,"messages",void 0),u([d(),Ta("esri/t9n/common")],Ae.prototype,"messagesCommon",void 0),u([d()],Ae.prototype,"minDragEnabledItems",void 0),u([d()],Ae.prototype,"minFilterItems",void 0),u([d({readOnly:!0})],Ae.prototype,"openedLayers",void 0),u([d({readOnly:!0})],Ae.prototype,"openedLayerLists",void 0),u([d()],Ae.prototype,"operationalItems",null),u([d()],Ae.prototype,"selectedItems",void 0),u([d()],Ae.prototype,"selectionMode",void 0),u([d({readOnly:!0})],Ae.prototype,"tableList",void 0),u([d()],Ae.prototype,"tileOptions",void 0),u([d()],Ae.prototype,"view",null),u([RNe("trigger-action"),d({type:Hte})],Ae.prototype,"viewModel",void 0),u([d()],Ae.prototype,"visibilityAppearance",void 0),u([d({type:Wte,nonNullable:!0})],Ae.prototype,"visibleElements",void 0),Ae=u([T("esri.widgets.LayerList")],Ae);const VNe=Ae;function Oz(e,t){const r=e.featureReduction;return r&&r.type!=="selection"&&(!("maxScale"in r)||!r.maxScale||r.maxScale<t.scale)?r:null}const G1=-1;let uo=class extends ce{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=F("mapview-transitions-duration"),this.effects=[]}set effect(t){if(this._get("effect")!==(t=t||"")){this._set("effect",t);try{this._transitionTo(Nz(t))}catch(r){this._transitionTo([]),W.getLogger(this).warn("Invalid Effect",{effect:t,error:r})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return this._to!==null}canTransitionTo(t){try{return this.scale>0&&Pz(this._current,Nz(t),this.scale)}catch{return!1}}transitionStep(t,r){this._applyTimeTransition(t),this._updateForScale(r)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&Pz(this._current,t,this.scale)?(this._final=t,this._to=O(t),zNe(this._current,this._to,this.scale),this._from=O(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set("effects",this._current[0]?O(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const r=Math.min(1,this._time/this.duration);for(let i=0;i<this._current.length;i++){const n=this._current[i],s=this._from[i],o=this._to[i];n.scale=UNe(s.scale,o.scale,r);for(let a=0;a<n.effects.length;a++){const l=n.effects[a],c=s.effects[a],h=o.effects[a];l.interpolate(c,h,r)}}r===1&&(this._current=this._final,this._set("effects",this._current[0]?O(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set("scale",t),this._current.length===0)return;const r=this._current,i=this._current.length-1;let n,s,o=1;if(r.length===1||t>=r[0].scale)s=n=r[0].effects;else if(t<=r[i].scale)s=n=r[i].effects;else for(let a=0;a<i;a++){const l=r[a],c=r[a+1];if(l.scale>=t&&c.scale<=t){o=(t-l.scale)/(c.scale-l.scale),n=l.effects,s=c.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(n[a],s[a],o)}};function Nz(e){const t=DP(e)||[];return BNe(t)?[{scale:G1,effects:t}]:t}function Pz(e,t,r){var i,n,s,o;return!((i=e[0])!=null&&i.effects)||!((n=t[0])!=null&&n.effects)?!0:!((((s=e[0])==null?void 0:s.scale)===G1||((o=t[0])==null?void 0:o.scale)===G1)&&(e.length>1||t.length>1)&&r<=0)&&WW(e[0].effects,t[0].effects)}function zNe(e,t,r){const i=e.length>t.length?e:t,n=e.length>t.length?t:e,s=n[n.length-1],o=(s==null?void 0:s.scale)??r,a=(s==null?void 0:s.effects)??[];for(let l=n.length;l<i.length;l++)n.push({scale:o,effects:[...a]});for(let l=0;l<i.length;l++)n[l].scale=n[l].scale===G1?r:n[l].scale,i[l].scale=i[l].scale===G1?r:i[l].scale,ZW(n[l].effects,i[l].effects)}function UNe(e,t,r){return e+(t-e)*r}function BNe(e){const t=e[0];return!!t&&"type"in t}u([d()],uo.prototype,"_to",void 0),u([d()],uo.prototype,"duration",void 0),u([d({value:""})],uo.prototype,"effect",null),u([d({readOnly:!0})],uo.prototype,"effects",void 0),u([d({readOnly:!0})],uo.prototype,"final",null),u([d({readOnly:!0})],uo.prototype,"hasEffects",null),u([d({value:0})],uo.prototype,"scale",null),u([d({readOnly:!0})],uo.prototype,"transitioning",null),uo=u([T("esri.layers.effects.EffectView")],uo);function wqe(e){var r;const t=e.layer;return"floorInfo"in t&&((r=t.floorInfo)!=null&&r.floorField)&&"floors"in e.view?Zte(e.view.floors,t.floorInfo.floorField):null}function Dz(e,t){var r;return"floorInfo"in t&&((r=t.floorInfo)!=null&&r.floorField)?Zte(e,t.floorInfo.floorField):null}function Zte(e,t){if(!(e!=null&&e.length))return null;const r=e.filter(i=>i!=="").map(i=>`'${i}'`);return r.push("''"),`${t} IN (${r.join(",")}) OR ${t} IS NULL`}function bqe(e,t,r){return t.flatten(({sublayers:n})=>n).length!==e.length?!0:!!e.some(n=>n.originIdOf("minScale")>r||n.originIdOf("maxScale")>r||n.originIdOf("renderer")>r||n.originIdOf("labelingInfo")>r||n.originIdOf("opacity")>r||n.originIdOf("labelsVisible")>r||n.originIdOf("source")>r)||!Jte(e,t)}function GNe(e,t,r){return!!e.some(i=>{var a,l,c;const n=i.source,s=!n||n.type==="map-layer"&&n.mapLayerId===i.id&&(n.gdbVersion==null||n.gdbVersion===r);i.commitProperty("renderer"),i.commitProperty("labelingInfo"),i.commitProperty("opacity"),i.commitProperty("labelsVisible"),i.commitProperty("orderBy");const o=((c=(l=(a=i.layer)==null?void 0:a.capabilities)==null?void 0:l.exportMap)==null?void 0:c.supportsSublayerOrderBy)??!1;return!s||i.originIdOf("renderer")>Te.SERVICE||i.originIdOf("labelingInfo")>Te.SERVICE||i.originIdOf("opacity")>Te.SERVICE||i.originIdOf("labelsVisible")>Te.SERVICE||o&&i.originIdOf("orderBy")>Te.SERVICE})||!Jte(e,t)}function Jte(e,t){if(!(e!=null&&e.length)||t==null)return!0;const r=t.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(e.length>r.length)return!1;let i=0;const n=r.length;for(const{id:s}of e){for(;i<n&&r[i]!==s;)i++;if(i>=n)return!1}return!0}function _qe(e){return!!e&&e.some(t=>{var r;return t.minScale!=null||((r=t.layerDefinition)==null?void 0:r.minScale)!=null})}const qNe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let gs=class extends ce{constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(r=>{const i=Dz(this.floors,r);return r.toExportImageJSON(i)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&GNe(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.removeHandles("layer"),t&&this.addHandles([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",r=>this.notifyChange(qNe[r.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(r=>r.id).join(","):"show:-1":null}get layerDefs(){var i;const t=!!((i=this.floors)!=null&&i.length),r=this.visibleSublayers.filter(n=>n.definitionExpression!=null||t&&n.floorInfo!=null);return r.length?JSON.stringify(r.reduce((n,s)=>{const o=Dz(this.floors,s),a=pJ(o,s.definitionExpression);return a!=null&&(n[s.id]=a),n},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const r=this.layer.sublayers,i=this.scale,n=o=>{o.visible&&(i===0||HCe(i,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(n):t.unshift(o))};r&&r.forEach(n);const s=this._get("visibleSublayers");return!s||s.length!==t.length||s.some((o,a)=>t[a]!==o)?t:s}toJSON(){const t=this.layer;let r={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};u([d({readOnly:!0})],gs.prototype,"dynamicLayers",null),u([d()],gs.prototype,"floors",void 0),u([d({readOnly:!0})],gs.prototype,"hasDynamicLayers",null),u([d()],gs.prototype,"layer",null),u([d({readOnly:!0})],gs.prototype,"layers",null),u([d({readOnly:!0})],gs.prototype,"layerDefs",null),u([d({type:Number})],gs.prototype,"scale",void 0),u([d({readOnly:!0})],gs.prototype,"version",null),u([d({readOnly:!0})],gs.prototype,"visibleSublayers",null),gs=u([T("esri.layers.support.ExportImageParameters")],gs);const HNe=9999999e31,WNe=2e-7,ZNe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function KS(e){return ZNe[e]??[-34028234663852886e22,34028234663852886e22]}function Sqe(e,t){return e==null||t==null?"s32":e<0?e>=-128&&t<128?"s8":e>=-32768&&t<32768?"s16":"s32":t<256?"u8":t<65536?"u16":"u32"}function JNe(e){return((e==null?void 0:e.startsWith("s"))||(e==null?void 0:e.startsWith("u")))??!1}function $qe(e,t,r,i){let[n,s]=KS(r);const o=JNe(r);return o&&(n-=1e-5,s+=1e-5),o?r.startsWith("u")?YNe(e,t,i,[n,s]):QNe(e,t,i,[n,s]):KNe(e,t,i,[n,s])}function Eqe(e,t){for(let r=0;r<t.length;r++)t[r]&&isNaN(e[r])&&(t[r]=0,e[r]=0)}function YNe(e,t,r,i){const[n,s]=i;for(let o=0;o<t.length;o++)if(t[o]){const a=e[o];a<n||a>s?t[o]=0:r[o]=a+.5|0}}function QNe(e,t,r,i){const[n,s]=i;for(let o=0;o<t.length;o++)if(t[o]){const a=e[o];a<n||a>s?t[o]=0:r[o]=a+(a>0?.5:-.5)|0}}function KNe(e,t,r,i){const[n,s]=i;for(let o=0;o<t.length;o++)if(t[o]){const a=e[o];a<n||a>s?t[o]=0:r[o]=a}}function Tqe(e,t,r){var y,g;if(e.depthCount&&e.depthCount>1)return;const{pixels:i,statistics:n,pixelType:s}=e,o=i[0].length,a=e.bandMasks??[],l=e.mask??new Uint8Array(o).fill(255),c=s==="f32"||s==="f64",h=KS(s);let f=!1;for(let v=0;v<i.length;v++){const x=typeof t=="number"?t:t[v];if(x==null)continue;const b=((y=n==null?void 0:n[v])==null?void 0:y.minValue)??h[0],_=((g=n==null?void 0:n[v])==null?void 0:g.maxValue)??h[1];if(b>x+Number.EPSILON||_<x-Number.EPSILON)continue;const S=a[v]||l.slice(),$=i[v],M=r==null?void 0:r.customFloatTolerance;if(c&&M!==0){let I=M;I||(I=Math.abs(x)>=HNe?WNe*Math.abs(x):s==="f32"?2**-23:Number.EPSILON);for(let C=0;C<$.length;C++)S[C]&&Math.abs($[C]-x)<I&&($[C]=0,S[C]=0,l[C]=0,f=!0)}else for(let I=0;I<$.length;I++)S[I]&&$[I]===x&&($[I]=0,S[I]=0,l[I]=0,f=!0);a[v]=S}if(f){const v=e.bandMasks||e.pixels.length>1?a:null;r!=null&&r.matchAllNoData?e.mask=v&&v.length>1?m(v):l:(e.bandMasks=v,e.mask=l)}function m(v){if(v.length<2)return v[0];const x=v[0].length,b=new Uint8Array(x).fill(0);for(let _=0;_<v.length;_++){const S=v[_];for(let $=0;$<x;$++)S[$]&&(b[$]=255)}return b}f&&"updateStatistics"in e&&e.updateStatistics()}function Yte(e){return e==null||e.type==="simple"||e.type==="unique-value"||e.type==="class-breaks"||e.type==="dictionary"||e.type==="heatmap"}function Mqe(e,t){if(e==null)return null;if(!Yte(e))return new N("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${e.type||e.declaredClass}'`,{renderer:e});switch(e.type){case"simple":return XNe(e,t);case"unique-value":return ePe(e,t);case"class-breaks":return tPe(e,t);case"dictionary":case"heatmap":return null}return null}function p5(e,t){if(!t)return null;if(Array.isArray(t)||(t=[t]),t.length>0){const r=t.map(n=>n.details.symbol.type||n.details.symbol.declaredClass).filter(n=>!!n);r.sort();const i=new Array;return r.forEach((n,s)=>{s!==0&&n===r[s-1]||i.push(n)}),new N("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${i.join(", ")}) which are not supported in 3D`,{renderer:e,symbolErrors:t})}return null}function XNe(e,t){const r={...yl,...t,cimFallbackEnabled:!0};return p5(e,Sy(e.symbol,r).error)}function ePe(e,t){var s;const r={...yl,...t,cimFallbackEnabled:!0},i=(s=e.uniqueValueInfos)==null?void 0:s.map(o=>Sy(o.symbol,r).error).filter(Ei),n=Sy(e.defaultSymbol,r);return n.error&&(i==null||i.unshift(n.error)),p5(e,i)}function tPe(e,t){const r={...yl,...t,cimFallbackEnabled:!0},i=e.classBreakInfos.map(s=>Sy(s.symbol,r).error).filter(Ei),n=Sy(e.defaultSymbol,r);return n.error&&i.unshift(n.error),p5(e,i)}var iR;function rPe(e){switch(e){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function f5(e){var t;return(e==null?void 0:e.type)==="CIMVectorMarker"?(t=e.markerGraphics)==null?void 0:t[0]:void 0}function Qte(e){var t,r;return((t=e==null?void 0:e.symbol)==null?void 0:t.type)==="CIMPolygonSymbol"?(r=e.symbol.symbolLayers)==null?void 0:r[0]:void 0}function iPe(e,t){(e==null?void 0:e.type)==="CIMVectorMarker"&&t!=null&&(e.size=t)}function nPe(e,t){const r=f5(e);r&&t!=null&&(r.geometry=rPe(t))}function sPe(e,t){const r=Qte(f5(e));r&&t!=null&&(r.color=t.toArray())}function oPe(e,t,r){const i=Qte(f5(e));i&&t!=null&&r&&(i.colorLocked=t)}function Kte(e,t){var c;const{outerRingSize:r,innerDotSize:i,type:n,color:s,colorLocked:o,primitiveOverrides:a}=t,l=((c=e.data.symbol)==null?void 0:c.type)==="CIMPolygonSymbol"?e.data.symbol.symbolLayers:null;if((l==null?void 0:l.length)===2)for(const h of l){const f=h.primitiveName===iR.OuterRing;iPe(h,f?r:i),nPe(h,n),sPe(h,s),oPe(h,o,f)}return r!=null&&i!=null&&(e.data.primitiveOverrides=null),a!==void 0&&(e.data.primitiveOverrides=O(a)),e}(function(e){e.OuterRing="reference-size-outer-ring",e.InnerDot="reference-size-inner-dot"})(iR||(iR={}));function Xte(e,t,r,i){if(e)if(e.type!=="CIMTextSymbol"){if(r&&e.effects)for(const n of e.effects)Fz(n,t);if(e.symbolLayers)for(const n of e.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":aPe(n,t,i);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!(i!=null&&i.preserveOutlineWidth)&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":Xte(n.lineSymbol,t,!0,{...i,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}if(n.effects)for(const s of n.effects)Fz(s,t)}}else e.height!=null&&(e.height*=t)}function aPe(e,t,r){if(e&&(e.markerPlacement&&lPe(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const i of e.markerGraphics)e.scaleSymbolsProportionally||Xte(i.symbol,t,!0,r)}function lPe(e,t){switch(z1(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const r=e.placementTemplate.map(i=>i*t);e.placementTemplate=r}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const r=e.placementTemplate.map(i=>i*t);e.placementTemplate=r}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function Fz(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const r=e.dashTemplate.map(i=>i*t);e.dashTemplate=r}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function ere(e){const t=[];return nR(Wee(e),t),t.length?new Q(Hee(t[0])):null}function nR(e,t){var n;if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const i=e.type==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers){for(const s of r.symbolLayers)if(!(s.colorLocked||i&&(Uk(s)||zk(s)&&s.markerPlacement&&z1(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&jz(t,s.tintColor);break;case"CIMVectorMarker":(n=s.markerGraphics)==null||n.forEach(o=>{nR(o.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":jz(t,s.color);break;case"CIMHatchFill":nR(s.lineSymbol,t)}}}function jz(e,t){for(const r of e)if(r.join(".")===t.join("."))return;e.push(t)}function tre(e,t,r){t instanceof Q||(t=new Q(t));const i=Wee(e);i&&sR(i,t,r)}function sR(e,t,r){var s;if(!e)return;let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const n=(i==null?void 0:i.type)==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers)for(const o of i.symbolLayers){if(o.colorLocked)continue;if(n){if(r){const{layersToColor:l}=r;if((Uk(o)||zk(o)&&o.markerPlacement&&z1(o.markerPlacement))&&l==="fill"||Kke(o)&&l==="outline")continue}else if(Uk(o)||zk(o)&&o.markerPlacement&&z1(o.markerPlacement))continue}const a=t.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(s=o.markerGraphics)==null||s.forEach(l=>{sR(l.symbol,t,r)});break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMHatchFill":sR(o.lineSymbol,t,r)}}}var Tr;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(Tr||(Tr={}));const Fv={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function uPe(e,t,r){const i=Tr.size;let n=i,s=i;e<1?n*=.75:e>1&&(s*=1.25);const o=0,a=0;let l=i,c=i;return t&&r&&(n=s=l=c=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[r?l:.875*l,o]},{command:"L",values:[r?n-.5*l:a,s-.5*c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,t?o:.125*c]},{command:"L",values:[n-.5*l,t?s-.5*c:c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*l,s-.5*c]},{command:"L",values:[r?n-.5*l:a,s-.5*c]},{command:"L",values:[r?n-.5*l:a,t?s-.5*c:c]},{command:"L",values:[n-.5*l,t?s-.5*c:c]},{command:"Z",values:[]}]}]}function cPe(e){const t=Tr.size,r=.5*e,i=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+r]},{command:"L",values:[n,.7*t+r-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+r]},{command:"L",values:[t,r]},{command:"L",values:[t,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,i]},{command:"L",values:[t,i]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[n,.7*t*.5]},{command:"Z",values:[]}]}]}function dPe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function hPe(e,t){let r=t?Tr.tallSymbolWidth:e;const i=e,n=t?4:6;r<=Tr.size?r-=.5*n:r-=n;const s=0,o=0,a=t?.35*r:.5*r;return[{type:"path",path:[{command:"M",values:[.5*r,s]},{command:"L",values:[r,.5*a]},{command:"L",values:[.5*r,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a]},{command:"L",values:[.5*r,a]},{command:"L",values:[.5*r,i]},{command:"L",values:[o,i-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*r,a]},{command:"L",values:[.5*r,i]},{command:"L",values:[r,i-.5*a]},{command:"L",values:[r,.5*a]},{command:"Z",values:[]}]}]}function pPe(e,t){let r=t?Tr.tallSymbolWidth:e;const i=e,n=t?4:6;r<=Tr.size?r-=.5*n:r-=n;const s=.5*r,o=.15*r,a=0,l=i-o;return[{type:"ellipse",cx:.5*r,cy:l,rx:s,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[r,l]},{command:"L",values:[r,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*r,cy:o,rx:s,ry:o}]}function fPe(e,t){let r=t?Tr.tallSymbolWidth:e;const i=e,n=t?4:6;r<=Tr.size?r-=.5*n:r-=n;const s=.15*r,o=i-s;return[{type:"ellipse",cx:.5*r,cy:o,rx:.5*r,ry:s},{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[r,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function mPe(e){let t=e;const r=e,i=6;t<Tr.size?t-=.5*i:t-=i;const n=.15*t,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[t,s]},{command:"L",values:[.5*t,r-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:s,rx:.5*t,ry:n}]}function yPe(e){let t=e;const r=e,i=4;t<Tr.size?t-=.5*i:t-=i;const n=0,s=0,o=t,a=r,l=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[s,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,r]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function gPe(e){const t=e,r=2;let i=e;i<Tr.size?i-=.5*r:i-=r;const n=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*t,n]},{command:"L",values:[t,i]},{command:"L",values:[.45*t,.6*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,n]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[s,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,i]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[t,i]},{command:"Z",values:[]}]}]}function xc(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function Iqe(e,t){if(e==null)return new Q;if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const r=new Q(e);return new Q([xc(r.r,t),xc(r.g,t),xc(r.b,t),r.a])}function vPe(e){return"r"in e&&"g"in e&&"b"in e}function rre(e){return"h"in e&&"s"in e&&"v"in e}function ire(e){return"l"in e&&"a"in e&&"b"in e}function nre(e){return"l"in e&&"c"in e&&"h"in e}function wPe(e){return"x"in e&&"y"in e&&"z"in e}const bPe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],_Pe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function sre(e,t){const r=[];let i,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,o=e[0].length;let a=0;for(i=0;i<s;i++){for(a=0,n=0;n<o;n++)a+=e[i][n]*t[n];r.push(a)}return r}function ore(e){const t=[e.r/255,e.g/255,e.b/255].map(i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4),r=sre(bPe,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function m5(e){const t=sre(_Pe,[e.x/100,e.y/100,e.z/100]).map(r=>{const i=r<=.0031308?12.92*r:1.055*r**.4166666666666667-.055;return Math.min(1,Math.max(i,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function are(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(r=>r>.008856451679035631?r**.3333333333333333:7.787037037037035*r+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function lre(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(i=>i>6/29?i**3:3*(6/29)**2*(i-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function xPe(e){const t=e.l,r=e.a,i=e.b,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}function SPe(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}function $Pe(e){return are(ore(e))}function EPe(e){return m5(lre(e))}function TPe(e){return xPe(are(ore(e)))}function MPe(e){return m5(lre(SPe(e)))}function IPe(e){const t=e.r,r=e.g,i=e.b,n=Math.max(t,r,i),s=n-Math.min(t,r,i);let o=n,a=s===0?0:n===t?(r-i)/s%6:n===r?(i-t)/s+2:(t-r)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function CPe(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,n=i*r,s=n*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-n),o.g=Math.round(o.g+i-n),o.b=Math.round(o.b+i-n),o}function Sp(e){return vPe(e)?e:nre(e)?MPe(e):ire(e)?EPe(e):wPe(e)?m5(e):rre(e)?CPe(e):e}function UE(e){return rre(e)?e:IPe(Sp(e))}function LPe(e){return ire(e)?e:$Pe(Sp(e))}function Cqe(e){return nre(e)?e:TPe(Sp(e))}function APe(e){let{r:t,g:r,b:i,a:n}=e;return n<1&&(t=Math.round(n*t+255*(1-n)),r=Math.round(n*r+255*(1-n)),i=Math.round(n*i+255*(1-n))),new Q({r:t,g:r,b:i})}function kPe(e,t){const{r,g:i,b:n}=t!=null&&t.ignoreAlpha?e:APe(e);return .2126*r+.7152*i+.0722*n}var oR;function Lqe(e,t=oR.High){return kPe(e,{ignoreAlpha:!0})>t?new Q([0,0,0,e.a]):new Q([255,255,255,e.a])}function Aqe(e,t){const r=LPe(e);r.l*=1-t;const i=Sp(r),n=e.clone();return n.setColor(i),n.a=e.a,n}function kqe(e,t){const r=e.clone();return r.a*=t,r}function Rqe(e,t){const r=UE(e);r.s*=t;const i=Sp(r),n=e.clone();return n.setColor(i),n.a=e.a,n}function Oqe(e){return Q.toUnitRGBA(e)}function Nqe(e){return xp(e[0],e[1],e[2],e.length>3?e[3]:1)}function Pqe(e,t){const r=Q.toUnitRGBA(e);return r[3]*=t,r}function Dqe(e,t,r={}){if(e.length===0||t<=0)return[];if((e=e.map(i=>typeof i=="string"?new Q(i):i)).length===1||t===1){const i=[],n=e[0];for(let s=0;s<t;s++)i.push(n.clone());return i}if(r.shuffle&&(e=HB(O(e),r.seed)),e.length>=t){const i=[],n=(e.length-1)/(t-1);for(let s=0;s<t;s++){const o=Math.round(s*n);i.push(e[o].clone())}return i}return RPe(e,t,r)}function RPe(e,t,r={}){const i=[],n=e.length-1,s=Math.ceil((t-e.length)/n);e:for(let o=0;o<n;o++){const a=e[o],l=e[o+1];for(let c=1;c<=s;c++){const h=c/(s+1);if(i.push(OPe(a,l,h,r)),i.length+e.length===t)break e}}return[...e.map(o=>o.clone()),...HB(i,r.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(oR||(oR={}));const dI=(e,t)=>{const r=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+r))};function OPe(e,t,r,i={}){const n=e.r,s=e.g,o=e.b,a=t.r,l=t.g,c=t.b,h=Math.round(n+(a-n)*r),f=Math.round(s+(l-s)*r),m=Math.round(o+(c-o)*r);if(!i.offset)return new Q([h,f,m]);const y=mO(i.seed);return new Q([dI(h,y),dI(f,y),dI(m,y)])}const ure="picture-fill",cre="simple-fill",NPe="simple-line",dre="simple-marker",PPe="text",DPe="cim",Vz=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),hI=new Bee(1e3);function FPe(e){const t=e.style;let r=null;if(e)switch(e.type){case dre:t!=="cross"&&t!=="x"&&(r=e.color);break;case cre:t&&t!=="solid"?t!=="none"&&(r={type:"pattern",x:0,y:0,src:Nt(`esri/symbols/patterns/${t}.png`),width:5,height:5}):r=e.color;break;case ure:r={type:"pattern",src:e.url,width:qt(e.width)*e.xscale,height:qt(e.height)*e.yscale,x:qt(e.xoffset),y:qt(e.yoffset)};break;case PPe:r=e.color;break;case DPe:r=ere(e)}return r}function jPe(e,t){const r=e+"-"+t;return hI.get(r)!==void 0?Promise.resolve(hI.get(r)):ft(e,{responseType:"image"}).then(i=>{const n=i.data,s=n.naturalWidth,o=n.naturalHeight,a=document.createElement("canvas");a.width=s,a.height=o;const l=a.getContext("2d");l.fillStyle=t,l.fillRect(0,0,s,o),l.globalCompositeOperation="destination-in",l.drawImage(n,0,0);const c=a.toDataURL();return hI.put(r,c),c})}function q1(e){if(!e)return null;let t=null;switch(e.type){case cre:case ure:case dre:t=q1(e.outline);break;case NPe:{const r=qt(e.width);e.style!=null&&e.style!=="none"&&r!==0&&(t={color:e.color,style:y5(e.style),width:r,cap:e.cap,join:e.join==="miter"?qt(e.miterLimit):e.join},t.dashArray=hre(t).join(",")||"none");break}default:t=null}return t}function hre(e){if(!(e!=null&&e.style))return[];const{dashArray:t,style:r,width:i}=e;if(typeof t=="string"&&t!=="none")return t.split(",").map(o=>Number(o));const n=i??0,s=Vz.has(r)?Vz.get(r).map(o=>o*n):[];if(e.cap!=="butt")for(const[o,a]of s.entries())s[o]=o%2==1?a+n:Math.max(a-n,1);return s}const y5=(()=>{const e={};return t=>{if(e[t])return e[t];const r=t.replaceAll("-","");return e[t]=r,r}})(),VPe=new Q([128,128,128]);let zPe=0;function UPe(){return zPe++}let BPe=0;function GPe(){return BPe++}let qPe=0;function HPe(){return qPe++}const WPe="http://www.w3.org/2000/svg",zz=F("android"),ZPe=F("chrome")||zz&&zz>=4?"auto":"optimizeLegibility",JPe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},YPe=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Bt={},ot={};const QPe=Math.PI;function ac(e,t){const r=e*(QPe/180);return Math.abs(t*Math.sin(r))+Math.abs(t*Math.cos(r))}function pre(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function g5(e,t,r,i,n){if(e){if(e.type==="circle")return k("circle",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",r:e.r,stroke:r.color,"stroke-dasharray":r.dashArray,"stroke-dashoffset":r.dashOffset,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-miterlimit":"4","stroke-width":r.width});if(e.type==="ellipse")return k("ellipse",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",rx:e.rx,ry:e.ry,stroke:r.color,"stroke-dasharray":r.dashArray,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-miterlimit":"4","stroke-width":r.width});if(e.type==="rect")return k("rect",{fill:t,"fill-rule":"evenodd",height:e.height,stroke:r.color,"stroke-dasharray":r.dashArray,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-miterlimit":"4","stroke-width":r.width,width:e.width,x:e.x,y:e.y});if(e.type==="image")return k("image",{alt:n||"image",height:e.height,href:e.src,preserveAspectRatio:"none",width:e.width,x:e.x,y:e.y});if(e.type==="path"){const s=typeof e.path!="string"?pre(e.path):e.path;return k("path",{d:s,fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-dasharray":r.dashArray,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-miterlimit":"4","stroke-width":r.width})}if(e.type==="text")return sw(i),k("text",{"dominant-baseline":i.dominantBaseline,fill:t,"fill-rule":"evenodd","font-family":i.font.family,"font-size":i.font.size,"font-style":i.font.style,"font-variant":i.font.variant,"font-weight":i.font.weight,kerning:i.kerning,rotate:i.rotate,stroke:r.color,"stroke-dasharray":r.dashArray,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-miterlimit":"4","stroke-width":r.width,"text-anchor":i.align,"text-decoration":i.decoration,"text-rendering":ZPe,x:e.x,y:e.y},e.text)}return null}function v5(e){if(!e)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in e))return{fill:new Q(e).toString(),pattern:null,linearGradient:null};if(e.type==="pattern"){const r=`patternId-${UPe()}`;return{fill:`url(#${r})`,pattern:{id:r,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}},linearGradient:null}}const t=`linearGradientId-${GPe()}`;return{fill:`url(#${t})`,pattern:null,linearGradient:{id:t,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(r=>({offset:r.offset,color:r.color&&new Q(r.color).toString()}))}}}function w5(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new Q(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashoffset&&(t.dashOffset=e.dashoffset),e.style&&!e.dashArray&&(t.dashArray=hre(e).join(",")||"none")),t}function fre(e,t){const r={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const i=e.alignBaseline,n=i==="baseline"?"auto":i==="top"?"text-top":i==="bottom"?"hanging":i;r.align=e.align,r.dominantBaseline=n,r.decoration=e.decoration,r.kerning=e.kerning?"auto":"0",r.rotate=e.rotated?"90":"0",sw(t),r.font.style=t.style||"normal",r.font.variant=t.variant||"normal",r.font.weight=t.weight||"normal",r.font.size=t.size&&t.size.toString()||"10pt",r.font.family=t.family||"serif"}return r}function mre(e){const{pattern:t,linearGradient:r}=e;if(t)return k("pattern",{height:t.height,id:t.id,patternUnits:"userSpaceOnUse",width:t.width,x:t.x,y:t.y},k("image",{height:t.image.height,href:t.image.href,width:t.image.width,x:t.image.x,y:t.image.y}));if(r){const i=r.stops.map((n,s)=>k("stop",{key:`${s}-stop`,offset:n.offset,"stop-color":n.color}));return k("linearGradient",{gradientUnits:"userSpaceOnUse",id:r.id,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2},i)}return null}function KPe(e,t){if(!e||e.length===0)return null;const r=[];for(const i of e){const{shape:n,fill:s,stroke:o,font:a}=i,l=v5(s),c=w5(o),h=n.type==="text"?fre(n,a):null,f=g5(n,l.fill,c,h);f&&r.push(f)}return k("mask",{id:t,maskUnits:"userSpaceOnUse"},k("g",null,r))}function Uz(e,t,r){return by(e,xE(e),[t,r])}function Bz(e,t,r,i,n){return SE(e,xE(e),[t,r]),e[4]=e[4]*t-i*t+i,e[5]=e[5]*r-n*r+n,e}function XPe(e,t,r,i){const n=t%360*Math.PI/180;Fw(e,xE(e),n);const s=Math.cos(n),o=Math.sin(n),a=e[4],l=e[5];return e[4]=a*s-l*o+i*o-r*s+r,e[5]=l*s+a*o-r*o-i*s+i,e}function Pi(e,t){Bt&&"left"in Bt?(Bt.left!=null&&Bt.left>e&&(Bt.left=e),(Bt.right==null||Bt.right<e)&&(Bt.right=e),(Bt.top==null||Bt.top>t)&&(Bt.top=t),(Bt.bottom==null||Bt.bottom<t)&&(Bt.bottom=t)):Bt={left:e,bottom:t,right:e,top:t}}function Gz(e){const t=e.args,r=t.length;let i;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(i=0;i<r;i+=2)Pi(t[i],t[i+1]);ot.x=t[r-2],ot.y=t[r-1];break;case"H":for(i=0;i<r;++i)Pi(t[i],ot.y);ot.x=t[r-1];break;case"V":for(i=0;i<r;++i)Pi(ot.x,t[i]);ot.y=t[r-1];break;case"m":{let n=0;for(("x"in ot)||(Pi(ot.x=t[0],ot.y=t[1]),n=2),i=n;i<r;i+=2)Pi(ot.x+=t[i],ot.y+=t[i+1]);break}case"l":case"t":for(i=0;i<r;i+=2)Pi(ot.x+=t[i],ot.y+=t[i+1]);break;case"h":for(i=0;i<r;++i)Pi(ot.x+=t[i],ot.y);break;case"v":for(i=0;i<r;++i)Pi(ot.x,ot.y+=t[i]);break;case"c":for(i=0;i<r;i+=6)Pi(ot.x+t[i],ot.y+t[i+1]),Pi(ot.x+t[i+2],ot.y+t[i+3]),Pi(ot.x+=t[i+4],ot.y+=t[i+5]);break;case"s":case"q":for(i=0;i<r;i+=4)Pi(ot.x+t[i],ot.y+t[i+1]),Pi(ot.x+=t[i+2],ot.y+=t[i+3]);break;case"A":for(i=0;i<r;i+=7)Pi(t[i+5],t[i+6]);ot.x=t[r-2],ot.y=t[r-1];break;case"a":for(i=0;i<r;i+=7)Pi(ot.x+=t[i+5],ot.y+=t[i+6])}}function qz(e,t,r){const i=JPe[e.toLowerCase()];let n;typeof i=="number"&&(i?t.length>=i&&(n={action:e,args:t.slice(0,t.length-t.length%i)},r.push(n),Gz(n)):(n={action:e,args:[]},r.push(n),Gz(n)))}function e5e(e){const t=(typeof e.path!="string"?pre(e.path):e.path).match(YPe),r=[];if(Bt={},ot={},!t)return null;let i="",n=[];const s=t.length;for(let a=0;a<s;++a){const l=t[a],c=parseFloat(l);isNaN(c)?(i&&qz(i,n,r),n=[],i=l):n.push(c)}qz(i,n,r);const o={x:0,y:0,width:0,height:0};return Bt&&"left"in Bt&&(o.x=Bt.left,o.y=Bt.top,o.width=Bt.right-Bt.left,o.height=Bt.bottom-Bt.top),o}function yre(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const r=e5e(e);t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height}return t}function gre(e){const t={x:0,y:0,width:0,height:0};let r=null,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of e)r?(r.x=Math.min(r.x,s.x),r.y=Math.min(r.y,s.y),i=Math.max(i,s.x+s.width),n=Math.max(n,s.y+s.height)):(r=t,r.x=s.x,r.y=s.y,i=s.x+s.width,n=s.y+s.height);return r&&(r.width=i-r.x,r.height=n-r.y),r}function aR(e,t,r,i,n,s,o,a,l){let c=(o&&s?ac(s,t):t)/2,h=(o&&s?ac(s,r):r)/2;if(l){const _=l[0],S=l[1];c=(o&&s?ac(s,_):_)/2,h=(o&&s?ac(s,S):S)/2}const f=e.width+i,m=e.height+i,y=LS(),g=LS();let v=!1;if(n&&f!==0&&m!==0){const _=t!==r?t/r:f/m,S=t>r?t:r;let $=1,M=1;isNaN(S)||(_>1?($=S/f,M=S/_/m):(M=S/m,$=S*_/f)),fh(g,g,Bz(y,$,M,c,h)),v=!0}const x=e.x+(f-i)/2,b=e.y+(m-i)/2;if(fh(g,g,Uz(y,c-x,h-b)),!v&&(f>t||m>r)){const _=f/t>m/r,S=(_?t:r)/(_?f:m);fh(g,g,Bz(y,S,S,x,b))}return a&&fh(g,g,Uz(y,a[0],a[1])),s&&fh(g,g,XPe(y,s,x,b)),`matrix(${g[0]},${g[1]},${g[2]},${g[3]},${g[4]},${g[5]})`}function t5e(e,t,r){const i=e==null?void 0:e.effects.find(c=>c.type==="bloom");if(!i)return null;const{strength:n,radius:s}=i,o=n>0?s:0,a=(n+o)*t,l=4*n+1;return k("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${r}`,width:"300%",x:"-100%",y:"-100%"},k("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*o)*(5**(t/100)*(.4+t/100)),result:"dilate"}),k("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:a/25}),k("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:a/50}),k("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},k("feFuncR",{slope:l,type:"linear"}),k("feFuncG",{slope:l,type:"linear"}),k("feFuncB",{slope:l,type:"linear"})),k("feMerge",null,k("feMergeNode",{in:"intensityBlur"}),k("feMergeNode",{in:"intensityBrightness"}),k("feGaussianBlur",{stdDeviation:n/10})))}function vre(e,t,r,i={}){var m,y,g;const n=[],s=[],o=HPe(),a=t5e(i.effectView,t,o);let l=null;if(a){const v=(m=i.effectView)==null?void 0:m.effects.find(S=>S.type==="bloom"),x=(v.strength?v.strength+v.radius/2:0)/3,b=t+t*x,_=r+r*x;l=[Math.max(b,10),Math.max(_,10)]}let c=t,h=r;if(i.useRotationSize)for(let v=0;v<e.length;v++){const x=((y=i.rotations)==null?void 0:y[v])??0;c=Math.max(ac(x,t),c),h=Math.max(ac(x,r),h)}for(let v=0;v<e.length;v++){const x=e[v],b=[],_=[];let S=0,$=0,M=0;for(const V of x){const{shape:P,fill:z,stroke:Y,font:oe,offset:ae}=V;i.ignoreStrokeWidth||P.type==="text"||(S+=(Y==null?void 0:Y.width)||0);const Ge=v5(z),dt=w5(Y),Ve=P.type==="text"?fre(P,oe):null;n.push(mre(Ge)),b.push(g5(P,Ge.fill,dt,Ve,i.ariaLabel)),_.push(yre(P)),ae&&($+=ae[0],M+=ae[1])}const I=((g=i.rotations)==null?void 0:g[v])??0;i.useRotationSize&&($+=(c-ac(I,t))/2,M+=(h-ac(I,r))/2);const C=aR(gre(_),t,r,S,i.scale??!1,I,i.useRotationSize??!1,[$,M],l);let L=null;if(i.masking){const V=`mask-${v}`,P=i.masking[v];n.push(KPe(P,V)),L=`url(#${V})`}s.push(L?k("g",{mask:L},k("g",{transform:C},b)):k("g",{transform:C},b))}a&&(sw(l),c=l[0],h=l[1]);const f="display: block;";return k("svg",{"aria-label":i.ariaLabel,focusable:!1,height:h,role:"img",style:f,width:c,xmlns:WPe},a,k("defs",null,n),a?k("g",{filter:`url(#bloom${o})`},s):s)}const r5e=new Q("white");function i5e(e){var r,i;const t=(r=e.symbolLayers)==null?void 0:r.at(-1);if(t&&"outline"in t)return(i=t==null?void 0:t.outline)==null?void 0:i.size}function n5e(e){var t;if(!e)return 0;if(Ca(e)){const r=i5e(e);return r??0}return An((t=q1(e))==null?void 0:t.width)}function BE(e){if(e==null||!("symbolLayers"in e)||e.symbolLayers==null)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function s5e(e){var t;return((t=e.resource)==null?void 0:t.href)??""}function Fqe(e,t){if(!e)return null;let r=null;return Ca(e)?r=o5e(e):mE(e)&&(r=e.type==="cim"?ere(e):e.color?new Q(e.color):null),r?H1(r,t):null}function o5e(e){const t=e.symbolLayers;if(!t)return null;let r=null;return t.forEach(i=>{var n;i.type==="object"&&((n=i.resource)!=null&&n.href)||(r=i.type==="water"?i.color:i.material?i.material.color:null)}),r?new Q(r):null}function H1(e,t){if(t==null||e==null)return e;const r=e.toRgba();return r[3]=r[3]*t,new Q(r)}function a5e(e,t,r){const i=e.symbolLayers;if(!i)return;const n=s=>H1(t=t??s??(r!=null?r5e:null),r);i.forEach(s=>{var o,a;if(s.type!=="object"||!((o=s.resource)!=null&&o.href)||t)if(s.type==="water")s.color=n(s.color);else{const l=s.material!=null?s.material.color:null,c=n(l);s.material==null?s.material=new bn({color:c}):s.material.color=c,r!=null&&"outline"in s&&((a=s.outline)==null?void 0:a.color)!=null&&(s.outline.color=H1(s.outline.color,r))}})}function l5e(e,t,r){var i;(t=t??e.color)&&(e.color=H1(t,r)),r!=null&&"outline"in e&&((i=e.outline)!=null&&i.color)&&(e.outline.color=H1(e.outline.color,r))}function pI(e,t,r){e&&(t||r!=null)&&(t&&(t=new Q(t)),Ca(e)?a5e(e,t,r):mE(e)&&l5e(e,t,r))}async function u5e(e,t){const r=e.symbolLayers;r&&await Hde(r,async i=>c5e(i,t))}async function c5e(e,t){switch(e.type){case"extrude":h5e(e,t);break;case"icon":case"line":case"text":d5e(e,t);break;case"path":f5e(e,t);break;case"object":await p5e(e,t)}}function d5e(e,t){const r=wre(t);r!=null&&(e.size=r)}function wre(e){for(const t of e)if(typeof t=="number")return t;return null}function h5e(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function p5e(e,t){const{resourceSize:r,symbolSize:i}=await m5e(e),n=bre(t,r,i);e.width=jv(t[0],i[0],r[0],n),e.depth=jv(t[1],i[1],r[1],n),e.height=jv(t[2],i[2],r[2],n)}function f5e(e,t){const r=bre(t,LW,[e.width,void 0,e.height]);e.width=jv(t[0],e.width,1,r),e.height=jv(t[2],e.height,1,r)}function bre(e,t,r){for(let i=0;i<3;i++){const n=e[i];switch(n){case"symbol-value":{const s=r[i];return s!=null?s/t[i]:1}case"proportional":break;default:if(n&&t[i])return n/t[i]}}return 1}async function m5e(e){const{computeObjectLayerResourceSize:t}=await B(()=>import("./symbolLayerUtils-f7df5917.js"),[]),r=await t(e,10),{width:i,height:n,depth:s}=e,o=[i,s,n];let a=1;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/r[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=r[l]*a);return{resourceSize:r,symbolSize:o}}function jv(e,t,r,i){switch(e){case"proportional":return r*i;case"symbol-value":return t??r;default:return e}}function y5e(e,t){const r=wre(t);if(r!=null)switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const i=e.width/e.height;i>1?(e.width=r,e.height=r*i):(e.width=r*i,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r}}async function g5e(e,t){if(e&&t)return Ca(e)?u5e(e,t):void(mE(e)&&y5e(e,t))}function v5e(e,t,r){if(e&&t!=null)if(Ca(e)){const i=e.symbolLayers;i&&i.forEach(n=>{if(n.type==="object")switch(r){case"tilt":n.tilt=(n.tilt??0)+t;break;case"roll":n.roll=(n.roll??0)+t;break;default:n.heading=(n.heading??0)+t}n.type==="icon"&&(n.angle+=t)})}else mE(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle+=t))}function Gw(e){if(!e)return null;const t=e.effects.filter(r=>r.type!=="bloom").map(r=>r.toJSON());return US(t)}function jqe(e){return e!=null&&e.type==="polygon-3d"&&e.symbolLayers.some(t=>t.type==="extrude")}const Hz=wS();function w5e(e,t){Hz.append(e,t),Hz.detach(t)}function qw(e,t,r){const i=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!e.some(o=>!!o.length))return null;const s=(r==null?void 0:r.node)||document.createElement("div");return r.opacity!=null&&(s.style.opacity=r.opacity.toString()),r.effectView!=null&&(s.style.filter=Gw(r.effectView)),w5e(s,()=>vre(e,i,n,r)),s}function b5e(e,t){e=Math.ceil(e),t=Math.ceil(t);const r=document.createElement("canvas");r.width=e,r.height=t,r.style.width=e+"px",r.style.height=t+"px";const i=r.getContext("2d");return i.clearRect(0,0,e,t),i}function _5e(e,t,r){return e?ft(e,{responseType:"image"}).then(i=>{const n=i.data,s=n.width,o=n.height,a=s/o;let l=t;if(r){const c=Math.max(s,o);l=Math.min(l,c)}return{image:n,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}}):Promise.reject(new N("renderUtils: imageDataSize","href not provided."))}function x5e(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function S5e(e,t,r,i,n){switch(n){case"multiply":e[t]*=r[0],e[t+1]*=r[1],e[t+2]*=r[2],e[t+3]*=r[3];break;default:{const s=UE({r:e[t],g:e[t+1],b:e[t+2]});s.h=i.h,s.s=i.s,s.v=s.v/100*i.v;const o=Sp(s);e[t]=o.r,e[t+1]=o.g,e[t+2]=o.b,e[t+3]*=r[3];break}}}function $5e(e,t,r,i,n){return _5e(e,t,n).then(s=>{const o=s.width??t,a=s.height??t;if(s.image&&x5e(r,i)){let l=s.image.width,c=s.image.height;F("edge")&&/\.svg$/i.test(e)&&(l-=1,c-=1);const h=b5e(o,a);h.drawImage(s.image,0,0,l,c,0,0,o,a);const f=h.getImageData(0,0,o,a),m=[r.r/255,r.g/255,r.b/255,r.a],y=UE(r);for(let g=0;g<f.data.length;g+=4)S5e(f.data,g,m,y,i);h.putImageData(f,0,0),e=h.canvas.toDataURL("image/png")}else{const l=Ee==null?void 0:Ee.findCredential(e);if(l!=null&&l.token){const c=e.includes("?")?"&":"?";e=`${e}${c}token=${l.token}`}}return{url:e,width:o,height:a}}).catch(()=>({url:e,width:t,height:t}))}const E5e=["web-gltf","web","cim"],_re="esri-relationship-ramp",qp=`${_re}--diamond`,su=`${_re}--square`,T5e="http://www.w3.org/2000/svg",xt={diamondContainer:`${qp}__container`,diamondLeftCol:`${qp}__left-column`,diamondRightCol:`${qp}__right-column`,diamondMidCol:`${qp}__middle-column`,diamondMidColLabel:`${qp}__middle-column--label`,diamondMidColRamp:`${qp}__middle-column--ramp`,squareTable:`${su}__table`,squareTableRow:`${su}__table-row`,squareTableCell:`${su}__table-cell`,squareTableLabel:`${su}__table-label`,squareTableLabelLeftBottom:`${su}__table-label--left-bottom`,squareTableLabelRightBottom:`${su}__table-label--right-bottom`,squareTableLabelLeftTop:`${su}__table-label--left-top`,squareTableLabelRightTop:`${su}__table-label--right-top`};function xre(e,t,r={}){const{focus:i,labels:n}=e,s=!!i,o=M5e(e,t,r),a={justifyContent:"center"},l=oE(),c=r.key??t;return s?k("div",{class:xt.diamondContainer,key:`${c}-container`,styles:a},k("div",{class:xt.diamondLeftCol},l?n.right:n.left),k("div",{class:xt.diamondMidCol},k("div",{class:xt.diamondMidColLabel},n.top),o,k("div",{class:xt.diamondMidColLabel},n.bottom)),k("div",{class:xt.diamondRightCol},l?n.left:n.right)):k("div",{class:xt.squareTable,key:`${c}-container`},k("div",{class:xt.squareTableRow},k("div",{class:im(xt.squareTableCell,xt.squareTableLabel,xt.squareTableLabelRightBottom)},l?n.top:n.left),k("div",{class:xt.squareTableCell}),k("div",{class:im(xt.squareTableCell,xt.squareTableLabel,xt.squareTableLabelLeftBottom)},l?n.left:n.top)),k("div",{class:xt.squareTableRow},k("div",{class:xt.squareTableCell}),o,k("div",{class:xt.squareTableCell})),k("div",{class:xt.squareTableRow},k("div",{class:im(xt.squareTableCell,xt.squareTableLabel,xt.squareTableLabelRightTop)},l?n.right:n.bottom),k("div",{class:xt.squareTableCell}),k("div",{class:im(xt.squareTableCell,xt.squareTableLabel,xt.squareTableLabelLeftTop)},l?n.bottom:n.right)))}function Wz(e,t,r){const i=`${r}_arrowStart`,n=`${r}_arrowEnd`,s=e==="left",o={markerStart:null,markerEnd:null};switch(t){case"HL":s?o.markerStart=`url(#${n})`:o.markerEnd=`url(#${i})`;break;case"LL":o.markerStart=`url(#${n})`;break;case"LH":s?o.markerEnd=`url(#${i})`:o.markerStart=`url(#${n})`;break;default:o.markerEnd=`url(#${i})`}return o}function M5e(e,t,r={}){const{focus:i,numClasses:n,colors:s,rotation:o}=e,{opacity:a,effectList:l,ariaLabel:c}=r,h=r.size??60,f=!!i,m=Math.sqrt(h**2+h**2)+(f?0:5),y=[],g=[],v=[],x=(h||75)/n;for(let z=0;z<n;z++){const Y=z*x;for(let oe=0;oe<n;oe++){const ae=oe*x,Ge=v5(s[z][oe]),dt=w5(null),Ve={type:"rect",x:ae,y:Y,width:x,height:x},Z=mre(Ge);Z&&y.push(Z);const j=g5(Ve,Ge.fill,dt,null);j&&g.push(j),v.push(yre(Ve))}}const b=15,_=15,S=10;let $=null;f||($="margin: -15px -15px -18px -15px");const M=Wz("left",i,t),I=Wz("right",i,t),C=gre(v),L=aR(C,m,m,0,!1,o,!1),V=aR(C,m,m,0,!1,f?-45:null,!1),P={filter:Gw(l)??void 0,opacity:a==null?"":`${a}`};return k("div",{class:f?xt.diamondMidColRamp:xt.squareTableCell,styles:P},k("svg",{"aria-label":c,focusable:!1,height:m,role:"image",style:$,width:m,xmlns:T5e},k("defs",null,k("marker",{id:`${t}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},k("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),k("marker",{id:`${t}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},k("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),y),k("g",{transform:L},g),k("g",{transform:V},k("line",{fill:"none","marker-end":M.markerEnd,"marker-start":M.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:h-b,y2:b}),k("line",{fill:"none","marker-end":I.markerEnd,"marker-start":I.markerStart,stroke:"#555555","stroke-width":"1",x1:_,x2:h-_,y1:h+S,y2:h+S}))))}function I5e(e){return e=e||globalThis.location.hostname,C5e.some(t=>(e==null?void 0:e.match(t))!=null)}function Zz(e,t){return e?(t=t||globalThis.location.hostname)?t.match(Sre)!=null||t.match(Ere)!=null?e.replace("static.arcgis.com","staticdev.arcgis.com"):t.match($re)!=null||t.match(Tre)!=null?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e:null}const Sre=/^devext\.arcgis\.com$/,$re=/^qaext\.arcgis\.com$/,Ere=/^[\w-]*\.mapsdevext\.arcgis\.com$/,Tre=/^[\w-]*\.mapsqa\.arcgis\.com$/,C5e=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,Sre,$re,/^jsapps\.esri\.com$/,Ere,Tre];function Mre(e,t,r){const i=e.name;return i==null?Promise.reject(new N("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):e.styleName==="Esri2DPointSymbolsStyle"?L5e(i,t,r):_ee(e,t,r).then(n=>Cre(n,i,t,bAe,r))}function Ire(e,t){return t.items.find(r=>r.name===e)}async function Cre(e,t,r,i,n){var x,b;const s=(r==null?void 0:r.portal)!=null?r.portal:Ai.getDefault(),o={portal:s,url:mr(e.baseUrl),origin:"portal-item"},a=Ire(t,e.data);if(!a)throw new N("symbolstyleutils:symbol-name-not-found",`The symbol name '${t}' could not be found`,{symbolName:t});const l=(n==null?void 0:n.acceptedFormats)??E5e,c=i(a,l);if(!c)throw new N("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${t}' does not have an accepted format (one of ${l})`,{symbolName:t});const{url:h,format:f}=c;let m=Ec(h,o),y=((x=a.thumbnail)==null?void 0:x.href)??null;const g=(b=a.thumbnail)==null?void 0:b.imageData;I5e()&&(m=Zz(m)??"",y=Zz(y));const v={portal:s,url:mr(FO(m)),origin:"portal-item"};return KP(m,n).then(_=>{const S=f==="cim"?xee(_.data):_.data,$=vee(S,v);if($&&Ca($)){if(y){const M=Ec(y,o);$.thumbnail=new Vh({url:M})}else g&&($.thumbnail=new Vh({url:`data:image/png;base64,${g}`}));e.styleUrl?$.styleOrigin=new I1({portal:r.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&($.styleOrigin=new I1({portal:r.portal,styleName:e.styleName,name:t}))}return $})}function L5e(e,t,r){const i=_Ae.replaceAll(/\{SymbolName\}/gi,e),n=t.portal!=null?t.portal:Ai.getDefault();return KP(i,r).then(s=>{const o=xee(s.data);return vee(o,{portal:n,url:mr(FO(i)),origin:"portal-item"})})}const A5e=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:Cre,getStyleItemFromStyle:Ire,resolveWebStyleSymbol:Mre},Symbol.toStringTag,{value:"Module"})),vh=Tr.size,X2=Tr.maxSize,b5=Tr.maxOutlineSize,Jz=Tr.lineWidth,lR=Tr.tallSymbolWidth;function dm(e){const t=e.outline,r=e.material!=null?e.material.color:null,i=r!=null?r.toHex():null;if(t==null||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&i==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=qt(t.size)||0;return{color:"rgba("+(t.color!=null?t.color.toRgba():"255,255,255,1")+")",width:Math.min(n,b5),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?y5(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}async function k5e(e,t){var i,n,s;if((i=e.thumbnail)!=null&&i.url)return e.thumbnail.url;if(t.type==="icon"&&((n=t==null?void 0:t.resource)==null?void 0:n.href))return s5e(t);const r=Nt("esri/images/Legend/legend3dsymboldefault.png");if(e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)){const o=await Mre(e.styleOrigin,{portal:e.styleOrigin.portal}).catch(()=>null);if(o&&"thumbnail"in o&&((s=o.thumbnail)!=null&&s.url))return o.thumbnail.url}return r}function fI(e,t=1){const r=e.a,i=UE(e),n=i.h,s=i.s/t,o=100-(100-i.v)/t,{r:a,g:l,b:c}=Sp({h:n,s,v:o});return[a,l,c,r]}function XS(e){var t;return e.type==="water"?e.color==null?null:e.color:((t=e.material)==null?void 0:t.color)==null?null:e.material.color}function tt(e,t=0){const r=XS(e);if(!r){if(e.type==="fill")return null;const n=VPe.r,s=xc(n,t);return[s,s,s,100]}const i=r.toRgba();for(let n=0;n<3;n++)i[n]=xc(i[n],t);return i}async function Lre(e,t){const r=e.style;return r==="none"?null:{type:"pattern",x:0,y:0,src:await jPe(Nt(`esri/symbols/patterns/${r}.png`),t.toCss(!0)),width:5,height:5}}function Yz(e){return e.outline?dm(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function _5(e,t){const r=XS(e);if(!r)return null;let i="rgba(";return i+=xc(r.r,t)+",",i+=xc(r.g,t)+",",i+=xc(r.b,t)+",",i+r.a+");"}function uR(e,t){const r=_5(e,t);return r?"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:r,width:Math.min(e.size?qt(e.size):.75,b5),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?y5(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?qt(2):e.join:null}:{}}function p_(e,t,r){const i=r!=null?.75*r:0;return{type:"linear",x1:i?.25*i:0,y1:i?.5*i:0,x2:i||4,y2:i?.5*i:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function R5e(e){const t=e.depth,r=e.height,i=e.width;return i!==0&&t!==0&&r!==0&&i===t&&i!=null&&r!=null&&i<r}function O5e(e,t,r){var n,s;const i=[];if(!e)return i;switch(e.type){case"icon":{const l=t,c=t;switch(((n=e.resource)==null?void 0:n.primitive)??Hbe){case"circle":i.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:tt(e,0),stroke:dm(e)});break;case"square":i.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[0,0]},{command:"L",values:[l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:tt(e,0),stroke:dm(e)});break;case"triangle":i.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:tt(e,0),stroke:dm(e)});break;case"cross":i.push({shape:{type:"path",path:[{command:"M",values:[.5*l,0]},{command:"L",values:[.5*l,c]},{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:Yz(e)});break;case"x":i.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[l,c]},{command:"M",values:[l,0]},{command:"L",values:[0,c]}]},stroke:Yz(e)});break;case"kite":i.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,.5*c]},{command:"L",values:[.5*l,c]},{command:"Z",values:[]}]},fill:tt(e,0),stroke:dm(e)})}break}case"object":switch(((s=e.resource)==null?void 0:s.primitive)??Qbe){case"cone":{const o=p_(tt(e,0),tt(e,-.6),r?lR:t),a=fPe(t,r);i.push({shape:a[0],fill:o},{shape:a[1],fill:o});break}case"inverted-cone":{const o=tt(e,0),a=p_(o,tt(e,-.6),t),l=mPe(t);i.push({shape:l[0],fill:a},{shape:l[1],fill:o});break}case"cube":{const o=hPe(t,r);i.push({shape:o[0],fill:tt(e,0)},{shape:o[1],fill:tt(e,-.3)},{shape:o[2],fill:tt(e,-.5)});break}case"cylinder":{const o=p_(tt(e,0),tt(e,-.6),r?lR:t),a=pPe(t,r);i.push({shape:a[0],fill:o},{shape:a[1],fill:o},{shape:a[2],fill:tt(e,0)});break}case"diamond":{const o=yPe(t);i.push({shape:o[0],fill:tt(e,-.3)},{shape:o[1],fill:tt(e,0)},{shape:o[2],fill:tt(e,-.3)},{shape:o[3],fill:tt(e,-.7)});break}case"sphere":{const o=p_(tt(e,0),tt(e,-.6));o.x1=0,o.y1=0,o.x2=.25*t,o.y2=.25*t,i.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:o});break}case"tetrahedron":{const o=gPe(t);i.push({shape:o[0],fill:tt(e,-.3)},{shape:o[1],fill:tt(e,0)},{shape:o[2],fill:tt(e,-.6)});break}}break}return i}function GE(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?qt(t):null}function N5e(e){return e.type==="icon"?"multiply":"tint"}async function P5e(e,t){const r=GE(t),i=t!=null&&t.maxSize?qt(t.maxSize):null,n=(t==null?void 0:t.disableUpsampling)??!1,s=e.symbolLayers,o=[],a=[];let l=!1,c=0,h=0,f=0;s.forEach(g=>{var _,S,$,M;if(g.type!=="icon"&&g.type!=="object")return;g&&g.type==="icon"&&(f=Math.max(g.size&&qt(g.size),f));const v=g.type==="icon"?g.size&&qt(g.size):0,x=r||v?Math.ceil(Math.min(r||v,i||X2)):vh;let b=g.type==="icon"?g.angle:null;if((t==null?void 0:t.rotation)!=null&&(b=(b??0)+t.rotation),a.push(b),(_=g==null?void 0:g.resource)==null?void 0:_.href){const I=k5e(e,g).then(C=>{var P;const L=(P=g==null?void 0:g.material)==null?void 0:P.color,V=N5e(g);return $5e(C,x,L,V,n)}).then(C=>{const L=C.width,V=C.height;return c=Math.max(c,L),h=Math.max(h,V),b&&(l=!0),[{shape:{type:"image",x:0,y:0,width:L,height:V,src:C.url},fill:null,stroke:null}]});o.push(I)}else{let I=x;g.type==="icon"&&r&&(I=x*(v/f));const C=(t==null?void 0:t.symbolConfig)==="tall"||((S=t==null?void 0:t.symbolConfig)==null?void 0:S.isTall)||g.type==="object"&&R5e(g);c=Math.max(c,C?lR:I),h=Math.max(h,I),b&&(($=g.resource)!=null&&$.primitive)&&["square","triangle","x"].includes((M=g.resource)==null?void 0:M.primitive)&&(l=!0),o.push(Promise.resolve(O5e(g,I,C)))}});const m=await Promise.allSettled(o),y=[];return m.forEach(g=>{g.status==="fulfilled"?y.push(g.value):g.reason&&W.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",g.reason)}),qw(y,[c,h],{node:t==null?void 0:t.node,scale:!1,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel,rotations:a,useRotationSize:l})}function D5e(e,t){const r=e.symbolLayers,i=[],n=BE(e),s=GE(t),o=(t!=null&&t.maxSize?qt(t.maxSize):null)||b5;let a,l=0,c=0;return r.forEach((h,f)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const m=[];switch(h.type){case"line":{const y=uR(h,0);if(y==null)break;const g=(y==null?void 0:y.width)||0;f===0&&(a=g);const v=Math.min(s||g,o),x=f===0?v:s?v*(g/a):v,b=x>Jz/2?2*x:Jz;c=Math.max(c,x),l=Math.max(l,b),y.width=x,m.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:y});break}case"path":{const y=Math.min(s||vh,o),g=tt(h,0),v=tt(h,-.2),x=_5(h,-.4),b=x?{color:x,width:1}:{};if(h.profile==="quad"){const _=h.width,S=h.height,$=uPe(_&&S?_/S:1,S===0,_===0),M={...b,join:"bevel"};m.push({shape:$[0],fill:v,stroke:M},{shape:$[1],fill:v,stroke:M},{shape:$[2],fill:g,stroke:M})}else m.push({shape:Fv.pathSymbol3DLayer[0],fill:v,stroke:b},{shape:Fv.pathSymbol3DLayer[1],fill:g,stroke:b});c=Math.max(c,y),l=c}}i.push(m)}),Promise.resolve(qw(i,[l,c],{node:t==null?void 0:t.node,scale:n,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel}))}async function F5e(e,t){const r=e.type==="mesh-3d",i=e.symbolLayers,n=GE(t),s=t!=null&&t.maxSize?qt(t.maxSize):null,o=n||vh,a=[];let l=0,c=0,h=!1;for(let f=0;f<i.length;f++){const m=i.at(f),y=[];if(!r||m.type==="fill"){switch(m.type){case"fill":{const g=Math.min(o,s||X2);if(l=Math.max(l,g),c=Math.max(c,g),h=!0,r){const v=Fv.meshSymbol3DFill,x=_5(m,-.4),b=x?{color:x,width:1,join:"round"}:{};y.push({shape:v[0],fill:tt(m,0),stroke:b},{shape:v[1],fill:tt(m,-.2),stroke:b},{shape:v[2],fill:tt(m,-.6),stroke:b})}else{let v=tt(m,0);const x="pattern"in m?m.pattern:null,b=dm(m),_=XS(m);x!=null&&x.type==="style"&&x.style!=="solid"&&_&&(v=await Lre(x,_)),y.push({shape:Fv.fill[0],fill:v,stroke:b})}break}case"line":{const g=uR(m,0);if(g==null)break;const v={stroke:g,shape:Fv.fill[0]};l=Math.max(l,vh),c=Math.max(c,vh),y.push(v);break}case"extrude":{const g={join:"round",width:1,...uR(m,-.4)},v=tt(m,0),x=tt(m,-.2),b=Math.min(o,s||X2),_=cPe(b);g.width=1,y.push({shape:_[0],fill:x,stroke:g},{shape:_[1],fill:x,stroke:g},{shape:_[2],fill:v,stroke:g});const S=vh,$=.7*vh+.5*b;l=Math.max(l,S),c=Math.max(c,$);break}case"water":{const g=XS(m),v=fI(g),x=fI(g,2),b=fI(g,3),_=dPe();h=!0,y.push({shape:_[0],fill:v},{shape:_[1],fill:x},{shape:_[2],fill:b});const S=Math.min(o,s||X2);l=Math.max(l,S),c=Math.max(c,S);break}}a.push(y)}}return qw(a,[l,c],{node:t==null?void 0:t.node,scale:h,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel})}function j5e(e,t){if(e.symbolLayers.length===0)return Promise.reject(new N("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return P5e(e,t);case"line-3d":return D5e(e,t);case"polygon-3d":case"mesh-3d":return F5e(e,t)}return Promise.reject(new N("symbolPreview: swatchInfo3D","symbol not supported."))}const V5e=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:Lre,getSizeFromOptions:GE,getSymbolLayerFill:tt,previewSymbol3D:j5e},Symbol.toStringTag,{value:"Module"})),Qz={HH:315,HL:45,LL:135,LH:225},z5e={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function U5e(e){if(!e)return;const{type:t}=e;if(t.includes("3d"))return tt(e.symbolLayers.at(0));if(t==="simple-line"){const r=q1(e);return r&&r.color}if(e.type==="simple-marker"&&(e.style==="x"||e.style==="cross")){const r=q1(e);return r&&r.color}return FPe(e)}function B5e(e,t){const r=t.HH.label,i=t.LL.label,n=t.HL.label,s=t.LH.label;switch(e){case"HH":default:return{top:r,bottom:i,left:n,right:s};case"HL":return{top:n,bottom:s,left:i,right:r};case"LL":return{top:i,bottom:r,left:s,right:n};case"LH":return{top:s,bottom:n,left:r,right:i}}}function G5e(e){const{focus:t,infos:r,numClasses:i}=e,n=z5e[i],s={};r.forEach(a=>{s[a.value]={label:a.label,fill:U5e(a.symbol)}});const o=[];for(let a=0;a<i;a++){const l=[];for(let c=0;c<i;c++){const h=s[n[a][c]];l.push(h.fill)}o.push(l)}return{type:"relationship-ramp",numClasses:i,focus:t,colors:o,labels:B5e(t,s),rotation:Are(t)}}function Are(e){let t=Qz[e];return e&&t==null&&(t=Qz.HH),t||0}let Hp=null;const Kz=[255,255,255];function Xz(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function q5e(e,t,r){const{backgroundColor:i,outline:n,dotSize:s}=e,o=(r==null?void 0:r.swatchSize)||Tr.size,a=.8,l=Math.round(o*o/Math.max(s,.5)**2*a),c=window.devicePixelRatio,h=document.createElement("canvas"),f=o*c;h.width=f,h.height=f,h.style.width=h.width/c+"px",h.style.height=h.height/c+"px";const m=h.getContext("2d");if(i&&(m.fillStyle=i.toCss(!0),m.fillRect(0,0,f,f),m.fill()),m.fillStyle=(t==null?void 0:t.toCss(!0))??"",Hp&&Hp.length/2===l)for(let g=0;g<2*l;g+=2){const v=Hp[g],x=Hp[g+1];m.fillRect(v,x,s*c,s*c),m.fill()}else{Hp=[];for(let g=0;g<2*l;g+=2){const v=Xz(0,f),x=Xz(0,f);Hp.push(v,x),m.fillRect(v,x,s*c,s*c),m.fill()}}n&&(n.color&&(m.strokeStyle=n.color.toCss(!0)),m.lineWidth=n.width,m.strokeRect(0,0,f,f));const y=new Image(o,o);return y.src=h.toDataURL(),y.ariaLabel=(r==null?void 0:r.ariaLabel)??null,y.alt=(r==null?void 0:r.ariaLabel)??"",y}function H5e(e,t={}){const r=t.radius||40,i=2*Math.PI*r,n=e.length,s=i/n,o=[],a=q1(t.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||t.backgroundColor)&&o.push({shape:{type:"circle",cx:r,cy:r,r},fill:t.backgroundColor,stroke:a,offset:[0,0]});const l=t.values,c=l&&l.length===n&&l.reduce((g,v)=>g+v,0)===100,h=[0];for(let g=0;g<n;g++){let v=null;c&&(v=l[g]*i/100,h.push(v+h[g])),o.push({shape:{type:"circle",cx:r,cy:r,r:r/2},fill:[0,0,0,0],stroke:{width:r,dashArray:`${(v??s)/2} ${i}`,dashoffset:"-"+(c?h[g]/2:g*(s/2)),color:e[g]},offset:[0,0]})}let f=null;const m=2*r+((a==null?void 0:a.width)||0),y=t.holePercentage;if(y){a&&o.push({shape:{type:"circle",cx:r,cy:r,r:r*y},fill:null,stroke:a,offset:[0,0]});const g=m/2;f=[[{shape:{type:"circle",cx:g,cy:g,r:g},fill:Kz,stroke:a?{...a,color:Kz}:null,offset:[0,0]},{shape:{type:"circle",cx:g,cy:g,r:r*y},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return qw([o],[m,m],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:f,rotations:[-90],ariaLabel:t.ariaLabel})}function th(e,t={}){const n=t.align==="horizontal",s=n?75:24,o=n?24:75,a=t.width??s,l=t.height??o,c=t.gradient??!0,h=window.devicePixelRatio,f=a*h,m=l*h,y=document.createElement("canvas");y.width=f,y.height=m,y.ariaLabel=t.ariaLabel??null,y.style.width=`${a}px`,y.style.height=`${l}px`;const g=y.getContext("2d"),v=n?f:0,x=n?0:m;if(c){const _=g.createLinearGradient(0,0,v,x),S=e.length,$=S===1?0:1/(S-1);e.forEach((M,I)=>_.addColorStop(I*$,M.toString())),g.fillStyle=_,g.fillRect(0,0,f,m)}else{const _=n?f/e.length:f,S=n?m:m/e.length;let $=0,M=0;for(const I of e)g.fillStyle=I.toString(),g.fillRect($,M,_,S),$=n?$+_:0,M=n?0:M+S}const b=document.createElement("div");return b.style.width=`${a}px`,b.style.height=`${l}px`,W5e(b,t==null?void 0:t.effectList),b.appendChild(y),b}function W5e(e,t){if(!t)return;e.style.filter=Gw(t);const r=t.effects;if(r){for(const i of r)if((i==null?void 0:i.type)==="drop-shadow"){i.offsetX<0?e.style.marginLeft=`${Math.abs(i.offsetX)}px`:e.style.marginRight=`${i.offsetX}px`;break}}}async function kre(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:r}=await B(()=>import("./previewWebStyleSymbol-6ed37270.js"),[]);return r(e,kre,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:r}=await B(()=>Promise.resolve().then(()=>V5e),void 0);return r(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:r}=await B(()=>import("./previewSymbol2D-ef1b8730.js"),["assets/previewSymbol2D-ef1b8730.js","assets/fontUtils-169c9d42.js","assets/quantizationUtils-4be91068.js"]);return r(e,t)}case"cim":{const{previewCIMSymbol:r}=await B(()=>import("./previewCIMSymbol-0bc1b247.js"),["assets/previewCIMSymbol-0bc1b247.js","assets/CIMSymbolHelper-a4ca21cf.js","assets/BidiEngine-664145a5.js","assets/fontUtils-169c9d42.js","assets/OptimizedGeometry-4a66a431.js","assets/memoryEstimations-e8cfae6e.js","assets/GeometryUtils-e2c839d5.js","assets/rasterizingUtils-04255511.js","assets/floatRGBA-d388c598.js","assets/Rect-ea14f53a.js","assets/BoundingBox-dc5b3050.js","assets/CIMSymbolRasterizer-987e0dd0.js","assets/CIMResourceManager-7067ff29.js","assets/OverrideHelper-a2a5ba17.js","assets/quantizationUtils-4be91068.js"]);return r(e,t)}default:return}}function Rre(e){return e&&"opacity"in e?e.opacity*Rre(e.parent):1}async function Vqe(e,t){var S;if(!e)return;const r=e.sourceLayer,i=(t!=null&&t.useSourceLayer?r:e.layer)??r,n=t!=null&&t.ignoreOpacity?1:Rre(i);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const $=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,acceptedFormats:["web","cim"],cache:t!=null?t.webStyleCache:null}):e.symbol.clone();return pI($,null,n),$}const s=(t==null?void 0:t.renderer)??Z5e(i);let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(e,t):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...t,cache:t!=null?t.webStyleCache:null}):o.clone(),!s||!("visualVariables"in s)||!((S=s.visualVariables)!=null&&S.length))return pI(o,null,n),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(t==null?void 0:t.arcade)==null){const $={...t};$.arcade=await $a(),t=$}const{getColor:a,getOpacity:l,getAllSizes:c,getRotationAngle:h}=await B(()=>Promise.resolve().then(()=>_p),void 0),f=[],m=[],y=[],g=[];for(const $ of s.visualVariables)switch($.type){case"color":f.push($);break;case"opacity":m.push($);break;case"rotation":g.push($);break;case"size":$.target||y.push($)}const v=!!f.length&&f[f.length-1],x=v?a(v,e,t):null,b=!!m.length&&m[m.length-1];let _=b?l(b,e,t):null;if(n!=null&&(_=_!=null?_*n:n),t!=null&&t.ignoreOpacity&&(_=1),pI(o,x,_),y.length&&(t==null?void 0:t.ignoreSizeVariables)!==!0){const $=c(y,e,t);await g5e(o,$)}if((t==null?void 0:t.ignoreRotationVariables)!==!0)for(const $ of g)v5e(o,h($,e,t),$.axis);return o}function Z5e(e){if(e)return"renderer"in e?e.renderer:void 0}function J5e(e,t,r){const i=e.effectiveClusterRenderer;if(!i||!("visualVariables"in i)||!i.visualVariables)return null;const n=i.visualVariables.find(h=>h.type==="size");if(!("stops"in n)||!n.stops)return null;const s=n.stops.find(h=>h.useMinValue),o=n.stops.find(h=>h.useMaxValue);if(s==null||o==null)return null;const a=r.featuresTilingScheme.getClosestInfoForScale(r.scale).level,l=n.field,c=t.getDisplayStatistics(a,l);return c?new Jy({field:n.field,minSize:e.clusterMinSize,minDataValue:c.minValue,maxSize:e.clusterMaxSize,maxDataValue:c.maxValue}):null}const Y5e=/^-?(\d+)(\.(\d+))?$/i;function Q5e(e,t){return e-t}function K5e(e,t){let r,i;return r=Number(e.toFixed(t)),r<e?i=r+1/10**t:(i=r,r-=1/10**t),r=Number(r.toFixed(t)),i=Number(i.toFixed(t)),[r,i]}function X5e(e,t,r,i,n){const s=ex(e,t,r,i),o=s.previous==null||s.previous<=n,a=s.next==null||s.next<=n;return o&&a||s.previous+s.next<=2*n}function e$(e){const t=String(e),r=t.match(Y5e);if(r!=null&&r[1])return{integer:r[1].split("").length,fractional:r[3]?r[3].split("").length:0};if(t.toLowerCase().includes("e")){const i=t.split("e"),n=i[0],s=i[1];if(n&&s){const o=Number(n);let a=Number(s);const l=a>0;l||(a=Math.abs(a));const c=e$(o);return l?(c.integer+=a,a>c.fractional?c.fractional=0:c.fractional-=a):(c.fractional+=a,a>c.integer?c.integer=1:c.integer-=a),c}}return{integer:0,fractional:0}}function ex(e,t,r,i){const n={previous:null,next:null};if(r!=null){const s=e-r,o=t-r-s;n.previous=Math.floor(Math.abs(100*o/s))}if(i!=null){const s=i-e,o=i-t-s;n.next=Math.floor(Math.abs(100*o/s))}return n}function t$(e,t={}){const r=e.slice(),{tolerance:i=2,strictBounds:n=!1,indexes:s=r.map((o,a)=>a)}=t;s.sort(Q5e);for(let o=0;o<s.length;o++){const a=s[o],l=r[a],c=a===0?null:r[a-1],h=a===r.length-1?null:r[a+1],f=e$(l).fractional;if(f){let m,y=0,g=!1;for(;y<=f&&!g;){const v=K5e(l,y);m=n&&o===0?v[1]:v[0],g=X5e(l,m,c,h,i),y++}g&&(r[a]=m)}}return r}const e4e={maximumFractionDigits:20};function t4e(e){return np(e,e4e)}const zqe=",",r4e={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},i4e=new Set(["integer","small-integer"]);let mI=null;function n4e(e){return BN(e)||ebe(e)||tbe(e)}async function Uqe(e){const{field:t,field2:r,field3:i,normalizationField:n,valueExpression:s}=e;let o=[];if(s){if(!mI){const{arcadeUtils:a}=await $a();mI=a}o=mI.extractFieldNames(s)}return t&&o.push(t),r&&o.push(r),i&&o.push(i),n&&o.push(n),o}function Pg(e){return String(e).padStart(2,"0")}function eU(e,t,r){let i;return t==="date"||t==="number"?(t==="number"&&(e=new Date(e)),i=`TIMESTAMP'${r?e.getFullYear():e.getUTCFullYear()}-${Pg((r?e.getMonth():e.getUTCMonth())+1)}-${Pg(r?e.getDate():e.getUTCDate())} ${Pg(r?e.getHours():e.getUTCHours())}:${Pg(r?e.getMinutes():e.getUTCMinutes())}:${Pg(r?e.getSeconds():e.getUTCSeconds())}'`):i=e,i}function Bqe(e,t,r,i){const{hasQueryEngine:n}=e,s=`(${eU(r,tU(e,r),n)} - ${eU(t,tU(e,t),n)})`;let o=r4e[i],a="/";return o<1&&(o=1/o,a="*"),{sqlExpression:o===1?s:`(${s} ${a} ${o})`,sqlWhere:null}}function tU(e,t){if(t instanceof Date)return"date";if(typeof t=="number")return"number";if(typeof t=="string"){const r=e.getField(t);if(t.toLowerCase()==="<now>")return;if(BN(r))return"field"}}function Gqe(e,t){const r=t&&e.getField(t);return!!r&&i4e.has(r.type)}function qqe(e){return`cast(${e} as float)`}function s4e(e,t){const{format:r,timeZoneOptions:i,fieldType:n}=t??{};let s,o;if(i&&({timeZone:s,timeZoneName:o}=_me(i.layerTimeZone,i.datesInUnknownTimezone,i.viewTimeZone,gg(r||"short-date-short-time"),n)),typeof e=="string"&&isNaN(Date.parse(n==="time-only"?`1970-01-01T${e}Z`:e)))return e;switch(n){case"date-only":{const a=gg(r||"short-date");return typeof e=="string"?Mme(e,{...a}):Eo(e,{...a,timeZone:_a})}case"time-only":{const a=gg(r||"short-time");return typeof e=="string"?Ime(e,a):Eo(e,{...a,timeZone:_a})}case"timestamp-offset":{if(!s&&typeof e=="string"&&new Date(e).toISOString()!==e)return e;const a=r||i?gg(r||"short-date-short-time"):void 0,l=a?{...a,timeZone:s,timeZoneName:o}:void 0;return typeof e=="string"?Cme(e,l):Eo(e,l)}default:{const a=r||i?gg(r||"short-date-short-time"):void 0;return Eo(typeof e=="string"?new Date(e):e,a?{...a,timeZone:s,timeZoneName:o}:void 0)}}}const Ore="<",Nre=">";function Pre(e,t,r,i){let n="";return t===0?n=`${Ore} `:t===r&&(n=`${Nre} `),n+(i?s4e(e,i):t4e(e))}const o4e=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function cR(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(o=>o.type==="color");if(!t)return null;let r=null,i=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;r=t.stops[0].value,i=t.stops[t.stops.length-1].value}const n=r!=null&&i!=null?r+(i-r)/2:0,{getColor:s}=await B(()=>Promise.resolve().then(()=>_p),void 0);return s(t,n)??null}async function Dre(e,t){const r=e.trailCap,i=e.trailWidth||1,n=t||await cR(e)||e.color;return new en({cap:r,color:n,width:i})}function a4e(e,t){var r,i;if(!t.field)return null;if("featureReduction"in e)switch((r=e.featureReduction)==null?void 0:r.type){case"cluster":case"binning":{const n=e.featureReduction.fields.find(({name:s})=>s.toLowerCase()===t.field.toLowerCase());return n&&"getField"in e?e.getField(n.onStatisticField):null}}return"getField"in e?(i=e.getField)==null?void 0:i.call(e,t.field):null}function l4e(e,t){var i,n,s;const r="popupTemplate"in e?(i=e.popupTemplate)==null?void 0:i.fieldInfos:null;if(r!=null&&r.length&&t)return(s=(n=r.find(o=>{var a;return((a=o.fieldName)==null?void 0:a.toLowerCase())===t.toLowerCase()}))==null?void 0:n.format)==null?void 0:s.dateFormat}function u4e(e,t,r){var s,o,a,l;const i=a4e(e,t);if(!i||!n4e(i)&&!LJ(i))return null;let n=l4e(e,i.name);if(!n&&i.type==="date"){let c=0,h=0;t.stops?(c=((o=(s=t.stops)==null?void 0:s.at(0))==null?void 0:o.value)??c,h=((l=(a=t.stops)==null?void 0:a.at(-1))==null?void 0:l.value)??h):"minDataValue"in t&&"maxDataValue"in t&&(c=t.minDataValue??c,h=t.maxDataValue??h),n=h-c>2*_C.days?"short-date":"short-date-short-time"}return{fieldType:i.type,format:n,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:r,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}function dR(e){var t,r;if("authoringInfo"in e)return(r=(t=e.authoringInfo)==null?void 0:t.visualVariables)==null?void 0:r.find(({theme:i})=>i==="reference-size")}const c4e=new Q([64,64,64]);function Fre(e,t){const r=[],i=e.length-1;return e.length===5?r.push(0,2,4):r.push(0,i),e.map((n,s)=>r.includes(s)?Pre(n,s,i,t):null)}async function rU(e,t,r){let i=!1,n=[],s=[];if(e.stops){const c=e.stops;n=c.map(h=>h.value),i=c.some(h=>!!h.label),i&&(s=c.map(h=>h.label))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const l=i?null:Fre(n,r);return(await Promise.all(n.map(async(c,h)=>({value:c,color:e.type==="opacity"?await d4e(c,e,t):(await B(()=>Promise.resolve().then(()=>_p),void 0)).getColor(e,c),label:i?s[h]:(l==null?void 0:l[h])??""})))).reverse()}async function d4e(e,t,r){const i=new Q(r??c4e),n=(await B(()=>Promise.resolve().then(()=>_p),void 0)).getOpacity(t,e);return n!=null&&(i.a=n),i}function h4e(e){let t=!1,r=[],i=[];r=e.map(a=>a.value),t=e.some(a=>!!a.label),t&&(i=e.map(a=>a.label??""));const n=r[0],s=r[r.length-1];if(n==null&&s==null)return null;const o=t?null:Fre(r);return r.map((a,l)=>({value:a,color:jre(a,e),label:t?i[l]:(o==null?void 0:o[l])??""})).reverse()}function jre(e,t){const{startIndex:r,endIndex:i,weight:n}=p4e(e,t);if(r===i)return t[r].color;const s=Q.blendColors(t[r].color,t[i].color,n);return new Q(s)}function p4e(e,t){let r=0,i=t.length-1;return t.some((n,s)=>e<n.value?(i=s,!0):(r=s,!1)),{startIndex:r,endIndex:i,weight:(e-t[r].value)/(t[i].value-t[r].value)}}function f4e(e,t){let r=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((i,n)=>{n===0?r.push({value:t.max,color:new Q(i.toColor),label:"high"}):r.push({value:null,color:new Q(i.toColor),label:""}),n===e.colorRamps.length-1?r.push({value:t.min,color:new Q(i.fromColor),label:"low"}):r.push({value:null,color:new Q(i.fromColor),label:""})});else{let i,n;e&&e.type==="algorithmic"?(i=e.fromColor,n=e.toColor):(i=[0,0,0,1],n=[255,255,255,1]),r=[{value:t.max,color:new Q(n),label:"high"},{value:t.min,color:new Q(i),label:"low"}]}return r}function m4e(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(i=>{var n;return((n=i.color)==null?void 0:n.a)>0});let r=t.length-1;if(t[0]){const i=t[r];i&&i.ratio!==1&&(t.push(new Pv({ratio:1,color:i.color})),r++)}return t.map((i,n)=>{var o,a;let s="";return n===0?s=((o=e.legendOptions)==null?void 0:o.minLabel)||"low":n===r&&(s=((a=e.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:i.color,label:s,ratio:i.ratio}}).reverse()}const hR=30,pR=12,fR=24,Vre=[255,255,255],x5=[200,200,200],hm=[128,128,128],y4e=20,g4e=5;function v4e(e){return e.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function w4e(e){return e.declaredClass==="esri.symbols.PictureMarkerSymbol"}function b4e(e){return e.declaredClass==="esri.symbols.SimpleLineSymbol"}function _4e(e){return e.declaredClass==="esri.symbols.TextSymbol"}function x4e(e,t){const r=e.length-1;return e.map((i,n)=>Pre(i,n,r,t))}async function S4e(e,t,r,i,n,s,o){const a=t.legendOptions,l=a==null?void 0:a.customValues,c=o||await M4e(e,r),h=t.stops,f=!!c,m=!!l,y=t.minSize!=null&&t.maxSize!=null,g=h&&h.length>1,v=!!t.target;if(!f||!m&&!(y||g&&!v))return;const x=BE(c);let b=!1,_=null,S=null;_=x&&!g?t$([t.minDataValue,t.maxDataValue]):l??await C4e(t,c,i,n==null?void 0:n.type);const $=e==null?void 0:e.authoringInfo,M=($==null?void 0:$.type)==="univariate-color-size",I=M&&($==null?void 0:$.univariateTheme)==="above-and-below",C=!!dR(e);if(!_&&g&&(_=h.map(z=>z.value),b=h.some(z=>!!z.label),e.type==="flow"&&(_=t$(_)),b&&(S=h.map(z=>z.label))),x&&_!=null&&(_==null?void 0:_.length)>2&&!I&&(_=[_[0],_[_.length-1]]),!_)return null;M&&(_==null?void 0:_.length)!==5&&(_=Bre({minSize:_[0],maxSize:_[_.length-1]}));const L=x?$4e(e,_):null,V=n5e(c),P=b?null:x4e(_,s);return(await Promise.all(_.map(async(z,Y)=>{const oe=x?L[Y]:await Vf(t,c,z,i,n==null?void 0:n.type);return{value:z,symbol:!C||e.type!=="class-breaks"&&e.type!=="unique-value"?k4e(I&&e.type==="class-breaks"?T4e(e,Y):c,oe):E4e(e,oe,t.maxSize,r)??c,label:b?S[Y]:P[Y],size:C?fR:oe,outlineSize:V}}))).reverse()}function $4e(e,t){const r=e==null?void 0:e.authoringInfo,i=(r==null?void 0:r.type)==="univariate-color-size";let n=[pR,hR];if(i){const s=t[0],o=t[t.length-1],a=pR,l=hR;n=t.map(c=>a+(c-s)/(o-s)*(l-a))}return i&&(r==null?void 0:r.univariateTheme)==="below"&&n.reverse(),n}function E4e(e,t,r,i){var o,a,l,c,h,f;const n=e.type==="class-breaks",s=n?(l=(a=(o=e.classBreakInfos)==null?void 0:o[0])==null?void 0:a.symbol)==null?void 0:l.clone():(f=(h=(c=e.uniqueValueInfos)==null?void 0:c[0])==null?void 0:h.symbol)==null?void 0:f.clone();return s&&"type"in s&&s.type==="cim"?(Kte(s,{color:i??(n?null:new Q(x5)),innerDotSize:t*(fR/r)||1,outerRingSize:fR}),s):null}function T4e(e,t){var o;const r=e.classBreakInfos,i=r.length,n=i<2||!(t>=2)?r[0].symbol.clone():r[i-1].symbol.clone();return((o=e.visualVariables)==null?void 0:o.some(a=>a.type==="color"))&&(n.type.includes("3d")?zre(n):Ure(n)),n}async function M4e(e,t){var n,s;if(e.type==="flow")return Dre(e,t);if(e.type==="pie-chart")return new Ci({color:null,outline:(n=e.outline)!=null&&n.width?e.outline:new en});let r=null,i=null;if(e.type==="simple")r=e.symbol;else if(e.type==="class-breaks"){const o=e.classBreakInfos;r=o&&o[0]&&o[0].symbol,i=o.length>1}else if(e.type==="unique-value"){const o=e.uniqueValueInfos;r=(s=o==null?void 0:o[0])==null?void 0:s.symbol,i=o!=null&&o.length>1}return!r||I4e(r)?null:(r=r.clone(),(t||i)&&(r.type.includes("3d")?zre(r):Ure(r)),r)}function I4e(e){var t;return Ca(e)?((t=e.symbolLayers)==null?void 0:t.some(r=>(r==null?void 0:r.type)==="fill"))??!1:(e==null?void 0:e.type.includes("fill"))??!1}function zre(e){e.type==="line-3d"?e.symbolLayers.forEach(t=>{t.material={color:hm}}):e.symbolLayers.forEach(t=>{var r;t.type!=="icon"||(r=t.resource)!=null&&r.href?t.material={color:x5}:(t.material={color:Vre},t.outline={color:hm,size:1.5})})}function Ure(e){var r,i;const t=SK();e.type==="cim"?tre(e,new Q(x5)):e.type.includes("line")?e.color=hm:(e.color=t?hm:Vre,e.type==="simple-marker"&&(e.outline?((i=(r=e.outline)==null?void 0:r.color)==null?void 0:i.toHex())==="#ffffff"&&(e.outline.color=hm):e.outline={color:hm,width:1.5}))}async function C4e(e,t,r,i){const n=(await B(()=>Promise.resolve().then(()=>_p),void 0)).getSizeRangeAtScale(e,r,i),s=n&&Bre(n);if(!n||!s)return;let o=s.map(a=>L4e(a,e,n));o=t$(o);for(let a=1;a<o.length-1;a++){const l=await A4e(e,t,o[a],o[a-1],r,i);l&&(o[a]=l[0],s[a]=l[1])}return o}function Bre(e){const t=e.minSize,r=e.maxSize,i=g4e,n=(r-t)/(i-1),s=[];for(let o=0;o<i;o++)s.push(t+n*o);return s}function L4e(e,t,r){const i=r.minSize,n=r.maxSize,s=t.minDataValue,o=t.maxDataValue;let a;return e<=i?a=s:e>=n?a=o:a=(e-i)/(n-i)*(o-s)+s,a}async function A4e(e,t,r,i,n,s){const o=await Vf(e,t,r,n,s),a=await Vf(e,t,i,n,s),l=e$(r),c=l.fractional,h=y4e;let f=l.integer,m=null,y=null;r>0&&r<1&&(m=10**c,f=e$(r*=m).integer);for(let g=f-1;g>=0;g--){const v=10**g;let x=Math.floor(r/v)*v,b=Math.ceil(r/v)*v;m!=null&&(x/=m,b/=m);let _=(x+b)/2;[,_]=t$([x,_,b],{indexes:[1]});const S=await Vf(e,t,x,n,s),$=await Vf(e,t,b,n,s),M=await Vf(e,t,_,n,s),I=ex(o,S,a,null),C=ex(o,$,a,null),L=ex(o,M,a,null);let V=I.previous<=h,P=C.previous<=h;if(V&&P&&(I.previous<=C.previous?(V=!0,P=!1):(P=!0,V=!1)),V?y=[x,S]:P?y=[b,$]:L.previous<=h&&(y=[_,M]),y)break}return y}async function Vf(e,t,r,i,n){const{getSize:s}=await B(()=>Promise.resolve().then(()=>_p),void 0);return s(e,r,{scale:i,view:n,shape:t.type==="simple-marker"?t.style:null})}function k4e(e,t){const r=e.clone();if(Ca(r))BE(r)||r.symbolLayers.forEach(i=>{i.type!=="fill"&&(i.size=t)});else if(v4e(r))r.size=t;else if(w4e(r)){const i=r.width,n=r.height;r.height=t,r.width=t*(i/n)}else b4e(r)?r.width=t:_4e(r)&&r.font&&(r.font.size=t);return r}function R4e(e){const r=Math.floor(Math.log10(Math.abs(e)))+1,i=r<4||r>6?4:r,n=1e6,s=Math.abs(e)>=n?"compact":"standard";return np(e,{notation:s,minimumSignificantDigits:2,maximumSignificantDigits:i})}const iU=16,O4e="https://utility.arcgis.com/sharing/tools/legend",N4e="esri.layers.ImageryLayer",P4e="esri.layers.ImageryTileLayer",D4e="esri.layers.WCSLayer",f_=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,F4e=new je({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),m_=new Ci({size:6,outline:{color:[128,128,128,.5],width:.5}}),j4e=new Ul({style:"solid"});function mR(e){return e.type==="flow"}function Gre(e){return e.type==="vector-field"}function qre(e){return e.type==="raster-colormap"}function Hre(e){return e.type==="raster-stretch"}function Wre(e){return e.type==="raster-shaded-relief"}function zf(e){return e.declaredClass==="esri.renderers.SimpleRenderer"}function rh(e){return e.declaredClass==="esri.renderers.ClassBreaksRenderer"}function ih(e){return e.declaredClass==="esri.renderers.UniqueValueRenderer"}function Zre(e){return e.declaredClass==="esri.renderers.HeatmapRenderer"}function V4e(e){return S5(e)||$5(e)||E5(e)||z4e(e)}function z4e(e){return e.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function S5(e){return e.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function $5(e){return e.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function E5(e){return e.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function Jre(e){return e.declaredClass==="esri.renderers.DotDensityRenderer"}function Yre(e){return e.declaredClass==="esri.renderers.PieChartRenderer"}function U4e(e,t){return zf(e)||rh(e)||ih(e)||Zre(e)||Jre(e)||Yre(e)?t.type==="2d"||Yte(e):Hre(e)||qre(e)||Wre(e)||S5(e)||$5(e)||E5(e)||Gre(e)||mR(e)}function B4e(e){return e.declaredClass==="esri.layers.BuildingSceneLayer"}function yI(e){return e.declaredClass==="esri.layers.SubtypeGroupLayer"}function G4e(e){return e.declaredClass==="esri.layers.VoxelLayer"}function q4e(e){return e.declaredClass==="esri.layers.WMSLayer"}function H4e(e){return e.declaredClass==="esri.layers.WMTSLayer"}function gI(e){return e.declaredClass==="esri.layers.MapImageLayer"}function nU(e){return e.declaredClass==="esri.layers.TileLayer"}function Wp(e){return e.declaredClass===N4e}function y_(e){return e.declaredClass===P4e}function W4e(e){return e.declaredClass===D4e}function Z4e(e){return e.type==="stretch-ramp"}function J4e(e){const t="authoringInfo"in e?e==null?void 0:e.authoringInfo:null;return(t==null?void 0:t.type)==="univariate-color-size"}function Y4e(e){const t="authoringInfo"in e?e==null?void 0:e.authoringInfo:null;return(t==null?void 0:t.type)==="univariate-color-size"&&(t==null?void 0:t.univariateTheme)==="above-and-below"}function sU(e){return"sublayers"in e}async function Fa(e,t){const r=await iN("esri/widgets/Legend/t9n/Legend");return e!=="previewTemplateAriaLabel"||t||(e="previewAriaLabel"),w1(r[e],{label:t})}function Q4e(e,t){const{field:r,field2:i,field3:n,fieldDelimiter:s,valueExpression:o}=e;if(!r)return null;const a=!r&&!o||!i&&!n?[t]:t==null?void 0:t.toString().split(s||""),l=r?{[r]:a==null?void 0:a[0]}:null;return l&&(i&&(l[i]=a==null?void 0:a[1]),n&&(l[n]=a==null?void 0:a[2])),l}const K4e=new Ci({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Zp={},pr=class extends ce{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilterId=null,this._layerDisplayFilterClause=null,this.children=new ie,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange("ready");this.addHandles([En(()=>this.children,"change",t=>{const{added:r,removed:i}=t;r.forEach(n=>{const s=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles(ee(()=>n.ready,e,Ye),s)}),i.forEach(n=>this.removeHandles(n.layer.uid)),e()})]),this.keepCacheOnDestroy||(Zp={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Zp=null),this._layerDefinitionExpressionClause=null}get effectList(){const e=this.layer;let t=null;return"effect"in e&&e.effect&&(t=new uo,t.effect=e.effect,t.endTransition(),t.scale=this.scale),t}get opacity(){var n;const e=this.layer.opacity,t=(n=this.parent)==null?void 0:n.opacity,r=this.layer.parent,i=r&&"uid"in r?this._getParentLayerOpacity(r):null;return t!=null?t*e:i!=null?i*e:e}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var e;return((e=this.view)==null?void 0:e.scale)??0}get isScaleDriven(){const e=this.layer;if(e===null)return!1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return!0;if("featureReduction"in e&&e.featureReduction){if(e.featureReduction.type==="cluster")return!0;if(e.featureReduction.type==="binning"&&"renderer"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return"renderer"in e&&e.renderer?!!("displayFilterInfo"in e&&e.displayFilterInfo&&ih(e.renderer))||this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,r=>{var i;if(Fme(r))return this._getRendererLegendElements(r.renderer,{title:r.title});if((i=r.featureSet)!=null&&i.features.length){const n=r.layerDefinition,s=n==null?void 0:n.drawingInfo,o=s&&tOe(s.renderer),a=F4e.read(n.geometryType);return o?this._getRendererLegendElements(o,{title:r.name,geometryType:a}):(W.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const r=[],i=await Promise.allSettled(t);for(const n of i)if(n.status==="fulfilled")for(const s of n.value??[])r.push(s);this.legendElements=r,this.notifyChange("ready")}catch(r){W.getLogger(this).warn("error while building legend for layer!",r)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready")}catch(t){W.getLogger(this).warn("error while building legend for layer!",t)}}async buildLegendElementsForFeatureReduction(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getLegendElementsForFeatureReduction(e):[],this.notifyChange("ready")}catch(t){W.getLogger(this).warn("error while building legend for layer!",t)}}async buildLegendElementsForTools(){var t,r;const e=this.layer;if(G4e(e))this._constructLegendElementsForVoxelLayer();else if(H4e(e))this._constructLegendElementsForWMTSlayer();else if(q4e(e))await this._constructLegendElementsForWMSSublayers();else if(B4e(e))await this._constructLegendElementsForBuildingSceneLayer();else if(gI(e)||nU(e)||yI(e))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let i="default";if(Wp(e)){const n=e;i=(((t=n==null?void 0:n.rasterFunction)==null?void 0:t.functionName)||"default")+"_"+((r=e.bandIds)!=null&&r.length?e.bandIds.join(""):"###")}if(y_(e)||e.type==="link-chart")return;await this._getLegendLayers(`${e.uid}-${i}`).then(async n=>{this.legendElements=[],this.notifyChange("ready");const s=n.map(async o=>{if(Wp(e)){const l=ee(()=>[e.rasterFunction,e.bandIds],()=>dw(async()=>{Zp.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()})());this.addHandles(l,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(o);a!=null&&a.infos.length&&(Wp(e)&&(a.title=e.title),this.legendElements.push(a)),this.notifyChange("ready")});await Promise.allSettled(s)}).catch(n=>{W.getLogger(this).warn("Request to server for legend has failed!",n)})}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,r=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!r&&!(t&&"createQuery"in e&&"queryFeatureCount"in e))return!0;await Y$(()=>!t.updating);const i=r?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();return i?(i.geometry=this.view.extent,(r?"queryFeatureCount"in t&&await t.queryFeatureCount(i):"queryFeatureCount"in e&&await e.queryFeatureCount(i))!==0):!0}_getParentLayerOpacity(e){let t=1;const r=e.parent;return r&&"uid"in r&&(t=this._getParentLayerOpacity(r)),e.opacity*t}_isGroupActive(){return this.children.some(e=>e.ready)}_isRendererScaleDriven(e){if(e.type==="dot-density")return!0;const t="valueExpression"in e?e.valueExpression:null;if(f_.test(t))return!0;const r="visualVariables"in e?e.visualVariables:null;return!!(r!=null&&r.some(i=>this._isScaleDrivenSizeVariable(i)))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){var t;switch(e.type){case"simple":return this._isScaleDrivenSymbol(e.symbol);case"class-breaks":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some(r=>this._isScaleDrivenSymbol(r.symbol));case"unique-value":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!((t=e.uniqueValueInfos)!=null&&t.some(r=>this._isScaleDrivenSymbol(r.symbol)))}return!1}_isScaleDrivenSymbol(e){if((e==null?void 0:e.type)==="cim"){const{primitiveOverrides:t,minScale:r,maxScale:i}=e.data,n=(t==null?void 0:t.some(s=>{var o;return/\$view\.scale/.test(((o=s.valueExpressionInfo)==null?void 0:o.expression)||"")}))??!1;return r!=null||i!=null||n}return!1}_isScaleDrivenSizeVariable(e){if(e&&e.type!=="size")return!1;const t=e,r=t.minSize,i=t.maxSize;return!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||f_.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some(r=>this._isLayerScaleDriven(r));const t=e.parent;if(e.loaded===!1&&t&&gI(t)&&"source"in e&&e.source&&e.source.type==="map-layer"){for(const r of t.sourceJSON.layers??[])if(r.id===e.source.mapLayerId&&(r.minScale>0||r.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){var s;this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const e=this.layer;this.addHandles(ee(()=>e.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(ee(()=>e.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");const t=e.getVariableStyle(null),r=[];if(t){if((s=t.uniqueValues)!=null&&s.length){const o=[];t.uniqueValues.forEach(a=>{a.enabled&&o.push({label:a.label||`${a.value}`,value:a.value,symbol:new Ul({color:a.color,outline:null})})}),o.length&&r.push({type:"symbol-table",title:t.label,infos:o})}else if(t.transferFunction){const{colorStops:o,stretchRange:a}=t.transferFunction,l=o.toArray().reverse(),c=a.map((f,m)=>`${m===0?Ore:Nre} ${R4e(f)}`).reverse(),h=l.map(f=>({color:f.color,value:null,label:null}));h[0].label=c[0],h[h.length-1].label=c[1],r.push({type:"color-ramp",title:t.label,infos:h,preview:th(l.map(f=>f.color),{ariaLabel:await Fa("previewColorRampAriaLabel")})})}}const i=e.opacity,n=r.reduce((o,a)=>[...o,...this._getAllInfos(a)],[]).filter(o=>!!(o!=null&&o.symbol)).map(o=>this._getSymbolPreview(o,i));await Promise.allSettled(n),this.legendElements=r,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){var r,i;this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const e=this.layer.activeLayer;this.addHandles(ee(()=>{const{layer:n}=this;return n&&"activeLayer"in n&&n.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");const t=e.styleId?(i=(r=e.styles)==null?void 0:r.find(({id:n})=>n===e.styleId))==null?void 0:i.legendUrl:void 0;t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}]),this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this.addHandles(ee(()=>{const{layer:r}=this;return r&&"sublayers"in r&&r.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(e,t){var o,a;const r=this.layer,i=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const n=((a=(o=this.sublayerIds)==null?void 0:o.map(l=>r.findSublayerById(l)))==null?void 0:a.filter(Ei))??[],s=n.length?n:e.toArray();for(const l of s){const c=ee(()=>[l.title,l.visible,l.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(c,"wms-sublayers-watcher"),!this.respectLayerVisibility||l.visible&&l.legendEnabled){const h=await this._generateSymbolTableElementForWMSSublayer(l,t);h!=null&&h.infos.length&&i.unshift(h)}}return i}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const r=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter(i=>i);return{type:"symbol-table",title:e.title,infos:r}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var o;let r=e.legendUrl;if(!r)return;const i={type:"symbol-table",title:e.title||e.name||String(e.id??""),infos:[]};t&&(r=D_(r,t));let n=null;const s=(o=e.layer)==null?void 0:o.opacity;try{n=(await ft(r,{responseType:"image"})).data,n&&(n.style.opacity=s)}catch{}return i.infos.push({src:r,preview:n,opacity:s}),i}_getLegendLayers(e,t){const r=Zp&&Zp[e];return r?Promise.resolve(r):this._legendRequest(t).then(i=>{const n=i.layers;return Zp[e]=n,n})}_legendRequest(e){var n;const t=this.layer;let r={f:"json",dynamicLayers:e};if(Wp(t)){const s=t.exportImageServiceParameters.rasterFunction;if(s&&(r.renderingRule=JSON.stringify(((n=s.functionDefinition)==null?void 0:n.toJSON())||s.toJSON())),t.bandIds&&(r.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:o,viewId:a,customParameters:l}=t;r={raster:o,viewId:a,...r,...l}}}let i=t.url.replace(/(\/)+$/,"");if("version"in t&&+t.version>=10.01){const s=i.indexOf("?");s>-1?i=i.slice(0,s)+"/legend"+i.slice(s):i+="/legend"}else{const s=i.toLowerCase().indexOf("/rest/"),o=s===-1?i:i.slice(0,s)+i.slice(s+5);i=O4e+"?soapUrl="+encodeURI(o)+"&returnbytes=true"}return ft(i,{query:r}).then(s=>s.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;this.addHandles(ee(()=>e.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){W.getLogger(this).warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let r=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const i=e.toArray();for(const n of i){const s=ee(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(s,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const o=(n==null?void 0:n.opacity)!=null?n.opacity:null,a=o!=null?o*t:t;if(n.type==="building-group"){const l={type:"symbol-table",title:n.title,infos:[]},c=await this._generateLegendElementsForBuildingSublayers(n.sublayers,a);l.infos.push(...c),r=[l,...r]}else n.renderer&&(r=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:a,sublayer:n}),...r])}}return r.filter(n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;if(gI(e)||nU(e)||yI(e)){this.addHandles(ee(()=>e.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){W.getLogger(this).warn("Request to server for legend has failed!",t)}}}async _generateLegendElementsForSublayers(e,t,r){const i=this.layer;let n=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let s=e.toArray();!r&&this.sublayerIds&&this.sublayerIds.length&&(s=yI(i)?this.sublayerIds.map(o=>i.findSublayerForSubtypeCode(o)).filter(Ei):this.sublayerIds.map(o=>i.findSublayerById(o)).filter(Ei));for(const o of s){const a=ee(()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this.addHandles(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const l=(o==null?void 0:o.opacity)!=null?o.opacity:null,c=l!=null?l*t:t,h=!sU(o)||o.originIdOf("renderer")>Te.SERVICE&&!o.sublayers;if(o.renderer&&h)await o.load(),n=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:c,sublayer:o}),...n];else if(sU(o)){const f=await this._generateSymbolTableElementForSublayer(o,c,r);f&&n.unshift(f)}}}return n.filter(o=>!!o&&(!("infos"in o)||!o.infos||o.infos.length>0))}async _generateSymbolTableElementForSublayer(e,t,r){if(!r){r=new Map;const n=this.layer,s=e.source;let o=null;if(!(!s||s.type==="map-layer"&&s.mapLayerId===e.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||e.originIdOf("renderer")>Te.SERVICE||e.originIdOf("labelingInfo")>Te.SERVICE||e.originIdOf("labelsVisible")>Te.SERVICE){const l=new gs({layer:this.layer});o=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const a=o||`${n.uid}-default`;(await this._getLegendLayers(a,o)).forEach(l=>r.set(l.layerId,l))}const i=r.get(e.id);if((!i||i!=null&&i.subLayerIds&&i.defaultVisibility)&&e.sublayers){const n=await this._generateLegendElementsForSublayers(e.sublayers,t,r);return{type:"symbol-table",title:e.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(i,e,t)}_generateSymbolTableElementForLegendLayer(e,t,r){if(!(e!=null&&e.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const i=t==null?void 0:t.renderer;let n=(t==null?void 0:t.title)||e.layerName;if(i&&(!t||(t==null?void 0:t.originIdOf("renderer"))>Te.SERVICE)){const a=(t==null?void 0:t.title)||this._getRendererTitle(i,t);a&&(n&&typeof a!="string"&&"title"in a&&(a.title=n),n=a)}const s={type:"symbol-table",title:n,legendType:e.legendType||null,infos:[]},o=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach(a=>{var c;const l={type:"symbol-table",title:a.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter(h=>h.groupId===a.id),e.layerId,r)};((c=l.infos)==null?void 0:c.length)>0&&s.infos.push(l)}):s.infos=this._generateSymbolTableElementInfosForLegendLayer(o,e.layerId,r),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(e,t,r){return e.map(i=>{let n=i.url;if(i.imageData&&i.imageData.length>0)n=`data:image/png;base64,${i.imageData}`;else{if(n.indexOf("http")===0)return null;n=ade(`${this.layer.url}/${t}/images/${n}`)}return{label:i.label,src:n,opacity:r??this.opacity,width:i.width,height:i.height}}).filter(Ei)}_isSublayerInScale(e){const t=e.minScale||0,r=e.maxScale||0;return!(t>0&&t<this.scale||r>this.scale)}_isLegendLayerInScale(e,t){const r=t||this.layer;let i=null,n=null,s=!0;return!r.minScale&&r.minScale!==0||!r.maxScale&&r.maxScale!==0?(e.minScale===0&&r.tileInfo&&(i=r.tileInfo.lods[0].scale),e.maxScale===0&&r.tileInfo&&(n=r.tileInfo.lods[r.tileInfo.lods.length-1].scale)):(i=Math.min(r.minScale,e.minScale)||r.minScale||e.minScale,n=Math.max(r.maxScale,e.maxScale)),(i>0&&i<this.scale||n>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(e,t){var o;if("version"in this.layer&&+this.layer.version<10.1||e.length===0)return e;const r=t.renderer,i=e.some(a=>a.values);let n=0,s=null;return i&&e.some((a,l)=>(a.values||(n=l,s=a,s.label||(s.label="others")),s!=null)),r?r.type==="unique-value"?s&&(e.splice(n,1),e.push(s)):r.type==="class-breaks"&&(s&&e.splice(n,1),(o=r.legendOptions)!=null&&o.order||e.reverse(),s&&e.push(s)):s&&(e.splice(n,1),e.push(s)),e}async _getRendererLegendElements(e,t={}){if(!U4e(e,this.view))return W.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(V4e(e))return this._constructPointCloudRendererLegendElements(e,t);if(Jre(e))return this._constructDotDensityRendererLegendElements(e);const r=await this._loadRenderer(e);return Yre(r)?this._constructPieChartRendererLegendElements(r):this._constructRendererLegendElements(r,t)}async _getLegendElementsForFeatureReduction(e){let t=null;return e.type==="binning"?t=e.renderer:e.type==="cluster"&&(t=this._getClusterRenderer(e)),t?this._getRendererLegendElements(t):[]}_getPointCloudRendererTitle(e){var t;return(((t=e.legendOptions)==null?void 0:t.title)||e.field)??""}async _constructPointCloudRendererLegendElements(e,t={}){var a;const r=t.title,i=[];let n=null,s=null;if(S5(e))n={type:"symbol-table",title:r||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach(l=>{n.infos.unshift({label:l.label||l.minValue+" - "+l.maxValue,value:[l.minValue,l.maxValue],symbol:this._getAppliedCloneSymbol(m_,l.color)})});else if($5(e)){const l=e.stops;let c=null;if(l!=null&&l.length&&(l.length===1&&(c=l[0].color),!c)){const f=l[0].value,m=l[l.length-1].value;f!=null&&m!=null&&(c=jre(f+(m-f)/2,l))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(m_,c||m_.color)}]};const h=h4e(e.stops??[])??[];s={type:"color-ramp",title:r||this._getPointCloudRendererTitle(e),infos:h,preview:th(h.map(f=>f.color),{ariaLabel:await Fa("previewColorRampAriaLabel")})}}else E5(e)&&(n={type:"symbol-table",title:r||this._getPointCloudRendererTitle(e),infos:[]},(a=e.colorUniqueValueInfos)==null||a.forEach(l=>{n.infos.push({label:l.label||l.values.join(", "),value:l.values.join(", "),symbol:this._getAppliedCloneSymbol(m_,l.color)})}));n!=null&&n.infos.length&&i.push(n),s!=null&&s.infos.length&&i.push(s);const o=i.reduce((l,c)=>[...l,...c.infos??[]],[]).filter(l=>!!l.symbol).map(l=>this._getSymbolPreview(l,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}}));return await Promise.allSettled(o),i}async _getElementInfoForDotDensity(e,t){const{color:r,label:i,valueExpressionTitle:n}=t,{backgroundColor:s,outline:o,dotSize:a}=e,l=this.effectList,c=l==null?void 0:l.effects.map(b=>b.toJSON()),h=US(c),f=await Fa("previewTemplateAriaLabel",i||n),m=a+"-"+r+"-"+s+"-"+(o&&JSON.stringify(o.toJSON()))+"-"+h,y=this._dotDensityUrlCache,g=y.has(m)?y.get(m):q5e(e,r,{ariaLabel:f});y.set(m,g);const v={shape:{type:"image",x:0,y:0,width:g.width,height:g.height,src:g.src},fill:null,stroke:null,offset:[0,0]},x=qw([[v]],[g.width,g.height],{effectView:this.effectList,ariaLabel:f});return{opacity:1,src:g.src,preview:x,width:g.width,height:g.height}}async _constructDotDensityRendererLegendElements(e){var n;const t=e.calculateDotValue(this.view.scale),r=(n=e.legendOptions)==null?void 0:n.unit,i={type:"symbol-table",title:{value:t&&Math.round(t),unit:r||""},infos:[]};for(const s of e.attributes){const o=await this._getElementInfoForDotDensity(e,s);o.label=s.label||s.valueExpressionTitle||s.field,i.infos.push(o)}return[i]}async _constructPieChartRendererLegendElements(e){var l,c,h,f;const t=this.layer.opacity,r=[];let i=null;const n=e.outline;e.attributes.forEach(m=>{const y=new Ci({color:m.color,outline:n}),g=m.label||m.valueExpressionTitle||m.field;r.push({label:g,symbol:y})});const s=r.length?[...r]:[];if((l=e.othersCategory)!=null&&l.color&&((c=e.othersCategory)==null?void 0:c.threshold)!==0){const m=new Ci({color:e.othersCategory.color,outline:n});i=e.othersCategory.label||"Other",r.push({label:i,symbol:m})}if((h=e.defaultColor)!=null&&h.a){const m=new Ci({color:e.defaultColor,outline:n});r.push({label:e.defaultLabel,symbol:m})}const o=await this._getVisualVariableLegendElements(e,this.layer)||[];if(r.length){o.unshift({type:"symbol-table",title:null,infos:r});const m=s.filter(g=>g.label!==i).map(g=>g.symbol.color).filter(Boolean),y=H5e(m,{holePercentage:e.holePercentage,backgroundColor:(f=e.backgroundFillSymbol)==null?void 0:f.color,effectList:this.effectList,outline:n,ariaLabel:await Fa("previewPieChartAriaLabel")});o.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(e,this.layer),infos:r,preview:y})}const a=o.reduce((m,y)=>[...m,...this._getAllInfos(y)],[]).filter(m=>!!(m!=null&&m.symbol)&&!(m!=null&&m.preview)).map(m=>this._getSymbolPreview(m,t,{effectList:this.effectList}));return await Promise.allSettled(a),o}async _getWhereClause(e,t,r){const i=await VN(e,r),n=await hbe(t,r),s=new Set(n.map(a=>a.toLowerCase())),o=i==null?void 0:i.fieldNames.map(a=>a.toLowerCase());return o!=null&&o.some(a=>!s.has(a))?null:i}async _processDefinitionExpression(e,t){if(!("definitionExpression"in e))return;const r=e.definitionExpression;r&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==r&&(this._layerDefinitionExpressionClause=await this._getWhereClause(r,t,e.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=r}async _processDisplayFilter(e,t){if(!("displayFilterInfo"in e))return;const r=e.displayFilterInfo?QCe(e.displayFilterInfo,this.view):null;return r!=null&&r.where?this._layerDisplayFilterId!==(r==null?void 0:r.id)&&(this._layerDisplayFilterClause=await this._getWhereClause(r.where,t,e.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilterId=r==null?void 0:r.id,r}async _constructRendererLegendElements(e,t={}){var b,_,S,$,M,I;const{title:r,sublayer:i}=t,n=i||this.layer,s=dR(e);let o=null;ih(e)&&(await this._processDefinitionExpression(n,e),o=await this._processDisplayFilter(n,e)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const a=await this._getVisualVariableLegendElements(e,n)||[],l={type:"symbol-table",title:r||this._getRendererTitle(e,n),infos:[]};let c=null,h=!1;const f=new Set;if(mR(e)&&!this._hasSizeRamp){const C=await Dre(e);l.infos.push({label:null,symbol:C})}else if(J4e(e)){let C=r;const L=Y4e(e)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",V=a.findIndex(ae=>ae.type==="color-ramp"),P=V!==-1?a.splice(V,1)[0]:null,z=a.findIndex(ae=>ae.type==="size-ramp"),Y=z!==-1?a.splice(z,1)[0]:null,oe=[];P&&(C=P.title,oe.push(P)),Y&&(C=Y.title,oe.push(Y)),oe.length>0&&a.push({type:L,title:C,infos:oe})}else if(Zre(e)){const C=m4e(e);a.push({type:"heatmap-ramp",title:r||this._getRendererTitle(e,n),infos:C,preview:th(C.map(L=>L.color),{effectList:this.effectList,ariaLabel:await Fa("previewColorRampAriaLabel")})})}else if(ih(e)){const C=e.authoringInfo;if(C&&C.type==="relationship"){const{numClasses:L,field1:V,field2:P}=C,z=C.focus;if(L&&V&&P){const Y=[V,P];let oe=Are(z)||0;for(const Ge of Y){const{field:dt,normalizationField:Ve,label:Z}=Ge,j=Z||{field:this._getFieldAlias(dt,n),normField:Ve&&this._getFieldAlias(Ve,n)},de=K4e.clone();de.angle=oe,l.infos.push({label:j,symbol:de}),f.add(de),oe+=90}const ae=G5e({focus:z,numClasses:L,infos:e.uniqueValueInfos??[]});a.unshift(ae)}}else if(Wp(this.layer)||y_(this.layer))(b=e.uniqueValueInfos)==null||b.forEach(L=>{L.symbol&&this._checkClausesForUVR(e,L.value)&&l.infos.push({label:L.label||L.value,value:L.value,symbol:L.symbol})});else{const{field:L,field2:V,field3:P,fieldDelimiter:z,valueExpression:Y,defaultSymbol:oe}=e,ae=!(!L&&!Y||!V&&!P),Ge=this._layerDisplayFilterClause?o==null?void 0:o.title:null,dt=[];if((_=e.uniqueValueGroups)==null||_.forEach(Ve=>{var j;const Z={type:"symbol-table",title:Ge||Ve.heading,infos:[]};(j=Ve.classes)==null||j.forEach(de=>{const{symbol:Ne,values:fe}=de;if(Ne){const nt=[],ge=[];for(const yr of fe??[]){const{value:di,value2:kn,value3:is}=yr,Fe=[],dr=[];(L||Y)&&(Fe.push(di),dr.push(this._getDomainName(L,di,n))),V&&(Fe.push(kn),dr.push(this._getDomainName(V,kn,n))),P&&(Fe.push(is),dr.push(this._getDomainName(P,is,n))),nt.push(ae?Fe.join(z||""):Fe[0]),ge.push(dr.join(" - "))}const Qe=nt.join(", ");let De=de.label;if(!De){const yr=ge.filter(Boolean);De=yr.length?yr.join(", "):Qe}const Je=Ne.clone();Je.type==="cim"&&s&&Kte(Je,{innerDotSize:.5*iU,outerRingSize:iU}),nt.some(yr=>this._checkClausesForUVR(e,yr))&&Z.infos.push({label:De,value:Qe,symbol:Je})}}),Z.infos.length&&dt.push(Z)}),dt.length){const Ve=dt[0];dt.length===1&&"title"in Ve&&!Ve.title?l.infos.push(...Ve.infos??[]):(oe&&(dt.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:oe}]}),h=!0),l.infos.push(...dt)),r||(S=e.legendOptions)!=null&&S.title||e.valueExpressionTitle||(l.title=null)}}e.defaultSymbol&&!h&&(l.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),h=!0)}else if(rh(e)){if(!s){if(c=this._isUnclassedRenderer(e),!c||!this._hasSizeRamp){const C=e.classBreakInfos.filter(({symbol:V})=>V),L=(($=e.legendOptions)==null?void 0:$.order)==="ascending-values";for(const{label:V,minValue:P,maxValue:z,symbol:Y}of C){const oe={label:V||(c?null:`${P} - ${z}`),value:[P,z],symbol:Y};L?l.infos.push(oe):l.infos.unshift(oe)}c&&(l.title=null),this._updateInfosForClassedSizeRenderer(e,l.infos)}e.defaultSymbol&&!c&&(l.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),h=!0)}}else if(Hre(e))if(y_(this.layer)||W4e(this.layer)){const C=await this._constructTileImageryStretchRendererElements(e);Z4e(C)?a.push(C):l.infos=C}else{const C=this.layer;let L,V;(M=e.customStatistics)!=null&&M.length&&({min:L,max:V}=e.customStatistics[0]);let P=[],z=C.serviceRasterInfo;if(C.rasterFunction)try{z=await C.generateRasterInfo(C.rasterFunction)}catch{}const Y=KS(z.pixelType);if(z.bandCount===1){const oe=((I=C.bandIds)==null?void 0:I[0])||0;L=L??(z.statistics?z.statistics[oe].min:Y[0]),V=V??(z.statistics?z.statistics[oe].max:Y[1]),L||V?a.push(await this._getStretchLegendElements(e,{min:L,max:V})):this._getServerSideLegend()}else if(C.bandIds&&C.bandIds.length===1)L=L??(z.statistics?z.statistics[C.bandIds[0]].min:Y[0]),V=V??(z.statistics?z.statistics[C.bandIds[0]].max:Y[1]),L||V?a.push(await this._getStretchLegendElements(e,{min:L,max:V})):this._getServerSideLegend();else if(z.bandCount>=3){const{bandInfos:oe}=z,{bandIds:ae}=C;oe.length>=z.bandCount?(ae==null?void 0:ae.length)===3?(P=ae.map(Ge=>oe[Ge].name),l.infos=this._createSymbolTableElementMultiBand(P)):C.format==="lerc"?(P=[0,1,2].map(Ge=>oe[Ge].name),l.infos=this._createSymbolTableElementMultiBand(P)):this._getServerSideLegend():C.format==="lerc"?(P=["band1","band2","band3"],l.infos=this._createSymbolTableElementMultiBand(P)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(qre(e))e.colormapInfos.forEach(C=>{l.infos.push({label:C.label,value:C.value,symbol:this._getAppliedCloneSymbol(j4e,C.color)})});else if(zf(e)){let C=e.symbol;switch(t.geometryType){case"point":C="pointSymbol"in n?n.pointSymbol:null;break;case"polyline":C="lineSymbol"in n?n.lineSymbol:null;break;case"polygon":C="polygonSymbol"in n?n.polygonSymbol:null}const L=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&L&&l.infos.push({label:e.label,symbol:C})}else if(Gre(e)){e.outputUnit&&(this.title="("+e.toJSON().outputUnit+")"),l.title=e.attributeField;const C=e.getClassBreakInfos();C!=null&&C.length?C.forEach(L=>{l.infos.push({label:L.minValue+" - "+L.maxValue,symbol:L.symbol})}):l.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else Wre(e)&&a.push(await this._getStretchLegendElements(e,{min:0,max:255}));const m=e.defaultSymbol;!m||h||zf(e)||c&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||a.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:m}]}),l.infos.length&&a.unshift(l);const y=t.opacity==null?this.opacity:t.opacity,g=this._isTallSymbol("visualVariables"in e?e.visualVariables:null),v=Wp(this.layer)||y_(this.layer),x=a.reduce((C,L)=>[...C,...this._getAllInfos(L)],[]).filter(C=>!!(C!=null&&C.symbol)).filter(C=>{if(C.symbol.type==="cim"){const{minScale:L,maxScale:V}=C.symbol.data;if(L&&L<this.scale||V&&V>this.scale)return!1}return!0}).map(C=>this._getSymbolPreview(C,y,{isDefault:C.symbol===m,applyScaleDrivenSize:!f.has(C.symbol),symbolConfig:{isTall:g,isSquareFill:v},effectList:f.has(C.symbol)?null:this.effectList}));return e=null,await Promise.allSettled(x),a}_checkClausesForUVR(e,t){const r=Q4e(e,t);return!r||(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(r))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(r))}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(e){const t=e==null?void 0:e.infos;return t?t.reduce((r,i)=>r.concat(this._getAllInfos(i)),[]):[e]}async _constructTileImageryStretchRendererElements(e){var a,l,c;const t=this.layer,r=t.symbolizer.rasterInfo??t.raster.rasterInfo;let i,n;const s=(a=e==null?void 0:e.customStatistics)!=null&&a.length?e.customStatistics:r==null?void 0:r.statistics;if(s)({min:i,max:n}=s[0]);else{const h=KS(r.pixelType);i=h[0],n=h[1]}if(t.hasStandardTime()&&(i=t.getStandardTimeValue(i),n=t.getStandardTimeValue(n)),r.bandCount===1||((l=t.bandIds)==null?void 0:l.length)===1)return this._getStretchLegendElements(e,{min:i,max:n});const o=((c=t==null?void 0:t.bandIds)!=null&&c.length?t.bandIds:Array.from(Array(Math.min(r.bandCount,3)).keys())).map(h=>r.bandInfos[h].name);return o.length<3?o.push(o[1]):o.length>3&&o.splice(3),this._createSymbolTableElementMultiBand(o)}async _getStretchLegendElements(e,t){const r=e.colorRamp,i=f4e(r,t);return{type:"stretch-ramp",title:"",infos:i,preview:th(i.map(n=>n.color),{ariaLabel:await Fa("previewColorRampAriaLabel")})}}_getClusterSymbol(){var i;const e=this.layer,t="featureReduction"in e&&e.featureReduction,r=t&&"symbol"in t&&t.renderer;return r&&((i=r==null?void 0:r.authoringInfo)==null?void 0:i.isAutoGenerated)!==!0?null:t&&"symbol"in t?t.symbol:null}async _getSizeLegendElement(e,t,r,i){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await S4e(r,t,await cR(r),this.scale,this.view,i,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const t=[],r=["red","green","blue"];return e.forEach((i,n)=>{t.push({label:{colorName:r[n],bandName:i},src:o4e[n],opacity:this.opacity??1})}),t}_updateInfosForClassedSizeRenderer(e,t){const r=e.authoringInfo&&e.authoringInfo.type==="class-breaks-size",i=e.classBreakInfos.some(n=>BE(n.symbol));if(r&&i){const n=hR,s=pR,o=e.classBreakInfos.length,a=(n-s)/(o>1?o-1:o);t.forEach((l,c)=>{l.size=n-a*c})}}_isTallSymbol(e){let t=!1,r=!1;if(e)for(let i=0;i<e.length&&(!t||!r);i++){const n=e[i];n.type==="size"&&(n.axis==="height"&&(t=!0),n.axis==="width-and-depth"&&(r=!0))}return t&&r}async _getSymbolPreview(e,t,r){var s,o,a;let i=!(r!=null&&r.isDefault)&&e.size==null&&this._hasSizeRamp?An(Tr.size):e.size;if(this._scaleDrivenSizeVariable&&(r!=null&&r.applyScaleDrivenSize)){const{getSize:l}=await B(()=>Promise.resolve().then(()=>_p),void 0);i=l(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:e.symbol.type==="simple-marker"?e.symbol.style:null})}const n=!(r!=null&&r.isDefault)&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(r!=null&&r.applyScaleDrivenSize));return kre(e.symbol,{size:i,opacity:t,scale:!1,symbolConfig:r==null?void 0:r.symbolConfig,effectView:r==null?void 0:r.effectList,style:"legend",cimOptions:{allowScalingUp:n,viewParams:this.isScaleDriven?{viewingMode:((s=this.view)==null?void 0:s.type)==="2d"?"map":(o=this.view)==null?void 0:o.viewingMode,scale:(a=this.view)==null?void 0:a.scale}:null},ariaLabel:e.label&&typeof e.label!="string"?null:await Fa("previewTemplateAriaLabel",e.label)}).then(l=>(e.preview=l,e)).catch(()=>(e.preview=null,e))}_getClusterRenderer(e){var n,s;this._hasClusterSizeVariable=!1;const t="renderer"in this.layer?this.layer.renderer:null,r=((n=e.renderer)==null?void 0:n.clone())||(t==null?void 0:t.clone()),i=J5e(e,this.layerView,this.view);if(i&&r!=null&&"visualVariables"in r&&!((s=r.visualVariables)==null?void 0:s.some(a=>a.type==="size"&&a.target!=="outline"&&!f_.test(a.valueExpression)))){if("clusterMinSize"in e&&"clusterMaxSize"in e){const{clusterMinSize:l,clusterMaxSize:c}=e;i.legendOptions=new nee({showLegend:l!==c})}const a=r.visualVariables||[];r.visualVariables=a.concat([i]),this._hasClusterSizeVariable=!0}return r}async _loadRenderer(e){const t=[],r=e.clone(),i=await cR(r);if(rh(r)||ih(r)){const n=(r.classBreakInfos||r.uniqueValueInfos).map(s=>this._fetchSymbol(s.symbol,i).then(o=>{s.symbol=o}).catch(()=>{s.symbol=null}));Array.prototype.push.apply(t,n)}return t.push(this._fetchSymbol(r.symbol||r.defaultSymbol,r.defaultSymbol?null:i).then(n=>{this._applySymbolToRenderer(r,n,zf(r))}).catch(()=>{this._applySymbolToRenderer(r,null,zf(r))})),await Promise.allSettled(t),r}_applySymbolToRenderer(e,t,r){r?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(e.type==="web-style"){const r=this._webStyleSymbolCache;try{const i=await(this.view.type==="2d"?e.fetchCIMSymbol({cache:r}):e.fetchSymbol({cache:r}));return this._getAppliedCloneSymbol(i,t)}catch{throw W.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,t){if(!e||!t)return e;const r=e.clone(),i=t&&t.toRgba();return r.type.includes("3d")?this._applyColorTo3dSymbol(r,i):r.type==="cim"?tre(r,t):r.color&&(r.color=new Q(i||r.color)),r}_applyColorTo3dSymbol(e,t){t&&e.symbolLayers.forEach(r=>{r&&(r.material||(r.material={}),r.material.color=new Q(t))})}async _getVisualVariableLegendElements(e,t){var f,m;if(!("visualVariables"in e)||e.type==="vector-field")return null;const r=e.visualVariables??[],i=[],n=[],s=[],o=dR(e);if(((f=o==null?void 0:o.sizeStops)==null?void 0:f.length)===2&&(rh(e)||ih(e))){const[y,g]=o.sizeStops;n.push(new Jy({field:o.field??void 0,normalizationField:o.normalizationField,minSize:y.size,maxSize:g.size,minDataValue:y.value,maxDataValue:g.value}))}for(const y of r)y.type==="color"?i.push(y):y.type==="size"?n.push(y):y.type==="opacity"&&s.push(y);const a=[...i,...n,...s];let l,c;if(i.length===0&&rh(e)&&e.classBreakInfos&&e.classBreakInfos.length===1){const y=e.classBreakInfos[0];l=y&&y.symbol}if(i.length===0&&zf(e)&&(l=e.symbol),l)if(l.type.includes("3d")){const y=l.symbolLayers.at(0);y.type==="water"?y.color!=null&&(c=y.color):((m=y.material)==null?void 0:m.color)!=null&&(c=y.material.color)}else l.url||(c=l.color);const h=this.effectList;return(await Promise.all(a.map(async y=>{if(!y.legendOptions||y.legendOptions.showLegend!==!1){const g=mR(e)?y.field:this._getRampTitle(y,t);let v=null;const x=u4e(t,y,this.view.timeZone);if(y.type==="color"){const b=await rU(y,null,x)??[];v={type:"color-ramp",title:g,infos:b,preview:th(b.map(_=>_.color),{effectList:h,ariaLabel:await Fa("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=b.length>0)}else if(y.type==="size"&&y.target!=="outline")f_.test(y.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=y):(v=await this._getSizeLegendElement(g,y,e,x),this._hasSizeRamp||(this._hasSizeRamp=!(v.infos==null||!v.infos.length)));else if(y.type==="opacity"){const b=await rU(y,c,x)??[];v={type:"opacity-ramp",title:g,infos:b,preview:th(b.map(_=>_.color),{effectList:h,ariaLabel:await Fa("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=b.length>0)}return v!=null&&v.infos?v:null}}))).filter(Ei)}_getDomainName(e,t,r){var i;if(e&&typeof e!="function"){const n="getField"in r&&((i=r.getField)==null?void 0:i.call(r,e)),s=n&&"getFieldDomain"in r&&r.getFieldDomain?r.getFieldDomain(n.name,{excludeImpliedDomains:F("esri-widget-legacy-field-domain-calculation")}):null;return(s==null?void 0:s.type)==="coded-value"?s.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,r=e.field;if("featureReduction"in t&&t.featureReduction&&t.featureReduction.type==="cluster"){const i=t.featureReduction,n="popupTemplate"in i&&i.popupTemplate,s=n&&n.fieldInfos;if(s){for(const o of s)if(o.fieldName===r)return r==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(e,t){var c,h;let r=e.field,i=e.normalizationField,n=!1,s=!1,o=!1,a=null;r=typeof r=="function"?null:r,i=typeof i=="function"?null:i;const l=(c=e.legendOptions)==null?void 0:c.title;if(l!=null)a=l;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&((h=t.renderer.authoringInfo)!=null&&h.visualVariables)){const f=t.renderer.authoringInfo.visualVariables;for(let m=0;m<f.length;m++){const y=f[m];if(y.type==="color"){if(y.style==="ratio"){n=!0;break}if(y.style==="percent"){s=!0;break}if(y.style==="percent-of-total"){o=!0;break}}}}a={field:r&&this._getFieldAlias(r,t),normField:i&&this._getFieldAlias(i,t),ratio:n,ratioPercent:s,ratioPercentTotal:o}}return a}_getRendererTitle(e,t){var a;const r=e;if((a=r.legendOptions)!=null&&a.title)return r.legendOptions.title;if(r.valueExpressionTitle)return r.valueExpressionTitle;let i=r.field,n=null,s=null;if(rh(r)&&(n=r.normalizationField,s=r.normalizationType==="percent-of-total"),i=typeof i=="function"?null:i,n=typeof n=="function"?null:n,ih(r)){const{field2:l,field3:c,fieldDelimiter:h}=r;let f=i&&this._getFieldAlias(i,t);return l&&(f=`<${f}>${h}<${this._getFieldAlias(l,t)}>`,c&&(f=`${f}${h}<${this._getFieldAlias(c,t)}>`)),f}let o=null;return(i||n)&&(o={field:i&&this._getFieldAlias(i,t),normField:n&&this._getFieldAlias(n,t),normByPct:s}),o}_getFieldAlias(e,t){var h,f;const r="popupTemplate"in t?t.popupTemplate:null,i=r==null?void 0:r.fieldInfos;let n=i==null?void 0:i.find(m=>e===m.fieldName),s=null;"getField"in t&&t.getField?s=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(s=t.fieldsIndex.get(e));let o=null;const a="featureReduction"in t&&t.featureReduction;a&&(n??(n="popupTemplate"in a?(f=(h=a.popupTemplate)==null?void 0:h.fieldInfos)==null?void 0:f.find(m=>{var y;return(e==null?void 0:e.toLowerCase())===((y=m.fieldName)==null?void 0:y.toLowerCase())}):void 0),"fields"in a&&a.fields&&(o=a.fields.find(m=>{var y;return((y=m.name)==null?void 0:y.toLowerCase())===(e==null?void 0:e.toLowerCase())})));const l=n||s||o;let c=null;return l&&(c=(n==null?void 0:n.label)||(s==null?void 0:s.alias)||(o==null?void 0:o.alias)||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),c}_isUnclassedRenderer(e){const t=e.visualVariables;let r=!1;return rh(e)&&e.classBreakInfos&&e.classBreakInfos.length===1&&t&&(r=e.field?t.some(i=>!(!i||e.field!==i.field||(e.normalizationField||i.normalizationField)&&e.normalizationField!==i.normalizationField)):!!t.length),r}};u([d()],pr.prototype,"children",void 0),u([d({readOnly:!0})],pr.prototype,"effectList",null),u([d()],pr.prototype,"layerView",void 0),u([d()],pr.prototype,"layer",void 0),u([d()],pr.prototype,"legendElements",void 0),u([d({readOnly:!0})],pr.prototype,"opacity",null),u([d()],pr.prototype,"parent",void 0),u([d({readOnly:!0,dependsOn:[]})],pr.prototype,"ready",null),u([d()],pr.prototype,"hideLayersNotInCurrentView",void 0),u([d()],pr.prototype,"keepCacheOnDestroy",void 0),u([d()],pr.prototype,"respectLayerDefinitionExpression",void 0),u([d()],pr.prototype,"respectLayerVisibility",void 0),u([d({readOnly:!0})],pr.prototype,"scale",null),u([d()],pr.prototype,"sublayerIds",void 0),u([d({readOnly:!0})],pr.prototype,"isScaleDriven",null),u([d()],pr.prototype,"title",void 0),u([d({readOnly:!0,dependsOn:["ready"],value:0})],pr.prototype,"version",null),u([d()],pr.prototype,"view",void 0),pr=u([T("esri.widgets.Legend.support.ActiveLayerInfo")],pr);const Qre=pr,cd={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},Kre=ie.ofType(Qre),X4e=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),Xre="view.basemapView.baseLayerViews",eie="view.groundView.layerViews",tie="view.basemapView.referenceLayerViews",eDe=[Xre,eie,"view.layerViews",tie];let Bn=class extends ce{constructor(t){super(t),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new ie,this.activeLayerInfos=new Kre,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(ee(()=>this.view,()=>this._viewHandles(),Ye),cd.view),this.addHandles(eN(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(cd.state),this.view&&this.addHandles(ee(()=>this.state,()=>this._stateHandles(),Ye),cd.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([cd.allLayerViews,cd.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(t){this.removeHandles(t);const r=this._activeLayerInfosByLayerViewId[t];delete this._activeLayerInfosByLayerViewId[t],r!=null&&r.parent&&r.parent.children.remove(r)}_watchPropertiesAndAllLayerViews(){const{view:t}=this;if(!t)return;const{allLayerViews:r}=t;r.length&&this._refresh(),this.addHandles(r.on("change",i=>this._allLayerViewsChangeHandle(i)),cd.allLayerViews),this.addHandles(ee(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),cd.legendProperties)}_allLayerViewsChangeHandle(t){t.moved.length?this._propertiesChangeHandle():(t.removed.forEach(r=>this._destroyViewActiveLayerInfo(r.uid)),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(t){const r=this.view;if(t.length<2||!r)return;const i=[];t.forEach(s=>{if(!s.parent){const o=s.layer.parent,a=o&&"uid"in o&&this._layerViewByLayerId[o.uid],l=a&&this._activeLayerInfosByLayerViewId[a.uid];l&&t.includes(l)&&(i.push(s),s.parent=l,l.children.add(s),this._sortActiveLayerInfos(l.children))}}),t.removeMany(i);const n={};r.allLayerViews.forEach((s,o)=>n[s.layer.uid]=o),t.sort((s,o)=>{const a=n[s.layer.uid]||0;return(n[o.layer.uid]||0)-a})}_generateLayerViews(){const t=[];return eDe.filter(this._filterLayerViews,this).map(r=>Hi(this,r)).filter(r=>r!=null).forEach(this._collectLayerViews("layerViews",t)),t}_filterLayerViews(t){const r=!this.basemapLegendVisible&&(t===Xre||t===tie),i=!this.groundLegendVisible&&t===eie;return!r&&!i}_collectLayerViews(t,r){const i=n=>(n&&n.forEach(s=>{r.push(s),i(s[t])}),r);return i}_filterLayerViewsByLayerInfos(t){const r=this.layerInfos;return!r||!r.length||r.some(i=>this._hasLayerInfo(i,t))}_hasLayerInfo(t,r){const i=this._isLayerUIDMatching(t.layer,r.layer.uid);return i&&(this._layerInfosByLayerViewId[r.uid]=t),i}_isLayerUIDMatching(t,r){return t&&(t.uid===r||this._hasLayerUID(t.layers,r))}_hasLayerUID(t,r){return t&&t.some(i=>this._isLayerUIDMatching(i,r))}_isLayerViewSupported(t){return!!X4e.has(t.layer.declaredClass)&&(this._layerViewByLayerId[t.layer.uid]=t,!0)}_generateActiveLayerInfo(t){this._isLayerActive(t)?this._buildActiveLayerInfo(t):(this.removeHandles(t.uid),this.addHandles(ee(()=>{var r;return[t.legendEnabled,(r=t.layer)==null?void 0:r.legendEnabled]},()=>this._layerActiveHandle(t)),t.uid))}_layerActiveHandle(t){this._isLayerActive(t)&&(this.removeHandles(t.uid),this._buildActiveLayerInfo(t))}_isLayerActive(t){var r;return!this.respectLayerVisibility||t.legendEnabled&&((r=t.layer)==null?void 0:r.legendEnabled)}_buildActiveLayerInfo(t){var a;const r=t.layer,i=t.uid,n=this._layerInfosByLayerViewId[i];let s=this._activeLayerInfosByLayerViewId[i];if(!s){const l=(n==null?void 0:n.title)!==void 0&&n.layer.uid===r.uid;s=new Qre({layer:r,layerView:t,title:l?n.title:r.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:(n==null?void 0:n.sublayerIds)||[]}),this._activeLayerInfosByLayerViewId[i]=s}const o=r.parent&&"uid"in r.parent?this._layerViewByLayerId[(a=r.parent)==null?void 0:a.uid]:null;if(s.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],!this.hasHandles(i)){const l=[ee(()=>r.title,c=>this._titleHandle(c,s)),ee(()=>[r.opacity,"renderer"in r&&r.renderer,"pointSymbol"in r&&r.pointSymbol,"lineSymbol"in r&&r.lineSymbol,"polygonSymbol"in r&&r.polygonSymbol],()=>this._constructLegendElements(s)),Ln(()=>{var c;return((c=this.view)==null?void 0:c.stationary)===!0},()=>this._scaleHandle(s),Ye),ee(()=>t.layer?Oz(t.layer,t.view):null,()=>this._constructLegendElements(s)),ee(()=>t.updating,()=>{t.layer!=null&&Oz(t.layer,t.view)!=null&&this._constructLegendElements(s)}),ee(()=>"effect"in r&&r.effect,()=>this._constructLegendElements(s)),Ln(()=>{var c;return(c=this.view)==null?void 0:c.timeZone},()=>this._constructLegendElements(s),Ye)];if(this.respectLayerVisibility){const c=ee(()=>t.legendEnabled,f=>this._legendEnabledHandle(f,s)),h=ee(()=>r.legendEnabled,f=>this._legendEnabledHandle(f,s));l.push(c,h)}if(this.respectLayerDefinitionExpression&&"definitionExpression"in r){const c=ee(()=>[r.definitionExpression,this.respectLayerDefinitionExpression],()=>{s.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(s)});l.push(c)}this.addHandles(l,i)}s.isScaleDriven||this._constructLegendElements(s),this._addActiveLayerInfo(s)}_titleHandle(t,r){r.title=t,this._constructLegendElements(r)}_legendEnabledHandle(t,r){t?this._addActiveLayerInfo(r):this._removeActiveLayerInfo(r)}_scaleHandle(t){(t.isScaleDriven||t.hideLayersNotInCurrentView)&&this._constructLegendElements(t)}_addActiveLayerInfo(t){var n;const{layerView:r,layer:i}=t;if(this._isLayerActive(r)&&!this.activeLayerInfos.includes(t)){const s=t.parent;if(s)s.children.includes(t)||s.children.push(t),this._sortActiveLayerInfos(s.children);else{const o=(n=this.layerInfos)==null?void 0:n.some(l=>l.layer.uid===i.uid),a=i.parent;a&&"uid"in a&&this._layerViewByLayerId[a.uid]&&!o?this._activeLayerInfosWithNoParent.add(t):(this.activeLayerInfos.add(t),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const o=[];this._activeLayerInfosWithNoParent.forEach(a=>{const l=a.layer.parent,c=l&&"uid"in l?this._layerViewByLayerId[l==null?void 0:l.uid]:null,h=this._activeLayerInfosByLayerViewId[c==null?void 0:c.uid];h&&(o.push(a),a.parent=h)}),o.length&&(this._activeLayerInfosWithNoParent.removeMany(o),o.forEach(a=>this._addActiveLayerInfo(a)))}}}_removeActiveLayerInfo(t){const r=t.parent;r?r.children.remove(t):this.activeLayerInfos.remove(t)}_constructLegendElements(t){const r=t.layer;"featureCollections"in r&&r.featureCollections?t.buildLegendElementsForFeatureCollections(r.featureCollections):"featureReduction"in r&&r.featureReduction&&"renderer"in r.featureReduction&&(r.featureReduction.type==="binning"||r.featureReduction.type==="cluster")&&(!this.view||r.featureReduction.maxScale<=this.view.scale)?t.buildLegendElementsForFeatureReduction(r.featureReduction):"renderer"in r&&r.renderer&&!("sublayers"in r)?t.buildLegendElementsForRenderer(r.renderer):"url"in r&&r.url&&r.type!=="catalog"&&r.type!=="knowledge-graph"?t.buildLegendElementsForTools():t.children.forEach(i=>this._constructLegendElements(i))}};u([d({type:Kre})],Bn.prototype,"activeLayerInfos",void 0),u([d()],Bn.prototype,"basemapLegendVisible",void 0),u([d()],Bn.prototype,"groundLegendVisible",void 0),u([d()],Bn.prototype,"hideLayersNotInCurrentView",void 0),u([d()],Bn.prototype,"keepCacheOnDestroy",void 0),u([d()],Bn.prototype,"respectLayerDefinitionExpression",void 0),u([d()],Bn.prototype,"respectLayerVisibility",void 0),u([d()],Bn.prototype,"layerInfos",void 0),u([d({readOnly:!0})],Bn.prototype,"state",null),u([d()],Bn.prototype,"view",void 0),Bn=u([T("esri.widgets.Legend.LegendViewModel")],Bn);const tDe=Bn,Ze="esri-legend--card",Jp="esri-legend",_e={activated:`${Ze}__carousel-indicator--activated`,base:Ze,stacked:`${Jp}--stacked`,carouselTitle:`${Ze}__carousel-title`,indicator:`${Ze}__carousel-indicator`,intervalSeparator:`${Ze}__interval-separator`,imageryLayerStretchedImage:`${Ze}__imagery-layer-image--stretched`,imageLabel:`${Ze}__image-label`,layerCaption:`${Ze}__layer-caption`,labelElement:`${Ze}__label-element`,layerRow:`${Ze}__layer-row`,labelCell:`${Ze}__label-cell`,message:`${Ze}__message`,rampLabel:`${Ze}__ramp-label`,section:`${Ze}__section`,relationshipSection:`${Ze}__relationship-section`,serviceCaptionText:`${Ze}__service-caption-text`,serviceContent:`${Ze}__service-content`,service:`${Ze}__service`,groupLayer:`${Ze}__group-layer`,groupLayerChild:`${Ze}__group-layer-child`,symbol:`${Ze}__symbol`,sizeRampRow:`${Ze}__size-ramp-row`,symbolRow:`${Ze}__symbol-row`,symbolCell:`${Ze}__symbol-cell`,carousel:`${Ze}__carousel`,carouselItem:`${Ze}__carousel-item`,indicatorContainer:`${Ze}__carousel-indicator-container`,intervalSeparatorsContainer:`${Ze}__interval-separators-container`,relationshipLabelContainer:`${Ze}__relationship-label-container`,labelContainer:`${Ze}__label-container`,serviceCaptionContainer:`${Ze}__service-caption-container`,symbolContainer:`${Ze}__symbol-container`,colorRampContainer:`${Ze}__color-ramp-container`,sizeRampContainer:`${Ze}__size-ramp-container`,sizeRampPreview:`${Ze}__size-ramp-preview`,pieChartRampPreview:`${Ze}__pie-chart-ramp-preview`,rampContainer:`${Jp}__ramps`,sizeRampHorizontal:`${Jp}__size-ramp--horizontal`,rampLabelsContainer:`${Jp}__ramp-labels`,layerInfo:`${Jp}__layer-cell ${Jp}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};function rDe(e,t){return t}function $r(e){const t=this;e.appendChild(t)}function $y(e,t,r){if(!t)return;if(typeof t=="number")return t;if(typeof t=="string")return $le(t);if("value"in t||"unit"in t)return w1(e.dotValue,t);if("colorName"in t&&"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:void 0;let i=null;return rDe(t,r)?i=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:rie(t,r)&&(i=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),i?w1(i==="showField"?"{field}":e[i],{field:t.field,normField:t.normField}):void 0}function rie(e,t){return!t}function iie(e,t){return!!(t&&t==="Stretched"&&"version"in e&&typeof e.version=="number"&&e.version>=10.3&&e.declaredClass==="esri.layers.ImageryLayer")}function iDe(e,t){var r;return e.label?t[e.label]+": "+(typeof e.value=="string"?e.value:np(e.value??0,{style:"decimal",notation:(r=e.value)!=null&&r.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}function nie(e,t,r){switch(t){case"heatmap-ramp":return r[e.label]||e.label;case"stretch-ramp":return iDe(e,r);default:return e.label}}function sie(e,t){if(!e.title||typeof e.title=="string")return e.title;const r=e.type==="color-ramp"||e.type==="opacity-ramp",i=e.title,n=$y(t,i,r);return rie(i,r)&&i.title?`${i.title} (${n})`:n}const nDe=25,sDe=25,oDe=100;let nh=class extends Mr{constructor(t,r){super(t,r),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const t=this.legendElement.infos.slice().reverse();return k("div",{class:this.classes(_e.layerRow,_e.colorRampContainer)},this._renderRampLabel(t[0]),k("div",{class:_e.symbolContainer},this._renderPreview(t),this._renderMiddleStopRampLabel(t)),this._renderRampLabel(t.at(-1)))}_renderPreview(t){const{opacity:r}=this,i=this.legendElement.type==="heatmap-ramp",n=t.length-1,s=sDe,o=n>2&&!i?nDe*n:oDe,a=o+20,l=10,c=[[{shape:{type:"path",path:`M0 ${s/2} L${l} 0 L${l} ${s} Z`},fill:t[0].color,stroke:{width:0}},{shape:{type:"rect",x:l,y:0,width:o,height:s},fill:{type:"linear",x1:l,y1:0,x2:o+l,y2:0,colors:t.map((m,y)=>({color:m.color,offset:i&&"ratio"in m?m.ratio:y/n}))},stroke:{width:0}},{shape:{type:"path",path:`M${o+l} 0 L${a} ${s/2} L${o+l} ${s} Z`},fill:t[t.length-1].color,stroke:{width:0}}]],h=vre(c,a,s),f={filter:Gw(this.effectList)??void 0,opacity:r==null?void 0:`${r}`};return k("div",{styles:f},h)}_renderMiddleStopRampLabel(t){const r=t.length%2!=0?t[t.length/2|0]:null;return r?k("div",{class:_e.intervalSeparatorsContainer},k("div",{class:_e.intervalSeparator},"|"),this._renderRampLabel(r)):null}_renderRampLabel(t){return k("div",{class:_e.rampLabel},nie(t,this.legendElement.type,this.messages))}};u([d()],nh.prototype,"effectList",void 0),u([d()],nh.prototype,"legendElement",void 0),u([d()],nh.prototype,"messages",void 0),u([d()],nh.prototype,"opacity",void 0),nh=u([T("esri.widgets.Legend.styles.card.ColorRamp")],nh);const aDe=nh,lDe="#ddd",Yp=window.devicePixelRatio;function uDe(e){var r,i;if(!e)return;if(e.type.includes("3d")){if(!((r=e.symbolLayers)!=null&&r.length))return;const n=e.symbolLayers.at(-1),s=(i=n.resource)==null?void 0:i.primitive;return s==="circle"||s==="cross"||s==="kite"||s==="sphere"||s==="cube"||s==="diamond"}const t=e.style;return t==="circle"||t==="diamond"||t==="cross"}function cDe(e){var t,r;if(e){if(e.type.includes("3d")){if(!((t=e.symbolLayers)!=null&&t.length))return;const i=e.symbolLayers.at(-1),n=(r=i==null?void 0:i.resource)==null?void 0:r.primitive;return n==="triangle"||n==="cone"||n==="tetrahedron"}return e.style==="triangle"}}let sh=class extends Mr{constructor(t,r){super(t,r),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){const{legendElement:t,hasIndicators:r,opacity:i}=this,n=t.infos,{label:s,...o}=n.at(0),{label:a,...l}=n.at(-1);let c=o.preview,h=l.preview;const f={"flex-direction":r?"column":"row-reverse"};c&&(c=c.cloneNode(!0),c.style.display="flex"),h&&(h=h.cloneNode(!0),h.style.display="flex");const m={opacity:i!=null?`${i}`:""};return k("div",{class:this.classes(_e.layerRow,{[_e.sizeRampRow]:r})},k("div",{class:_e.rampLabel},r?s:a),k("div",{class:_e.sizeRampContainer,styles:f},k("div",{afterCreate:$r,bind:c,class:_e.sizeRampPreview,styles:m}),this._renderSizeRampLines(t),k("div",{afterCreate:$r,bind:h,class:_e.sizeRampContainer,styles:m})),k("div",{class:_e.rampLabel},r?a:s))}_renderSizeRampLines(t){const r=t.infos,i=r[0],n=r.at(-1),s=i.symbol,o=this.hasIndicators,a=qt(i.size+i.outlineSize)*Yp,l=qt(n.size+n.outlineSize)*Yp,c=o?a:a+50*Yp,h=o?a/2+50*Yp:a,f=cDe(s),m=uDe(s),y=document.createElement("canvas");y.width=c,y.height=h,y.style.width=y.width/Yp+"px",y.style.height=y.height/Yp+"px";const g=y.getContext("2d");if(o){g.beginPath();const v=0,x=0,b=c/2-l/2,_=h;g.moveTo(v,x),g.lineTo(b,_);const S=c,$=0,M=c/2+l/2,I=h;g.moveTo(S,$),g.lineTo(M,I)}else{g.beginPath();const v=0,x=h/2-l/2,b=c,_=0;g.moveTo(v,x),g.lineTo(b,_);const S=0,$=h/2+l/2,M=c,I=h;g.moveTo(S,$),g.lineTo(M,I)}return g.strokeStyle=lDe,g.stroke(),k("div",{afterCreate:$r,bind:y,styles:o?{display:"flex",marginTop:`-${f?0:m?a/2:0}px`,marginBottom:`-${f?l:m?l/2:0}px`}:{display:"flex",marginRight:`-${f?0:m?a/2:0}px`,marginLeft:`-${f?0:m?l/2:0}px`}})}};u([d()],sh.prototype,"hasIndicators",void 0),u([d()],sh.prototype,"legendElement",void 0),u([d()],sh.prototype,"messages",void 0),u([d()],sh.prototype,"opacity",void 0),sh=u([T("esri.widgets.Legend.styles.card.SizeRamp")],sh);const dDe=sh,hDe=wS(),oie=10,T5=20,qE=10,M5=20,I5={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function pDe(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return e==="vertical"?k("svg",{height:"4",width:"10"},k("line",{style:t,x1:"0",x2:"10",y1:"2",y2:"2"})):k("svg",{height:"10",width:"10"},k("line",{style:t,x1:"5",x2:"5",y1:"0",y2:"10"}))}function fDe(e,t="vertical"){const r=document.createElement("div");return r.style.height=`${T5}px`,r.className=I5.univariateAboveAndBelowSymbol,e!=null&&(r.style.opacity=e.toString()),hDe.append(r,pDe.bind(null,t)),r}function aie(e,t,r="vertical",i){e.infos.forEach((n,s)=>{if(i&&s===2)n.preview=fDe(t,r);else{const o=qt(n.size)+(r==="horizontal"?M5:qE),a=n.preview,l=(a==null?void 0:a.tagName.toLowerCase())==="div",c=l?a:document.createElement("div");c.className=I5.univariateAboveAndBelowSymbol,r==="horizontal"?c.style.width=`${o}px`:c.style.height=`${o}px`,!l&&a&&c.appendChild(a),n.preview=c}})}function HE(e,t="classic"){const r=e.infos;return t==="classic"?(qt(r[0].size)+qE)/2:(qt(r[0].size)-qt(r[r.length-1].size))/2}function Ey(e,t){if(!e)return null;const r=e.infos.map(n=>n.color),i=th(t.type==="full"?r:t.type==="above"?r.slice(0,3):r.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList,ariaLabel:t.ariaLabel});return i.className=I5.colorRamp,t.opacity!=null&&(i.style.opacity=t.opacity.toString()),i}function C5(e,t,r,i="vertical"){let n=0;const s=e.infos,o=Math.floor(s.length/2),a=t==="full"||t==="above"?0:o,l=t==="full"||t==="below"?s.length-1:o;for(let c=a;c<=l;c++)r&&c===o?n+=i==="horizontal"?oie:T5:n+=qt(s[c].size)+(i==="horizontal"?M5:qE);return Math.round(n)}function Ty(e,t,r,i="vertical"){const n=C5(e,t,r,i),s=e.infos,o=Math.floor(s.length/2),a=t==="full"||t==="above"?0:o,l=t==="full"||t==="below"?s.length-1:o,c=t==="full"?s[a].size+s[l].size:t==="above"?s[a].size:s[l].size,h=r?i==="vertical"?T5:oie:0,f=i==="vertical"?qE*(t==="full"?2:1):M5*(t==="full"?2:1);return Math.round(n-(qt(c)/2+h/2+f/2))}function lie(e,t,r="vertical"){const i=e.infos;let n=i.find(({type:o})=>o==="size-ramp"),s=i.find(({type:o})=>o==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],aie(n,t,r,!0)),s&&(s={...s},s.infos=[...s.infos]),r==="horizontal"&&(n==null||n.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:n,colorRampElement:s}}function uie(e,t="vertical"){const r=e.infos;let i=r.find(({type:s})=>s==="size-ramp"),n=r.find(({type:s})=>s==="color-ramp");return i&&(i={...i},i.infos=[...i.infos],aie(i,null,t,!1)),n&&(n={...n},n.infos=[...n.infos]),t==="horizontal"&&(i==null||i.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:i,colorRampElement:n}}const yR={marginLeft:"3px"},pm={display:"table-cell",verticalAlign:"middle"},cie={display:"flex",alignItems:"flex-start"};let oh=class extends Mr{constructor(t,r){super(t,r),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var I;const{legendElement:t,opacity:r,effectList:i,key:n}=this,{sizeRampElement:s,colorRampElement:o}=lie(t,r,"horizontal");if(!s)return null;const a=C5(s,"full",!0,"horizontal"),l=Ty(s,"above",!0,"horizontal"),c=Ty(s,"below",!0,"horizontal"),h=12,f=(I=this.messages)==null?void 0:I.previewColorRampAriaLabel,m=Ey(o,{width:l,height:h,rampAlignment:"horizontal",opacity:r,type:"above",effectList:i,ariaLabel:f}),y=Ey(o,{width:c,height:h,rampAlignment:"horizontal",opacity:r,type:"below",effectList:i,ariaLabel:f}),g=HE(s,"card"),v=s.infos.map(C=>C.label),x=v.length-1,b=v.map((C,L)=>L===0||L===x?k("div",{key:L},C):null),_={display:"flex",flexDirection:"column"},S={display:"flex",flexDirection:"row"},$={marginTop:"3px",display:"flex"};oE(this.container)?$.marginRight=`${g}px`:$.marginLeft=`${g}px`;const M={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return k("div",{class:_e.layerRow,key:`${n}-container`,styles:_},k("div",{class:this.classes(_e.symbolContainer,_e.sizeRampHorizontal),styles:S},s.infos.map((C,L)=>k("div",{afterCreate:$r,bind:C.preview,class:_e.symbol,key:L}))),m?k("div",{class:_e.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:$},k("div",{afterCreate:$r,bind:m}),k("div",{afterCreate:$r,bind:y})):null,k("div",{class:_e.layerInfo},k("div",{class:_e.rampLabelsContainer,styles:M},b)))}};u([d()],oh.prototype,"effectList",void 0),u([d()],oh.prototype,"legendElement",void 0),u([d()],oh.prototype,"messages",void 0),u([d()],oh.prototype,"opacity",void 0),oh=u([T("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],oh);const mDe=oh;let ah=class extends Mr{constructor(t,r){super(t,r),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var b;const{legendElement:t,opacity:r,effectList:i,key:n}=this,{sizeRampElement:s,colorRampElement:o}=uie(t,"horizontal");if(!s)return null;const a=C5(s,"full",!1,"horizontal"),l=Ty(s,"full",!1,"horizontal"),c=Ey(o,{width:l,height:12,rampAlignment:"horizontal",opacity:r,type:"full",effectList:i,ariaLabel:(b=this.messages)==null?void 0:b.previewColorRampAriaLabel}),h=HE(s,"card"),f=s.infos.length-1,m=s.infos.map((_,S)=>S===0||S===f?k("div",{key:S},_.label):null),y={display:"flex",flexDirection:"column"},g={display:"flex",flexDirection:"row"},v={marginTop:"3px",display:"flex"};oE(this.container)?v.marginRight=`${h}px`:v.marginLeft=`${h}px`;const x={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return k("div",{class:_e.layerRow,key:`${n}-container`,styles:y},k("div",{class:this.classes(_e.symbolContainer,_e.sizeRampHorizontal),styles:g},s.infos.map((_,S)=>k("div",{afterCreate:$r,bind:_.preview,class:_e.symbol,key:S}))),k("div",{class:_e.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:v},k("div",{afterCreate:$r,bind:c})),k("div",{class:_e.layerInfo},k("div",{class:_e.rampLabelsContainer,styles:x},m)))}};u([d()],ah.prototype,"effectList",void 0),u([d()],ah.prototype,"legendElement",void 0),u([d()],ah.prototype,"messages",void 0),u([d()],ah.prototype,"opacity",void 0),ah=u([T("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],ah);const yDe=ah;function tx({level:e,class:t,...r},i){const n=die(e);return k(`h${n}`,{...r,"aria-level":String(n),class:im(Qr.heading,t),role:"heading"},i)}function die(e){return Cn(Math.ceil(e),1,6)}function gDe(e,t=1){return die(e+t)}var gR;let co=gR=class extends Mr{constructor(e,t){super(e,t),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),t=sie(this.legendElement,this.messages),r=this.hasIndicators&&!this.isChild?k("div",null,k(tx,{class:_e.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),k(tx,{class:_e.layerCaption,level:gDe(this.headingLevel)},t)):t?k(tx,{class:_e.layerCaption,level:this.headingLevel},t):null;return k("section",{"aria-labelledby":this.key,class:_e.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},r,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return k(dDe,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return k(aDe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return xre(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return k("div",{afterCreate:$r,bind:this.legendElement.preview,class:_e.pieChartRampPreview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return k(mDe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return k(yDe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){var s,o,a;const t=e.infos.map(l=>this._renderElementInfo(l,e.legendType)).filter(Boolean);if(!t.length)return null;const r=this.activeLayerInfo.legendElements.some(({type:l})=>l==="relationship-ramp"),i=(a=(o=(s=t[0])==null?void 0:s.properties)==null?void 0:o.classes)==null?void 0:a[_e.symbolRow],n={[_e.labelContainer]:!i&&!r,[_e.relationshipLabelContainer]:r};return k("div",{class:this.classes(n)},t)}_renderElementInfo(e,t){var a;const{layer:r}=this,i="label"in e?e.label:null,n=`${this.key}-${i}`;if("type"in e&&e.type)return k(gR,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:n,layer:r,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const s=iie(r,t),o=$y(this.messages,i,!1)||"";if("src"in e&&e.src)return k("div",{class:_e.layerRow,key:`${n}-row`},this._renderImage(e,r,s),k("div",{class:_e.imageLabel},o));if("symbol"in e&&e.preview){if(!((a=e.symbol)!=null&&a.type.includes("simple-fill"))){if(!e.label)return k("div",{afterCreate:$r,bind:e.preview,key:`${n}-row`});const l={[_e.symbolCell]:this.hasIndicators};return k("div",{class:this.classes(_e.layerRow,{[_e.symbolRow]:this.hasIndicators}),key:`${n}-row`},k("div",{afterCreate:$r,bind:e.preview,class:this.classes(l)}),k("div",{class:this.classes(_e.imageLabel,{[_e.labelCell]:this.hasIndicators})},o))}return k("div",{class:_e.layerRow,key:`${n}-row`},k("div",{class:_e.labelElement,styles:this._getBackgroundStyles(e)},o))}return null}_getBackgroundStyles(e){var f,m;const t=e.symbol,r=t.color,i=!!(r!=null&&r.a),n="outline"in t?t.outline:null,s=!!((f=n==null?void 0:n.color)!=null&&f.a),o=new Q(i&&r?[r.r,r.g,r.b,r.a*this.layer.opacity]:[255,255,255,0]),a=s&&n.color?new Q([n.color.r,n.color.g,n.color.b,n.color.a*this.layer.opacity]):new Q([255,255,255,0]),l=((m=e.symbol.color)==null?void 0:m.isBright)??!0,c=l?"black":"white",h=l?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:i?o.toCss(!0):"none",color:c,textShadow:`-1px -1px 0 ${h},
                  1px -1px 0 ${h},
                  -1px 1px 0 ${h},
                  1px 1px 0 ${h}`,border:s?`1px solid ${a.toCss(!0)}`:"none",filter:Gw(this.effectList)??void 0}}_renderImage(e,t,r){const{label:i,src:n,opacity:s}=e,o={[_e.imageryLayerStretchedImage]:r,[_e.symbol]:!r},a={opacity:`${s??t.opacity}`},l=$y(this.messages,i,!1);return k("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:e.height,src:n,styles:a,width:e.width})}};u([d()],co.prototype,"activeLayerInfo",void 0),u([d()],co.prototype,"effectList",void 0),u([d()],co.prototype,"hasIndicators",void 0),u([d()],co.prototype,"headingLevel",void 0),u([d()],co.prototype,"isChild",void 0),u([d()],co.prototype,"layer",void 0),u([d()],co.prototype,"legendElement",void 0),u([d()],co.prototype,"messages",void 0),co=gR=u([T("esri.widgets.Legend.styles.card.LegendElement")],co);const oU=co,vDe=768;let ra=class extends Mr{constructor(e,t){super(e,t),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return Hy({carousel:()=>B(()=>import("./index-65b1b1d9.js"),["assets/index-65b1b1d9.js","assets/customElement-d1ab8a5a.js","assets/dom-aeb6a324.js","assets/observers-43783b2c.js","assets/customElement-4d4e5be7.js","assets/ref-f1080d6c.js","assets/guid-40009d79.js","assets/interactive-3f3b7038.js","assets/component-b5b15c2e.js","assets/array-120a91a3.js","assets/useT9n-c901282b.js"]),"carousel-item":()=>B(()=>import("./index-df487001.js"),["assets/index-df487001.js","assets/guid-40009d79.js"])})}render(){this._hasIndicators=this.layout==="auto"&&this.view&&this.view.container.clientWidth<=vDe||this.layout==="stack";const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),t={[_e.stacked]:this._hasIndicators};return k("div",{class:this.classes(_e.base,t)},e||k("div",{class:_e.message},this.messages.noLegend))}_renderCarousel(){const e=[],t=this.activeLayerInfos;if(t)for(const r of t)this._renderSections(r,e);return e!=null&&e.length?k("calcite-carousel",{class:_e.carousel,label:this.messages.carousel},e.map((r,i)=>k("calcite-carousel-item",{class:_e.carouselItem,key:i,label:w1(this.messagesCommon.pagination.pageText,{index:i+1,total:e.length})},r))):null}_renderLayers(){var r;const e=this.activeLayerInfos,t=(r=e==null?void 0:e.toArray())==null?void 0:r.map(i=>this._renderLegendForLayer(i)).filter(Boolean);return t!=null&&t.length?t:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.toArray().map(this._renderLegendForLayer,this);return k("section",{class:this.classes(_e.service,_e.groupLayer),key:e.layer.uid},k("div",{class:_e.serviceCaptionContainer},e.title),t)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){var n;const t=(n=e.legendElements)==null?void 0:n.filter(Boolean);if(!(t!=null&&t.length))return null;const r=t.map(s=>k(oU,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages})),i={[_e.groupLayerChild]:!!e.parent};return k("section",{class:this.classes(_e.service,i),key:e.layer.uid},k("div",{class:_e.serviceCaptionContainer},k("div",{class:_e.serviceCaptionText},e.title)),k("div",{class:_e.serviceContent},r))}_renderSections(e,t){if(!e.ready)return;if(e.children.length)for(const i of e.children)this._renderSections(i,t);const r=e.legendElements;if(r!=null&&r.length)for(const i of r){const n=k(oU,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${i.type}`,layer:e.layer,legendElement:i,messages:this.messages});n&&t.push(n)}}};u([d()],ra.prototype,"activeLayerInfos",void 0),u([d()],ra.prototype,"headingLevel",void 0),u([d()],ra.prototype,"layout",void 0),u([d(),Ta("esri/widgets/Legend/t9n/Legend")],ra.prototype,"messages",void 0),u([d(),Ta("esri/t9n/common")],ra.prototype,"messagesCommon",void 0),u([d({readOnly:!0})],ra.prototype,"type",void 0),u([d()],ra.prototype,"view",void 0),ra=u([T("esri.widgets.Legend.styles.card.CardView")],ra);const vI=ra,at="esri-legend",$e={service:`${at}__service`,label:`${at}__service-label`,layer:`${at}__layer`,groupLayer:`${at}__group-layer`,groupLayerChild:`${at}__group-layer-child`,layerTable:`${at}__layer-table`,layerTableSizeRamp:`${at}__layer-table--size-ramp`,layerChildTable:`${at}__layer-child-table`,layerCaption:`${at}__layer-caption`,layerBody:`${at}__layer-body`,layerRow:`${at}__layer-row`,layerCell:`${at}__layer-cell`,layerInfo:`${at}__layer-cell ${at}__layer-cell--info`,imageryLayerStretchedImage:`${at}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${at}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${at}__imagery-layer-info--stretched`,symbolContainer:`${at}__layer-cell ${at}__layer-cell--symbols`,symbol:`${at}__symbol`,rampContainer:`${at}__ramps`,sizeRamp:`${at}__size-ramp`,colorRamp:`${at}__color-ramp`,opacityRamp:`${at}__opacity-ramp`,borderlessRamp:`${at}__borderless-ramp`,rampTick:`${at}__ramp-tick`,rampFirstTick:`${at}__ramp-tick-first`,rampLastTick:`${at}__ramp-tick-last`,rampLabelsContainer:`${at}__ramp-labels`,rampLabel:`${at}__ramp-label`,message:`${at}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},wDe=24;let lh=class extends Mr{constructor(e,t){super(e,t),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const t=this.legendElement.type==="opacity-ramp"?$e.opacityRamp:"";return e.className=`${$e.colorRamp} ${t}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:t}=this;if(!t)return null;const r={width:`${wDe}px`},i={height:t.style.height};return k("div",{class:$e.layerRow,key:`${this.key}-row`},k("div",{class:$e.symbolContainer,styles:r},k("div",{afterCreate:$r,bind:t,class:$e.rampContainer})),k("div",{class:$e.layerInfo},k("div",{class:$e.rampLabelsContainer,styles:i},e.infos.map((n,s)=>this._renderRampLabel(n,s,e.type)))))}_renderRampLabel(e,t,r){return k("div",{class:e.label?$e.rampLabel:void 0,key:`${this.key}-stop-${e.label??t}-label`},nie(e,r,this.messages))}};u([d()],lh.prototype,"_preview",null),u([d()],lh.prototype,"legendElement",void 0),u([d()],lh.prototype,"messages",void 0),u([d()],lh.prototype,"opacity",void 0),lh=u([T("esri.widgets.Legend.styles.classic.ColorRamp")],lh);const bDe=lh;let X0=class extends Mr{constructor(e,t){super(e,t),this.legendElement=null}render(){const e=this.legendElement.infos.map(t=>this._renderRow(t)).filter(Boolean);return e.length?k("div",{class:$e.layerBody},e):null}_renderRow(e){return e.preview?k("div",{class:$e.layerRow,key:`${this.key}-${e.label}-row`},k("div",{class:this.classes($e.symbolContainer,$e.sizeRamp)},k("div",{afterCreate:$r,bind:e.preview,class:$e.symbol})),k("div",{class:$e.layerInfo},$y(this.messages,e.label,!1)||"")):null}};u([d()],X0.prototype,"legendElement",void 0),u([d()],X0.prototype,"messages",void 0),X0=u([T("esri.widgets.Legend.styles.classic.SizeRamp")],X0);const _De=X0;let uh=class extends Mr{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,effectList:r,key:i}=this,{sizeRampElement:n,colorRampElement:s}=lie(e,t);if(!n)return null;const o=this.messages.previewColorRampAriaLabel,a=Ty(n,"above",!0),l=Ty(n,"below",!0),c=12,h=Ey(s,{width:c,height:a,rampAlignment:"vertical",opacity:t,type:"above",effectList:r,ariaLabel:o}),f=Ey(s,{width:c,height:l,rampAlignment:"vertical",opacity:t,type:"below",effectList:r,ariaLabel:o}),m=HE(n),y=n.infos.map(I=>I.label),g=y.map((I,C)=>C===0?k("div",{class:I?h?$e.univariateAboveAndBelowLabel:$e.rampLabel:void 0,key:`${i}-color-ramp-above-label-${I??C}`},I):C===2?k("div",null):null),v=y.length-1,x=Math.floor(y.length/2),b=y.map((I,C)=>C===x||C===v?k("div",{class:I?h?$e.univariateAboveAndBelowLabel:$e.rampLabel:void 0,key:`${i}-color-ramp-below-label-${I??C}`},I):null),_={display:"table-cell",verticalAlign:"middle"},S={marginTop:`${m}px`},$={height:`${a}px`},M={height:`${l}px`};return k("div",{key:`${i}-container`,styles:cie},k("div",{class:$e.layerBody},n.infos.map((I,C)=>k("div",{class:this.classes($e.layerRow,$e.sizeRamp),key:`${i}-row-${C}`},k("div",{afterCreate:$r,bind:I.preview,class:$e.symbol,styles:_}),h||C%2!=0?null:k("div",{class:$e.layerInfo},y[C])))),h?k("div",{styles:S},k("div",{styles:yR},k("div",{styles:pm},k("div",{afterCreate:$r,bind:h,class:$e.rampContainer})),k("div",{styles:pm},k("div",{class:$e.rampLabelsContainer,styles:$},g))),k("div",{styles:yR},k("div",{styles:pm},k("div",{afterCreate:$r,bind:f,class:$e.rampContainer})),k("div",{styles:pm},k("div",{class:$e.rampLabelsContainer,styles:M},b)))):null)}};u([d()],uh.prototype,"effectList",void 0),u([d()],uh.prototype,"legendElement",void 0),u([d()],uh.prototype,"messages",void 0),u([d()],uh.prototype,"opacity",void 0),uh=u([T("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],uh);const xDe=uh;let ch=class extends Mr{constructor(t,r){super(t,r),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var x;const{legendElement:t,opacity:r,effectList:i,key:n}=this,{sizeRampElement:s,colorRampElement:o}=uie(t);if(!s)return null;const a=HE(s),l=12,c=Ty(s,"full",!1),h=Ey(o,{width:l,height:c,rampAlignment:"vertical",opacity:r,type:"full",effectList:i,ariaLabel:(x=this.messages)==null?void 0:x.previewColorRampAriaLabel}),f=s.infos.length-1,m=s.infos.map((b,_)=>_===0||_===f?k("div",{class:b.label?o?$e.univariateAboveAndBelowLabel:$e.rampLabel:void 0,key:`${n}-color-ramp-label-${b.label??_}`},b.label):null),y={display:"table-cell",verticalAlign:"middle"},g={marginTop:`${a}px`},v={height:`${c}px`};return k("div",{key:`${n}-container`,styles:cie},k("div",{class:$e.layerBody},s.infos.map((b,_)=>k("div",{class:this.classes($e.layerRow,$e.sizeRamp),key:`${n}-row-${_}`},k("div",{afterCreate:$r,bind:b.preview,class:$e.symbol,styles:y})))),k("div",{styles:g},k("div",{styles:yR},k("div",{styles:pm},k("div",{afterCreate:$r,bind:h,class:$e.rampContainer})),k("div",{styles:pm},k("div",{class:$e.rampLabelsContainer,styles:v},m)))))}};u([d()],ch.prototype,"effectList",void 0),u([d()],ch.prototype,"legendElement",void 0),u([d()],ch.prototype,"messages",void 0),u([d()],ch.prototype,"opacity",void 0),ch=u([T("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],ch);const SDe=ch;var vR;let Ru=vR=class extends Mr{constructor(e,t){super(e,t),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),t=sie(this.legendElement,this.messages),r=this.isChild?$e.layerChildTable:$e.layerTable,i=t?k("div",{class:$e.layerCaption},t):null,n={[$e.layerTableSizeRamp]:this.legendElement.type==="size-ramp"||!this.isChild};return k("section",{class:this.classes(r,n),key:`${this.key}-table`},i,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return k(_De,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return k(bDe,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return xre(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return k("div",{afterCreate:$r,bind:this.legendElement.preview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return k(xDe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return k(SDe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const t=e.infos.map(r=>this._renderElementInfo(r,e.legendType)).filter(Boolean);return t.length?k("div",{class:$e.layerBody},t):null}_renderElementInfo(e,t){const{layer:r}=this,i="label"in e?e.label:null,n=`${this.key}-${i}`;if("type"in e&&e.type)return k(vR,{effectList:this.effectList,isChild:!0,key:n,layer:r,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const s=iie(r,t),o={[$e.imageryLayerInfoStretched]:s},a={[$e.imageryLayerInfoStretched]:s};return k("div",{class:$e.layerRow,key:`${n}-row`},k("div",{class:this.classes($e.symbolContainer,a)},this._renderPreview(e,s)),k("div",{class:this.classes($e.layerInfo,o)},$y(this.messages,i,!1)||""))}_renderPreview(e,t){const{layer:r}=this;return"preview"in e&&e.preview?k("div",{afterCreate:$r,bind:e.preview,class:$e.symbol}):"src"in e&&e.src?this._renderImage(e,r,t):null}_renderImage(e,t,r){const{label:i,src:n,opacity:s}=e,o={[$e.imageryLayerStretchedImage]:r,[$e.symbol]:!r},a={opacity:`${s??t.opacity}`},l=$y(this.messages,i,!1);return k("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:e.height,src:n,styles:a,width:e.width})}};u([d()],Ru.prototype,"effectList",void 0),u([d()],Ru.prototype,"isChild",void 0),u([d()],Ru.prototype,"layer",void 0),u([d()],Ru.prototype,"legendElement",void 0),u([d()],Ru.prototype,"messages",void 0),Ru=vR=u([T("esri.widgets.Legend.styles.classic.LegendElement")],Ru);const $De=Ru,EDe=`${at}__`;let dh=class extends Mr{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,t=e==null?void 0:e.toArray().map(r=>this._renderLegendForLayer(r)).filter(Boolean);return t!=null&&t.length?k("section",null,t):k("div",{class:$e.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,t){if(!e.ready)return null;const r=`${e.layer.uid}-version-${e.version}`,i=`${EDe}${t?`${t}-`:""}${r}`,n=e.title?tx({level:this.headingLevel,class:this.classes(Qr.heading,$e.label)},e.title):null;if(e.children.length){const s=e.children.toArray().map(o=>this._renderLegendForLayer(o,r));return k("section",{class:this.classes($e.service,$e.groupLayer),key:i},n,s)}return this._renderLegendElementsForLayer(e,n,i)}_renderLegendElementsForLayer(e,t,r){var o;const i=(o=e.legendElements)==null?void 0:o.filter(Boolean);if(!(i!=null&&i.length))return null;const n=i.map(a=>k($De,{effectList:e.effectList,isChild:!1,key:`${r}-${a.type}`,layer:e.layer,legendElement:a,messages:this.messages})),s={[$e.groupLayerChild]:!!e.parent};return k("section",{class:this.classes($e.service,s),key:r},t,k("div",{class:$e.layer},n))}};u([d()],dh.prototype,"activeLayerInfos",void 0),u([d()],dh.prototype,"headingLevel",void 0),u([d(),Ta("esri/widgets/Legend/t9n/Legend")],dh.prototype,"messages",void 0),u([d({readOnly:!0})],dh.prototype,"type",void 0),dh=u([T("esri.widgets.Legend.styles.classic.ClassicView")],dh);const Qp=dh,TDe={base:"esri-legend"};let kr=class extends Mr{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.style=new Qp,this.viewModel=new tDe}initialize(){this.addHandles([En(()=>this.view,"resize",()=>this.scheduleRender()),En(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),ee(()=>this.headingLevel,e=>{const{style:t}=this;t&&(t.headingLevel=e)}),ee(()=>this.style,(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},Ye)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}castStyle(e){if(e instanceof vI||e instanceof Qp)return e;if(typeof e=="string")return e==="card"?new vI:new Qp;if(e&&typeof e.type=="string"){const t={...e};return delete t.type,e.type==="card"?new vI(t):new Qp(t)}return new Qp}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return k("div",{class:this.classes(TDe.base,Qr.widget,this.style instanceof Qp?Qr.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(t=>{this.removeHandles(`version_${t.layer.uid}`),this._renderOnActiveLayerInfoChange(t)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=ee(()=>e.version,()=>this.scheduleRender());this.addHandles(t,`version_${e.layer.uid}`);const r=En(()=>e.children,"change",()=>e.children.forEach(i=>this._renderOnActiveLayerInfoChange(i)),Ye);this.addHandles(r,`version_${e.layer.uid}`),e.children.forEach(i=>this._renderOnActiveLayerInfoChange(i))}};u([d()],kr.prototype,"activeLayerInfos",null),u([d()],kr.prototype,"basemapLegendVisible",null),u([d()],kr.prototype,"groundLegendVisible",null),u([d()],kr.prototype,"headingLevel",void 0),u([d()],kr.prototype,"hideLayersNotInCurrentView",null),u([d()],kr.prototype,"keepCacheOnDestroy",null),u([d()],kr.prototype,"respectLayerDefinitionExpression",null),u([d()],kr.prototype,"respectLayerVisibility",null),u([d()],kr.prototype,"icon",null),u([d()],kr.prototype,"label",null),u([d()],kr.prototype,"layerInfos",null),u([d(),Ta("esri/widgets/Legend/t9n/Legend")],kr.prototype,"messages",void 0),u([d()],kr.prototype,"style",void 0),u([He("style")],kr.prototype,"castStyle",null),u([d()],kr.prototype,"view",null),u([d()],kr.prototype,"viewModel",void 0),kr=u([T("esri.widgets.Legend")],kr);const hie=kr,MDe=Object.freeze(Object.defineProperty({__proto__:null,default:hie},Symbol.toStringTag,{value:"Module"}));Ke.apiKey="";let ne=null;const pie=()=>ne,IDe=async(e,t)=>{if(!ne)return[];let r=null;switch(e){case"waterBodies":r=ne.waterBodiesLayer;break;case"waterLines":r=ne.waterLinesLayer;break;case"governorates":r=ne.governoratesLayer;break;case"districts":r=ne.districtsLayer;break;case"subdistricts":r=ne.subdistrictsLayer;break;case"villages":r=ne.villagesLayer;break}if(!r)return[];try{const i=r.createQuery();i.where="1=1",i.outFields=[t],i.returnDistinctValues=!0,i.orderByFields=[t];const s=(await r.queryFeatures(i)).features.map(o=>o.attributes[t]).filter(o=>o!=null&&o!=="").map(o=>String(o)).sort();return[...new Set(s)]}catch(i){return console.error(`Error getting unique values for ${t} in ${e}:`,i),[]}},CDe=e=>({"المحافظات السورية":"governorates","المناطق السورية":"districts","النواحي السورية":"subdistricts","القرى السورية":"villages","المجاري المائية":"waterLines","المسطحات المائية":"waterBodies"})[e]||"unknown",LDe=(e,t,r=37)=>{const i=(r-1)*6-180+3,s=e-5e5,o=i+s/111320,a=t/110540,l=Math.max(35,Math.min(43,o)),c=Math.max(32,Math.min(38,a));return[l,c]},ADe=(e,t)=>{if(!t)return e;const r=n=>{if(n.length>=2){const[s,o]=LDe(n[0],n[1]);return[s,o,...n.slice(2)]}return n},i=n=>Array.isArray(n[0])?n.map(i):r(n);return{...e,coordinates:i(e.coordinates)}},kDe=async e=>{var t;try{const r=await fetch(e);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=await r.json();let n=!1;if(i.crs){const s=(t=i.crs.properties)==null?void 0:t.name;s&&s.includes("EPSG::32637")&&(n=!0,console.warn(`Transforming coordinates from UTM Zone 37N to WGS84 for ${e}`)),console.warn(`Removing unsupported CRS property from ${e}:`,i.crs),delete i.crs}return i.bbox&&delete i.bbox,n&&i.features&&(console.log(`Transforming ${i.features.length} features from UTM to WGS84`),i.features=i.features.map(s=>({...s,geometry:ADe(s.geometry,!0)})),console.log(`Transformation complete for ${e}`)),i}catch(r){throw console.error(`Error fetching GeoJSON from ${e}:`,r),r}},RDe=async(e,t,r=!0)=>{if(t.endsWith(".geojson")||t.endsWith(".json"))try{const i=await kDe(t),n=new Blob([JSON.stringify(i)],{type:"application/json"}),s=URL.createObjectURL(n),o=new gl({title:e,url:s,visible:r,outFields:["*"],popupEnabled:!1,refreshInterval:0,maxRecordCount:1e3});return o.when(()=>{URL.revokeObjectURL(s)}).catch(a=>{URL.revokeObjectURL(s),console.error(`Error loading layer ${e}:`,a)}),o}catch(i){return console.error(`Error preparing layer ${e}:`,i),new gl({title:e,url:t,visible:r,outFields:["*"],popupEnabled:!1,refreshInterval:0,maxRecordCount:1e3})}return new Rte({title:e,url:t,visible:r,outFields:["*"],popupEnabled:!1})},fie=async(e,t)=>{try{await hNe(["esri/config"],{css:!0}),Ke.request.useIdentity=!1;const r=new XW({basemap:"streets"}),i=new B3e({container:e,map:r,center:[38.996815,34.802075],zoom:7}),n="/data/",s=async(v,x,b=!0)=>{var _;try{const S=await RDe(v,x,b);return await S.load(),console.log(`Successfully loaded layer: ${v}`),S}catch(S){return console.error(`Error loading layer ${v}:`,S),S.name==="geojson:unsupported-crs"?(console.error(`CRS Error: ${v} contains coordinate data in an unsupported coordinate system.`),console.error("Solution: Convert the GeoJSON data to WGS84 (EPSG:4326) coordinates.")):(_=S.message)!=null&&_.includes("fetch")&&console.error(`Network Error: Could not fetch ${x}. Check if the file exists and is accessible.`),null}},[o,a,l,c,h,f]=await Promise.all([s("المحافظات السورية",`${n}governorates.geojson`,!0),s("المناطق السورية",`${n}districts.geojson`,!1),s("النواحي السورية",`${n}subdistricts.geojson`,!1),s("القرى السورية",`${n}villages.geojson`,!1),s("المجاري المائية",`${n}water_lines.geojson`,!0),s("المسطحات المائية",`${n}water_bodies.geojson`,!0)]);h instanceof gl&&(h.renderer={type:"simple",symbol:{type:"simple-line",color:[59,130,246,.9],width:3,style:"solid",cap:"round",join:"round"}}),f instanceof gl&&(f.renderer={type:"simple",symbol:{type:"simple-fill",color:[0,112,255,.4],outline:{color:[0,112,255,.8],width:1}}}),o instanceof gl&&(o.renderer={type:"simple",symbol:{type:"simple-fill",color:[139,92,246,.35],outline:{color:[109,40,217,1],width:2.5}}}),a instanceof gl&&(a.renderer={type:"simple",symbol:{type:"simple-fill",color:[6,182,212,.3],outline:{color:[8,145,178,1],width:2}}}),l instanceof gl&&(l.renderer={type:"simple",symbol:{type:"simple-fill",color:[16,185,129,.25],outline:{color:[5,150,105,1],width:1.5}}}),c instanceof gl&&(c.renderer={type:"simple",symbol:{type:"simple-fill",color:[245,158,11,.4],outline:{color:[245,158,11,.9],width:2}}},c.labelingInfo=[{symbol:{type:"text",color:[139,69,19,1],font:{family:"Arial",size:14,weight:"bold"},haloColor:[255,255,255,.9],haloSize:2},labelPlacement:"center-center",labelExpression:"[KURA]",minScale:5e5,maxScale:0}]),o&&r.add(o),a&&r.add(a),l&&r.add(l),c&&r.add(c),h&&r.add(h),f&&r.add(f);let m=null;t&&(m=i.on("click",async v=>{try{const x=await i.hitTest(v);if(x.results.length>0){const b=x.results[0].graphic;if(b&&b.layer){const _=CDe(b.layer.title);let S="بدون اسم";_==="villages"?S=b.attributes.KURA||b.attributes.NAME||"قرية غير معروفة":S=b.attributes.Name||b.attributes.NAME_1||b.attributes.NAME||b.attributes.name||"بدون اسم";const $={id:b.attributes.OBJECTID||b.attributes.FID||b.attributes.ID||"unknown",name:S,type:b.attributes.Type||b.attributes.TYPE||b.attributes.type||"غير محدد",layerName:_,attributes:b.attributes,geometry:b.geometry};t($)}}}catch(x){console.error("Error handling feature click:",x)}}));const y=new VNe({view:i,listItemCreatedFunction:v=>{const x=v.item;x.layer.type==="feature"&&(x.panel={content:"legend",open:!0})}});i.ui.add(y,"top-right");const g=new hie({view:i});return i.ui.add(g,"bottom-right"),ne={map:r,view:i,waterBodiesLayer:f,waterLinesLayer:h,governoratesLayer:o,districtsLayer:a,subdistrictsLayer:l,villagesLayer:c,clickHandler:m},ne}catch(r){throw console.error("Error initializing map:",r),r}},mie=(e,t)=>{if(ne)switch(e){case"waterBodies":ne.waterBodiesLayer&&(ne.waterBodiesLayer.visible=t);break;case"waterLines":ne.waterLinesLayer&&(ne.waterLinesLayer.visible=t);break;case"governorates":ne.governoratesLayer&&(ne.governoratesLayer.visible=t);break;case"districts":ne.districtsLayer&&(ne.districtsLayer.visible=t);break;case"subdistricts":ne.subdistrictsLayer&&(ne.subdistrictsLayer.visible=t);break;case"villages":ne.villagesLayer&&(ne.villagesLayer.visible=t);break}},ODe=async(e,t)=>{if(!ne)return[];try{const r=[];for(const i of t){let n;switch(i){case"waterBodies":n=ne.waterBodiesLayer;break;case"governorates":n=ne.governoratesLayer;break;case"districts":n=ne.districtsLayer;break;case"subdistricts":n=ne.subdistrictsLayer;break;case"villages":n=ne.villagesLayer;break;default:continue}if(n&&n.queryFeatures){const s={where:`Name LIKE '%${e}%'`,outFields:["*"],returnGeometry:!0};try{(await n.queryFeatures(s)).features.forEach(a=>{r.push({id:a.attributes.OBJECTID||a.attributes.FID||r.length+1,name:a.attributes.Name||a.attributes.NAME||a.attributes.name||"بدون اسم",type:i,coordinates:[a.geometry.centroid.longitude,a.geometry.centroid.latitude],attributes:a.attributes})})}catch(o){console.error(`Error querying ${i}:`,o)}}}return r}catch(r){return console.error("Error searching features:",r),[]}},yie=e=>{ne&&ne.view.goTo({center:e,zoom:10})},L5=async()=>{if(!ne||!ne.waterBodiesLayer)return aU();try{const e={where:"1=1",outFields:["*"],returnGeometry:!0};return(await ne.waterBodiesLayer.queryFeatures(e)).features.map(r=>({id:r.attributes.OBJECTID||r.attributes.FID||r.attributes.ID||r.uid,name:r.attributes.Name||r.attributes.NAME||r.attributes.name||"بدون اسم",type:r.attributes.Type||r.attributes.TYPE||r.attributes.type||"مسطح مائي",area:r.attributes.Area||r.attributes.AREA||"غير محدد",geometry:r.geometry,attributes:r.attributes}))}catch(e){return console.error("Error getting water bodies:",e),aU()}},NDe=async e=>(await L5()).find(r=>r.id.toString()===e)||null,gie=async e=>{const t={euphrates:{pollutionTrend:[{year:2e3,value:25},{year:2005,value:30},{year:2010,value:40},{year:2015,value:45},{year:2020,value:42},{year:2023,value:38}],chemicalComponents:{dissolved_oxygen:7.2,ph:7.8,nitrates:15,phosphates:.8,turbidity:25},usageRatings:{drinking:"غير صالح",irrigation:"صالح",industrial:"صالح",fishing:"صالح بشروط",recreation:"صالح"}},asad:{pollutionTrend:[{year:2e3,value:15},{year:2005,value:18},{year:2010,value:22},{year:2015,value:28},{year:2020,value:30},{year:2023,value:25}],chemicalComponents:{dissolved_oxygen:8.5,ph:7.6,nitrates:8,phosphates:.4,turbidity:15},usageRatings:{drinking:"صالح بعد المعالجة",irrigation:"صالح",industrial:"صالح",fishing:"صالح",recreation:"صالح"}}};return t[e]||t.euphrates},vie=async e=>{const t={euphrates:{surfaceAreaTrend:[{year:2e3,value:100},{year:2005,value:98},{year:2010,value:95},{year:2015,value:92},{year:2020,value:90},{year:2023,value:88}],volumeTrend:[{year:2e3,value:100},{year:2005,value:95},{year:2010,value:90},{year:2015,value:85},{year:2020,value:80},{year:2023,value:75}],boundaryChanges:{periods:["2000-2005","2005-2010","2010-2015","2015-2020","2020-2023"],changes:[-2,-3,-3,-2,-2]}},asad:{surfaceAreaTrend:[{year:2e3,value:100},{year:2005,value:95},{year:2010,value:90},{year:2015,value:85},{year:2020,value:80},{year:2023,value:78}],volumeTrend:[{year:2e3,value:100},{year:2005,value:90},{year:2010,value:85},{year:2015,value:80},{year:2020,value:75},{year:2023,value:70}],boundaryChanges:{periods:["2000-2005","2005-2010","2010-2015","2015-2020","2020-2023"],changes:[-5,-5,-5,-5,-2]}}};return t[e]||t.euphrates},wie=async()=>({totalVillages:2847,villagesWithWaterAccess:2156,villagesWithoutWaterAccess:691,distanceDistribution:[{category:"أقل من 1 كم",value:1245},{category:"1-3 كم",value:911},{category:"3-5 كم",value:456},{category:"5-10 كم",value:178},{category:"أكثر من 10 كم",value:57}],villagesByWaterType:[{waterType:"نهر",count:1456,percentage:51.2},{waterType:"بحيرة",count:567,percentage:19.9},{waterType:"خزان",count:423,percentage:14.9},{waterType:"بئر",count:289,percentage:10.1},{waterType:"عين",count:112,percentage:3.9}]}),bie=async()=>({waterBodiesByGovernorate:[{category:"حلب",value:145},{category:"دمشق",value:89},{category:"حمص",value:134},{category:"حماة",value:112},{category:"اللاذقية",value:78},{category:"طرطوس",value:67},{category:"إدلب",value:95},{category:"الحسكة",value:156},{category:"دير الزور",value:123},{category:"الرقة",value:87},{category:"درعا",value:56},{category:"السويداء",value:34},{category:"القنيطرة",value:23},{category:"ريف دمشق",value:98}],waterDensityByRegion:[{region:"الشمال",density:12.4},{region:"الشمال الشرقي",density:15.8},{region:"الوسط",density:9.7},{region:"الساحل",density:18.2},{region:"الجنوب",density:6.3},{region:"الشرق",density:8.9}],largestWaterBodiesByGovernorate:[{governorate:"حلب",waterBodyName:"بحيرة الأسد",type:"بحيرة",area:"610 كم²"},{governorate:"حمص",waterBodyName:"بحيرة قطينة",type:"بحيرة",area:"60 كم²"},{governorate:"الحسكة",waterBodyName:"نهر الخابور",type:"نهر",area:"320 كم طولي"},{governorate:"دير الزور",waterBodyName:"نهر الفرات",type:"نهر",area:"675 كم طولي"},{governorate:"اللاذقية",waterBodyName:"نهر الكبير الشمالي",type:"نهر",area:"89 كم طولي"},{governorate:"طرطوس",waterBodyName:"نهر الأبرش",type:"نهر",area:"45 كم طولي"}]}),_ie=async()=>({accessibilityLevels:{excellent:1245,good:911,moderate:456,poor:235},averageDistanceByRegion:[{category:"الساحل",value:1.8},{category:"الشمال",value:2.4},{category:"الوسط",value:3.1},{category:"الشمال الشرقي",value:2.9},{category:"الجنوب",value:4.2},{category:"الشرق",value:5.1}],mostIsolatedVillages:[{name:"قرية الصحراء الشرقية",region:"دير الزور",distance:15.2,nearestWaterBody:"نهر الفرات"},{name:"قرية الجبل الأعلى",region:"السويداء",distance:12.8,nearestWaterBody:"عين الماء"},{name:"قرية البادية الوسطى",region:"حمص",distance:11.5,nearestWaterBody:"بحيرة قطينة"},{name:"قرية الهضبة الجنوبية",region:"درعا",distance:10.9,nearestWaterBody:"نهر اليرموك"},{name:"قرية الصحراء الغربية",region:"ريف دمشق",distance:9.7,nearestWaterBody:"عين الفيجة"}]}),aU=()=>[{id:"euphrates",name:"نهر الفرات",type:"نهر",area:"شمال شرق",geometry:null,attributes:{LENGTH_KM:2800,FLOW_RATE:"510 م³/ث",AVERAGE_WIDTH:"350 م",DEPTH_RANGE:"8-20 م",WATER_QUALITY:"متوسطة",POLLUTION_LEVEL:"متوسط",ANNUAL_DISCHARGE:"31.8 مليار م³"}},{id:"tigris",name:"نهر دجلة",type:"نهر",area:"شمال شرق",geometry:null,attributes:{LENGTH_KM:1850,FLOW_RATE:"520 م³/ث",AVERAGE_WIDTH:"300 م",DEPTH_RANGE:"8-15 م",WATER_QUALITY:"جيدة",POLLUTION_LEVEL:"منخفض",ANNUAL_DISCHARGE:"30 مليار م³"}},{id:"asad",name:"بحيرة الأسد",type:"بحيرة",area:"شمال",geometry:null,attributes:{AREA_KM2:610,VOLUME:"11.7 مليار م³",MAX_DEPTH:"60 م",SHORELINE_LENGTH:"512 كم",WATER_QUALITY:"جيدة",POLLUTION_LEVEL:"منخفض",ANNUAL_EVAPORATION:"1.6 مليار م³"}},{id:"qattinah",name:"بحيرة قطينة",type:"بحيرة",area:"وسط",geometry:null,attributes:{AREA_KM2:60,VOLUME:"200 مليون م³",MAX_DEPTH:"15 م",SHORELINE_LENGTH:"35 كم",WATER_QUALITY:"متوسطة",POLLUTION_LEVEL:"متوسط",ANNUAL_EVAPORATION:"48 مليون م³"}}],xie=e=>{ne&&(e?ne.map.basemap="satellite":ne.map.basemap="streets")},Sie=e=>{if(!ne)return;const r={streets:"streets",satellite:"satellite",hybrid:"hybrid",topo:"topo-vector",gray:"gray-vector"}[e]||"streets";ne.map.basemap=r},$ie=(e,t)=>{if(!ne)return;let r=null;switch(e){case"waterBodies":r=ne.waterBodiesLayer;break;case"waterLines":r=ne.waterLinesLayer;break;case"governorates":r=ne.governoratesLayer;break;case"districts":r=ne.districtsLayer;break;case"subdistricts":r=ne.subdistrictsLayer;break;case"villages":r=ne.villagesLayer;break}r&&(r.opacity=t)},Eie=async(e,t)=>{if(!ne)return;let r=null;switch(e){case"waterBodies":r=ne.waterBodiesLayer;break;case"waterLines":r=ne.waterLinesLayer;break;case"governorates":r=ne.governoratesLayer;break;case"districts":r=ne.districtsLayer;break;case"subdistricts":r=ne.subdistrictsLayer;break;case"villages":r=ne.villagesLayer;break}r&&r.definitionExpression!==void 0&&(r.definitionExpression=t)},Tie=async e=>{if(!ne)return[];let t=null;switch(e){case"waterBodies":t=ne.waterBodiesLayer;break;case"waterLines":t=ne.waterLinesLayer;break;case"governorates":t=ne.governoratesLayer;break;case"districts":t=ne.districtsLayer;break;case"subdistricts":t=ne.subdistrictsLayer;break;case"villages":t=ne.villagesLayer;break}return t&&t.fields?t.fields.map(r=>r.name):["Name","TYPE","AREA","POPULATION","GOVERNORATE","DISTRICT"]},Mie=async e=>{if(!ne)return 0;let t=null;switch(e){case"waterBodies":t=ne.waterBodiesLayer;break;case"waterLines":t=ne.waterLinesLayer;break;case"governorates":t=ne.governoratesLayer;break;case"districts":t=ne.districtsLayer;break;case"subdistricts":t=ne.subdistrictsLayer;break;case"villages":t=ne.villagesLayer;break}if(t&&t.queryFeatureCount)try{return await t.queryFeatureCount({where:"1=1"})}catch(r){console.error(`Error getting feature count for ${e}:`,r)}return 0},PDe=e=>{if(!ne)return;let t=null;switch(e){case"waterBodies":t=ne.waterBodiesLayer;break;case"waterLines":t=ne.waterLinesLayer;break;case"governorates":t=ne.governoratesLayer;break;case"districts":t=ne.districtsLayer;break;case"subdistricts":t=ne.subdistrictsLayer;break;case"villages":t=ne.villagesLayer;break}t&&t.fullExtent&&ne.view.goTo(t.fullExtent)},DDe=e=>({governorates:"NAME_1",districts:"NAME",subdistricts:"NAME",villages:"KURA",waterBodies:"NAME",waterLines:"NAME"})[e]||"NAME_1",wR=(e,t)=>{switch(t){case"governorates":return e.NAME_1||e.NAME||"محافظة غير معروفة";case"districts":return e.NAME||e.NAME_1||"منطقة غير معروفة";case"subdistricts":return e.NAME||e.NAME_1||"ناحية غير معروفة";case"villages":return e.KURA||e.NAME||"قرية غير معروفة";case"waterBodies":return e.NAME||e.NAME_1||"مسطح مائي";case"waterLines":return e.NAME||e.NAME_1||"مجرى مائي";default:return e.NAME_1||e.NAME||e.KURA||"بدون اسم"}},FDe=async(e,t,r=["waterBodies","waterLines"])=>{if(!ne)return null;try{let i=null;switch(e){case"governorates":i=ne.governoratesLayer;break;case"districts":i=ne.districtsLayer;break;case"subdistricts":i=ne.subdistrictsLayer;break;case"villages":i=ne.villagesLayer;break}if(!i)return null;const n=i.createQuery(),s=DDe(e);n.where=`${s} = '${t}'`;const o=await i.queryFeatures(n);if(o.features.length===0)return null;const a=o.features[0],l=a.geometry,c={waterBodies:[],waterLines:[]};for(const h of r){let f=null;switch(h){case"waterBodies":f=ne.waterBodiesLayer;break;case"waterLines":f=ne.waterLinesLayer;break}if(f){const m=f.createQuery();m.geometry=l,m.spatialRelationship="intersects";try{const y=await f.queryFeatures(m);c[h]=y.features.map(g=>({id:g.attributes.ID_1||g.attributes.FID||g.attributes.OBJECTID||Math.random().toString(),name:wR(g.attributes,h),attributes:g.attributes,geometry:g.geometry}))}catch(y){console.error(`Error querying ${h}:`,y),c[h]=[]}}}return{administrativeFeature:{id:a.attributes.ID_1||a.attributes.FID||a.attributes.OBJECTID||Math.random().toString(),name:wR(a.attributes,e),attributes:a.attributes,geometry:a.geometry},waterFeatures:c}}catch(i){return console.error("Error in spatial query:",i),null}},jDe=async e=>{if(!ne)return[];let t=null;switch(e){case"waterBodies":t=ne.waterBodiesLayer;break;case"waterLines":t=ne.waterLinesLayer;break;case"governorates":t=ne.governoratesLayer;break;case"districts":t=ne.districtsLayer;break;case"subdistricts":t=ne.subdistrictsLayer;break;case"villages":t=ne.villagesLayer;break}if(!t)return[];try{const r=t.createQuery();return r.where="1=1",r.outFields=["*"],(await t.queryFeatures(r)).features.map(n=>{var s;return{id:n.attributes.ID_1||n.attributes.FID||n.attributes.OBJECTID||Math.random().toString(),name:wR(n.attributes,e),type:e,attributes:n.attributes,geometry:n.geometry,coordinates:(s=n.geometry)!=null&&s.centroid?[n.geometry.centroid.longitude,n.geometry.centroid.latitude]:null}})}catch(r){return console.error(`Error getting features from ${e}:`,r),[]}},bR=Object.freeze(Object.defineProperty({__proto__:null,applyLayerQuery:Eie,changeBasemap:Sie,getAllFeaturesFromLayer:jDe,getLayerFeatureCount:Mie,getLayerFields:Tie,getMapInstance:pie,getRegionalWaterDistribution:bie,getUniqueFieldValues:IDe,getVillageWaterAnalysis:wie,getWaterAccessibilityAnalysis:_ie,getWaterBodies:L5,getWaterBodyById:NDe,getWaterQualityData:gie,getWaterStatisticsData:vie,initializeMap:fie,performSpatialQuery:FDe,searchFeatures:ODe,setLayerOpacity:$ie,toggleLayerVisibility:mie,toggleSatelliteLayer:xie,zoomToFeature:yie,zoomToLayer:PDe},Symbol.toStringTag,{value:"Module"})),VDe=({isOpen:e,onClose:t,onApplyQuery:r,availableFields:i,selectedLayer:n,onLayerChange:s})=>{const[o,a]=H.useState([{id:"1",field:"",operator:"=",value:""}]),[l,c]=H.useState({}),[h,f]=H.useState({}),m=[{value:"=",label:"يساوي"},{value:"!=",label:"لا يساوي"},{value:">",label:"أكبر من"},{value:"<",label:"أصغر من"},{value:">=",label:"أكبر من أو يساوي"},{value:"<=",label:"أصغر من أو يساوي"},{value:"LIKE",label:"يحتوي على"},{value:"NOT LIKE",label:"لا يحتوي على"},{value:"IS NULL",label:"فارغ"},{value:"IS NOT NULL",label:"غير فارغ"}],y={waterBodies:"المسطحات المائية",waterLines:"المجاري المائية",governorates:"المحافظات",districts:"المناطق",subdistricts:"النواحي",villages:"القرى"},g=()=>{const M={id:Date.now().toString(),field:"",operator:"=",value:"",logicalOperator:"AND"};a([...o,M])},v=M=>{o.length>1&&a(o.filter(I=>I.id!==M))},x=()=>{const M=o.filter(I=>I.field&&I.value);return M.length===0?"1=1":M.map((I,C)=>{let L="";if(C>0&&I.logicalOperator&&(L+=` ${I.logicalOperator} `),I.operator==="LIKE"||I.operator==="NOT LIKE")L+=`${I.field} ${I.operator} '%${I.value}%'`;else if(I.operator==="IS NULL"||I.operator==="IS NOT NULL")L+=`${I.field} ${I.operator}`;else{const P=!isNaN(Number(I.value))?I.value:`'${I.value}'`;L+=`${I.field} ${I.operator} ${P}`}return L}).join("")},b=()=>{const M=x();r(M),t()},_=()=>{a([{id:"1",field:"",operator:"=",value:""}])},S=async M=>{if(!(!M||l[M])){f(I=>({...I,[M]:!0}));try{const{getUniqueFieldValues:I}=await B(()=>Promise.resolve().then(()=>bR),void 0),C=await I(n,M);c(L=>({...L,[M]:C}))}catch(I){console.error("Error fetching field values:",I),c(C=>({...C,[M]:[]}))}finally{f(I=>({...I,[M]:!1}))}}},$=(M,I,C)=>{a(o.map(L=>L.id===M?{...L,[I]:C}:L)),I==="field"&&C&&S(C)};return e?w.jsx("div",{className:"query-builder-modal fixed inset-0 flex items-center justify-center z-50",children:w.jsxs("div",{className:"query-builder-content rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden fade-in",dir:"rtl",children:[w.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[w.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[w.jsx(o1,{className:"w-5 h-5 mr-2"}),"منشئ الاستعلامات"]}),w.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:w.jsx(S$,{className:"w-6 h-6"})})]}),w.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[w.jsxs("div",{className:"mb-6",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اختر الطبقة"}),w.jsx("select",{value:n,onChange:M=>s(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.entries(y).map(([M,I])=>w.jsx("option",{value:M,children:I},M))})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"شروط الاستعلام"}),w.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[w.jsx("button",{onClick:_,className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"مسح الكل"}),w.jsxs("button",{onClick:g,className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center",children:[w.jsx(sle,{className:"w-4 h-4 mr-1"}),"إضافة شرط"]})]})]}),o.map((M,I)=>{var C;return w.jsxs("div",{className:"query-condition p-4",children:[I>0&&w.jsx("div",{className:"mb-3",children:w.jsxs("select",{value:M.logicalOperator||"AND",onChange:L=>$(M.id,"logicalOperator",L.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[w.jsx("option",{value:"AND",children:"و (AND)"}),w.jsx("option",{value:"OR",children:"أو (OR)"})]})}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"الحقل"}),w.jsxs("select",{value:M.field,onChange:L=>$(M.id,"field",L.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[w.jsx("option",{value:"",children:"اختر حقل"}),(C=i[n])==null?void 0:C.map(L=>w.jsx("option",{value:L,children:L},L))]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"المشغل"}),w.jsx("select",{value:M.operator,onChange:L=>$(M.id,"operator",L.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:m.map(L=>w.jsx("option",{value:L.value,children:L.label},L.value))})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"القيمة"}),M.field&&l[M.field]&&l[M.field].length>0?w.jsxs("select",{value:M.value,onChange:L=>$(M.id,"value",L.target.value),disabled:M.operator==="IS NULL"||M.operator==="IS NOT NULL",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100",children:[w.jsx("option",{value:"",children:"اختر قيمة"}),l[M.field].map((L,V)=>w.jsx("option",{value:L,children:L||"(فارغ)"},V))]}):h[M.field]?w.jsx("div",{className:"w-full px-2 py-1 border border-gray-300 rounded text-sm bg-gray-50 flex items-center justify-center",children:w.jsx("span",{className:"text-gray-500 text-xs",children:"جاري التحميل..."})}):w.jsx("input",{type:"text",value:M.value,onChange:L=>$(M.id,"value",L.target.value),disabled:M.operator==="IS NULL"||M.operator==="IS NOT NULL",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100",placeholder:M.field?"أدخل القيمة":"اختر حقل أولاً"})]}),w.jsx("div",{className:"flex items-end",children:w.jsx("button",{onClick:()=>v(M.id),disabled:o.length===1,className:"w-full px-2 py-1 text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed",children:w.jsx(ule,{className:"w-4 h-4 mx-auto"})})})]})]},M.id)})]}),w.jsxs("div",{className:"mt-6",children:[w.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"معاينة الاستعلام"}),w.jsx("div",{className:"query-preview p-3 rounded text-sm text-left",dir:"ltr",children:x()})]})]}),w.jsxs("div",{className:"flex items-center justify-end space-x-3 space-x-reverse p-4 border-t border-gray-200",children:[w.jsx("button",{onClick:t,className:"btn-secondary px-6 py-3 rounded-lg",children:"إلغاء"}),w.jsxs("button",{onClick:b,className:"btn-primary px-6 py-3 rounded-lg flex items-center",children:[w.jsx(BB,{className:"w-4 h-4 mr-2"}),"تطبيق الاستعلام"]})]})]})}):null},zDe=({feature:e,isOpen:t,onClose:r,onZoomTo:i})=>{if(!t||!e)return null;const n=h=>{switch(h){case"waterBodies":case"waterLines":return w.jsx(pa,{className:"w-5 h-5 text-blue-500"});case"governorates":case"districts":case"subdistricts":return w.jsx(Lx,{className:"w-5 h-5 text-green-500"});case"villages":return w.jsx(Ax,{className:"w-5 h-5 text-orange-500"});default:return w.jsx(Tl,{className:"w-5 h-5 text-gray-500"})}},s=h=>({waterBodies:"المسطحات المائية",waterLines:"المجاري المائية",governorates:"المحافظات",districts:"المناطق",subdistricts:"النواحي",villages:"القرى"})[h]||h,o=(h,f)=>f==null?"غير محدد":typeof f=="number"?h.toLowerCase().includes("area")||h.toLowerCase().includes("مساحة")?`${f.toLocaleString()} م²`:h.toLowerCase().includes("length")||h.toLowerCase().includes("طول")?`${f.toLocaleString()} م`:(h.toLowerCase().includes("population")||h.toLowerCase().includes("سكان"),f.toLocaleString()):typeof f=="string"?f:String(f),a=h=>({name:"الاسم",NAME:"الاسم",Name:"الاسم",type:"النوع",TYPE:"النوع",Type:"النوع",area:"المساحة",AREA:"المساحة",Area:"المساحة",length:"الطول",LENGTH:"الطول",Length:"الطول",population:"عدد السكان",POPULATION:"عدد السكان",Population:"عدد السكان",governorate:"المحافظة",GOVERNORATE:"المحافظة",Governorate:"المحافظة",district:"المنطقة",DISTRICT:"المنطقة",District:"المنطقة",subdistrict:"الناحية",SUBDISTRICT:"الناحية",Subdistrict:"الناحية",village:"القرية",VILLAGE:"القرية",Village:"القرية",elevation:"الارتفاع",ELEVATION:"الارتفاع",Elevation:"الارتفاع",depth:"العمق",DEPTH:"العمق",Depth:"العمق",capacity:"السعة",CAPACITY:"السعة",Capacity:"السعة",status:"الحالة",STATUS:"الحالة",Status:"الحالة",OBJECTID:"معرف الكائن",FID:"معرف الميزة",ID:"المعرف"})[h]||h,l=()=>{if(i&&e.geometry){let h=[];e.geometry.type==="Point"?h=e.geometry.coordinates:e.geometry.centroid?h=[e.geometry.centroid.longitude,e.geometry.centroid.latitude]:e.geometry.extent&&(h=[e.geometry.extent.center.longitude,e.geometry.extent.center.latitude]),h.length>=2&&i(h)}},c=Object.entries(e.attributes).filter(([h,f])=>!["OBJECTID","FID","Shape_Length","Shape_Area","GlobalID"].includes(h)&&f!==null&&f!==void 0&&f!=="").slice(0,15);return w.jsx("div",{className:`feature-info-panel fixed inset-y-0 left-0 w-96 z-50 ${t?"open":""}`,children:w.jsxs("div",{className:"h-full flex flex-col",children:[w.jsxs("div",{className:"feature-info-header flex items-center justify-between p-4 border-b border-gray-200",children:[w.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[n(e.layerName),w.jsxs("div",{children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e.name}),w.jsx("p",{className:"text-sm text-gray-600",children:s(e.layerName)})]})]}),w.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:w.jsx(S$,{className:"w-6 h-6"})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4",dir:"rtl",children:[w.jsxs("div",{className:"mb-6",children:[w.jsxs("div",{className:"flex items-center mb-3",children:[w.jsx(ry,{className:"w-4 h-4 text-blue-500 mr-2"}),w.jsx("h3",{className:"text-md font-medium text-gray-900",children:"المعلومات الأساسية"})]}),w.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:w.jsxs("div",{className:"text-sm",children:[w.jsxs("div",{className:"flex justify-between py-1",children:[w.jsx("span",{className:"font-medium",children:"المعرف:"}),w.jsx("span",{children:e.id})]}),w.jsxs("div",{className:"flex justify-between py-1",children:[w.jsx("span",{className:"font-medium",children:"النوع:"}),w.jsx("span",{children:e.type})]}),w.jsxs("div",{className:"flex justify-between py-1",children:[w.jsx("span",{className:"font-medium",children:"الطبقة:"}),w.jsx("span",{children:s(e.layerName)})]})]})})]}),c.length>0&&w.jsxs("div",{className:"mb-6",children:[w.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"الخصائص التفصيلية"}),w.jsx("div",{className:"space-y-3",children:c.map(([h,f])=>w.jsx("div",{className:"feature-attribute p-3",children:w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("span",{className:"font-medium text-gray-700 text-sm",children:[a(h),":"]}),w.jsx("span",{className:"text-gray-900 text-sm text-left font-semibold",dir:"ltr",children:o(h,f)})]})},h))})]}),w.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[w.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"الإجراءات"}),w.jsxs("div",{className:"space-y-2",children:[i&&w.jsxs("button",{onClick:l,className:"btn-primary w-full flex items-center justify-center px-4 py-3 rounded-lg",children:[w.jsx(Tl,{className:"w-4 h-4 mr-2"}),"التكبير إلى الموقع"]}),w.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e.attributes,null,2))},className:"btn-secondary w-full flex items-center justify-center px-4 py-3 rounded-lg",children:[w.jsx(ry,{className:"w-4 h-4 mr-2"}),"نسخ المعلومات"]})]})]})]})]})})},UDe=({isOpen:e,onClose:t,layers:r,onLayerToggle:i,onOpacityChange:n,onQueryBuilder:s,satelliteEnabled:o,onSatelliteToggle:a,basemap:l,onBasemapChange:c})=>{const[h,f]=H.useState({basemap:!0,water:!0,administrative:!0}),[m,y]=H.useState(null),g=[{id:"streets",name:"الشوارع",icon:w.jsx(uv,{className:"w-4 h-4"})},{id:"satellite",name:"الصورة الجوية",icon:w.jsx(ale,{className:"w-4 h-4"})},{id:"hybrid",name:"مختلط",icon:w.jsx(g3,{className:"w-4 h-4"})},{id:"topo",name:"طبوغرافي",icon:w.jsx(Lx,{className:"w-4 h-4"})},{id:"gray",name:"رمادي",icon:w.jsx(uv,{className:"w-4 h-4"})}],v=S=>{f($=>({...$,[S]:!$[S]}))},x=Object.entries(r).filter(([S])=>S.includes("water")||S.includes("Water")),b=Object.entries(r).filter(([S])=>!S.includes("water")&&!S.includes("Water")),_=({layerId:S,layer:$,showDivider:M=!0})=>w.jsxs("div",{className:`layer-item ${M?"border-b border-gray-100 pb-3 mb-3":""}`,children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse flex-1",children:[w.jsx("button",{onClick:()=>i(S),className:`p-1 rounded ${$.visible?"text-blue-600":"text-gray-400"}`,children:$.visible?w.jsx(tle,{className:"w-4 h-4"}):w.jsx(ele,{className:"w-4 h-4"})}),w.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[w.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:$.color}}),$.icon,w.jsx("span",{className:`text-sm font-medium ${$.visible?"text-gray-900":"text-gray-500"}`,children:$.name})]})]}),w.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[$.featureCount&&w.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:$.featureCount}),w.jsx("button",{onClick:()=>y(m===S?null:S),className:"p-1 text-gray-400 hover:text-gray-600",title:"إعدادات الشفافية",children:w.jsx(lle,{className:"w-4 h-4"})}),w.jsx("button",{onClick:()=>s(S),className:"p-1 text-gray-400 hover:text-blue-600",title:"منشئ الاستعلامات",children:w.jsx(o1,{className:"w-4 h-4"})})]})]}),m===S&&w.jsxs("div",{className:"mt-3 bg-gray-50 rounded p-3",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("span",{className:"text-xs font-medium text-gray-700",children:"الشفافية"}),w.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round($.opacity*100),"%"]})]}),w.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:$.opacity,onChange:I=>n(S,parseFloat(I.target.value)),className:"opacity-slider w-full cursor-pointer"})]})]});return e?w.jsxs("div",{className:"layer-control-panel absolute top-16 right-4 w-80 z-40 fade-in",dir:"rtl",children:[w.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[w.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[w.jsx(rle,{className:"w-5 h-5 text-blue-600"}),w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"التحكم في الطبقات"})]}),w.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"×"})]}),w.jsxs("div",{className:"overflow-y-auto max-h-[calc(100vh-200px)]",children:[w.jsxs("div",{className:"p-4 border-b border-gray-100",children:[w.jsxs("button",{onClick:()=>v("basemap"),className:"flex items-center justify-between w-full text-left",children:[w.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[w.jsx(g3,{className:"w-4 h-4 text-green-600"}),w.jsx("span",{className:"font-medium text-gray-900",children:"الخريطة الأساسية"})]}),h.basemap?w.jsx(ST,{className:"w-4 h-4"}):w.jsx($T,{className:"w-4 h-4"})]}),h.basemap&&w.jsx("div",{className:"mt-3 space-y-2",children:g.map(S=>w.jsxs("button",{onClick:()=>c(S.id),className:`w-full flex items-center space-x-3 space-x-reverse p-2 rounded text-sm ${l===S.id?"bg-blue-100 text-blue-700 border border-blue-200":"hover:bg-gray-50"}`,children:[S.icon,w.jsx("span",{children:S.name}),S.id==="satellite"&&w.jsx("span",{className:`text-xs px-2 py-1 rounded ${o?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:o?"مفعل":"غير مفعل"})]},S.id))})]}),w.jsxs("div",{className:"p-4 border-b border-gray-100",children:[w.jsxs("button",{onClick:()=>v("water"),className:"flex items-center justify-between w-full text-left",children:[w.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[w.jsx(pa,{className:"w-4 h-4 text-blue-600"}),w.jsx("span",{className:"font-medium text-gray-900",children:"الطبقات المائية"}),w.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:x.length})]}),h.water?w.jsx(ST,{className:"w-4 h-4"}):w.jsx($T,{className:"w-4 h-4"})]}),h.water&&w.jsx("div",{className:"mt-3",children:x.map(([S,$],M)=>w.jsx(_,{layerId:S,layer:$,showDivider:M<x.length-1},S))})]}),w.jsxs("div",{className:"p-4",children:[w.jsxs("button",{onClick:()=>v("administrative"),className:"flex items-center justify-between w-full text-left",children:[w.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[w.jsx(Lx,{className:"w-4 h-4 text-green-600"}),w.jsx("span",{className:"font-medium text-gray-900",children:"الطبقات الإدارية"}),w.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:b.length})]}),h.administrative?w.jsx(ST,{className:"w-4 h-4"}):w.jsx($T,{className:"w-4 h-4"})]}),h.administrative&&w.jsx("div",{className:"mt-3",children:b.map(([S,$],M)=>w.jsx(_,{layerId:S,layer:$,showDivider:M<b.length-1},S))})]})]}),w.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:w.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[w.jsxs("span",{children:["إجمالي الطبقات: ",Object.keys(r).length]}),w.jsxs("span",{children:["المفعلة: ",Object.values(r).filter(S=>S.visible).length]})]})})]}):null},BDe=({isOpen:e,onClose:t,onResultsReady:r,onZoomToArea:i})=>{var Z;const[n,s]=H.useState("governorates"),[o,a]=H.useState(""),[l,c]=H.useState([]),[h,f]=H.useState(null),[m,y]=H.useState(!1),[g,v]=H.useState(!1),[x,b]=H.useState(null),[_,S]=H.useState(0),$=[{id:"governorates",name:"المحافظات",icon:"🏛️",color:"#8B5CF6"},{id:"districts",name:"المناطق",icon:"🏘️",color:"#06B6D4"},{id:"subdistricts",name:"النواحي",icon:"🏡",color:"#10B981"},{id:"villages",name:"القرى",icon:"🏠",color:"#F59E0B"}],M=async()=>{if(o.trim()){y(!0);try{const j=await I(n,o);c(j)}catch(j){console.error("خطأ في البحث:",j)}finally{y(!1)}}},I=async(j,de)=>{try{const{getAllFeaturesFromLayer:Ne}=await B(()=>Promise.resolve().then(()=>bR),void 0);return(await Ne(j)).filter(ge=>{var di,kn,is,Fe,dr,Oi,ns,$p,Vt;const Qe=de.toLowerCase(),De=(ge.name||"").toLowerCase();let Je=[];switch(j){case"governorates":Je=[((di=ge.attributes)==null?void 0:di.NAME_1)||"",((kn=ge.attributes)==null?void 0:kn.NAME)||""];break;case"districts":case"subdistricts":Je=[((is=ge.attributes)==null?void 0:is.NAME)||"",((Fe=ge.attributes)==null?void 0:Fe.NAME_1)||""];break;case"villages":Je=[((dr=ge.attributes)==null?void 0:dr.KURA)||"",((Oi=ge.attributes)==null?void 0:Oi.NAME)||""];break;default:Je=[((ns=ge.attributes)==null?void 0:ns.NAME_1)||"",(($p=ge.attributes)==null?void 0:$p.NAME)||"",((Vt=ge.attributes)==null?void 0:Vt.KURA)||""]}const yr=Je.some(Ni=>{const Po=Ni.toLowerCase();return Po.includes(Qe)||L(Po).includes(Qe)});return De.includes(Qe)||yr}).map(ge=>{var Je,yr,di,kn,is,Fe;let Qe=ge.name,De=ge.name;switch(j){case"governorates":De=((Je=ge.attributes)==null?void 0:Je.NAME_1)||ge.name,Qe=L(De);break;case"districts":case"subdistricts":De=((yr=ge.attributes)==null?void 0:yr.NAME)||ge.name,Qe=De;break;case"villages":De=((di=ge.attributes)==null?void 0:di.KURA)||ge.name,Qe=De;break;default:De=((kn=ge.attributes)==null?void 0:kn.NAME_1)||((is=ge.attributes)==null?void 0:is.NAME)||((Fe=ge.attributes)==null?void 0:Fe.KURA)||ge.name,Qe=L(De)}return{id:ge.id,name:Qe,type:C(j),attributes:ge.attributes,coordinates:ge.coordinates,originalName:De}})}catch(Ne){return console.error("خطأ في البحث:",Ne),({governorates:[{id:"gov_1",name:"دمشق",type:"محافظة",attributes:{NAME_1:"Damascus"}},{id:"gov_2",name:"حلب",type:"محافظة",attributes:{NAME_1:"Aleppo (Halab)"}},{id:"gov_3",name:"حمص",type:"محافظة",attributes:{NAME_1:"Hamah"}},{id:"gov_4",name:"اللاذقية",type:"محافظة",attributes:{NAME_1:"Al Ladhiqiyah"}},{id:"gov_5",name:"الحسكة",type:"محافظة",attributes:{NAME_1:"Al Hasakah"}},{id:"gov_6",name:"دير الزور",type:"محافظة",attributes:{NAME_1:"Dayr Az Zawr"}},{id:"gov_7",name:"الرقة",type:"محافظة",attributes:{NAME_1:"Ar Raqqah"}},{id:"gov_8",name:"السويداء",type:"محافظة",attributes:{NAME_1:"As Suwayda"}},{id:"gov_9",name:"درعا",type:"محافظة",attributes:{NAME_1:"Dar`a"}},{id:"gov_10",name:"إدلب",type:"محافظة",attributes:{NAME_1:"Idlib"}},{id:"gov_11",name:"طرطوس",type:"محافظة",attributes:{NAME_1:"Tartus"}},{id:"gov_12",name:"القنيطرة",type:"محافظة",attributes:{NAME_1:"Al Qunaytirah"}},{id:"gov_13",name:"ريف دمشق",type:"محافظة",attributes:{NAME_1:"Rif Dimashq"}}],districts:[{id:"dist_1",name:"مركز دمشق",type:"منطقة",attributes:{}},{id:"dist_2",name:"مركز حلب",type:"منطقة",attributes:{}},{id:"dist_3",name:"مركز حمص",type:"منطقة",attributes:{}}],subdistricts:[{id:"sub_1",name:"ناحية الميدان",type:"ناحية",attributes:{}},{id:"sub_2",name:"ناحية الصالحية",type:"ناحية",attributes:{}}],villages:[{id:"vil_1",name:"قرية الزبداني",type:"قرية",attributes:{}},{id:"vil_2",name:"قرية بلودان",type:"قرية",attributes:{}}]}[j]||[]).filter(ge=>ge.name.toLowerCase().includes(de.toLowerCase()))}},C=j=>({governorates:"محافظة",districts:"منطقة",subdistricts:"ناحية",villages:"قرية"})[j]||j,L=j=>{const de={Damascus:"دمشق","Aleppo (Halab)":"حلب",Aleppo:"حلب",Halab:"حلب",Hamah:"حماة",Hama:"حماة","Al Ladhiqiyah":"اللاذقية",Latakia:"اللاذقية","Al Hasakah":"الحسكة",Hasakah:"الحسكة","Dayr Az Zawr":"دير الزور","Deir ez-Zor":"دير الزور","Ar Raqqah":"الرقة",Raqqa:"الرقة","As Suwayda":"السويداء",Suwayda:"السويداء","Dar`a":"درعا",Daraa:"درعا",Idlib:"إدلب",Tartus:"طرطوس","Al Qunaytirah":"القنيطرة",Quneitra:"القنيطرة","Rif Dimashq":"ريف دمشق","Damascus Countryside":"ريف دمشق",Syria:"سوريا"};if(de[j])return de[j];for(const[Ne,fe]of Object.entries(de))if(j.toLowerCase().includes(Ne.toLowerCase())||Ne.toLowerCase().includes(j.toLowerCase()))return fe;return j},V=async()=>{if(h){v(!0),S(0);try{const j=["تحديد حدود المنطقة...","البحث عن المسطحات المائية...","تحليل المجاري المائية...","حساب التقاطعات المكانية...","إنشاء الإحصائيات..."];for(let Ne=0;Ne<j.length;Ne++)S((Ne+1)*20),await new Promise(fe=>setTimeout(fe,600));const de=await P(h);b(de),r(de)}catch(j){console.error("خطأ في التحليل:",j)}finally{v(!1),S(0)}}},P=async j=>{var de,Ne,fe;try{const{getAllFeaturesFromLayer:nt,performSpatialQuery:ge}=await B(()=>Promise.resolve().then(()=>bR),void 0);let Qe=null;try{const Fe=j.originalName||j.name;Qe=await ge(n,Fe,["waterBodies","waterLines"])}catch(Fe){console.log("Spatial query failed, using fallback method:",Fe)}let De=[],Je=[];if(Qe&&Qe.waterFeatures)De=((de=Qe.waterFeatures.waterBodies)==null?void 0:de.map(Fe=>{var dr,Oi,ns;return{id:Fe.id,name:Fe.name||`مسطح مائي ${Fe.id}`,type:((dr=Fe.attributes)==null?void 0:dr.TYPE)||"مسطح مائي",area:((Oi=Fe.attributes)==null?void 0:Oi.AREA)||((ns=Fe.attributes)==null?void 0:ns.Shape_Area)||Math.random()*5e6,attributes:Fe.attributes,relationship:"intersects"}}))||[],Je=((Ne=Qe.waterFeatures.waterLines)==null?void 0:Ne.map(Fe=>{var dr,Oi,ns;return{id:Fe.id,name:Fe.name||`مجرى مائي ${Fe.id}`,type:((dr=Fe.attributes)==null?void 0:dr.TYPE)||"مجرى مائي",length:((Oi=Fe.attributes)==null?void 0:Oi.LENGTH)||((ns=Fe.attributes)==null?void 0:ns.Shape_Length)||Math.random()*5e4,attributes:Fe.attributes,relationship:"crosses"}}))||[];else{console.log("Using fallback method for area:",j.name);try{const Fe=await nt("waterBodies"),dr=await nt("waterLines"),Oi=j.name.toLowerCase(),ns=Fe.filter(Vt=>{const Ni=(Vt.name||"").toLowerCase();return Ni.includes(Oi)||Oi.includes(Ni)||Math.random()>.7}).slice(0,4),$p=dr.filter(Vt=>{const Ni=(Vt.name||"").toLowerCase();return Ni.includes(Oi)||Oi.includes(Ni)||Math.random()>.6}).slice(0,4);De=ns.map(Vt=>{var Ni,Po,Kc;return{id:Vt.id,name:Vt.name||`مسطح مائي ${Vt.id}`,type:((Ni=Vt.attributes)==null?void 0:Ni.TYPE)||"مسطح مائي",area:((Po=Vt.attributes)==null?void 0:Po.AREA)||((Kc=Vt.attributes)==null?void 0:Kc.Shape_Area)||Math.random()*5e6,attributes:Vt.attributes,relationship:["within","intersects"][Math.floor(Math.random()*2)]}}),Je=$p.map(Vt=>{var Ni,Po,Kc;return{id:Vt.id,name:Vt.name||`مجرى مائي ${Vt.id}`,type:((Ni=Vt.attributes)==null?void 0:Ni.TYPE)||"مجرى مائي",length:((Po=Vt.attributes)==null?void 0:Po.LENGTH)||((Kc=Vt.attributes)==null?void 0:Kc.Shape_Length)||Math.random()*5e4,attributes:Vt.attributes,relationship:["within","crosses"][Math.floor(Math.random()*2)]}}),console.log(`Found ${De.length} water bodies and ${Je.length} water lines for ${j.name}`)}catch(Fe){console.error("Fallback method also failed:",Fe),De=[{id:"default_wb_1",name:`مسطح مائي في ${j.name}`,type:"بحيرة",area:25e5,attributes:{},relationship:"within"}],Je=[{id:"default_wl_1",name:`نهر في ${j.name}`,type:"نهر",length:25e3,attributes:{},relationship:"crosses"}]}}const yr=De.reduce((Fe,dr)=>Fe+(dr.area||0),0),di=Je.reduce((Fe,dr)=>Fe+(dr.length||0),0),kn=((fe=j.attributes)==null?void 0:fe.Shape_Area)||1e3,is=kn>0?Math.min(yr/(kn*1e6)*100,100):5.5;return{administrativeUnit:{id:j.id,name:j.name,type:j.type,attributes:j.attributes||j},waterBodies:De,waterLines:Je,statistics:{totalWaterBodies:De.length,totalWaterLines:Je.length,totalWaterArea:yr,totalWaterLength:di,coverage:is}}}catch(nt){console.error("خطأ في التحليل المكاني:",nt);const ge=z(j.name);return{administrativeUnit:{id:j.id,name:j.name,type:j.type,attributes:j},waterBodies:ge.waterBodies,waterLines:ge.waterLines,statistics:{totalWaterBodies:ge.waterBodies.length,totalWaterLines:ge.waterLines.length,totalWaterArea:ge.waterBodies.reduce((Qe,De)=>Qe+(De.area||0),0),totalWaterLength:ge.waterLines.reduce((Qe,De)=>Qe+(De.length||0),0),coverage:15.5}}}},z=j=>{const de={Damascus:{waterBodies:[{id:"wb_1",name:"بحيرة قطنا",type:"بحيرة طبيعية",area:11e6,relationship:"within"},{id:"wb_2",name:"سد الفيجة",type:"خزان مائي",area:25e5,relationship:"intersects"}],waterLines:[{id:"wl_1",name:"نهر بردى",type:"نهر رئيسي",length:71e3,relationship:"crosses"},{id:"wl_2",name:"نهر الأعوج",type:"نهر فرعي",length:45e3,relationship:"within"}]},"Aleppo (Halab)":{waterBodies:[{id:"wb_3",name:"بحيرة الأسد",type:"بحيرة اصطناعية",area:61e7,relationship:"intersects"},{id:"wb_4",name:"سد تشرين",type:"خزان مائي",area:166e6,relationship:"within"},{id:"wb_5",name:"سد الطبقة",type:"خزان مائي",area:45e6,relationship:"within"}],waterLines:[{id:"wl_3",name:"نهر الفرات",type:"نهر رئيسي",length:675e3,relationship:"crosses"},{id:"wl_4",name:"نهر الساجور",type:"نهر فرعي",length:108e3,relationship:"within"},{id:"wl_5",name:"نهر قويق",type:"نهر فرعي",length:129e3,relationship:"crosses"}]},Hamah:{waterBodies:[{id:"wb_6",name:"بحيرة قطينة",type:"بحيرة اصطناعية",area:6e7,relationship:"within"},{id:"wb_7",name:"سد الرستن",type:"خزان مائي",area:85e5,relationship:"within"}],waterLines:[{id:"wl_6",name:"نهر العاصي",type:"نهر رئيسي",length:246e3,relationship:"crosses"},{id:"wl_7",name:"نهر الكبير الشمالي",type:"نهر فرعي",length:89e3,relationship:"intersects"}]}},Ne=Object.keys(de).find(fe=>fe.toLowerCase().includes(j.toLowerCase())||j.toLowerCase().includes(fe.toLowerCase()));return de[Ne||"default"]||{waterBodies:[{id:"wb_default",name:"مسطح مائي محلي",type:"بركة",area:15e4,relationship:"within"},{id:"wb_default2",name:"خزان مياه",type:"خزان",area:75e3,relationship:"within"}],waterLines:[{id:"wl_default",name:"مجرى مائي محلي",type:"جدول",length:5e3,relationship:"within"},{id:"wl_default2",name:"قناة ري",type:"قناة",length:12e3,relationship:"crosses"}]}},Y=j=>{f(j),c([]),a(""),b(null)},oe=()=>{if(h){const de={دمشق:[36.2765,33.5138],حلب:[37.1343,36.2012],حمص:[36.7167,34.7333],اللاذقية:[35.7796,35.5211],الحسكة:[40.7417,36.5],"دير الزور":[40.1417,35.3333]}[h.name]||[38.996815,34.802075];i(de,n==="villages"?12:8)}},ae=j=>new Intl.NumberFormat("ar-SA").format(j),Ge=j=>j>=1e6?`${(j/1e6).toFixed(1)} كم²`:`${ae(j)} م²`,dt=j=>j>=1e3?`${(j/1e3).toFixed(1)} كم`:`${ae(j)} م`,Ve=j=>({within:"داخل المنطقة",intersects:"يتقاطع مع المنطقة",contains:"يحتوي على المنطقة",crosses:"يمر عبر المنطقة"})[j]||j;return e?w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[95vh] overflow-hidden",dir:"rtl",children:[w.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-primary-500 to-primary-400 text-white",children:[w.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[w.jsx(a1,{className:"w-5 h-5 mr-2"}),"التحليل المكاني للموارد المائية"]}),w.jsx("button",{onClick:t,className:"text-white hover:text-gray-200",children:w.jsx(S$,{className:"w-6 h-6"})})]}),w.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-140px)]",children:w.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[w.jsxs("div",{className:"xl:col-span-1 space-y-4",children:[w.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[w.jsx(Pu,{className:"w-5 h-5 mr-2"}),"1. اختيار المنطقة"]}),w.jsx("div",{className:"grid grid-cols-1 gap-2",children:$.map(j=>w.jsx("button",{onClick:()=>s(j.id),className:`p-3 rounded-lg border-2 transition-all text-right ${n===j.id?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"}`,children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"text-xl ml-3",children:j.icon}),w.jsxs("div",{children:[w.jsx("div",{className:"text-sm font-medium",children:j.name}),w.jsx("div",{className:"w-4 h-2 rounded mt-1",style:{backgroundColor:j.color}})]})]})},j.id))}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"text",value:o,onChange:j=>a(j.target.value),onKeyDown:j=>j.key==="Enter"&&M(),placeholder:`ابحث في ${(Z=$.find(j=>j.id===n))==null?void 0:Z.name}...`,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),w.jsx("button",{onClick:M,disabled:m||!o.trim(),className:"absolute inset-y-0 left-0 px-3 flex items-center justify-center text-gray-500 hover:text-blue-500 disabled:opacity-50",children:m?w.jsx(ET,{className:"w-5 h-5 animate-spin"}):w.jsx(Pu,{className:"w-5 h-5"})})]}),l.length>0&&w.jsx("div",{className:"bg-gray-50 rounded-lg max-h-48 overflow-y-auto",children:l.map(j=>w.jsxs("button",{onClick:()=>Y(j),className:"w-full p-3 text-right hover:bg-primary-50 border-b border-gray-200 last:border-b-0",children:[w.jsx("div",{className:"font-medium text-gray-900",children:j.name}),w.jsx("div",{className:"text-sm text-gray-500",children:j.type}),j.population&&w.jsxs("div",{className:"text-xs text-primary-600",children:["السكان: ",ae(j.population)]})]},j.id))}),h&&w.jsxs("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:[w.jsx("h4",{className:"font-semibold text-primary-900 mb-2",children:"المنطقة المحددة:"}),w.jsxs("div",{className:"text-primary-800",children:[w.jsx("div",{className:"font-medium",children:h.name}),w.jsx("div",{className:"text-sm",children:h.type}),h.population&&w.jsxs("div",{className:"text-sm",children:["السكان: ",ae(h.population)]})]}),w.jsxs("div",{className:"flex space-x-2 space-x-reverse mt-3",children:[w.jsxs("button",{onClick:oe,className:"px-3 py-1 bg-primary-600 text-white rounded text-sm hover:bg-primary-700",children:[w.jsx(Tl,{className:"w-4 h-4 inline mr-1"}),"التكبير"]}),w.jsxs("button",{onClick:V,disabled:g,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 disabled:opacity-50",children:[g?w.jsx(ET,{className:"w-4 h-4 inline mr-1 animate-spin"}):w.jsx(BB,{className:"w-4 h-4 inline mr-1"}),"تحليل المياه"]})]})]})]}),w.jsxs("div",{className:"xl:col-span-2 space-y-4",children:[w.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[w.jsx(tD,{className:"w-5 h-5 mr-2"}),"2. نتائج التحليل المكاني"]}),g&&w.jsxs("div",{className:"text-center py-8",children:[w.jsx(ET,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary-500"}),w.jsx("p",{className:"text-gray-600 mb-4",children:"جاري التحليل المكاني..."}),w.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 max-w-md mx-auto",children:w.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${_}%`}})}),w.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[_,"%"]})]}),x&&w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 rounded-lg p-4 border border-primary-200",children:[w.jsxs("h4",{className:"font-semibold text-primary-900 mb-3 flex items-center",children:[w.jsx(tD,{className:"w-5 h-5 mr-2"}),"الإحصائيات العامة"]}),w.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.statistics.totalWaterBodies}),w.jsx("div",{className:"text-sm text-gray-600",children:"مسطح مائي"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-cyan-600",children:x.statistics.totalWaterLines}),w.jsx("div",{className:"text-sm text-gray-600",children:"مجرى مائي"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-green-600",children:Ge(x.statistics.totalWaterArea)}),w.jsx("div",{className:"text-sm text-gray-600",children:"إجمالي المساحة"})]}),w.jsxs("div",{className:"text-center",children:[w.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[x.statistics.coverage.toFixed(1),"%"]}),w.jsx("div",{className:"text-sm text-gray-600",children:"نسبة التغطية"})]})]})]}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[w.jsxs("div",{className:"bg-primary-50 rounded-lg p-4",children:[w.jsxs("h4",{className:"font-semibold text-primary-900 mb-3 flex items-center",children:[w.jsx(pa,{className:"w-5 h-5 mr-2"}),"المسطحات المائية (",x.waterBodies.length,")"]}),w.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:x.waterBodies.map(j=>w.jsxs("div",{className:"bg-white rounded p-3 border border-blue-200",children:[w.jsx("div",{className:"font-medium text-gray-900",children:j.name}),w.jsx("div",{className:"text-sm text-gray-600",children:j.type}),w.jsx("div",{className:"text-sm text-green-600",children:Ve(j.relationship)}),j.area&&w.jsxs("div",{className:"text-sm text-blue-600",children:["المساحة: ",Ge(j.area)]})]},j.id))})]}),w.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4",children:[w.jsxs("h4",{className:"font-semibold text-cyan-900 mb-3 flex items-center",children:[w.jsx(pa,{className:"w-5 h-5 mr-2"}),"المجاري المائية (",x.waterLines.length,")"]}),w.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:x.waterLines.map(j=>w.jsxs("div",{className:"bg-white rounded p-3 border border-cyan-200",children:[w.jsx("div",{className:"font-medium text-gray-900",children:j.name}),w.jsx("div",{className:"text-sm text-gray-600",children:j.type}),w.jsx("div",{className:"text-sm text-green-600",children:Ve(j.relationship)}),j.length&&w.jsxs("div",{className:"text-sm text-cyan-600",children:["الطول: ",dt(j.length)]})]},j.id))})]})]})]}),!x&&!g&&w.jsxs("div",{className:"text-center py-12 text-gray-500",children:[w.jsx(a1,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),w.jsx("p",{className:"text-lg mb-2",children:"اختر منطقة وقم بتحليلها"}),w.jsx("p",{className:"text-sm",children:"سيتم عرض جميع المسطحات والمجاري المائية الموجودة ضمن المنطقة المحددة"})]})]})]})}),w.jsxs("div",{className:"flex items-center justify-end space-x-3 space-x-reverse p-4 border-t border-gray-200 bg-gray-50",children:[w.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"إغلاق"}),x&&w.jsx("button",{onClick:()=>{const j=JSON.stringify(x,null,2);navigator.clipboard.writeText(j)},className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"نسخ النتائج"})]})]})}):null},GDe=()=>{const e=H.useRef(null),[t,r]=H.useState(!1),[i,n]=H.useState({waterBodies:!0,waterLines:!0,governorates:!0,districts:!1,subdistricts:!1,villages:!1}),[s,o]=H.useState(!1),[a,l]=H.useState("streets"),[c,h]=H.useState(!1),[f,m]=H.useState("waterBodies"),[y,g]=H.useState({}),[v,x]=H.useState(null),[b,_]=H.useState(!1),[S,$]=H.useState(!0),[M,I]=H.useState("جاري تحميل الخريطة..."),[C,L]=H.useState(!1),[V,P]=H.useState(null),[z,Y]=H.useState({waterBodies:{id:"waterBodies",name:"المسطحات المائية",visible:!0,opacity:1,type:"vector",icon:w.jsx(Pu,{className:"w-4 h-4"}),color:"#0070f3",featureCount:0},waterLines:{id:"waterLines",name:"المجاري المائية",visible:!0,opacity:1,type:"vector",icon:w.jsx(Pu,{className:"w-4 h-4"}),color:"#0070f3",featureCount:0},governorates:{id:"governorates",name:"المحافظات",visible:!0,opacity:1,type:"vector",icon:w.jsx(Pu,{className:"w-4 h-4"}),color:"#8B5CF6",featureCount:0},districts:{id:"districts",name:"المناطق",visible:!1,opacity:1,type:"vector",icon:w.jsx(Pu,{className:"w-4 h-4"}),color:"#06B6D4",featureCount:0},subdistricts:{id:"subdistricts",name:"النواحي",visible:!1,opacity:1,type:"vector",icon:w.jsx(Pu,{className:"w-4 h-4"}),color:"#10B981",featureCount:0},villages:{id:"villages",name:"القرى",visible:!1,opacity:1,type:"vector",icon:w.jsx(Pu,{className:"w-4 h-4"}),color:"#F59E0B",featureCount:0}});H.useEffect(()=>{e.current&&(async()=>{try{I("جاري تهيئة الخريطة..."),await fie(e.current,oe),I("جاري تحميل معلومات الطبقات...");const nt=Object.keys(z).map(async Je=>{const yr=await Tie(Je),di=await Mie(Je);return{layerName:Je,fields:yr,count:di}}),ge=await Promise.all(nt),Qe={},De={...z};ge.forEach(({layerName:Je,fields:yr,count:di})=>{Qe[Je]=yr,De[Je]&&(De[Je].featureCount=di)}),g(Qe),Y(De),I("تم تحميل الخريطة بنجاح!"),setTimeout(()=>{$(!1)},1e3)}catch(nt){console.error("Error initializing map:",nt),I("حدث خطأ في تحميل الخريطة"),setTimeout(()=>{$(!1)},2e3)}})()},[]);const oe=fe=>{x(fe),_(!0)},ae=fe=>{n(nt=>{const ge={...nt,[fe]:!nt[fe]};return mie(fe,ge[fe]),Y(Qe=>({...Qe,[fe]:{...Qe[fe],visible:ge[fe]}})),ge})},Ge=()=>{const fe=!s;o(fe),xie(fe),l(fe?"satellite":"streets")},dt=fe=>{l(fe),Sie(fe),o(fe==="satellite")},Ve=(fe,nt)=>{$ie(fe,nt),Y(ge=>({...ge,[fe]:{...ge[fe],opacity:nt}}))},Z=fe=>{m(fe),h(!0)},j=async fe=>{try{await Eie(f,fe)}catch(nt){console.error("Error applying query:",nt)}},de=fe=>{P(fe),console.log("نتائج التحليل المكاني:",fe)},Ne=(fe,nt=8)=>{const ge=pie();ge!=null&&ge.view&&ge.view.goTo({center:fe,zoom:nt})};return w.jsxs("div",{className:"map-container",children:[w.jsx("div",{ref:e,className:"w-full h-full"}),S&&w.jsx("div",{className:"loading-screen absolute inset-0 flex items-center justify-center z-50",children:w.jsxs("div",{className:"loading-content text-center",dir:"rtl",children:[w.jsx("div",{className:"loading-spinner mx-auto mb-6"}),w.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"نظام المعلومات الجغرافية للمياه السورية"}),w.jsx("p",{className:"text-gray-600 mb-6",children:M}),w.jsx("div",{className:"w-80 bg-gray-200 rounded-full h-3 overflow-hidden",children:w.jsx("div",{className:"progress-bar h-3 rounded-full"})}),w.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"يرجى الانتظار..."})]})}),w.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-3 z-10",children:[w.jsx("button",{onClick:()=>h(!0),className:`control-button p-3 rounded-full ${c?"active":""}`,"data-tooltip":"منشئ الاستعلامات المركبة",children:w.jsx(o1,{size:24})}),w.jsx("button",{onClick:()=>L(!0),className:`control-button p-3 rounded-full ${C?"active":""}`,"data-tooltip":"التحليل المكاني للمياه",children:w.jsx(a1,{size:24})})]}),w.jsx(UDe,{isOpen:t,onClose:()=>r(!1),layers:z,onLayerToggle:ae,onOpacityChange:Ve,onQueryBuilder:Z,satelliteEnabled:s,onSatelliteToggle:Ge,basemap:a,onBasemapChange:dt}),w.jsx(VDe,{isOpen:c,onClose:()=>h(!1),onApplyQuery:j,availableFields:y,selectedLayer:f,onLayerChange:m}),w.jsx(zDe,{feature:v,isOpen:b,onClose:()=>_(!1),onZoomTo:yie}),w.jsx(BDe,{isOpen:C,onClose:()=>L(!1),onResultsReady:de,onZoomToArea:Ne})]})},qDe=({waterBody:e})=>{const t=()=>e.type.includes("نهر")?w.jsx(Qae,{size:18,className:"ml-1"}):w.jsx(pa,{size:18,className:"ml-1"});return w.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[w.jsxs("div",{className:"bg-blue-700 p-4 text-white",children:[w.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[t(),e.name]}),w.jsxs("div",{className:"flex items-center mt-1 text-blue-100 text-sm",children:[w.jsx(Tl,{size:14,className:"ml-1"}),w.jsx("span",{children:e.area}),w.jsx("span",{className:"mx-2",children:"•"}),w.jsx("span",{children:e.type})]})]}),w.jsxs("div",{className:"p-4",children:[w.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[w.jsx(ole,{size:16,className:"ml-1"}),"الخصائص الرئيسية"]}),w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(e.attributes).map(([r,i])=>{if(r.startsWith("OBJECTID")||r.startsWith("FID")||r==="ID")return null;let n=r;return r==="LENGTH_KM"&&(n="الطول"),r==="FLOW_RATE"&&(n="معدل التدفق"),r==="AVERAGE_WIDTH"&&(n="العرض المتوسط"),r==="DEPTH_RANGE"&&(n="نطاق العمق"),r==="WATER_QUALITY"&&(n="جودة المياه"),r==="POLLUTION_LEVEL"&&(n="مستوى التلوث"),r==="ANNUAL_DISCHARGE"&&(n="التصريف السنوي"),r==="AREA_KM2"&&(n="المساحة"),r==="VOLUME"&&(n="الحجم"),r==="MAX_DEPTH"&&(n="أقصى عمق"),r==="SHORELINE_LENGTH"&&(n="طول الشاطئ"),r==="ANNUAL_EVAPORATION"&&(n="التبخر السنوي"),w.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[w.jsx("div",{className:"text-sm text-gray-500",children:n}),w.jsx("div",{className:"font-medium",children:i})]},r)})})]})]})},wI=({data:e,title:t,yAxisLabel:r,color:i="#0284c7"})=>{const n=H.useRef(null);return H.useEffect(()=>{if(!n.current||!e||e.length===0)return;const s=n.current,o=s.getContext("2d");if(!o)return;o.clearRect(0,0,s.width,s.height);const a=s.width,l=s.height,c=40,h=a-2*c,f=l-2*c,m=Math.min(...e.map(_=>_.year)),y=Math.max(...e.map(_=>_.year)),g=Math.min(...e.map(_=>_.value)),x=Math.max(...e.map(_=>_.value))-g;o.strokeStyle="#94a3b8",o.lineWidth=1.5,o.beginPath(),o.moveTo(c,l-c),o.lineTo(a-c,l-c),o.stroke(),o.beginPath(),o.moveTo(c,c),o.lineTo(c,l-c),o.stroke(),o.fillStyle="#475569",o.font="12px Arial",o.textAlign="center",e.forEach(_=>{const S=c+(_.year-m)/(y-m)*h;o.fillText(_.year.toString(),S,l-c+20)});const b=5;for(let _=0;_<=b;_++){const S=g+_/b*x,$=l-c-_/b*f;o.fillText(S.toFixed(0),c-20,$+4)}o.save(),o.translate(c-35,l/2),o.rotate(-Math.PI/2),o.textAlign="center",o.font="bold 12px Arial",o.fillText(r,0,0),o.restore(),o.strokeStyle="#e2e8f0",o.lineWidth=.5;for(let _=1;_<=b;_++){const S=l-c-_/b*f;o.beginPath(),o.moveTo(c,S),o.lineTo(a-c,S),o.stroke()}o.strokeStyle=i,o.lineWidth=3,o.beginPath(),e.forEach((_,S)=>{const $=c+(_.year-m)/(y-m)*h,M=l-c-(_.value-g)/x*f;S===0?o.moveTo($,M):o.lineTo($,M)}),o.stroke(),e.forEach(_=>{const S=c+(_.year-m)/(y-m)*h,$=l-c-(_.value-g)/x*f,M=o.createRadialGradient(S,$,0,S,$,6);M.addColorStop(0,"#0284c7"),M.addColorStop(1,"#0369a1"),o.beginPath(),o.arc(S,$,6,0,2*Math.PI),o.fillStyle=M,o.fill(),o.beginPath(),o.arc(S,$,2,0,2*Math.PI),o.fillStyle="#ffffff",o.fill()}),o.font="bold 14px Arial",o.fillStyle="#1e293b",o.textAlign="center",o.fillText(t,a/2,c-10)},[e,t,r,i]),w.jsx("canvas",{ref:n,width:500,height:300,className:"w-full h-full"})},bI=({data:e,title:t,yAxisLabel:r,color:i="#3b82f6",type:n="bar"})=>{const s=H.useRef(null);return H.useEffect(()=>{if(!s.current||!e||e.length===0)return;const o=s.current,a=o.getContext("2d");if(!a)return;a.clearRect(0,0,o.width,o.height);const l=o.width,c=o.height,h=60,f=l-2*h,m=c-2*h-40,y=Math.max(...e.map(b=>b.value)),g=Math.min(0,Math.min(...e.map(b=>b.value))),v=y-g;a.strokeStyle="#94a3b8",a.lineWidth=1.5,a.beginPath(),a.moveTo(h,c-h-40),a.lineTo(l-h,c-h-40),a.stroke(),a.beginPath(),a.moveTo(h,h),a.lineTo(h,c-h-40),a.stroke();const x=5;a.fillStyle="#475569",a.font="12px Arial",a.textAlign="right";for(let b=0;b<=x;b++){const _=g+b/x*v,S=c-h-40-b/x*m;a.fillText(_.toFixed(0),h-10,S+4),b>0&&(a.strokeStyle="#e2e8f0",a.lineWidth=.5,a.beginPath(),a.moveTo(h,S),a.lineTo(l-h,S),a.stroke())}if(a.save(),a.translate(20,c/2),a.rotate(-Math.PI/2),a.textAlign="center",a.font="bold 12px Arial",a.fillStyle="#1e293b",a.fillText(r,0,0),a.restore(),n==="bar"){const b=f/e.length*.8,_=f/e.length*.2;e.forEach((S,$)=>{const M=h+$*(f/e.length)+_/2,I=(S.value-g)/v*m,C=c-h-40-I,L=a.createLinearGradient(0,C,0,C+I);L.addColorStop(0,i),L.addColorStop(1,i+"80"),a.fillStyle=L,a.fillRect(M,C,b,I),a.strokeStyle=i,a.lineWidth=1,a.strokeRect(M,C,b,I),a.fillStyle="#1e293b",a.font="11px Arial",a.textAlign="center",a.fillText(S.value.toString(),M+b/2,C-5)})}else a.strokeStyle=i,a.lineWidth=3,a.beginPath(),e.forEach((b,_)=>{const S=h+_/(e.length-1)*f,$=c-h-40-(b.value-g)/v*m;_===0?a.moveTo(S,$):a.lineTo(S,$)}),a.stroke(),e.forEach((b,_)=>{const S=h+_/(e.length-1)*f,$=c-h-40-(b.value-g)/v*m;a.beginPath(),a.arc(S,$,4,0,2*Math.PI),a.fillStyle=i,a.fill(),a.strokeStyle="#ffffff",a.lineWidth=2,a.stroke()});a.fillStyle="#475569",a.font="11px Arial",a.textAlign="center",e.forEach((b,_)=>{var C;const S=h+(n==="bar"?_*(f/e.length)+f/e.length/2:_/(e.length-1)*f),$=b.category||b.region||b.governorate||((C=b.year)==null?void 0:C.toString())||"",M=8,I=$.length>M?$.substring(0,M)+"...":$;a.fillText(I,S,c-h-20)}),a.font="bold 16px Arial",a.fillStyle="#1e293b",a.textAlign="center",a.fillText(t,l/2,25)},[e,t,r,i,n]),w.jsx("canvas",{ref:s,width:600,height:350,className:"w-full h-full"})},HDe=({data:e})=>e?w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[w.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"خريطة توزيع القرى والمياه"}),w.jsxs("div",{className:"relative bg-blue-50 rounded-lg h-64 overflow-hidden",children:[w.jsx("div",{className:"absolute inset-0 opacity-10",children:w.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("defs",{children:w.jsx("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:w.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"#3b82f6",strokeWidth:"0.5"})})}),w.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),w.jsxs("div",{className:"absolute top-2 right-2 bg-white p-2 rounded shadow-sm text-xs",children:[w.jsxs("div",{className:"flex items-center mb-1",children:[w.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-1"}),w.jsx("span",{children:"مسطحات مائية"})]}),w.jsxs("div",{className:"flex items-center mb-1",children:[w.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-1"}),w.jsx("span",{children:"قرى لديها وصول"})]}),w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-1"}),w.jsx("span",{children:"قرى تفتقر للوصول"})]})]}),w.jsxs("div",{className:"absolute top-8 left-12",children:[w.jsx("div",{className:"w-16 h-8 bg-blue-500 rounded-full opacity-70"}),w.jsx("div",{className:"text-xs text-blue-700 mt-1 text-center",children:"نهر الفرات"})]}),w.jsxs("div",{className:"absolute top-20 right-16",children:[w.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full opacity-70"}),w.jsx("div",{className:"text-xs text-blue-700 mt-1 text-center",children:"بحيرة الأسد"})]}),w.jsxs("div",{className:"absolute bottom-16 left-20",children:[w.jsx("div",{className:"w-10 h-6 bg-blue-500 rounded-full opacity-70"}),w.jsx("div",{className:"text-xs text-blue-700 mt-1 text-center",children:"بحيرة قطينة"})]}),[...Array(8)].map((t,r)=>w.jsx("div",{className:"absolute w-2 h-2 bg-green-500 rounded-full",style:{top:`${20+r*15%60}%`,left:`${15+r*20%70}%`}},`green-${r}`)),[...Array(3)].map((t,r)=>w.jsx("div",{className:"absolute w-2 h-2 bg-red-500 rounded-full",style:{top:`${40+r*25%40}%`,right:`${10+r*15%30}%`}},`red-${r}`))]}),w.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 text-center",children:[w.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[w.jsx(pa,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),w.jsx("div",{className:"text-sm font-medium text-blue-700",children:"مسطحات مائية"}),w.jsx("div",{className:"text-lg font-bold text-blue-600",children:"1,297"})]}),w.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[w.jsx(Ax,{className:"w-5 h-5 text-green-500 mx-auto mb-1"}),w.jsx("div",{className:"text-sm font-medium text-green-700",children:"قرى متصلة"}),w.jsx("div",{className:"text-lg font-bold text-green-600",children:e.villagesWithWaterAccess})]}),w.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[w.jsx(Tl,{className:"w-5 h-5 text-red-500 mx-auto mb-1"}),w.jsx("div",{className:"text-sm font-medium text-red-700",children:"قرى معزولة"}),w.jsx("div",{className:"text-lg font-bold text-red-600",children:e.villagesWithoutWaterAccess})]})]})]}):null,dd=({title:e,value:t,subtitle:r,icon:i,color:n,trend:s})=>{const a={blue:{bg:"bg-blue-50",text:"text-blue-600",icon:"text-blue-500"},green:{bg:"bg-green-50",text:"text-green-600",icon:"text-green-500"},red:{bg:"bg-red-50",text:"text-red-600",icon:"text-red-500"},yellow:{bg:"bg-yellow-50",text:"text-yellow-600",icon:"text-yellow-500"},purple:{bg:"bg-purple-50",text:"text-purple-600",icon:"text-purple-500"}}[n];return w.jsx("div",{className:`${a.bg} p-4 rounded-lg border border-opacity-20`,children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("div",{className:"text-sm text-gray-600 mb-1",children:e}),w.jsx("div",{className:`text-2xl font-bold ${a.text}`,children:typeof t=="number"?t.toLocaleString():t}),r&&w.jsx("div",{className:"text-xs text-gray-500 mt-1",children:r}),s&&w.jsxs("div",{className:"flex items-center mt-2",children:[w.jsxs("span",{className:`text-xs ${s.isPositive?"text-green-600":"text-red-600"}`,children:[s.isPositive?"↗":"↘"," ",Math.abs(s.value),"%"]}),w.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"من العام الماضي"})]})]}),w.jsx("div",{className:`${a.icon}`,children:w.jsx(i,{size:24})})]})})},WDe=({analysisData:e})=>{if(!e)return null;const r=(()=>{const o=[],a=e.villagesWithWaterAccess/e.totalVillages*100;return a<80&&o.push({type:"urgent",title:"تحسين الوصول للمياه",description:`${e.villagesWithoutWaterAccess} قرية تفتقر للوصول الكافي للمياه. يُنصح بإنشاء مشاريع مياه جديدة في هذه المناطق.`,priority:"high"}),a>75&&o.push({type:"achievement",title:"إنجاز جيد في الوصول للمياه",description:`${a.toFixed(1)}% من القرى لديها وصول للمياه، وهو معدل جيد يجب المحافظة عليه.`,priority:"low"}),o.push({type:"important",title:"تطوير البنية التحتية",description:"تحسين شبكات توزيع المياه في القرى النائية لضمان وصول أفضل وأكثر استدامة.",priority:"medium"}),o.push({type:"suggestion",title:"مراقبة جودة المياه",description:"إجراء فحوصات دورية لجودة المياه في جميع المسطحات المائية لضمان سلامة الاستخدام.",priority:"medium"}),o.push({type:"important",title:"حفظ الموارد المائية",description:"تطبيق تقنيات حديثة لحفظ المياه وتقليل الهدر في الاستخدامات المختلفة.",priority:"high"}),o})(),i=o=>{switch(o){case"urgent":return w.jsx(Yae,{className:"w-5 h-5 text-red-500"});case"achievement":return w.jsx(Kae,{className:"w-5 h-5 text-green-500"});case"important":return w.jsx(a1,{className:"w-5 h-5 text-blue-500"});case"suggestion":return w.jsx(ry,{className:"w-5 h-5 text-yellow-500"});default:return w.jsx(ry,{className:"w-5 h-5 text-gray-500"})}},n=o=>{switch(o){case"urgent":return"bg-red-50 border-red-200";case"achievement":return"bg-green-50 border-green-200";case"important":return"bg-blue-50 border-blue-200";case"suggestion":return"bg-yellow-50 border-yellow-200";default:return"bg-gray-50 border-gray-200"}},s=o=>{const a={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"},l={high:"عالية",medium:"متوسطة",low:"منخفضة"};return w.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a[o]}`,children:l[o]})};return w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[w.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[w.jsx(a1,{className:"w-5 h-5 text-blue-500 mr-2"}),"التوصيات والإجراءات المقترحة"]}),w.jsx("div",{className:"space-y-4",children:r.map((o,a)=>w.jsx("div",{className:`p-4 rounded-lg border ${n(o.type)}`,children:w.jsxs("div",{className:"flex items-start justify-between",children:[w.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[i(o.type),w.jsxs("div",{className:"flex-1",children:[w.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:o.title}),w.jsx("p",{className:"text-sm text-gray-600",children:o.description})]})]}),s(o.priority)]})},a))}),w.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[w.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"ملاحظة مهمة"}),w.jsx("p",{className:"text-sm text-blue-700",children:"هذه التوصيات مبنية على تحليل البيانات المتاحة. يُنصح بإجراء دراسات ميدانية تفصيلية قبل تنفيذ أي مشروع."})]})]})},ZDe=()=>{const[e,t]=H.useState([]),[r,i]=H.useState(null),[n,s]=H.useState(!0),[o,a]=H.useState(null),[l,c]=H.useState(null),[h,f]=H.useState(null),[m,y]=H.useState(null),[g,v]=H.useState(null),[x,b]=H.useState("villages"),[_,S]=H.useState("all");H.useEffect(()=>{(async()=>{try{const z=await L5();t(z),z.length>0&&i(z[0]),s(!1)}catch(z){console.error("Error fetching water bodies:",z),s(!1)}})()},[]),H.useEffect(()=>{(async()=>{try{const[z,Y,oe]=await Promise.all([wie(),bie(),_ie()]);f(z),y(Y),v(oe)}catch(z){console.error("Error fetching analysis data:",z)}})()},[]),H.useEffect(()=>{r&&(async()=>{try{const[z,Y]=await Promise.all([gie(r.id.toString()),vie(r.id.toString())]);a(z),c(Y)}catch(z){console.error("Error fetching water body data:",z)}})()},[r]);const $=e.filter(P=>_==="all"?!0:P.type===_),M=()=>h?w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[w.jsx(dd,{title:"إجمالي القرى",value:h.totalVillages,subtitle:"في جميع أنحاء سوريا",icon:Ax,color:"blue",trend:{value:2.3,isPositive:!0}}),w.jsx(dd,{title:"قرى لديها وصول للمياه",value:h.villagesWithWaterAccess,subtitle:`${(h.villagesWithWaterAccess/h.totalVillages*100).toFixed(1)}% من إجمالي القرى`,icon:pa,color:"green",trend:{value:5.7,isPositive:!0}}),w.jsx(dd,{title:"قرى تفتقر للمياه",value:h.villagesWithoutWaterAccess,subtitle:`${(h.villagesWithoutWaterAccess/h.totalVillages*100).toFixed(1)}% من إجمالي القرى`,icon:Tl,color:"red",trend:{value:1.2,isPositive:!1}})]}),w.jsx(HDe,{data:h}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"توزيع القرى حسب المسافة من المسطحات المائية"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm h-64",children:w.jsx(bI,{data:h.distanceDistribution,title:"المسافة من المياه",yAxisLabel:"عدد القرى",color:"#3b82f6",type:"bar"})})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"القرى حسب نوع المسطح المائي القريب"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-gray-50",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"نوع المسطح المائي"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"عدد القرى"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"النسبة المئوية"})]})}),w.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.villagesByWaterType.map((P,z)=>w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P.waterType}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.count}),w.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[P.percentage,"%"]})]},z))})]})})})]}),w.jsx(WDe,{analysisData:h})]}):w.jsx("div",{className:"text-center py-8",children:"جاري تحميل بيانات القرى..."}),I=()=>m?w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"توزيع المسطحات المائية حسب المحافظات"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm h-64",children:w.jsx(bI,{data:m.waterBodiesByGovernorate,title:"المسطحات المائية",yAxisLabel:"العدد",color:"#10b981",type:"bar"})})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"كثافة المسطحات المائية (لكل 1000 كم²)"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.waterDensityByRegion.map((P,z)=>w.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[w.jsx("div",{className:"text-sm text-gray-500",children:P.region}),w.jsx("div",{className:"text-lg font-semibold",children:P.density}),w.jsx("div",{className:"text-xs text-gray-400",children:"مسطح مائي لكل 1000 كم²"})]},z))})})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"أكبر المسطحات المائية في كل محافظة"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-gray-50",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المحافظة"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"أكبر مسطح مائي"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"النوع"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المساحة"})]})}),w.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.largestWaterBodiesByGovernorate.map((P,z)=>w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P.governorate}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.waterBodyName}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.type}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.area})]},z))})]})})})]})]}):w.jsx("div",{className:"text-center py-8",children:"جاري تحميل البيانات الإقليمية..."}),C=()=>g?w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[w.jsx(dd,{title:"وصول ممتاز",value:g.accessibilityLevels.excellent,subtitle:"أقل من 1 كم",icon:pa,color:"green"}),w.jsx(dd,{title:"وصول جيد",value:g.accessibilityLevels.good,subtitle:"1-3 كم",icon:Tl,color:"blue"}),w.jsx(dd,{title:"وصول متوسط",value:g.accessibilityLevels.moderate,subtitle:"3-5 كم",icon:cle,color:"yellow"}),w.jsx(dd,{title:"وصول ضعيف",value:g.accessibilityLevels.poor,subtitle:"أكثر من 5 كم",icon:o1,color:"red"})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"متوسط المسافة للمياه حسب المنطقة"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm h-64",children:w.jsx(bI,{data:g.averageDistanceByRegion,title:"متوسط المسافة",yAxisLabel:"المسافة (كم)",color:"#f59e0b",type:"bar"})})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"القرى الأكثر بُعداً عن المياه"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-gray-50",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"اسم القرية"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المنطقة"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المسافة للمياه"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"أقرب مسطح مائي"})]})}),w.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.mostIsolatedVillages.map((P,z)=>w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P.name}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.region}),w.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[P.distance," كم"]}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.nearestWaterBody})]},z))})]})})})]})]}):w.jsx("div",{className:"text-center py-8",children:"جاري تحميل بيانات إمكانية الوصول..."}),L=()=>o?w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"اتجاه التلوث عبر الزمن"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm h-64",children:w.jsx(wI,{data:o.pollutionTrend,title:"اتجاه التلوث",yAxisLabel:"مستوى التلوث",color:"#ef4444"})})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"المكونات الكيميائية"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:w.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[w.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[w.jsx("div",{className:"text-sm text-gray-500",children:"الأكسجين المذاب"}),w.jsxs("div",{className:"text-lg font-semibold",children:[o.chemicalComponents.dissolved_oxygen," mg/L"]})]}),w.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[w.jsx("div",{className:"text-sm text-gray-500",children:"الرقم الهيدروجيني"}),w.jsxs("div",{className:"text-lg font-semibold",children:[o.chemicalComponents.ph," pH"]})]}),w.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[w.jsx("div",{className:"text-sm text-gray-500",children:"النترات"}),w.jsxs("div",{className:"text-lg font-semibold",children:[o.chemicalComponents.nitrates," mg/L"]})]}),w.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[w.jsx("div",{className:"text-sm text-gray-500",children:"الفوسفات"}),w.jsxs("div",{className:"text-lg font-semibold",children:[o.chemicalComponents.phosphates," mg/L"]})]}),w.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[w.jsx("div",{className:"text-sm text-gray-500",children:"العكورة"}),w.jsxs("div",{className:"text-lg font-semibold",children:[o.chemicalComponents.turbidity," NTU"]})]})]})})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"تصنيف صلاحية الاستخدام"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-gray-50",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"نوع الاستخدام"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"التصنيف"})]})}),w.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"مياه الشرب"}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.usageRatings.drinking})]}),w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"الري الزراعي"}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.usageRatings.irrigation})]}),w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"الاستخدام الصناعي"}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.usageRatings.industrial})]}),w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"الثروة السمكية"}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.usageRatings.fishing})]}),w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"الترفيه"}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.usageRatings.recreation})]})]})]})})})]})]}):w.jsx("div",{className:"text-center py-8",children:"لا تتوفر بيانات عن جودة المياه"}),V=()=>l?w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"تغير المساحة السطحية (٪ من القيمة الأصلية)"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm h-64",children:w.jsx(wI,{data:l.surfaceAreaTrend,title:"المساحة السطحية",yAxisLabel:"النسبة المئوية (%)",color:"#3b82f6"})})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"تغير الحجم (٪ من القيمة الأصلية)"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm h-64",children:w.jsx(wI,{data:l.volumeTrend,title:"الحجم",yAxisLabel:"النسبة المئوية (%)",color:"#0ea5e9"})})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"تغيرات الحدود (٪)"}),w.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-gray-50",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الفترة"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"التغير (٪)"})]})}),w.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.boundaryChanges.periods.map((P,z)=>w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.jsxs("span",{className:l.boundaryChanges.changes[z]>=0?"text-green-600":"text-red-600",children:[l.boundaryChanges.changes[z]>=0?"+":"",l.boundaryChanges.changes[z],"%"]})})]},P))})]})})})]})]}):w.jsx("div",{className:"text-center py-8",children:"لا تتوفر بيانات إحصائية"});return w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",dir:"rtl",children:[w.jsxs("h1",{className:"text-2xl font-bold text-blue-800 mb-6 flex items-center",children:[w.jsx(pa,{className:"inline-block ml-2",size:28}),"تحليل المياه والقرى السورية"]}),h&&w.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-6 mb-6",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ملخص سريع"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.totalVillages}),w.jsx("div",{className:"text-sm text-gray-600",children:"إجمالي القرى"})]}),w.jsxs("div",{className:"text-center",children:[w.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[(h.villagesWithWaterAccess/h.totalVillages*100).toFixed(1),"%"]}),w.jsx("div",{className:"text-sm text-gray-600",children:"نسبة الوصول للمياه"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"1,297"}),w.jsx("div",{className:"text-sm text-gray-600",children:"مسطح مائي"})]}),w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"14"}),w.jsx("div",{className:"text-sm text-gray-600",children:"محافظة"})]})]})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[w.jsx("div",{className:"md:col-span-1",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[w.jsxs("div",{className:"mb-4",children:[w.jsxs("label",{htmlFor:"filter-type",className:"block text-sm font-medium text-gray-700 mb-1",children:[w.jsx(o1,{size:16,className:"inline-block ml-1"})," تصفية حسب النوع"]}),w.jsxs("select",{id:"filter-type",value:_,onChange:P=>S(P.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[w.jsx("option",{value:"all",children:"جميع الأنواع"}),w.jsx("option",{value:"نهر",children:"أنهار"}),w.jsx("option",{value:"بحيرة",children:"بحيرات"})]})]}),w.jsxs("h3",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[w.jsx(ile,{size:16,className:"inline-block ml-1"})," المسطحات المائية"]}),n?w.jsx("div",{className:"text-center py-4",children:w.jsx("span",{className:"text-gray-500",children:"جاري التحميل..."})}):$.length===0?w.jsx("div",{className:"text-center py-4",children:w.jsx("span",{className:"text-gray-500",children:"لا توجد مسطحات مائية"})}):w.jsx("div",{className:"overflow-y-auto max-h-96 mt-2",children:w.jsx("ul",{className:"space-y-1",children:$.map(P=>w.jsx("li",{children:w.jsxs("button",{onClick:()=>i(P),className:`w-full text-right px-3 py-2 rounded-md text-sm ${(r==null?void 0:r.id)===P.id?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[w.jsx("span",{className:"font-medium",children:P.name}),w.jsx("span",{className:"block text-xs text-gray-500",children:P.type})]})},P.id))})})]})}),w.jsx("div",{className:"md:col-span-3",children:r?w.jsxs(w.Fragment,{children:[w.jsx(qDe,{waterBody:r}),w.jsxs("div",{className:"bg-white rounded-lg shadow-md mt-6",children:[w.jsx("div",{className:"border-b border-gray-200",children:w.jsxs("div",{className:"flex flex-wrap",children:[w.jsxs("button",{onClick:()=>b("villages"),className:`px-4 py-2 font-medium ${x==="villages"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[w.jsx(Ax,{size:16,className:"inline-block ml-1"})," تحليل القرى"]}),w.jsxs("button",{onClick:()=>b("regional"),className:`px-4 py-2 font-medium ${x==="regional"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[w.jsx(Tl,{size:16,className:"inline-block ml-1"})," التوزيع الإقليمي"]}),w.jsxs("button",{onClick:()=>b("accessibility"),className:`px-4 py-2 font-medium ${x==="accessibility"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[w.jsx(Lx,{size:16,className:"inline-block ml-1"})," إمكانية الوصول"]}),w.jsxs("button",{onClick:()=>b("quality"),className:`px-4 py-2 font-medium ${x==="quality"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[w.jsx(pa,{size:16,className:"inline-block ml-1"})," جودة المياه"]}),w.jsxs("button",{onClick:()=>b("statistics"),className:`px-4 py-2 font-medium ${x==="statistics"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[w.jsx(y3,{size:16,className:"inline-block ml-1"})," إحصائيات"]})]})}),w.jsxs("div",{className:"p-4",children:[x==="villages"&&M(),x==="regional"&&I(),x==="accessibility"&&C(),x==="quality"&&L(),x==="statistics"&&V()]})]})]}):w.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:w.jsx("p",{className:"text-gray-500",children:"يرجى اختيار مسطح مائي من القائمة"})})})]})]})},JDe=()=>w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",dir:"rtl",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 md:p-8",children:[w.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-blue-800 mb-6",children:"حول نظام المعلومات الجغرافية السوري"}),w.jsxs("div",{className:"space-y-8",children:[w.jsxs("section",{children:[w.jsxs("h2",{className:"text-xl font-semibold text-blue-700 mb-3 flex items-center",children:[w.jsx(g3,{className:"inline-block ml-2",size:24}),"نبذة عن النظام"]}),w.jsx("p",{className:"text-gray-700 leading-relaxed",children:"يهدف نظام المعلومات الجغرافية السوري إلى توفير منصة متكاملة لعرض وتحليل البيانات الجغرافية للجمهورية العربية السورية، مع التركيز بشكل خاص على المسطحات المائية والتقسيمات الإدارية. يتيح النظام للمستخدمين استكشاف الخرائط التفاعلية، وإجراء عمليات البحث المتقدمة، وتحليل البيانات المتعلقة بالمسطحات المائية لدعم عمليات التخطيط واتخاذ القرار."})]}),w.jsxs("section",{children:[w.jsxs("h2",{className:"text-xl font-semibold text-blue-700 mb-3 flex items-center",children:[w.jsx(Xae,{className:"inline-block ml-2",size:24}),"مصادر البيانات"]}),w.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"يعتمد النظام على مجموعة من الطبقات الجغرافية المتنوعة:"}),w.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[w.jsx("li",{children:"طبقة المحافظات السورية (Polygon)"}),w.jsx("li",{children:"طبقة المناطق السورية (Polygon)"}),w.jsx("li",{children:"طبقة النواحي السورية (Polygon)"}),w.jsx("li",{children:"طبقة القرى السورية (Polygon)"}),w.jsx("li",{children:"طبقة المجاري المائية (Line)"}),w.jsx("li",{children:"طبقة المسطحات المائية (Polygon)"})]}),w.jsx("p",{className:"text-gray-700 leading-relaxed mt-4",children:"تم استخلاص هذه البيانات من مصادر موثوقة وتم معالجتها وتنظيمها لضمان دقتها وسهولة استخدامها."})]}),w.jsxs("section",{children:[w.jsxs("h2",{className:"text-xl font-semibold text-blue-700 mb-3 flex items-center",children:[w.jsx(Tl,{className:"inline-block ml-2",size:24}),"ميزات النظام"]}),w.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[w.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[w.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"استعراض الخرائط التفاعلية"}),w.jsx("p",{className:"text-gray-700",children:"استكشاف الخرائط التفاعلية للمناطق السورية والمسطحات المائية مع إمكانية التكبير والتصغير والتحرك بحرية."})]}),w.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[w.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"البحث المتقدم"}),w.jsx("p",{className:"text-gray-700",children:"إمكانية البحث عن المواقع الجغرافية والمسطحات المائية باستخدام أسمائها أو خصائصها."})]}),w.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[w.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"تحليل المسطحات المائية"}),w.jsx("p",{className:"text-gray-700",children:"إجراء تحليلات متقدمة على المسطحات المائية لدراسة خصائصها وتغيراتها عبر الزمن."})]}),w.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[w.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"التحكم بالطبقات"}),w.jsx("p",{className:"text-gray-700",children:"إمكانية إظهار وإخفاء الطبقات المختلفة حسب احتياجات المستخدم لتسهيل عملية التحليل والاستكشاف."})]})]})]})]})]})});function YDe(){return w.jsx(zae,{children:w.jsx(dle,{children:w.jsxs(Rae,{children:[w.jsx(C_,{path:"/",element:w.jsx(GDe,{})}),w.jsx(C_,{path:"/water-analysis",element:w.jsx(ZDe,{})}),w.jsx(C_,{path:"/about",element:w.jsx(JDe,{})})]})})})}LB(document.getElementById("root")).render(w.jsx(H.StrictMode,{children:w.jsx(YDe,{})}));export{O as $,FE as A,PP as B,Ai as C,gxe as D,xOe as E,vn as F,Ei as G,$$e as H,mr as I,u as J,d as K,s6e as L,G as M,Uc as N,vye as O,ft as P,zy as Q,vN as R,mv as S,Jye as T,kW as U,uge as V,T as W,_Be as X,bBe as Y,es as Z,B as _,iD as a,T7e as a$,Ume as a0,Vme as a1,W as a2,ay as a3,n7e as a4,Ixe as a5,ie as a6,kc as a7,eGe as a8,dVe as a9,Zye as aA,gW as aB,x$e as aC,SZ as aD,Dh as aE,MN as aF,xZ as aG,Bj as aH,KVe as aI,Z6e as aJ,sw as aK,F as aL,hp as aM,wle as aN,je as aO,Be as aP,xme as aQ,ve as aR,Er as aS,Ie as aT,$w as aU,sp as aV,A_e as aW,L_e as aX,Fl as aY,E7e as aZ,c7e as a_,Py as aa,Dr as ab,Kh as ac,wa as ad,Yi as ae,lRe as af,cRe as ag,dRe as ah,gRe as ai,xRe as aj,nte as ak,rte as al,ite as am,_Re as an,MRe as ao,IRe as ap,PQ as aq,c$e as ar,k$e as as,vA as at,K$ as au,YSe as av,_ye as aw,xye as ax,Sye as ay,Z$ as az,N as b,LJ as b$,GK as b0,qK as b1,C7e as b2,_o as b3,Ee as b4,u8 as b5,PS as b6,JUe as b7,Ke as b8,_Z as b9,G6 as bA,oG as bB,_y as bC,gQ as bD,Wi as bE,Ji as bF,zb as bG,u8e as bH,eQ as bI,Uge as bJ,Th as bK,QV as bL,KV as bM,et as bN,Fk as bO,FFe as bP,Bee as bQ,nw as bR,dbe as bS,s4e as bT,np as bU,Xje as bV,_me as bW,Eo as bX,ube as bY,gg as bZ,n4e as b_,fUe as ba,CTe as bb,q6 as bc,W6 as bd,Z6 as be,H6 as bf,km as bg,gy as bh,fS as bi,Ft as bj,Ls as bk,xO as bl,Tt as bm,hw as bn,Ma as bo,or as bp,w8e as bq,_8e as br,b8e as bs,mw as bt,To as bu,Ps as bv,Cn as bw,KUe as bx,sa as by,J6 as bz,_Oe as c,Iw as c$,$a as c0,J as c1,$ve as c2,xD as c3,Ri as c4,CZ as c5,WB as c6,oy as c7,dje as c8,tE as c9,ee as cA,Ye as cB,vp as cC,tOe as cD,Al as cE,Ln as cF,Et as cG,Hc as cH,Lc as cI,Wc as cJ,Ds as cK,Sa as cL,G3 as cM,Pt as cN,B3 as cO,H3 as cP,rS as cQ,DZ as cR,tK as cS,me as cT,R1 as cU,Rr as cV,OS as cW,e8 as cX,It as cY,Q2e as cZ,D_ as c_,bt as ca,gw as cb,Se as cc,wE as cd,be as ce,Fb as cf,Pge as cg,Rje as ch,Nje as ci,Oje as cj,Pje as ck,Dje as cl,Fje as cm,X3 as cn,Iv as co,fTe as cp,Nze as cq,Pe as cr,Dze as cs,YUe as ct,AY as cu,Rc as cv,En as cw,aVe as cx,lE as cy,Nt as cz,Ny as d,Gee as d$,yL as d0,d8e as d1,OVe as d2,e9e as d3,Dl as d4,Iq as d5,_1 as d6,fn as d7,ei as d8,Oh as d9,jPe as dA,n9e as dB,An as dC,LGe as dD,zVe as dE,r9e as dF,ohe as dG,zGe as dH,_C as dI,UGe as dJ,cw as dK,Ns as dL,QVe as dM,a8e as dN,a6e as dO,KB as dP,lhe as dQ,JO as dR,YO as dS,uhe as dT,D$ as dU,F$ as dV,Ew as dW,$1 as dX,ON as dY,o6e as dZ,zq as d_,v3 as da,iFe as db,vTe as dc,GB as dd,LX as de,Ete as df,fLe as dg,Aj as dh,eE as di,ce as dj,z9e as dk,vxe as dl,$n as dm,mFe as dn,E5e as dp,qt as dq,Tr as dr,FPe as ds,q1 as dt,Fv as du,hre as dv,Iqe as dw,qw as dx,Q as dy,kPe as dz,D8 as e,$te as e$,E_e as e0,Bwe as e1,cVe as e2,oqe as e3,_a as e4,lqe as e5,aqe as e6,ww as e7,IN as e8,Cwe as e9,kle as eA,CN as eB,mje as eC,QSe as eD,RQ as eE,IQ as eF,T$e as eG,d6e as eH,Gc as eI,y$e as eJ,Vye as eK,pS as eL,E$ as eM,T$ as eN,He as eO,XBe as eP,pw as eQ,sje as eR,ade as eS,dV as eT,Fq as eU,SBe as eV,zje as eW,IE as eX,PFe as eY,SO as eZ,qc as e_,IJ as ea,rbe as eb,pVe as ec,CJ as ed,BN as ee,hVe as ef,Wn as eg,p6e as eh,kq as ei,the as ej,WO as ek,$s as el,j$ as em,CQ as en,kQ as eo,NQ as ep,KSe as eq,OQ as er,gO as es,vO as et,Rj as eu,Os as ev,wFe as ew,Jce as ex,sy as ey,DO as ez,I7e as f,H8e as f$,vte as f0,xte as f1,OP as f2,YX as f3,WX as f4,HX as f5,ci as f6,en as f7,Ow as f8,Ci as f9,Ite as fA,gs as fB,bqe as fC,pBe as fD,Aq as fE,VOe as fF,v1 as fG,Xe as fH,Gy as fI,Rte as fJ,Q6e as fK,hve as fL,l8e as fM,e0e as fN,Xr as fO,YF as fP,Vu as fQ,p1 as fR,Yx as fS,XDe as fT,l1 as fU,cy as fV,jh as fW,dw as fX,Ple as fY,vc as fZ,EFe as f_,Ul as fa,bCe as fb,AX as fc,wCe as fd,i$e as fe,n$e as ff,M$e as fg,ZX as fh,VG as fi,M$ as fj,VO as fk,yw as fl,f1 as fm,Xu as fn,Yn as fo,ude as fp,O$ as fq,cde as fr,yte as fs,aje as ft,fje as fu,xa as fv,Te as fw,Nx as fx,Ec as fy,te as fz,$7e as g,NGe as g$,Mw as g0,W8e as g1,Vl as g2,lwe as g3,tm as g4,Z8e as g5,Ph as g6,Uje as g7,eFe as g8,tFe as g9,wBe as gA,sLe as gB,vBe as gC,nLe as gD,EG as gE,iGe as gF,vo as gG,ske as gH,RZ as gI,em as gJ,V$ as gK,F_ as gL,AC as gM,h8e as gN,fp as gO,R7e as gP,N7e as gQ,bA as gR,NS as gS,jp as gT,ZB as gU,YB as gV,QB as gW,aFe as gX,_Fe as gY,FUe as gZ,kGe as g_,Cje as ga,Lje as gb,L1 as gc,HY as gd,Zc as ge,k9 as gf,P9 as gg,Qt as gh,F6e as gi,fy as gj,NZ as gk,uP as gl,fBe as gm,_$e as gn,pJ as go,$G as gp,uue as gq,jqe as gr,gle as gs,gve as gt,e2 as gu,jje as gv,hje as gw,va as gx,qAe as gy,mCe as gz,ur as h,Mn as h$,OGe as h0,IGe as h1,X8e as h2,vPe as h3,pGe as h4,fGe as h5,u5 as h6,Txe as h7,j6e as h8,oUe as h9,h6e as hA,nhe as hB,q0e as hC,D as hD,Fye as hE,G0e as hF,X$ as hG,rFe as hH,O_ as hI,dFe as hJ,v$e as hK,a$e as hL,_xe as hM,nS as hN,LVe as hO,CVe as hP,Pbe as hQ,nZ as hR,e5 as hS,Sve as hT,Yh as hU,eNe as hV,Nge as hW,Rge as hX,Mge as hY,VF as hZ,cm as h_,Vk as ha,l6e as hb,vUe as hc,JVe as hd,DVe as he,K6e as hf,QT as hg,ow as hh,u1 as hi,uLe as hj,Ay as hk,uw as hl,Yr as hm,dSe as hn,f6e as ho,Qxe as hp,g$e as hq,Hje as hr,qD as hs,jq as ht,Vq as hu,Xt as hv,AW as hw,l$e as hx,RW as hy,Rye as hz,a7e as i,uo as i$,Y$ as i0,$le as i1,KF as i2,PX as i3,gte as i4,VX as i5,bte as i6,Cte as i7,$S as i8,kte as i9,E6e as iA,IS as iB,b6e as iC,jme as iD,wqe as iE,Fme as iF,g6e as iG,LIe as iH,b7e as iI,DIe as iJ,_7e as iK,AIe as iL,jIe as iM,cIe as iN,s7e as iO,R0 as iP,w7e as iQ,g7e as iR,BK as iS,PTe as iT,xA as iU,K6 as iV,PUe as iW,Q6 as iX,Es as iY,eK as iZ,ul as i_,zN as ia,Qy as ib,K2 as ic,Uw as id,zw as ie,Ky as ig,hte as ih,qX as ii,Lte as ij,Ate as ik,xm as il,ede as im,ga as io,Co as ip,U1 as iq,r5 as ir,wLe as is,vLe as it,gLe as iu,fhe as iv,xhe as iw,Yq as ix,L7e as iy,NBe as iz,O7e as j,_ve as j$,$2 as j0,U9e as j1,fQ as j2,fP as j3,cA as j4,iSe as j5,mQ as j6,f8 as j7,B6 as j8,td as j9,AZ as jA,jE as jB,hhe as jC,gye as jD,MS as jE,r$e as jF,LQ as jG,mS as jH,xp as jI,h$e as jJ,qr as jK,wte as jL,Vue as jM,GS as jN,KX as jO,fCe as jP,$ke as jQ,lLe as jR,IAe as jS,Cee as jT,FAe as jU,nq as jV,cq as jW,fde as jX,UO as jY,yde as jZ,gde as j_,Jr as ja,xFe as jb,Tw as jc,vue as jd,Xn as je,XFe as jf,iy as jg,ode as jh,kO as ji,J6e as jj,Xxe as jk,Hr as jl,tSe as jm,pQ as jn,KDe as jo,_A as jp,Lv as jq,lQ as jr,bN as js,bye as jt,t$e as ju,A$e as jv,R$e as jw,uSe as jx,$Re as jy,she as jz,x7e as k,fNe as k$,hX as k0,qGe as k1,Pee as k2,TO as k3,Ca as k4,df as k5,EAe as k6,tqe as k7,eke as k8,yOe as k9,RAe as kA,OAe as kB,NAe as kC,PAe as kD,DAe as kE,Mte as kF,nGe as kG,Rle as kH,qi as kI,PZ as kJ,Z8 as kK,yje as kL,Ice as kM,A7e as kN,pFe as kO,fFe as kP,hFe as kQ,pp as kR,Wce as kS,P$ as kT,Yo as kU,y6e as kV,U6e as kW,iZ as kX,h5 as kY,QS as kZ,Mr as k_,tke as ka,_qe as kb,Ry as kc,Gl as kd,XP as ke,Uee as kf,Fqe as kg,Dqe as kh,tre as ki,pI as kj,jOe as kk,jAe as kl,BAe as km,yLe as kn,jt as ko,zE as kp,yee as kq,ZP as kr,qS as ks,ZAe as kt,TAe as ku,MAe as kv,LAe as kw,AAe as kx,UAe as ky,kAe as kz,WGe as l,ZMe as l$,po as l0,Hy as l1,k as l2,Qr as l3,xv as l4,FNe as l5,kNe as l6,Ta as l7,RNe as l8,xNe as l9,QN as lA,PVe as lB,RVe as lC,ISe as lD,CSe as lE,Zz as lF,K2e as lG,AQ as lH,Y6 as lI,DUe as lJ,Ghe as lK,Qhe as lL,bw as lM,Wje as lN,GNe as lO,Dz as lP,op as lQ,nSe as lR,_D as lS,Wze as lT,KS as lU,L_ as lV,Yde as lW,n8e as lX,EO as lY,qFe as lZ,GFe as l_,SNe as la,t0e as lb,r0e as lc,Oc as ld,U6 as le,Zze as lf,Jze as lg,eUe as lh,tUe as li,Yze as lj,Qze as lk,Kze as ll,Xze as lm,XO as ln,Whe as lo,E as lp,Fx as lq,tye as lr,due as ls,jFe as lt,rGe as lu,tGe as lv,Lee as lw,kee as lx,mde as ly,Tqe as lz,M7e as m,lUe as m$,$ue as m0,Sue as m1,e8e as m2,FRe as m3,oFe as m4,QUe as m5,qe as m6,Ije as m7,iw as m8,w1 as m9,kz as mA,hE as mB,FJ as mC,jJ as mD,Hi as mE,ENe as mF,Vte as mG,mNe as mH,Lz as mI,qBe as mJ,k7e as mK,OTe as mL,wc as mM,tMe as mN,iMe as mO,nMe as mP,Az as mQ,vw as mR,z6 as mS,Wge as mT,rSe as mU,Ao as mV,xN as mW,SN as mX,RS as mY,aZ as mZ,aUe as m_,F7e as ma,iqe as mb,VMe as mc,XB as md,oje as me,kce as mf,R$ as mg,pje as mh,ebe as mi,tbe as mj,wZ as mk,Hge as ml,q6e as mm,YOe as mn,ZJ as mo,SQ as mp,gje as mq,Lle as mr,q8e as ms,_E as mt,N6e as mu,O6e as mv,qY as mw,BY as mx,I2e as my,L2e as mz,pde as n,kVe as n$,uUe as n0,ITe as n1,DBe as n2,FBe as n3,PBe as n4,_be as n5,B1 as n6,zAe as n7,eVe as n8,YAe as n9,K8e as nA,JB as nB,hq as nC,FO as nD,nje as nE,Uq as nF,OD as nG,gq as nH,kMe as nI,yp as nJ,xo as nK,Q8e as nL,_we as nM,m6e as nN,ic as nO,z6e as nP,V6e as nQ,vve as nR,PRe as nS,zRe as nT,LW as nU,Dye as nV,Nye as nW,Pye as nX,Cw as nY,Lw as nZ,Aw as n_,KBe as na,QBe as nb,_c as nc,pz as nd,b1 as ne,kOe as nf,zye as ng,kye as nh,Oye as ni,$l as nj,rP as nk,nY as nl,s_e as nm,By as nn,Yg as no,NSe as np,wUe as nq,QY as nr,LS as ns,by as nt,da as nu,oP as nv,lA as nw,VY as nx,Pw as ny,YFe as nz,i6e as o,Yy as o$,AVe as o0,NO as o1,Yye as o2,Wye as o3,u$e as o4,Hye as o5,Vbe as o6,eSe as o7,N2e as o8,Dw as o9,n8 as oA,i8 as oB,sSe as oC,Cqe as oD,Sp as oE,LPe as oF,Eg as oG,Gi as oH,Kye as oI,cge as oJ,Rm as oK,F2e as oL,tte as oM,rge as oN,_6e as oO,DRe as oP,VRe as oQ,sFe as oR,yle as oS,nFe as oT,VVe as oU,jVe as oV,jUe as oW,EBe as oX,Qde as oY,UJ as oZ,TBe as o_,u6e as oa,lje as ob,SG as oc,V1e as od,Lqe as oe,X2e as of,QP as og,kLe as oh,Sqe as oi,Zje as oj,Mje as ok,VN as ol,Fee as om,Ic as on,GCe as oo,rLe as op,iLe as oq,qCe as or,dLe as os,iOe as ot,vOe as ou,Gp as ov,X6 as ow,AMe as ox,NUe as oy,NTe as oz,_te as p,J8e as p$,GP as p0,MLe as p1,ILe as p2,Jy as p3,iee as p4,g5e as p5,HLe as p6,v5e as p7,cee as p8,JS as p9,As as pA,EE as pB,oQ as pC,uQ as pD,Rxe as pE,B9e as pF,Uxe as pG,G9e as pH,Mye as pI,M6e as pJ,P2e as pK,exe as pL,_N as pM,I6e as pN,VM as pO,CS as pP,E$e as pQ,hge as pR,xBe as pS,UE as pT,Rw as pU,wp as pV,n6e as pW,SFe as pX,t8e as pY,t9e as pZ,Bc as p_,eee as pa,Nv as pb,k1 as pc,SSe as pd,mAe as pe,fAe as pf,nke as pg,Gqe as ph,qqe as pi,Eh as pj,gE as pk,Bqe as pl,hN as pm,DFe as pn,Uqe as po,zqe as pp,SY as pq,uFe as pr,aQ as ps,p9e as pt,f9e as pu,m9e as pv,sUe as pw,c8 as px,Gze as py,L3e as pz,uje as q,zze as q$,Cke as q0,ba as q1,ip as q2,IUe as q3,KQ as q4,D6e as q5,YS as q6,AGe as q7,LUe as q8,CUe as q9,B6e as qA,Gge as qB,Vje as qC,C1 as qD,kG as qE,v6 as qF,E2e as qG,T2e as qH,tC as qI,J3 as qJ,e6e as qK,Bje as qL,im as qM,kY as qN,bue as qO,bhe as qP,Aje as qQ,kje as qR,wue as qS,oE as qT,zMe as qU,w6e as qV,iS as qW,ZUe as qX,Nr as qY,RE as qZ,Oz as q_,Uze as qa,Bze as qb,XV as qc,xE as qd,Fw as qe,Kq as qf,J2e as qg,j2e as qh,V2e as qi,G6e as qj,rxe as qk,fh as ql,m8 as qm,oK as qn,$Ue as qo,EUe as qp,TUe as qq,MUe as qr,dUe as qs,pUe as qt,hUe as qu,rMe as qv,_he as qw,Il as qx,pxe as qy,aP as qz,bOe as r,bGe as r$,VGe as r0,t9 as r1,cLe as r2,QCe as r3,WBe as r4,uVe as r5,rVe as r6,sVe as r7,iVe as r8,oVe as r9,yGe as rA,Kke as rB,RGe as rC,CGe as rD,Y6e as rE,DGe as rF,r8e as rG,EGe as rH,$Ge as rI,TGe as rJ,MGe as rK,nz as rL,sz as rM,oz as rN,xGe as rO,SGe as rP,cUe as rQ,K9 as rR,d9 as rS,i9 as rT,n9 as rU,s9 as rV,$9 as rW,Q9 as rX,ez as rY,h9 as rZ,pE as r_,nVe as ra,lVe as rb,Qi as rc,nwe as rd,G8e as re,WUe as rf,ZBe as rg,oD as rh,tVe as ri,b9 as rj,m9 as rk,jge as rl,y9 as rm,R9 as rn,g9 as ro,c8e as rp,S9 as rq,z9 as rr,U9 as rs,B9 as rt,n0e as ru,H6e as rv,zge as rw,G9 as rx,W6e as ry,Yxe as rz,$$ as s,TW as s$,_Ge as s0,bUe as s1,PGe as s2,jk as s3,gGe as s4,hGe as s5,Hee as s6,z1 as s7,wGe as s8,eRe as s9,Che as sA,Ihe as sB,Gje as sC,Gue as sD,rU as sE,m4e as sF,pbe as sG,I8e as sH,M8e as sI,tx as sJ,qN as sK,ybe as sL,SK as sM,mbe as sN,E1 as sO,M1 as sP,wy as sQ,yFe as sR,vd as sS,pqe as sT,k3e as sU,Vqe as sV,hqe as sW,pNe as sX,o8e as sY,L9e as sZ,GY as s_,vGe as sa,gUe as sb,Xke as sc,SE as sd,rRe as se,yUe as sf,mGe as sg,BTe as sh,mUe as si,h8 as sj,qze as sk,Hze as sl,xUe as sm,_Ue as sn,AUe as so,kUe as sp,rUe as sq,RUe as sr,OUe as ss,MTe as st,ATe as su,_K as sv,ny as sw,SUe as sx,cje as sy,oSe as sz,zOe as t,k2e as t$,CG as t0,tge as t1,Z0e as t2,G2e as t3,m2e as t4,D9e as t5,qLe as t6,Qbe as t7,WVe as t8,ZVe as t9,JNe as tA,UF as tB,f8e as tC,STe as tD,Bq as tE,s8e as tF,yBe as tG,C0e as tH,zBe as tI,VBe as tJ,V6 as tK,s$e as tL,BVe as tM,Cye as tN,NVe as tO,s5e as tP,dGe as tQ,Xte as tR,sm as tS,Hbe as tT,Fbe as tU,_ee as tV,Ire as tW,Cre as tX,bAe as tY,W2e as tZ,c6e as t_,XVe as ta,GVe as tb,UVe as tc,gFe as td,u9e as te,l9e as tf,cFe as tg,Hde as th,FVe as ti,X6e as tj,YVe as tk,Sy as tl,J1e as tm,OSe as tn,xQ as to,JFe as tp,n_ as tq,gj as tr,fE as ts,jBe as tt,Ac as tu,Yte as tv,Mqe as tw,Dk as tx,Eqe as ty,$qe as tz,HGe as u,Dbe as u0,VFe as u1,BUe as u2,GUe as u3,qUe as u4,XTe as u5,sK as u6,iUe as u7,nUe as u8,YTe as u9,jye as uA,Nqe as uB,Aqe as uC,BE as uD,Xj as uE,Pqe as uF,Qye as uG,x8e as uH,$8e as uI,XUe as uJ,_p as uK,HBe as uL,sqe as uM,dqe as uN,HUe as ua,Vze as ub,awe as uc,EW as ud,cSe as ue,bde as uf,dge as ug,L$e as uh,eN as ui,kqe as uj,oR as uk,iN as ul,$6e as um,Rqe as un,Oqe as uo,qVe as up,S6e as uq,t6 as ur,x6e as us,i8e as ut,e6 as uu,kN as uv,cG as uw,$Fe as ux,HVe as uy,Bye as uz,Re as v,SA as w,u7e as x,Ht as y,ike as z};
